/* empty css          *//* empty css                 *//* empty css               */import{ak as V,ai as L,a0 as c,a3 as U,o as i,c as l,d as o,h as r,w as d,l as D,t as x,I as f,a as m,b as M,g as h,K as j,P as O,L as A,u as I,M as K,R as W,S as G,x as H,y as Q,N as Y,_ as q,Q as z,W as J,Y as X,V as Z}from"./toastservice.esm21342.js";import{c as ee}from"./pinia21342.js";import"./blockui.esm21342.js";import{a as te}from"./datatable.esm21342.js";import{D as oe,s as se}from"./dialogservice.esm21342.js";import{C as ae}from"./confirmationservice.esm21342.js";import{s as ne}from"./progressspinner.esm21342.js";import{s as ie}from"./progressbar.esm21342.js";import{s as le}from"./row.esm21342.js";import{s as ce}from"./calendar.esm21342.js";import{s as re}from"./textarea.esm21342.js";import{s as de}from"./chips.esm21342.js";import{s as me}from"./multiselect.esm21342.js";import{s as ue}from"./checkbox.esm21342.js";import{a as P}from"./index21342.js";import{U as pe}from"./EmployeeDocumentsManagerService21342.js";import"./Service21342.js";import"./ProfilePagesStore21342.js";const _e={class:"card p-3"},fe=o("h2",{class:"font-semibold text-2xl my-4 mx-3"},"Employee Documents",-1),he={class:"w-full"},ve={key:0},ge=o("p",{class:"text-red-600 font-semibold fs-5"},"Pending",-1),ye=[ge],be={key:1},we=o("p",{class:"text-red-600 font-semibold fs-5"},"Approved",-1),ke=[we],xe={key:2},De=o("p",{class:"text-red-600 font-semibold fs-5"},"Rejected",-1),Ce=[De],Se={key:3},$e=o("p",{class:"text-green-600 font-semibold"},"-",-1),Pe=[$e],Be={key:0},Ee={key:0},Te=["onClick"],Fe=o("label",{for:"file",class:"cursor-pointer"},[o("i",{class:"pi pi-upload"}),D(" Upload file")],-1),Re=[Fe],Ne={key:0,class:""},Ve={key:1},Le={key:1},Ue=["onClick"],Me=o("label",{for:"file",class:"cursor-pointer"},[o("i",{class:"pi pi-upload"}),D(" Upload file")],-1),je=[Me],Oe={key:0,class:""},Ae=["disabled"],Ie={class:"w-full h-full d-flex justify-content-center"},Ke=["src"],We=o("h5",{style:{"text-align":"center"}},"Please wait...",-1),Ge={__name:"EmployeeDocumentsManager",setup(Qe){V(()=>{a.fetch_EmployeeDocument(),console.log(" ",B.value)});const a=pe();L();const y=c(!1),B=c({}),b=c();c();const w=c(),k=U({name:""}),p=c(),v=new FormData,g=c(),E=n=>{y.value=!0,a.loading=!0,P.post("/view-profile-private-file",{user_code:a.getEmployeeDetails.current_user_code,document_name:n.document_name}).then(t=>{b.value=t.data.data,console.log("data sent",b.value)}).finally(()=>{a.loading=!1})},C=n=>{p.value=n},S=n=>{console.log(p),n.target.files&&n.target.files[0]&&(w.value=n.target.files[0],v.append(`${p.value}`,w.value),k.name=w.value,console.log(v),Object.keys(v)[0])};async function T(){if(g.value=="Failure")Swal.fire({title:g.value="Failure",text:"Please upload all mandatory documents",icon:"error",showCancelButton:!1}).then(n=>{});else{a.loading=!0;let n="/vmt-documents-route/";P.post(n,v).then(t=>{g.value=t.data.status,console.log(g.value),console.log("Photo not send"),t.data.status=="Success"?Swal.fire({title:t.data.status="Success",text:t.data.message,icon:"success",showCancelButton:!1}).then(_=>{window.location.reload()}):t.data.status=="Failure"&&Swal.fire({title:t.data.status="Failure",text:t.data.message,icon:"error",showCancelButton:!1}).then(_=>{window.location.reload()})}).finally(()=>{a.fetch_EmployeeDocument(),a.loading=!1})}}return(n,t)=>{const _=h("Column"),F=h("Button"),R=h("DataTable"),$=h("Dialog"),N=h("ProgressSpinner");return i(),l("div",_e,[fe,o("div",he,[r(R,{ref:"dt",value:f(a).getEmployeeDoc,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:d(()=>[r(_,{header:"File Name",field:"document_name",style:{"min-width":"8rem"}},{default:d(()=>[D(x(f(a).getEmployeeDoc.document_name),1)]),_:1}),r(_,{field:"status",header:"status",style:{"min-width":"12rem"}},{body:d(s=>[s.data.status==="Pending"?(i(),l("div",ve,ye)):m("",!0),s.data.status==="Approved"?(i(),l("div",be,ke)):m("",!0),s.data.status==="Rejected"?(i(),l("div",xe,Ce)):m("",!0),s.data.status===null?(i(),l("div",Se,Pe)):m("",!0)]),_:1}),r(_,{field:"",header:"View ",style:{"min-width":"12rem"}},{body:d(s=>[s.data.doc_id?(i(),l("div",Be,[s.data.status=="Rejected"?(i(),l("div",Ee,[o("input",{type:"file",name:"",id:"file",hidden:"",onChange:t[0]||(t[0]=u=>S(u))},null,32),o("button",{class:"btn btn-success",onClick:u=>C(s.data.document_name)},Re,8,Te),s.data.document_name==p.value?(i(),l("p",Ne,x(k.name.name),1)):m("",!0)])):(i(),l("div",Ve,[r(F,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:u=>E(s.data),style:{height:"2em"}},null,8,["onClick"])]))])):(i(),l("div",Le,[o("input",{type:"file",name:"",id:"file",hidden:"",onChange:t[1]||(t[1]=u=>S(u))},null,32),o("button",{class:"btn btn-success",onClick:u=>C(s.data.document_name)},je,8,Ue),s.data.document_name==p.value?(i(),l("p",Oe,x(k.name.name),1)):m("",!0)]))]),_:1})]),_:1},8,["value"]),o("button",{severity:"warn",type:"submit",data:"row-6",next:"row-6",name:"submit_form",id:"msform",class:"text-center btn btn-orange processOnboardForm float-end text-light mr-5 mt-5",value:"Submit",disabled:n.fileUploadValidation,onClick:T}," Submit ",8,Ae),f(a).loading==!1?(i(),M($,{key:0,visible:y.value,"onUpdate:visible":t[2]||(t[2]=s=>y.value=s),modal:"",header:"Documents",style:{width:"40vw"}},{default:d(()=>[o("div",Ie,[o("img",{src:`data:image/png;base64,${b.value}`,class:"",alt:"File not found",style:{"object-fit":"cover","max-width":"400px",", min-height":"350px",height:"300px"}},null,8,Ke)])]),_:1},8,["visible"])):m("",!0),r($,{header:"Header",visible:f(a).loading,"onUpdate:visible":t[3]||(t[3]=s=>f(a).loading=s),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:d(()=>[r(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:d(()=>[We]),_:1},8,["visible"])])])}}},e=j(Ge),He=ee();e.use(O,{ripple:!0});e.use(ae);e.use(A);e.use(oe);e.use(He);e.directive("tooltip",I);e.directive("badge",K);e.directive("ripple",W);e.directive("styleclass",G);e.directive("focustrap",H);e.component("Button",Q);e.component("DataTable",te);e.component("Column",Y);e.component("ColumnGroup",se);e.component("Row",le);e.component("Toast",q);e.component("ConfirmDialog",z);e.component("Dropdown",J);e.component("InputText",X);e.component("Dialog",Z);e.component("ProgressSpinner",ne);e.component("Calendar",ce);e.component("Textarea",re);e.component("Chips",de);e.component("MultiSelect",me);e.component("ProgressBar",ie);e.component("Checkbox",ue);e.mount("#EmployeeDocumentManager");
