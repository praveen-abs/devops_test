import{d as B}from"./dayjs.min-2f06af28.js";import{m as Y,r as m,a7 as d,o as J,a as f,c as p,d as k,e as l,k as t,i as n,f as y,n as C,u as x,t as b,h as T,g as N,a8 as F,q as Q,N as z,F as W}from"./app-97a3f32c.js";import{a as E}from"./index-362795f3.js";import{S as O}from"./Service-339664db.js";/* empty css                                                                       */import{L as K}from"./LoadingSpinner-76947ebc.js";const X=Y("employeeService",()=>{const D=m([]),S=m(!0),r=m(),c=m(),A=O(),L=new URLSearchParams(window.location.search);let h="/profile-pages-getEmpDetails";L.has("uid")&&(h=h+"?uid="+L.get("uid")),console.log("id"+h);let i=new URL(document.location).searchParams.get("uid");const u=()=>{E.post("/profile-pages/getProfilePicture",{user_code:c.value}).then(s=>{console.log("profile :?",s.data.data),r.value=s.data.data}).finally(()=>{console.log("profile Pic Fetched")})};async function w(){console.log("Getting employee details"),await E.get(h).then(s=>{console.log("fetchEmployeeDetails() : "+s.data),S.value=!1,D.value=s.data,console.log("Current User code :"+s.data.user_code),i?c.value=s.data.user_code:(console.log("user not code"),c.value=A.current_user_code)}).catch(s=>console.log(s)).finally(s=>{u(),console.log("completed")})}return{fetchEmployeeDetails:w,employeeDetails:D,loading_screen:S,user_code:c,getProfilePhoto:u,profile:r}}),P=Y("manageEmployees",()=>{const D=m(),S=m(),r=m(),c=m(!0);async function A(){let i=window.location.origin+"/vmt-activeemployees-fetchall";console.log("AJAX URL : "+i),await E.get(i).then(u=>{D.value=u.data})}async function L(){let i=window.location.origin+"/vmt-yet-to-activeemployees-fetchall";console.log("AJAX URL : "+i),await E.get(i).then(u=>{console.log("Axios : "+u.data),S.value=u.data})}async function h(){let i=window.location.origin+"/vmt-exitemployees-fetchall";console.log("AJAX URL : "+i),await E.get(i).then(u=>{console.log("Axios : "+u.data),r.value=u.data})}return{array_active_employees:D,yet_to_active_employees_data:S,exit_employees_data:r,getActiveEmployees:A,ajax_yet_to_active_employees_data:L,ajax_exit_employees_data:h,canShowLoadingScreen:c}});const G={class:"w-full"},q={class:"flex items-center justify-center"},Z=["src"],ee={class:"pl-2 font-semibold text-left fs-6"},ae=["onClick"],te=l("i",{class:"h-6 py-1 mx-2 pi pi-eye"},null,-1),oe={__name:"active_employees",setup(D){const S=O(),r=P(),c=X(),A=m(),L=m({global:{value:null,matchMode:d.CONTAINS},emp_name:{value:null,matchMode:d.STARTS_WITH,matchMode:d.EQUALS,matchMode:d.CONTAINS},emp_code:{value:null,matchMode:d.STARTS_WITH,matchMode:d.EQUALS,matchMode:d.CONTAINS},status:{value:null,matchMode:d.EQUALS}});J(async()=>{await r.getActiveEmployees(),r.canShowLoadingScreen=!1});async function h(i){console.log(i),A.value=i.data,c.user_code=i.enc_user_id,window.location.href="/pages-profile-new?uid="+i.enc_user_id}return(i,u)=>{const w=f("InputText"),s=f("Column"),$=f("ProgressBar"),M=f("DataTable");return p(),k("div",G,[l("div",null,[t(M,{value:x(r).array_active_employees,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rowsPerPageOptions:[5,10,25],filters:L.value,"onUpdate:filters":u[0]||(u[0]=e=>L.value=e),filterDisplay:"menu",loading:i.canShowLoadingScreen,globalFilterFields:["emp_name","emp_code","status"]},{empty:n(()=>[y(" No customers found.")]),loading:n(()=>[y(" Loading customers data. Please wait. ")]),default:n(()=>[t(s,{class:"font-bold",field:"emp_name",header:"Employee Name",style:{"min-width":"5rem !important","text-align":"center:  !important"}},{body:n(e=>[l("div",q,[JSON.parse(e.data.emp_avatar).type=="shortname"?(p(),k("p",{key:0,class:C(["p-2 font-semibold text-white rounded-full w-11 fs-6",x(S).getBackgroundColor(e.index)])},b(JSON.parse(e.data.emp_avatar).data),3)):(p(),k("img",{key:1,class:"rounded-circle userActive-status profile-img",style:{height:"30px !important",width:"30px !important"},src:`data:image/png;base64,${JSON.parse(e.data.emp_avatar).data}`,srcset:"",alt:""},null,8,Z)),l("p",ee,b(e.data.emp_name),1)])]),filter:n(({filterModel:e,filterCallback:_})=>[t(w,{modelValue:e.value,"onUpdate:modelValue":g=>e.value=g,onInput:g=>_(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(s,{field:"emp_code",header:"Employee Code",class:"",style:{"min-width":"2rem !important"}},{filter:n(({filterModel:e,filterCallback:_})=>[t(w,{modelValue:e.value,"onUpdate:modelValue":g=>e.value=g,onInput:g=>_(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(s,{field:"emp_designation",header:"Designation",style:{"min-width":"15rem"}}),t(s,{field:"reporting_manager_name",header:"Reporting Manager"}),t(s,{field:"doj",header:"DOJ",style:{"min-width":"10rem"}},{body:n(e=>[y(b(x(B)(e.data.doj).format("DD-MMM-YYYY")),1)]),_:1}),t(s,{field:"profile_completeness",header:"Profile Completeness"},{body:n(e=>[e.data.profile_completeness<=39?(p(),T($,{key:0,value:e.data.profile_completeness,class:C([e.data.profile_completeness<=39?"progressbar":""])},null,8,["value","class"])):N("",!0),e.data.profile_completeness>=40&&e.data.profile_completeness<=59?(p(),T($,{key:1,class:C(["progressbar_val2",[e.data.profile_completeness>=40&&e.data.profile_completeness<=59]]),value:e.data.profile_completeness},null,8,["class","value"])):N("",!0),e.data.profile_completeness>=60?(p(),T($,{key:2,class:C(["progressbar_val3",[e.data.profile_completeness>=60]]),value:e.data.profile_completeness},null,8,["class","value"])):N("",!0)]),_:1}),t(s,{field:"enc_user_id",header:"View Profile"},{body:n(e=>[l("button",{onClick:_=>h(e.data),class:"px-2 py-1 text-center text-white bg-orange-700 rounded-md whitespace-nowrap"},[te,y("View")],8,ae)]),_:1})]),_:1},8,["value","filters","loading"])])])}}},le={class:"confirmation-content"},ne=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),se={class:"flex items-center justify-center"},ie=["src"],re={class:"pl-2 font-semibold text-left fs-6"},ce=["onClick"],de=l("i",{class:"h-6 py-1 mx-2 pi pi-eye"},null,-1),pe={key:0},ue={key:1},me={__name:"yet_to_active_employees",setup(D){const S=O(),r=P();J(()=>{r.ajax_yet_to_active_employees_data()}),m();let c=m(!1);m(!1),F();const A=Q();function L(e){window.location.href="/pages-profile-new?uid="+e}const h=m({global:{value:null,matchMode:d.CONTAINS},emp_name:{value:null,matchMode:d.STARTS_WITH,matchMode:d.EQUALS,matchMode:d.CONTAINS},emp_code:{value:null,matchMode:d.STARTS_WITH,matchMode:d.EQUALS,matchMode:d.CONTAINS},status:{value:null,matchMode:d.EQUALS}});m(["Pending","Approved","Rejected"]);let i=null,u=null;function w(e,_){e.emp_code,e.emp_status,console.log(P.emp_status),console.log(e.emp_status),c.value=!0,i=_,u=e,console.log("Selected Row Data : "+JSON.stringify(e))}function s(e){r.canShowLoadingScreen=!1,c.value=!1,e&&$()}function $(){i="",u=null}function M(){s(!1),r.canShowLoadingScreen=!0,console.log("Processing Rowdata : "+JSON.stringify(u)),E.post(window.location.origin+"/onboarding/updateEmployeeActive",{user_code:u.emp_code,active_status:1}).then(e=>{console.log("Response : "+e),A.add({severity:"success",summary:"Activated",detail:`${u.emp_name} Activated Successfully`,life:3e3}),$()}).catch(e=>{r.canShowLoadingScreen=!1,$()}).finally(()=>{r.ajax_yet_to_active_employees_data(),r.getActiveEmployees(),r.canShowLoadingScreen=!1,c.value=!1})}return(e,_)=>{const g=f("Toast"),R=f("Button"),j=f("Dialog"),o=f("InputText"),v=f("Column"),V=f("ProgressBar"),H=f("DataTable");return p(),k("div",null,[t(g),t(j,{header:"Confirmation",visible:x(c),"onUpdate:visible":_[2]||(_[2]=a=>z(c)?c.value=a:c=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:n(()=>[t(R,{label:"Yes",icon:"pi pi-check",onClick:_[0]||(_[0]=a=>M()),class:"p-button-text",autofocus:""}),t(R,{label:"No",icon:"pi pi-times",onClick:_[1]||(_[1]=a=>s(!0)),class:"p-button-text"})]),default:n(()=>[l("div",le,[ne,l("span",null,"Are you sure you want to "+b(x(i))+"?",1)])]),_:1},8,["visible"]),l("div",null,[t(H,{value:x(r).yet_to_active_employees_data,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rowsPerPageOptions:[5,10,25],filters:h.value,"onUpdate:filters":_[3]||(_[3]=a=>h.value=a),filterDisplay:"menu",globalFilterFields:["emp_name","emp_code","status"]},{empty:n(()=>[y(" No customers found. ")]),loading:n(()=>[y(" Loading customers data. Please wait. ")]),default:n(()=>[t(v,{class:"font-bold",field:"emp_name",header:"Employee Name",style:{"min-width":"5rem"}},{body:n(a=>[l("div",se,[JSON.parse(a.data.emp_avatar).type=="shortname"?(p(),k("p",{key:0,class:C(["p-2 font-semibold text-white rounded-full w-11 fs-6",x(S).getBackgroundColor(a.index)])},b(JSON.parse(a.data.emp_avatar).data),3)):(p(),k("img",{key:1,class:"w-10 rounded-circle img-md userActive-status profile-img",style:{height:"30px !important",width:"30px !important"},src:`data:image/png;base64,${JSON.parse(a.data.emp_avatar).data}`,srcset:"",alt:""},null,8,ie)),l("p",re,b(a.data.emp_name),1)])]),filter:n(({filterModel:a,filterCallback:I})=>[t(o,{modelValue:a.value,"onUpdate:modelValue":U=>a.value=U,onInput:U=>I(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(v,{field:"emp_code",header:"Employee Code",style:{"min-width":"2rem !important"}},{body:n(a=>[y(b(a.data.emp_code),1)]),filter:n(({filterModel:a,filterCallback:I})=>[t(o,{modelValue:a.value,"onUpdate:modelValue":U=>a.value=U,onInput:U=>I(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(v,{field:"emp_designation",header:"Designation",style:{"min-width":"15rem"}}),t(v,{field:"reporting_manager_name",header:"Reporting Manager"}),t(v,{field:"doj",header:"DOJ",style:{"min-width":"10rem"}},{body:n(a=>[y(b(x(B)(a.data.doj).format("DD-MMM-YYYY")),1)]),_:1}),t(v,{field:"profile_completeness",header:"Profile Completeness"},{body:n(a=>[a.data.profile_completeness<=39?(p(),T(V,{key:0,value:a.data.profile_completeness,class:C([a.data.profile_completeness<=39?"progressbar":""])},null,8,["value","class"])):N("",!0),a.data.profile_completeness>=40&&a.data.profile_completeness<=59?(p(),T(V,{key:1,class:C(["progressbar_val2",[a.data.profile_completeness>=40&&a.data.profile_completeness<=59]]),value:a.data.profile_completeness},null,8,["class","value"])):N("",!0),a.data.profile_completeness>=60?(p(),T(V,{key:2,class:C(["progressbar_val3",[a.data.profile_completeness>=60]]),value:a.data.profile_completeness},null,8,["class","value"])):N("",!0)]),_:1}),t(v,{field:"is_onboarded",header:"Onboarding Status"},{body:n(a=>[y(b(a.data.is_onboarded?"Completed":"Pending"),1)]),_:1}),t(v,{field:"doc_status",header:"Docs Approval Status"},{body:n(a=>[y(b(a.data.is_onboarded&&a.data.doc_status?"Approved":"Pending"),1)]),_:1}),t(v,{field:"enc_user_id",header:"View Profile"},{body:n(a=>[l("button",{onClick:I=>L(a.data.enc_user_id),class:"px-2 py-1 text-center text-white bg-orange-700 rounded-md whitespace-nowrap"},[de,y("View")],8,ce)]),_:1}),t(v,{style:{width:"300px"},field:"",header:"Action"},{body:n(a=>[a.data.is_onboarded&&a.data.doc_status?(p(),k("div",pe,[t(R,{icon:"pi pi-check-circle",severity:"success",label:"Activate",class:"p-button-success Button",onClick:I=>w(a.data,"Active"),style:{height:"2em"}},null,8,["onClick"])])):(p(),k("div",ue))]),_:1})]),_:1},8,["value","filters"])])])}}},_e={class:"confirmation-content"},fe=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),ge={class:"flex items-center justify-center"},ve=["src"],ye={class:"pl-2 font-semibold text-left fs-6"},he=["onClick"],we=l("i",{class:"h-6 py-1 mx-2 pi pi-eye"},null,-1),be={__name:"exit_employees",setup(D){const S=O(),r=P();J(()=>{r.ajax_exit_employees_data()}),m();let c=m(!1),A=m(!1);F();const L=Q(),h=m({global:{value:null,matchMode:d.CONTAINS},employee_name:{value:null,matchMode:d.STARTS_WITH,matchMode:d.EQUALS,matchMode:d.CONTAINS},status:{value:null,matchMode:d.EQUALS},status:{value:null,matchMode:d.EQUALS}});function i(w){window.location.href="/pages-profile-new?uid="+w}function u(){hideConfirmDialog(!1),A.value=!0,console.log("Processing Rowdata : "+JSON.stringify(currentlySelectedRowData)),E.post(window.location.origin+"/attendance-regularization-approvals",{id:currentlySelectedRowData.id,status:currentlySelectedStatus=="Approve"?"Approved":currentlySelectedStatus=="Reject"?"Rejected":currentlySelectedStatus,status_text:""}).then(w=>{console.log("Response : "+w),A.value=!1,L.add({severity:"success",summary:"Info",detail:"Success",life:3e3}),ajax_GetAttRegularizationData(),resetVars()}).catch(w=>{A.value=!1,resetVars()})}return(w,s)=>{const $=f("Toast"),M=f("Button"),e=f("Dialog"),_=f("InputText"),g=f("Column"),R=f("ProgressBar"),j=f("DataTable");return p(),k("div",null,[t($),t(e,{header:"Confirmation",visible:x(c),"onUpdate:visible":s[2]||(s[2]=o=>z(c)?c.value=o:c=o),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:n(()=>[t(M,{label:"Yes",icon:"pi pi-check",onClick:s[0]||(s[0]=o=>u()),class:"p-button-text",autofocus:""}),t(M,{label:"No",icon:"pi pi-times",onClick:s[1]||(s[1]=o=>w.hideConfirmDialog(!0)),class:"p-button-text"})]),default:n(()=>[l("div",_e,[fe,l("span",null,"Are you sure you want to "+b(w.currentlySelectedStatus)+"?",1)])]),_:1},8,["visible"]),l("div",null,[t(j,{value:x(r).exit_employees_data,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rowsPerPageOptions:[5,10,25],filters:h.value,"onUpdate:filters":s[3]||(s[3]=o=>h.value=o),filterDisplay:"menu",globalFilterFields:["emp_name","emp_code","status"]},{empty:n(()=>[y(" No customers found.")]),loading:n(()=>[y(" Loading customers data. Please wait. ")]),default:n(()=>[t(g,{class:"font-bold",field:"emp_name",header:"Employee Name",style:{"min-width":"5rem"}},{body:n(o=>[l("div",ge,[JSON.parse(o.data.emp_avatar).type=="shortname"?(p(),k("p",{key:0,class:C(["p-2 font-semibold text-white rounded-full w-11 fs-6",x(S).getBackgroundColor(o.index)])},b(JSON.parse(o.data.emp_avatar).data),3)):(p(),k("img",{key:1,class:"w-10 rounded-circle img-md userActive-status profile-img",style:{height:"30px !important",width:"30px !important"},src:`data:image/png;base64,${JSON.parse(o.data.emp_avatar).data}`,srcset:"",alt:""},null,8,ve)),l("p",ye,b(o.data.emp_name),1)])]),filter:n(({filterModel:o,filterCallback:v})=>[t(_,{modelValue:o.value,"onUpdate:modelValue":V=>o.value=V,onInput:V=>v(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(g,{field:"emp_code",header:"Employee Code",style:{"min-width":"2rem"}},{filter:n(({filterModel:o,filterCallback:v})=>[t(_,{modelValue:o.value,"onUpdate:modelValue":V=>o.value=V,onInput:V=>v(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(g,{field:"emp_designation",header:"Designation",style:{"min-width":"15rem"}}),t(g,{field:"reporting_manager_name",header:"Reporting Manager"}),t(g,{field:"doj",header:"DOJ",style:{"min-width":"10rem"}},{body:n(o=>[y(b(x(B)(o.data.doj).format("DD-MMM-YYYY")),1)]),_:1}),t(g,{field:"profile_completeness",header:"Profile Completeness"},{body:n(o=>[o.data.profile_completeness<=39?(p(),T(R,{key:0,value:o.data.profile_completeness,class:C([o.data.profile_completeness<=39?"progressbar":""])},null,8,["value","class"])):N("",!0),o.data.profile_completeness>=40&&o.data.profile_completeness<=59?(p(),T(R,{key:1,class:C(["progressbar_val2",[o.data.profile_completeness>=40&&o.data.profile_completeness<=59]]),value:o.data.profile_completeness},null,8,["class","value"])):N("",!0),o.data.profile_completeness>=60?(p(),T(R,{key:2,class:C(["progressbar_val3",[o.data.profile_completeness>=60]]),value:o.data.profile_completeness},null,8,["class","value"])):N("",!0)]),_:1}),t(g,{field:"enc_user_id",header:"View Profile"},{body:n(o=>[l("button",{onClick:v=>i(o.data.enc_user_id),class:"px-2 py-1 text-center text-white bg-orange-700 rounded-md whitespace-nowrap"},[we,y("View")],8,he)]),_:1})]),_:1},8,["value","filters"])])])}}};const Se={class:""},xe=l("div",{class:"mb-2 card left-line"},[l("div",{class:"pt-1 pb-0 card-body"},[l("ul",{class:"nav nav-pills nav-tabs-dashed",role:"tablist"},[l("li",{class:"nav-item text-muted",role:"presentation"},[l("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#active_employees","aria-selected":"true",role:"tab"}," Active Employees ")]),l("li",{class:"mx-4 nav-item text-muted",role:"presentation"},[l("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#not_active_employees","aria-selected":"true",role:"tab"}," Yet To Active Employees ")]),l("li",{class:"nav-item text-muted",role:"presentation"},[l("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#exit_employees","aria-selected":"true",role:"tab"}," Exit Employee ")])])])],-1),ke={class:"card"},Ce={class:"card-body"},Ae={class:"tab-content",id:"pills-tabContent"},Le={class:"tab-pane show fade active",id:"active_employees",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Te={class:"tab-pane fade",id:"not_active_employees",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ne={class:"tab-pane fade",id:"exit_employees",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ie={__name:"ManageEmployee",setup(D){const S=P();return(r,c)=>(p(),k(W,null,[x(S).canShowLoadingScreen?(p(),T(K,{key:0,class:"absolute z-50 bg-white w-[100%] h-[100%]"})):N("",!0),l("div",Se,[xe,l("div",ke,[l("div",Ce,[l("div",Ae,[l("div",Le,[t(oe)]),l("div",Te,[t(me)]),l("div",Ne,[t(be)])])])])])],64))}};export{Ie as default};
