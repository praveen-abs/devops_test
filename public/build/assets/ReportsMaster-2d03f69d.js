import{a as M,_ as z}from"./employee_master_report-e9547735.js";/* empty css                                                                       */import{a as D}from"./index-362795f3.js";import"./lodash-facb8280.js";import{d as Q}from"./pinia-4be28dc8.js";import{Q as c,W,a7 as q,h as A,o as m,c as v,d as a,aa as e,l as J,n as _,g,b as V,a as h,w as K,F as X,f as Z,ai as ee,aj as te,ae}from"./inputnumber.esm-a7c5b1f0.js";import{d as P}from"./dayjs.min-2f06af28.js";import{L as oe}from"./LoadingSpinner-bbcf6d6b.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";const ne=Q("UseReports_store",()=>{const s=M(),n=c(),t=c(),B=c(),w=c(),x=c(),l=c(),L=c(),S=c(),f=c(),b=c(!1),R=c(1),k=c(),o=W({date:"",department_id:"",client_id:"",active_status:"",start_date:"",end_date:""}),C=c([]),E=c([]);function F(){b.value=!0,D.get("/clients-fetchAll").then(r=>{n.value=r.data,console.log("legal_entity ::",n.value)}).finally(()=>{b.value=!1})}function I(){b.value=!0,D.get("/get-department").then(r=>{t.value=r.data}).finally(()=>{b.value=!1})}function N(){b.value=!0,D.post("/get-filter-months-for-reports").then(r=>{B.value=r.data}).finally(()=>{b.value=!1})}function O(r,i,d){console.log(r,i,d),console.log(o);let p;d==2?p="/fetch-attendance-data":d==4?p="/fetch-overtime-report-data":d==5&&(f.value?f.value==1?p="/fetch-LC-report-data":f.value==2?p="/fetch-EG-report-data":f.value==3?p="/fetch-absent-report-data":f.value==4&&(p="/fetch-half-day-report"):(Swal.fire({title:"error",text:"selected report type",icon:"error",showCancelButton:!1}),s.period_Date=null,s.Department=null,s.legal_Entity=null)),r=="department"?o.department_id=i:r=="Category"?(o.active_status=i,console.log(o)):r=="date"?o.date=i:r=="legal_entity"&&(o.client_id=i),p&&(s.canShowLoading=!0,D.post(p,o).then(u=>{C.value=u.data.rows,u.data.headers.forEach(T=>{let $={title:T};E.value.push($),u.data.rows.length===0&&Swal.fire({title:u.data.status="failure",text:"No employees found in this category",icon:"error",showCancelButton:!1}).then(G=>{})})}).finally(()=>{s.canShowLoading=!1,s.selectedfilters.active_status="",s.selectedfilters.date="",s.selectedfilters.department_id="",s.selectedfilters.legal_entity="",s.legal_Entity="",s.Department="",s.period_Date="",s.select_Category=""}))}function U(r,i,d){let p;d==2?p="/fetch-attendance-data":d==4?p="/fetch-overtime-report-data":d==5&&(f.value?f.value==1?p="/fetch-LC-report-data":f.value==2?p="/fetch-EG-report-data":f.value==3?p="/fetch-absent-report-data":f.value==4&&(p="/fetch-half-day-report"):(Swal.fire({title:"error",text:"selected report type",icon:"error",showCancelButton:!1}),s.period_Date=null,s.Department=null,s.legal_Entity=null)),r=="start_date"?(o.start_date=i,console.log(o)):r=="end_date"&&(o.end_date=i,console.log(o)),d!==1&&o.start_date&&o.end_date?(console.log("success"),s.canShowLoading=!0,D.post(p,o).then(u=>{C.value=u.data.rows,u.data.headers.forEach(T=>{let $={title:T};E.value.push($),u.data.rows.length===0&&Swal.fire({title:u.data.status="failure",text:"No employees found in this category",icon:"error",showCancelButton:!1}).then(G=>{})})}).finally(()=>{s.canShowLoading=!1})):console.log("testing start date and end date ::",o)}const Y=r=>{s.canShowLoading=!0;let i,d;r==1?(i="/reports/generate-detailed-attendance-report",d="Attendance Detailed Report"):r==2?(i="/reports/generate-basic-attendance",d="Attendance Basic Report"):r==4?(i="/report/download-over-time-report",d="Attendance Overtime Report"):r==5&&(f.value==1?(i="/report/download-late-coming-report",d="Attendance Late-coming Report"):f.value==2?(i="/report/download-early-going-report",d="Attendance Early-coming Report"):f.value==3?(i="/report/download-absent-report",d="Attendance Absent Report"):f.value==4&&(i="/report/download-half-day-report",d="Attendance Half-day Report")),i&&D.post(i,o,{responseType:"blob"}).then(p=>{console.log(p.data);var u=document.createElement("a");u.href=window.URL.createObjectURL(p.data),u.download=`${d}.xlsx`,u.click()}).finally(()=>{s.canShowLoading=!1,s.selectedfilters.active_status="",s.selectedfilters.date="",s.selectedfilters.department_id="",s.selectedfilters.legal_entity="",s.legal_Entity="",s.Department="",s.period_Date="",s.select_Category="",L.value="",S.value="",o.end_date="",o.start_date=""})},H=async()=>{let r="/fetch-attendance-data";b.value=!0,await D.post(r).then(i=>{console.log(i.data.rows),C.value=i.data.rows,i.data.headers.forEach(d=>{let p={title:d};E.value.push(p),console.log(d)}),console.log(E.value)}).finally(()=>{b.value=!1})};function j(){C.value.splice(0,C.value.length),E.value.splice(0,E.value.length),f.value=null,L.value="",S.value="",o.end_date="",o.start_date=""}return{canShowLoading:b,Legal_Entity:w,Department:x,PeriodMonth:l,Start_Date:L,End_Date:S,btn_download:k,getPeriodMonth:B,getDepartment:t,get_Legal_Entity:n,activetab:R,fetchFilterClientId:F,get_All_Department:I,fetchPeriodMonth:N,getSelectoption:O,AttendanceReportSource:C,AttendanceReportDynamicHeaders:E,getEmployeeAttendanceReports:H,attendance_Type:f,downloadAttendanceReports:Y,clearDataTable:j,select_StartAndEnd_Date:U}});const y=s=>(ee("data-v-136c7fa0"),s=s(),te(),s),se={class:"px-2"},ie={class:"flex justify-between mb-[10px]"},re=y(()=>a("h1",{class:"text-black text-[24px] font-semibold"},"Attendance Reports",-1)),de=y(()=>a("i",{class:"mr-2 pi pi-times"},null,-1)),pe={style:{position:"relative"}},ce={class:"flex justify-between"},fe={class:"flex mb-3 divide-x max-[1300px]:!w-[40%] max-[1400px]:![50%] nav nav-pills divide-solid nav-tabs-dashed max-[1024px]:w-[100%]",id:"pills-tab",role:"tablist"},me={class:"nav-item !border-0 text-center font-['poppins'] text-[14px] text-[#001820]",role:"presentation"},ue={class:"nav-item !border-0 flex items-center",role:"presentation"},be={class:"nav-item !border-0 flex items-center",role:"presentation"},ve={class:"nav-item !border-0 flex items-center",role:"presentation"},xe={class:"nav-item !border-0 flex items-center",role:"presentation"},_e={class:"flex justify-between max-[1300px]:w-[60%] max-[1400px]:![50%] max-[1200px]:justify-start flex-wrap max-[1024px]:w-[100%]"},ge={class:"flex items-center"},he=y(()=>a("h1",{class:"text-[12px] text-black mx-1 font-semibold font-['poppins']"},"Period : ",-1)),ye={class:"flex items-center"},we=y(()=>a("h1",{class:"text-[12px] text-black mx-2 font-semibold font-['poppins']"},"Department : ",-1)),Ee={class:"flex items-center"},De=y(()=>a("h1",{class:"text-[12px] text-black mx-1 font-semibold font-['poppins']"},"Legal Entity : ",-1)),Be={class:"tab-content",id:""},Le={class:"card-body"},Se={class:"flex items-center justify-between p-2 bg-white"},Ce={class:"flex !items-center"},Ae={key:0,class:"flex items-center pt-2 ml-2"},Re=y(()=>a("h1",{class:"text-[12px] text-black mx-1 font-semibold font-['poppins']"},"Period : ",-1)),ke={class:"flex items-center"},Te=y(()=>a("path",{d:"M2,10 L6,13 L12.8760559,4.5959317 C14.1180021,3.0779974 16.2457925,2.62289624 18,3.5 L18,3.5 C19.8385982,4.4192991 21,6.29848669 21,8.35410197 L21,10 C21,12.7614237 18.7614237,15 16,15 L1,15",id:"check"},null,-1)),$e=y(()=>a("polyline",{points:"4.5 8.5 8 11 11.5 8.5",class:"svg-out"},null,-1)),Me=y(()=>a("path",{d:"M8,1 L8,11",class:"svg-out"},null,-1)),Ve=[Te,$e,Me],Pe={__name:"AttendanceMaster",setup(s){const n=M(),t=ne(),B=c({global:{value:null,matchMode:q.CONTAINS}});c(),c(),c(),c([{name:"Active",id:1},{name:"Yet To Active",id:0},{name:"Exit",id:-1}]);const w=c([{type:"Late Coming",id:1},{type:"Early Going",id:2},{type:"Absent",id:3},{type:"Half-Day Absent",id:4}]);return(x,l)=>{const L=A("Dropdown"),S=A("MultiSelect"),f=A("InputText"),b=A("Calendar"),R=A("Column"),k=A("DataTable");return m(),v("div",se,[a("div",ie,[re,a("div",null,[a("button",{onClick:l[0]||(l[0]=o=>(e(n).clearfilterBtn(x.activetab),e(t).clearDataTable())),class:"flex items-center text-[#000] !font-semibold !font-['poppins'] text-[12px] px-3 py-2 border-[1px] bg-[#F9BE00] mx-2 rounded-[4px]"},[de,J(" Clear Filter")])])]),a("div",pe,[a("div",ce,[a("ul",fe,[a("li",me,[a("a",{class:_(["px-2 position-relative font-['poppins'] text-[14px] text-[#001820] w-[100%]",[e(t).activetab===1?"active font-semibold !border-b-[2.2px]  !border-[#F9BE00]":"font-medium !text-[#8B8B8B] border-b-[2.2px] border-[#dcdcdc] "]]),id:"","data-bs-toggle":"pill",href:"",role:"tab","aria-controls":"","aria-selected":"true",onClick:l[1]||(l[1]=o=>(e(t).activetab=1,e(n).clearfilterBtn(x.activetab),e(t).clearDataTable()))}," DETAILED REPORT ",2)]),a("li",ue,[a("a",{class:_(["px-2 position-relative font-['poppins'] text-[14px] text-[#001820] w-[100%]",[e(t).activetab===2?"active font-semibold !border-b-[2.2px]  !border-[#F9BE00]":"font-medium !text-[#8B8B8B] border-b-[2.2px] border-[#dcdcdc] "]]),id:"","data-bs-toggle":"pill",href:"",role:"tab","aria-controls":"","aria-selected":"true",onClick:l[2]||(l[2]=o=>(e(t).activetab=2,e(n).clearfilterBtn(x.activetab),e(t).clearDataTable()))}," MUSTER ROLL ",2)]),a("li",be,[a("a",{class:_(["px-2 position-relative font-['poppins'] text-[14px] text-[#001820] w-[100%]",[e(t).activetab===3?"active font-semibold !border-b-[2.2px]  !border-[#F9BE00]":"font-medium !text-[#8B8B8B] border-b-[2.2px] border-[#dcdcdc] "]]),id:"","data-bs-toggle":"pill",href:"",role:"tab","aria-controls":"","aria-selected":"true",onClick:l[3]||(l[3]=o=>(e(t).activetab=3,e(n).clearfilterBtn(x.activetab),e(t).clearDataTable()))}," CONSOLIDATE ",2)]),a("li",ve,[a("a",{class:_(["px-4 position-relative font-['poppins'] text-[14px] text-[#001820] w-[100%]",[e(t).activetab===4?"active font-semibold !border-b-[2.2px]  !border-[#F9BE00]":"font-medium !text-[#8B8B8B] border-b-[2.2px] border-[#dcdcdc] "]]),id:"","data-bs-toggle":"pill",href:"",role:"tab","aria-controls":"","aria-selected":"true",onClick:l[4]||(l[4]=o=>(e(t).activetab=4,e(n).clearfilterBtn(x.activetab),e(t).clearDataTable()))}," OVERTIME ",2)]),a("li",xe,[a("a",{class:_(["px-2 position-relative font-['poppins'] text-[14px] text-[#001820] w-[100%]",[e(t).activetab===5?"active font-semibold !border-b-[2.2px]  !border-[#F9BE00]":"font-medium !text-[#8B8B8B] border-b-[2.2px] border-[#dcdcdc] "]]),id:"","data-bs-toggle":"pill",href:"",role:"tab","aria-controls":"","aria-selected":"true",onClick:l[5]||(l[5]=o=>(e(t).activetab=5,e(n).clearfilterBtn(x.activetab),e(t).clearDataTable()))}," OTHERS ",2)])]),a("ul",_e,[a("li",ge,[he,g(L,{optionLabel:"month",optionValue:"date",options:e(n).PeriodMonth,modelValue:e(n).period_Date,"onUpdate:modelValue":l[6]||(l[6]=o=>e(n).period_Date=o),onChange:l[7]||(l[7]=o=>e(t).getSelectoption("date",e(n).period_Date,e(t).activetab)),placeholder:"Select period",class:"w-[120px] mx-1 !h-10 my-1 !font-semibold !font-['poppins'] !text-[#000] !bg-[#E6E6E6]"},null,8,["options","modelValue"])]),a("li",ye,[we,g(S,{modelValue:e(n).Department,"onUpdate:modelValue":l[8]||(l[8]=o=>e(n).Department=o),options:e(n).department,optionLabel:"name",placeholder:"Department",onChange:l[9]||(l[9]=o=>e(t).getSelectoption("department",e(n).Department,e(t).activetab)),optionValue:"id",maxSelectedLabels:3,class:"min-w-[100px] w-[140px] my-1 !font-semibold !font-['poppins'] !h-10 text-[#000] !bg-[#E6E6E6]"},null,8,["modelValue","options"])]),a("li",Ee,[De,g(S,{onChange:l[10]||(l[10]=o=>e(t).getSelectoption("legal_entity",e(n).legal_Entity,e(t).activetab)),modelValue:e(n).legal_Entity,"onUpdate:modelValue":l[11]||(l[11]=o=>e(n).legal_Entity=o),options:e(n).client_ids,optionLabel:"client_fullname",placeholder:"Legal Entity",optionValue:"id",maxSelectedLabels:3,class:"min-w-[100px] w-[140px] my-1 !font-semibold !font-['poppins'] !h-10 text-[#000] !bg-[#E6E6E6]"},null,8,["modelValue","options"])])])]),a("div",Be,[a("div",Le,[e(n).canShowLoading?(m(),V(oe,{key:0,class:"absolute z-50 bg-white"})):h("",!0),a("div",null,[a("div",Se,[a("div",Ce,[a("div",null,[g(f,{placeholder:"Search",modelValue:B.value.global.value,"onUpdate:modelValue":l[12]||(l[12]=o=>B.value.global.value=o),class:"border-color !h-10 my-1"},null,8,["modelValue"])]),e(t).activetab==5?(m(),v("div",Ae,[Re,g(L,{optionLabel:"type",optionValue:"id",options:w.value,modelValue:e(t).attendance_Type,"onUpdate:modelValue":l[13]||(l[13]=o=>e(t).attendance_Type=o),placeholder:"Select Type",class:"w-[120px] text-[10px] mx-1 !h-10 my-1 !font-semibold !font-['poppins'] !text-[#000] !bg-[#E6E6E6]"},null,8,["options","modelValue"])])):h("",!0),a("div",null,[g(b,{modelValue:e(t).Start_Date,"onUpdate:modelValue":l[14]||(l[14]=o=>e(t).Start_Date=o),onDateSelect:l[15]||(l[15]=o=>e(t).select_StartAndEnd_Date("start_date",e(P)(e(t).Start_Date).format("YYYY-MM-DD"),e(t).activetab)),dateFormat:"dd-mm-yy",class:"w-[150px] h-10 mx-2",placeholder:"Start-date "},null,8,["modelValue"]),g(b,{modelValue:e(t).End_Date,"onUpdate:modelValue":l[16]||(l[16]=o=>e(t).End_Date=o),dateFormat:"dd-mm-yy",onDateSelect:l[17]||(l[17]=o=>e(t).select_StartAndEnd_Date("end_date",e(P)(e(t).End_Date).format("YYYY-MM-DD"),e(t).activetab)),class:"w-[150px] h-10",placeholder:"End-date "},null,8,["modelValue"])])]),a("div",ke,[a("button",{class:_(["p-2 mx-2 rounded-md w-[120px]",[!e(t).AttendanceReportDynamicHeaders.length==0?"bg-[#000] text-white":" !text-[#000] !bg-[#E6E6E6] "]]),onClick:l[18]||(l[18]=o=>(e(t).btn_download=!e(t).btn_download,e(t).downloadAttendanceReports(e(t).activetab)))},[a("p",{class:_(["relative left-2 font-['poppins']",[!e(t).AttendanceReportDynamicHeaders.length==0?"bg-[#000] !text-[#ffff]":"!text-[#000] !bg-[#E6E6E6]"]])},"Download",2),a("div",{id:"btn-download",style:{position:"absolute",right:"0"},class:_([e(t).btn_download==!0?x.toggleClass:" "])},[(m(),v("svg",{width:"22px",height:"16px",viewBox:"0 0 22 16",class:_([!e(t).AttendanceReportDynamicHeaders.length==0?"!stroke-[#ffff] ":"!stroke-[#000]"])},Ve,2))],2)],2)])]),a("div",null,[g(k,{value:e(t).AttendanceReportSource,paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],responsiveLayout:"scroll",scrollable:"",scrollHeight:"240px",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}"},{default:K(()=>[(m(!0),v(X,null,Z(e(t).AttendanceReportDynamicHeaders,o=>(m(),V(R,{key:o.title,field:o.title,header:o.title,style:{"white-space":"nowrap","text-align":"left",width:"15rem !important","marign-right":"1rem !important"}},null,8,["field","header"]))),128))]),_:1},8,["value"])])])])])])])}}},Fe=le(Pe,[["__scopeId","data-v-136c7fa0"]]),Ie={style:{position:"relative"}},Ne={class:"mb-3 divide-x nav nav-pills divide-solid nav-tabs-dashed w-[50%]",id:"pills-tab",role:"tablist"},Oe={class:"nav-item",role:"presentation"},Ue={key:0,class:"h-1 rounded-l-3xl",style:{border:"2px solid #F9BE00 !important"}},Ye={key:1,class:"h-1 border-2 border-gray-300 rounded-l-3xl",style:{border:"2px solid #dcdcdc !important"}},He={class:"border-0 nav-item position-relative",role:"presentation"},je={key:0,class:"h-1 rounded-r-3xl position-absolute bottom-[1px] w-[100%] left-0",style:{border:"2px solid #F9BE00 !important"}},Ge={key:1,class:"h-1 border-2 border-gray-300 rounded-l-3xl"},ze=a("div",{class:"border-gray-300 border-b-[4px] w-100 mt-[-7px]"},null,-1),Qe={class:"tab-content",id:""},We={class:"card-body"},qe={key:0},Je={key:1},Ke={key:2},it={__name:"ReportsMaster",setup(s){const n=c(1),t=M();return ae(()=>{t.fetchFilterClientIds(),t.getALLdepartment(),t.getPeriodMonth()}),(B,w)=>(m(),v("div",null,[a("div",Ie,[a("ul",Ne,[a("li",Oe,[a("a",{class:_(["px-4 position-relative border-0 font-['poppins'] text-[14px] text-[#001820]",[n.value===1?"active font-semibold border: 2px solid #F9BE00 !important;":"font-medium !text-[#8B8B8B] border: 2px solid #dcdcdc !important;"]]),id:"","data-bs-toggle":"pill",href:"",role:"tab","aria-controls":"","aria-selected":"true",onClick:w[0]||(w[0]=x=>(n.value=1,e(t).clearfilterBtn(n.value)))}," EMPLOYEE REPORTS ",2),n.value===1?(m(),v("div",Ue)):(m(),v("div",Ye))]),h("",!0),h("",!0),a("li",He,[a("a",{class:_(["text-center px-4 border-0 font-['poppins'] text-[14px] text-[#001820]",[n.value===4?"active font-semibold ":"font-medium !text-[#8B8B8B]"]]),id:"","data-bs-toggle":"pill",href:"",onClick:w[3]||(w[3]=x=>(n.value=4,e(t).clearfilterBtn(n.value))),role:"tab","aria-controls":"","aria-selected":"true"}," ATTENDANCE ",2),n.value===4?(m(),v("div",je)):(m(),v("div",Ge))]),h("",!0),h("",!0),ze]),a("div",Qe,[a("div",null,[a("div",We,[n.value===1?(m(),v("div",qe,[g(z)])):h("",!0),n.value===4?(m(),v("div",Je,[g(Fe)])):h("",!0),n.value===3?(m(),v("div",Ke)):h("",!0)])])])])]))}};export{it as default};
