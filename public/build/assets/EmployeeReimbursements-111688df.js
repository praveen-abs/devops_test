import{Q as K,V as f,S as N,W as P,X,c as R,h as n,e as l,Y as t,j as m,a as $,w as s,F as z,g as y,o as S,t as _,B as W,P as q,E as G,R as H,q as Q}from"./index-fca754c1.js";import{d as Y,c as Z}from"./pinia-4a97138d.js";import{C as ee,T as oe,B as le,S as te,F as ae,c as ne,b as se,e as ie,a as re,d as ce,f as de}from"./styleclass.esm-1f250c0e.js";import{s as me}from"./confirmdialog.esm-5d1a5d78.js";import{D as _e}from"./dialogservice.esm-6315b049.js";import{s as ue}from"./toast.esm-5d4b434c.js";import{s as pe}from"./progressspinner.esm-5644b1af.js";import{s as ve}from"./row.esm-6ebc942e.js";import{s as be}from"./columngroup.esm-9dd1458e.js";import"./fileupload.esm-3236f16f.js";import{s as fe}from"./calendar.esm-6b426cdb.js";import{s as ye}from"./textarea.esm-e2eb0301.js";import{s as ge}from"./chips.esm-92f2e4f5.js";const he=Y("employee_reimbursment_service",()=>{const A=K(),o=f([]),w=f(!0),a=f(!1),d=N({type_id:1,claim_type:"",claim_amount:Number,eligible_amount:Number,date_of_dispatch:"",proof_of_delivery:"",reimbursment_remarks:"",employee_reimbursement_attachment:""}),D=()=>{v.value=!1,a.value=!0},h=()=>{w.value=!0,c.value=!1},c=f(!1),C=f(!1),r=N({type_id:1,travelled_date:"",mode_of_transport:"",travel_from:"",travel_to:"",total_distance_travelled:"",Amt_km:"",local_convenyance_total_amount:"",local_conveyance_remarks:""}),V=()=>{v.value=!1,C.value=!0,v.value=!1},x=()=>{a.value=!1,C.value=!1,v.value=!1},T=()=>{w.value=!1,c.value=!0},L=u=>u.toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"}),v=f(!1),e=f([{label:"Mobile Bills",value:"Mobile Bills"},{label:"Accommodation",value:"Accommodation"},{label:"Travel Expenses",value:"Travel Expenses"},{label:"Miscellaneous",value:"Miscellaneous"},{label:"Medical Expenses",value:"Medical Expenses"},{label:"Others",value:"Others"}]),U=f([{label:"Public Transport",value:"Public Transport"},{label:"Car",value:"Car"},{label:"Bike",value:"Bike"}]),F=u=>{d.employee_reimbursement_attachment=u.target.files[0],console.log(d.employee_reimbursement_attachment.file)},B=f(),E=f(!0),j=()=>{let u=window.location.origin+"/fetch_all_reimbursements";console.log("AJAX URL : "+u),P.get(u).then(k=>{B.value=k.data,console.log(k.data),E.value=!1})},I=N(d.value),J=u=>{v.value=!0,o.value.push(d),a.value=!1,console.log(d),console.log("post reiburmentt"),console.log(d.employee_reimbursement_attachment);const k=JSON.stringify({reimbursement_data:I});console.log(k),u.preventDefault();let b=globalThis,p=new FormData;p.append("reimbursement_type_id",d.type_id),p.append("file",d.employee_reimbursement_attachment),p.append("claim_type",d.claim_type),p.append("claim_amount",d.claim_amount),p.append("eligible_amount",d.eligible_amount),p.append("remarks",d.reimbursment_remarks),p.append("date_of_dispatch",d.date_of_dispatch),p.append("proof_of_delivery",d.proof_of_delivery);let g=window.location.origin+"/saveReimbursementsData";P.post(g,p).then(O=>{b.success=O.data.success}).catch(O=>{b.output=error,console.log(O)}),A.add({severity:"success",summary:"Saved",detail:"Reimbursement drafted",life:3e3})},M=f([]);return{hideDialog:x,localconvergance_dailog:C,employee_reimbursement:d,employee_local_conveyance:r,onclickOpenLocalConverganceDailog:V,reimbursements_dailog:a,reimbursementsScreen:w,localconverganceScreen:c,fetch_data_from_reimbursment:j,data_reimbursements:B,loading_spinner:E,formatDate:L,amount_calculation:()=>{console.log(r.mode_of_transport),r.mode_of_transport=="Car"?(console.log("Car"),r.local_convenyance_total_amount=r.total_distance_travelled*6,console.log(r.local_convenyance_total_amount)):r.mode_of_transport=="Bike"?(r.local_convenyance_total_amount=r.total_distance_travelled*3.5,console.log("Bike")):r.local_convenyance_total_amount=null},employee_reimbursement_attachment_upload:F,onclickSwitchToReimbursmentTab:h,reimbursement_data:I,post_reimbursment_data:J,reimbursement_datas:o,reimbursment_claim_types:e,onclickOpenReimbursmentDailog:D,post_data_for_local_convergance:u=>{u.preventDefault();let k=globalThis,b=new FormData;b.append("reimbursement_type_id",r.type_id),b.append("date",r.travelled_date),b.append("user_comments",r.local_conveyance_remarks),b.append("from",r.travel_from),b.append("to",r.travel_to),b.append("vehicle_type",r.mode_of_transport),b.append("distance_travelled",r.total_distance_travelled);let p=window.location.origin+"/saveReimbursementsData";console.log("AJAX URL : "+p),P.post(p,b).then(g=>{r.local_convenyance_total_amount=g.data.total_amount,console.log(g),k.success=g.data.success}).catch(g=>{k.output=g,console.log(g)}).finally(g=>{console.log(g)}),C.value=!1,console.log(r.value),M.value.push(r),A.add({severity:"success",summary:"Draft",detail:"Draft Saved",life:3e3})},fetch_data_for_local_convergance:()=>{let u=window.location.origin+"/fetch_all_reimbursements";console.log("AJAX URL : "+u),P.get(u).then(k=>{console.log(k.data),E.value=!1})},onclickSwitchToLocalCoverganceTab:T,data_local_convergance:M,local_Conveyance_Mode_of_transport:U}});const ke={class:"reimbursement-wrapper mt-30"},we={class:"card left-line mb-2"},Ce={class:"card-body pb-1 pt-1"},Te={class:"row"},De={class:"col-sm-12 col-md-7 col-lg-7 col-xl-7 col-xxl-7"},Ve={class:"nav nav-pills nav-tabs-dashed",role:"tablist"},xe={class:"nav-item text-muted",role:"presentation"},Pe={class:"nav-item text-muted ms-5",role:"presentation"},Re={class:"col-sm-12 col-md-5 col-lg-5 col-xl-5 col-xxl-5 d-flex justify-content-end"},Se=l("i",{class:"fa fa-plus-circle me-1"},null,-1),Ae=l("i",{class:"fa fa-plus-circle me-1"},null,-1),Le={class:"card"},Ue={class:"card-body"},Ee={class:"tab-content",id:"pills-tabContent"},Oe={class:"tab-pane show fade active",id:"reimbursement",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ne={id:"table"},$e={class:"card"},Be={class:"field"},Ie=l("label",{for:"name"},"Claim Type",-1),Me={class:"formgrid grid"},Fe={class:"field col"},je=l("label",{for:"Claim Amount"},"Claim Amount",-1),Je={class:"field col"},Ke=l("label",{for:"Eligible Amount"},"Eligible Amount",-1),Xe={class:"field"},ze=l("label",{class:"mb-3"},"Remarks",-1),We={class:"formgrid"},qe={class:"field"},Ge=l("label",{class:"mb-3"},"file Upload",-1),He={class:"formgrid"},Qe=l("label",{id:"file_upload",for:"upload"},"Choose file",-1),Ye={class:"tab-pane fade",id:"localConveyance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ze={class:"card"},eo=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),oo={key:0,class:"text-center"},lo={class:"field"},to=l("label",{for:"name"},"Date",-1),ao={class:"field col"},no=l("label",{for:"Claim Amount"},"Mode of transport",-1),so={class:"formgrid grid"},io={class:"field col"},ro=l("label",{for:"Eligible Amount"},"From",-1),co={class:"field col"},mo=l("label",{for:"Claim Amount"},"To",-1),_o={class:"formgrid grid"},uo={class:"field col"},po=l("label",{for:"Eligible Amount"},"Total Distance",-1),vo={class:"field col"},bo=l("label",{for:"Eligible Amount"},"Amt/Km",-1),fo=["hidden"],yo=l("label",{for:"Eligible Amount"},"Amount",-1),go={class:"field col"},ho=l("label",{for:"Eligible Amount"},"Remarks",-1),ko={__name:"EmployeeReimbursements",setup(A){const o=he();return X(()=>{o.fetch_data_for_local_convergance()}),(w,a)=>{const d=y("Toast"),D=y("Calendar"),h=y("Button"),c=y("Column"),C=y("DataTable"),r=y("Dropdown"),V=y("InputNumber"),x=y("Textarea"),T=y("Dialog"),L=y("ProgressSpinner"),v=y("InputText");return S(),R(z,null,[n(d),l("div",ke,[l("div",we,[l("div",Ce,[l("div",Te,[l("div",De,[l("ul",Ve,[l("li",xe,[l("a",{class:"nav-link active pb-2","data-bs-toggle":"tab",href:"#reimbursement","aria-selected":"true",role:"tab",onClick:a[0]||(a[0]=(...e)=>t(o).onclickSwitchToReimbursmentTab&&t(o).onclickSwitchToReimbursmentTab(...e))}," Reimbursement ")]),l("li",Pe,[l("a",{class:"nav-link pb-2","data-bs-toggle":"tab",href:"#localConveyance","aria-selected":"true",role:"tab",onClick:a[1]||(a[1]=(...e)=>t(o).onclickSwitchToLocalCoverganceTab&&t(o).onclickSwitchToLocalCoverganceTab(...e))}," Local Conveyance ")])])]),l("div",Re,[n(D,{modelValue:w.date,"onUpdate:modelValue":a[2]||(a[2]=e=>w.date=e),view:"month",dateFormat:"mm/yy",class:"mr-4",placeholder:"Select Month"},null,8,["modelValue"]),t(o).reimbursementsScreen?(S(),R("button",{key:0,onClick:a[3]||(a[3]=(...e)=>t(o).onclickOpenReimbursmentDailog&&t(o).onclickOpenReimbursmentDailog(...e)),class:"btn btn-orange"},[Se,m("Add Claim ")])):$("",!0),t(o).localconverganceScreen?(S(),R("button",{key:1,onClick:a[4]||(a[4]=(...e)=>t(o).onclickOpenLocalConverganceDailog&&t(o).onclickOpenLocalConverganceDailog(...e)),class:"btn btn-orange"},[Ae,m("Add Claim ")])):$("",!0)])])])]),l("div",Le,[l("div",Ue,[l("div",Ee,[l("div",Oe,[l("div",Ne,[l("div",null,[l("div",$e,[n(C,{ref:"dt",value:t(o).reimbursement_datas,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:s(()=>[n(c,{exportable:!1,style:{"min-width":"8rem"}},{body:s(e=>[n(h,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:U=>w.confirmDeleteProduct(e.data)},null,8,["onClick"])]),_:1}),n(c,{header:"Claim Type",style:{"min-width":"8rem"}},{body:s(e=>[m(_(e.data.claim_type),1)]),_:1}),n(c,{field:"",header:"Claim Amount",style:{"min-width":"12rem"}},{body:s(e=>[m(_("₹"+e.data.claim_amount),1)]),_:1}),n(c,{field:"",header:"Eligible Amount",style:{"min-width":"12rem"}},{body:s(e=>[m(_("₹"+e.data.eligible_amount),1)]),_:1}),n(c,{field:"",header:"Remarks",style:{"min-width":"12rem"}},{body:s(e=>[m(_(e.data.reimbursment_remarks),1)]),_:1}),n(c,{field:"",header:"Status",style:{"min-width":"12rem"}},{body:s(e=>[m(_(e.data.eligible_amount),1)]),_:1}),n(c,{field:"",header:"Date Of Dispatch",style:{"min-width":"12rem"}},{body:s(e=>[m(_("₹"+e.data.eligible_amount),1)]),_:1}),n(c,{field:"",header:"Proof Of Delivery",style:{"min-width":"12rem"}},{body:s(e=>[m(_("₹"+e.data.eligible_amount),1)]),_:1})]),_:1},8,["value"])]),n(T,{visible:t(o).reimbursements_dailog,"onUpdate:visible":a[10]||(a[10]=e=>t(o).reimbursements_dailog=e),style:{width:"450px"},header:"Reimbursement Detials",modal:!0,class:"p-fluid"},{footer:s(()=>[n(h,{label:"Cancel",icon:"pi pi-times",style:{height:"30px",color:"black"},class:"p-button-text",onClick:t(o).hideDialog},null,8,["onClick"]),n(h,{label:"Save",disabled:!(!t(o).employee_reimbursement.claim_type==""&&!t(o).employee_reimbursement.claim_amount==""),icon:"pi pi-check",style:{height:"30px",background:"rgb(255 135 38)",color:"white"},onClick:t(o).post_reimbursment_data},null,8,["disabled","onClick"])]),default:s(()=>[l("div",Be,[Ie,n(r,{modelValue:t(o).employee_reimbursement.claim_type,"onUpdate:modelValue":a[5]||(a[5]=e=>t(o).employee_reimbursement.claim_type=e),options:t(o).reimbursment_claim_types,optionLabel:"label",optionValue:"value",placeholder:"Select Claim Type"},null,8,["modelValue","options"])]),l("div",Me,[l("div",Fe,[je,n(V,{modelValue:t(o).employee_reimbursement.claim_amount,"onUpdate:modelValue":a[6]||(a[6]=e=>t(o).employee_reimbursement.claim_amount=e),mode:"currency",currency:"INR",locale:"en-IN"},null,8,["modelValue"])]),l("div",Je,[Ke,n(V,{modelValue:t(o).employee_reimbursement.eligible_amount,"onUpdate:modelValue":a[7]||(a[7]=e=>t(o).employee_reimbursement.eligible_amount=e),mode:"currency",currency:"INR",locale:"en-IN",integeronly:""},null,8,["modelValue"])])]),l("div",Xe,[ze,l("div",We,[n(x,{modelValue:t(o).employee_reimbursement.reimbursment_remarks,"onUpdate:modelValue":a[8]||(a[8]=e=>t(o).employee_reimbursement.reimbursment_remarks=e),autoResize:"",rows:"2",cols:"30"},null,8,["modelValue"])])]),l("div",qe,[Ge,l("div",He,[l("input",{onChange:a[9]||(a[9]=e=>t(o).employee_reimbursement_attachment_upload(e)),ref:"employee_service.employee_reimbursement_attachment",type:"file",id:"upload",hidden:""},null,544),Qe])])]),_:1},8,["visible"])])])])]),l("div",Ye,[l("div",null,[l("div",Ze,[n(T,{header:"Header",visible:t(o).loading_spinner,"onUpdate:visible":a[11]||(a[11]=e=>t(o).loading_spinner=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:s(()=>[n(L,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:s(()=>[eo]),_:1},8,["visible"]),n(C,{ref:"dt",value:t(o).data_local_convergance,dataKey:"id",paginator:!0,rows:8,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{footer:s(()=>[!t(o).data_local_convergance.length==0?(S(),R("div",oo,[n(h,{label:"Submit",icon:"pi pi-check",class:"px-6",style:{background:"#003056"}})])):$("",!0)]),default:s(()=>[n(c,{exportable:!1,style:{"min-width":"8rem"}},{body:s(e=>[n(h,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:U=>w.confirmDeleteProduct(e.data)},null,8,["onClick"])]),_:1}),n(c,{field:"reimbursement_date",header:"Date",style:{"min-width":"12rem"},dataType:"date"},{body:s(e=>[m(_(t(o).formatDate(e.data.travelled_date)),1)]),_:1}),n(c,{header:"Mode Of Transport",style:{"min-width":"12rem"}},{body:s(e=>[m(_(e.data.mode_of_transport),1)]),_:1}),n(c,{field:"travel_from",header:"From ",style:{"min-width":"8rem"}},{body:s(e=>[m(_(e.data.travel_from),1)]),_:1}),n(c,{field:"travel_to",header:"To",style:{"min-width":"8rem"}},{body:s(e=>[m(_(e.data.travel_to),1)]),_:1}),n(c,{field:"total_distance_travelled",header:"Total Distance",style:{"min-width":"12rem"}},{body:s(e=>[m(_(e.data.total_distance_travelled),1)]),_:1}),n(c,{field:"Amt_km",header:"Amt/Km",style:{"min-width":"12rem"}},{body:s(e=>[m(_(e.data.Amt_km),1)]),_:1}),n(c,{field:"local_convenyance_total_amount",header:"Amount",style:{"min-width":"12rem"}},{body:s(e=>[m(_(e.data.local_convenyance_total_amount),1)]),_:1}),n(c,{field:"local_conveyance_remarks",header:"Remarks",style:{"min-width":"12rem"}},{body:s(e=>[m(_(e.data.local_conveyance_remarks),1)]),_:1})]),_:1},8,["value"])]),n(T,{visible:t(o).localconvergance_dailog,"onUpdate:visible":a[20]||(a[20]=e=>t(o).localconvergance_dailog=e),style:{width:"450px"},header:"Local Conveyance",modal:!0,class:"p-fluid"},{footer:s(()=>[n(h,{label:"Cancel",icon:"pi pi-times",style:{height:"30px",color:"black"},class:"p-button-text",onClick:t(o).hideDialog},null,8,["onClick"]),n(h,{label:"Save",icon:"pi pi-check",style:{height:"30px",background:"rgb(255 135 38)",color:"white"},onClick:t(o).post_data_for_local_convergance},null,8,["onClick"])]),default:s(()=>[l("div",lo,[to,n(D,{inputId:"dateformat",modelValue:t(o).employee_local_conveyance.travelled_date,"onUpdate:modelValue":a[12]||(a[12]=e=>t(o).employee_local_conveyance.travelled_date=e),dateFormat:"dd/mm/yy"},null,8,["modelValue"])]),l("div",ao,[no,n(r,{modelValue:t(o).employee_local_conveyance.mode_of_transport,"onUpdate:modelValue":a[13]||(a[13]=e=>t(o).employee_local_conveyance.mode_of_transport=e),options:t(o).local_Conveyance_Mode_of_transport,optionLabel:"label",optionValue:"value",placeholder:"Select Mode Of Transport",class:"w-full"},null,8,["modelValue","options"])]),l("div",so,[l("div",io,[ro,n(v,{modelValue:t(o).employee_local_conveyance.travel_from,"onUpdate:modelValue":a[14]||(a[14]=e=>t(o).employee_local_conveyance.travel_from=e)},null,8,["modelValue"])]),l("div",co,[mo,n(v,{modelValue:t(o).employee_local_conveyance.travel_to,"onUpdate:modelValue":a[15]||(a[15]=e=>t(o).employee_local_conveyance.travel_to=e)},null,8,["modelValue"])])]),l("div",_o,[l("div",uo,[po,n(v,{modelValue:t(o).employee_local_conveyance.total_distance_travelled,"onUpdate:modelValue":a[16]||(a[16]=e=>t(o).employee_local_conveyance.total_distance_travelled=e),onInput:t(o).amount_calculation},null,8,["modelValue","onInput"])]),l("div",vo,[bo,n(v,{modelValue:t(o).employee_local_conveyance.total_distance_travelled,"onUpdate:modelValue":a[17]||(a[17]=e=>t(o).employee_local_conveyance.total_distance_travelled=e)},null,8,["modelValue"])])]),l("div",{class:"field col",hidden:t(o).employee_local_conveyance.mode_of_transport!="Public Transport"},[yo,n(v,{modelValue:t(o).employee_local_conveyance.local_convenyance_total_amount,"onUpdate:modelValue":a[18]||(a[18]=e=>t(o).employee_local_conveyance.local_convenyance_total_amount=e)},null,8,["modelValue"])],8,fo),l("div",go,[ho,n(x,{modelValue:t(o).employee_local_conveyance.local_conveyance_remarks,"onUpdate:modelValue":a[19]||(a[19]=e=>t(o).employee_local_conveyance.local_conveyance_remarks=e),autoResize:"",rows:"2",cols:"30"},null,8,["modelValue"])])]),_:1},8,["visible"])])])])])])],64)}}},i=W(ko),wo=Z();i.use(q,{ripple:!0});i.use(ee);i.use(G);i.use(_e);i.use(wo);i.directive("tooltip",oe);i.directive("badge",le);i.directive("ripple",H);i.directive("styleclass",te);i.directive("focustrap",ae);i.component("Button",Q);i.component("DataTable",ne);i.component("Column",se);i.component("ColumnGroup",be);i.component("Row",ve);i.component("Toast",ue);i.component("ConfirmDialog",me);i.component("Dropdown",ie);i.component("InputText",re);i.component("Dialog",ce);i.component("ProgressSpinner",pe);i.component("Calendar",fe);i.component("Textarea",ye);i.component("Chips",ge);i.component("InputNumber",de);i.mount("#vjs_employee_reimbursement");
