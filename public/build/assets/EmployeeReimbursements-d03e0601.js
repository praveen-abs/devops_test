import{i as f,o as T,b as D,g as o,j as n,_ as K,G as b,$ as B,a as A,H as X,w as i,T as z,X as t,l as d,d as L,F as G,e as H,t as _,I as W,P as q,J as Q,R as Y,v as Z}from"./toastservice.esm-a0d835cd.js";import{d as ee,c as oe}from"./pinia-d9f29e2e.js";import{T as le,B as te,S as ae,b as ne,a as se,c as ie}from"./styleclass.esm-56c135f8.js";import{C as re,F as ce,b as me,s as de,a as _e}from"./inputtext.esm-3991e13f.js";import{s as ue}from"./confirmdialog.esm-a4bb0d89.js";import{D as pe}from"./dialogservice.esm-a7589f2a.js";import{s as ve}from"./toast.esm-1e9f1872.js";import{s as be}from"./progressspinner.esm-8999dfce.js";import{s as fe}from"./row.esm-6ebc942e.js";import{s as ye}from"./columngroup.esm-9dd1458e.js";import"./fileupload.esm-c6c8f34a.js";import{s as ge}from"./calendar.esm-7f795d21.js";import{s as he}from"./textarea.esm-eed86e1f.js";import{s as ke}from"./chips.esm-4f80cf5d.js";/* empty css                                                            */import{_ as we}from"./_plugin-vue_export-helper-c27b6911.js";const Ce={},Te={class:"modal-mask"},De={class:"modal-wrapper"},Ve={class:"modal-container red",breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"35vw",height:"40vh"}},xe={class:"modal-body",style:{margin:"auto"}},Pe=o("div",{class:"modal-footer",style:{margin:"auto",display:"flex","justify-content":"center","align-items":"center","margin-top":"120px"}},[o("h5",null,"Please wait...")],-1);function Re(V,l){const y=f("ProgressSpinner");return T(),D("div",Te,[o("div",De,[o("div",Ve,[o("div",xe,[n(y,{style:{width:"80px",height:"80px","margin-left":"170px","margin-top":"20px"},strokeWidth:"6",fill:"var(--surface-ground)",animationDuration:"5s","aria-label":"Custom ProgressSpinner"})]),Pe])])])}const Se=we(Ce,[["render",Re]]),Ae=ee("employee_reimbursment_service",()=>{const V=K(),l=b([]),y=b(!0),a=b(!1),m=B({type_id:1,claim_type:"",claim_amount:Number,eligible_amount:Number,date_of_dispatch:"",proof_of_delivery:"",reimbursment_remarks:"",employee_reimbursement_attachment:""}),x=()=>{e.value=!1,a.value=!0},h=()=>{y.value=!0,c.value=!1},c=b(!1),w=b(!1),r=B({type_id:1,travelled_date:"",mode_of_transport:"",travel_from:"",travel_to:"",total_distance_travelled:"",Amt_km:"",local_convenyance_total_amount:"",local_conveyance_remarks:""}),P=()=>{e.value=!1,w.value=!0,e.value=!1},R=()=>{a.value=!1,w.value=!1,e.value=!1},S=()=>{y.value=!1,c.value=!0},C=u=>u.toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"}),e=b(!1),$=b([{label:"Mobile Bills",value:"Mobile Bills"},{label:"Accommodation",value:"Accommodation"},{label:"Travel Expenses",value:"Travel Expenses"},{label:"Miscellaneous",value:"Miscellaneous"},{label:"Medical Expenses",value:"Medical Expenses"},{label:"Others",value:"Others"}]),M=b([{label:"Public Transport",value:"Public Transport"},{label:"Car",value:"Car"},{label:"Bike",value:"Bike"}]),F=u=>{m.employee_reimbursement_attachment=u.target.files[0],console.log(m.employee_reimbursement_attachment.file)},E=b(),U=b(!0),j=()=>{let u=window.location.origin+"/fetch_all_reimbursements";console.log("AJAX URL : "+u),A.get(u).then(k=>{E.value=k.data,console.log(k.data),U.value=!1})},N=B(m.value),J=u=>{e.value=!0,l.value.push(m),a.value=!1,console.log(m),console.log("post reiburmentt"),console.log(m.employee_reimbursement_attachment);const k=JSON.stringify({reimbursement_data:N});console.log(k),u.preventDefault();let v=globalThis,p=new FormData;p.append("reimbursement_type_id",m.type_id),p.append("file",m.employee_reimbursement_attachment),p.append("claim_type",m.claim_type),p.append("claim_amount",m.claim_amount),p.append("eligible_amount",m.eligible_amount),p.append("remarks",m.reimbursment_remarks),p.append("date_of_dispatch",m.date_of_dispatch),p.append("proof_of_delivery",m.proof_of_delivery);let g=window.location.origin+"/saveReimbursementsData";A.post(g,p).then(O=>{v.success=O.data.success}).catch(O=>{v.output=error,console.log(O)}),V.add({severity:"success",summary:"Saved",detail:"Reimbursement drafted",life:3e3})},I=b([]);return{hideDialog:R,localconvergance_dailog:w,employee_reimbursement:m,employee_local_conveyance:r,onclickOpenLocalConverganceDailog:P,reimbursements_dailog:a,reimbursementsScreen:y,localconverganceScreen:c,fetch_data_from_reimbursment:j,data_reimbursements:E,loading_spinner:U,formatDate:C,amount_calculation:()=>{console.log(r.mode_of_transport),r.mode_of_transport=="Car"?(console.log("Car"),r.local_convenyance_total_amount=r.total_distance_travelled*6,console.log(r.local_convenyance_total_amount)):r.mode_of_transport=="Bike"?(r.local_convenyance_total_amount=r.total_distance_travelled*3.5,console.log("Bike")):r.local_convenyance_total_amount=null},employee_reimbursement_attachment_upload:F,onclickSwitchToReimbursmentTab:h,reimbursement_data:N,post_reimbursment_data:J,reimbursement_datas:l,reimbursment_claim_types:$,onclickOpenReimbursmentDailog:x,post_data_for_local_convergance:u=>{u.preventDefault();let k=globalThis,v=new FormData;v.append("reimbursement_type_id",r.type_id),v.append("date",r.travelled_date),v.append("user_comments",r.local_conveyance_remarks),v.append("from",r.travel_from),v.append("to",r.travel_to),v.append("vehicle_type",r.mode_of_transport),v.append("distance_travelled",r.total_distance_travelled);let p=window.location.origin+"/saveReimbursementsData";console.log("AJAX URL : "+p),A.post(p,v).then(g=>{r.local_convenyance_total_amount=g.data.total_amount,console.log(g),k.success=g.data.success}).catch(g=>{k.output=g,console.log(g)}).finally(g=>{console.log(g)}),w.value=!1,console.log(r.value),I.value.push(r),V.add({severity:"success",summary:"Draft",detail:"Draft Saved",life:3e3})},fetch_data_for_local_convergance:()=>{let u=window.location.origin+"/fetch_all_reimbursements";console.log("AJAX URL : "+u),A.get(u).then(k=>{console.log(k.data),U.value=!1})},onclickSwitchToLocalCoverganceTab:S,data_local_convergance:I,local_Conveyance_Mode_of_transport:M}});const Le={class:"reimbursement-wrapper mt-30"},$e={class:"mb-2 card left-line"},Ue={class:"pt-1 pb-1 card-body"},Oe={class:"row"},Be={class:"col-sm-12 col-md-7 col-lg-7 col-xl-7 col-xxl-7"},Ee={class:"nav nav-pills nav-tabs-dashed",role:"tablist"},Ne={class:"nav-item text-muted",role:"presentation"},Ie={class:"nav-item text-muted ms-5",role:"presentation"},Me={class:"col-sm-12 col-md-5 col-lg-5 col-xl-5 col-xxl-5 d-flex justify-content-end"},Fe=o("i",{class:"fa fa-plus-circle me-1"},null,-1),je=o("i",{class:"fa fa-plus-circle me-1"},null,-1),Je={class:"card"},Ke={class:"card-body"},Xe={class:"tab-content",id:"pills-tabContent"},ze={class:"tab-pane show fade active",id:"reimbursement",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ge={id:"table"},He={class:"card"},We={class:"field"},qe=o("label",{for:"name"},"Claim Type",-1),Qe={class:"grid formgrid"},Ye={class:"field col"},Ze=o("label",{for:"Claim Amount"},"Claim Amount",-1),eo={class:"field col"},oo=o("label",{for:"Eligible Amount"},"Eligible Amount",-1),lo={class:"field"},to=o("label",{class:"mb-3"},"Remarks",-1),ao={class:"formgrid"},no={class:"field"},so=o("label",{class:"mb-3"},"file Upload",-1),io={class:"formgrid"},ro=o("label",{id:"file_upload",for:"upload"},"Choose file",-1),co={class:"tab-pane fade",id:"localConveyance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},mo={class:"card"},_o={key:0,class:"text-center"},uo={class:"field"},po=o("label",{for:"name"},"Date",-1),vo={class:"field col"},bo=o("label",{for:"Claim Amount"},"Mode of transport",-1),fo={class:"grid formgrid"},yo={class:"field col"},go=o("label",{for:"Eligible Amount"},"From",-1),ho={class:"field col"},ko=o("label",{for:"Claim Amount"},"To",-1),wo={class:"grid formgrid"},Co={class:"field col"},To=o("label",{for:"Eligible Amount"},"Total Distance",-1),Do={class:"field col"},Vo=o("label",{for:"Eligible Amount"},"Amt/Km",-1),xo=["hidden"],Po=o("label",{for:"Eligible Amount"},"Amount",-1),Ro={class:"field col"},So=o("label",{for:"Eligible Amount"},"Remarks",-1),Ao={__name:"EmployeeReimbursements",setup(V){const l=Ae();return X(()=>{l.fetch_data_for_local_convergance()}),(y,a)=>{const m=f("Toast"),x=f("Calendar"),h=f("Button"),c=f("Column"),w=f("DataTable"),r=f("Dropdown"),P=f("InputNumber"),R=f("Textarea"),S=f("Dialog"),C=f("InputText");return T(),D(G,null,[n(m),n(z,{name:"modal"},{default:i(()=>[t(l).loading_spinner?(T(),H(Se,{key:0})):L("",!0)]),_:1}),o("div",Le,[o("div",$e,[o("div",Ue,[o("div",Oe,[o("div",Be,[o("ul",Ee,[o("li",Ne,[o("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#reimbursement","aria-selected":"true",role:"tab",onClick:a[0]||(a[0]=(...e)=>t(l).onclickSwitchToReimbursmentTab&&t(l).onclickSwitchToReimbursmentTab(...e))}," Reimbursement ")]),o("li",Ie,[o("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#localConveyance","aria-selected":"true",role:"tab",onClick:a[1]||(a[1]=(...e)=>t(l).onclickSwitchToLocalCoverganceTab&&t(l).onclickSwitchToLocalCoverganceTab(...e))}," Local Conveyance ")])])]),o("div",Me,[n(x,{modelValue:y.date,"onUpdate:modelValue":a[2]||(a[2]=e=>y.date=e),view:"month",dateFormat:"mm/yy",class:"mr-4",placeholder:"Select Month"},null,8,["modelValue"]),t(l).reimbursementsScreen?(T(),D("button",{key:0,onClick:a[3]||(a[3]=(...e)=>t(l).onclickOpenReimbursmentDailog&&t(l).onclickOpenReimbursmentDailog(...e)),class:"btn btn-orange"},[Fe,d("Add Claim ")])):L("",!0),t(l).localconverganceScreen?(T(),D("button",{key:1,onClick:a[4]||(a[4]=(...e)=>t(l).onclickOpenLocalConverganceDailog&&t(l).onclickOpenLocalConverganceDailog(...e)),class:"btn btn-orange"},[je,d("Add Claim ")])):L("",!0)])])])]),o("div",Je,[o("div",Ke,[o("div",Xe,[o("div",ze,[o("div",Ge,[o("div",null,[o("div",He,[n(w,{ref:"dt",value:t(l).reimbursement_datas,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:i(()=>[n(c,{exportable:!1,style:{"min-width":"8rem"}},{body:i(e=>[n(h,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:$=>y.confirmDeleteProduct(e.data)},null,8,["onClick"])]),_:1}),n(c,{header:"Claim Type",style:{"min-width":"8rem"}},{body:i(e=>[d(_(e.data.claim_type),1)]),_:1}),n(c,{field:"",header:"Claim Amount",style:{"min-width":"12rem"}},{body:i(e=>[d(_("₹"+e.data.claim_amount),1)]),_:1}),n(c,{field:"",header:"Eligible Amount",style:{"min-width":"12rem"}},{body:i(e=>[d(_("₹"+e.data.eligible_amount),1)]),_:1}),n(c,{field:"",header:"Remarks",style:{"min-width":"12rem"}},{body:i(e=>[d(_(e.data.reimbursment_remarks),1)]),_:1}),n(c,{field:"",header:"Status",style:{"min-width":"12rem"}},{body:i(e=>[d(_(e.data.eligible_amount),1)]),_:1}),n(c,{field:"",header:"Date Of Dispatch",style:{"min-width":"12rem"}},{body:i(e=>[d(_("₹"+e.data.eligible_amount),1)]),_:1}),n(c,{field:"",header:"Proof Of Delivery",style:{"min-width":"12rem"}},{body:i(e=>[d(_("₹"+e.data.eligible_amount),1)]),_:1})]),_:1},8,["value"])]),n(S,{visible:t(l).reimbursements_dailog,"onUpdate:visible":a[10]||(a[10]=e=>t(l).reimbursements_dailog=e),style:{width:"450px"},header:"Reimbursement Detials",modal:!0,class:"p-fluid"},{footer:i(()=>[n(h,{label:"Cancel",icon:"pi pi-times",style:{height:"30px",color:"black"},class:"p-button-text",onClick:t(l).hideDialog},null,8,["onClick"]),n(h,{label:"Save",disabled:!(!t(l).employee_reimbursement.claim_type==""&&!t(l).employee_reimbursement.claim_amount==""),icon:"pi pi-check",style:{height:"30px",background:"rgb(255 135 38)",color:"white"},onClick:t(l).post_reimbursment_data},null,8,["disabled","onClick"])]),default:i(()=>[o("div",We,[qe,n(r,{modelValue:t(l).employee_reimbursement.claim_type,"onUpdate:modelValue":a[5]||(a[5]=e=>t(l).employee_reimbursement.claim_type=e),options:t(l).reimbursment_claim_types,optionLabel:"label",optionValue:"value",placeholder:"Select Claim Type"},null,8,["modelValue","options"])]),o("div",Qe,[o("div",Ye,[Ze,n(P,{modelValue:t(l).employee_reimbursement.claim_amount,"onUpdate:modelValue":a[6]||(a[6]=e=>t(l).employee_reimbursement.claim_amount=e),mode:"currency",currency:"INR",locale:"en-IN"},null,8,["modelValue"])]),o("div",eo,[oo,n(P,{modelValue:t(l).employee_reimbursement.eligible_amount,"onUpdate:modelValue":a[7]||(a[7]=e=>t(l).employee_reimbursement.eligible_amount=e),mode:"currency",currency:"INR",locale:"en-IN",integeronly:""},null,8,["modelValue"])])]),o("div",lo,[to,o("div",ao,[n(R,{modelValue:t(l).employee_reimbursement.reimbursment_remarks,"onUpdate:modelValue":a[8]||(a[8]=e=>t(l).employee_reimbursement.reimbursment_remarks=e),autoResize:"",rows:"2",cols:"30"},null,8,["modelValue"])])]),o("div",no,[so,o("div",io,[o("input",{onChange:a[9]||(a[9]=e=>t(l).employee_reimbursement_attachment_upload(e)),ref:"employee_service.employee_reimbursement_attachment",type:"file",id:"upload",hidden:""},null,544),ro])])]),_:1},8,["visible"])])])])]),o("div",co,[o("div",null,[o("div",mo,[n(w,{ref:"dt",value:t(l).data_local_convergance,dataKey:"id",paginator:!0,rows:8,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{footer:i(()=>[!t(l).data_local_convergance.length==0?(T(),D("div",_o,[n(h,{label:"Submit",icon:"pi pi-check",class:"px-6",style:{background:"#003056"}})])):L("",!0)]),default:i(()=>[n(c,{exportable:!1,style:{"min-width":"8rem"}},{body:i(e=>[n(h,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:$=>y.confirmDeleteProduct(e.data)},null,8,["onClick"])]),_:1}),n(c,{field:"reimbursement_date",header:"Date",style:{"min-width":"12rem"},dataType:"date"},{body:i(e=>[d(_(t(l).formatDate(e.data.travelled_date)),1)]),_:1}),n(c,{header:"Mode Of Transport",style:{"min-width":"12rem"}},{body:i(e=>[d(_(e.data.mode_of_transport),1)]),_:1}),n(c,{field:"travel_from",header:"From ",style:{"min-width":"8rem"}},{body:i(e=>[d(_(e.data.travel_from),1)]),_:1}),n(c,{field:"travel_to",header:"To",style:{"min-width":"8rem"}},{body:i(e=>[d(_(e.data.travel_to),1)]),_:1}),n(c,{field:"total_distance_travelled",header:"Total Distance",style:{"min-width":"12rem"}},{body:i(e=>[d(_(e.data.total_distance_travelled),1)]),_:1}),n(c,{field:"Amt_km",header:"Amt/Km",style:{"min-width":"12rem"}},{body:i(e=>[d(_(e.data.Amt_km),1)]),_:1}),n(c,{field:"local_convenyance_total_amount",header:"Amount",style:{"min-width":"12rem"}},{body:i(e=>[d(_(e.data.local_convenyance_total_amount),1)]),_:1}),n(c,{field:"local_conveyance_remarks",header:"Remarks",style:{"min-width":"12rem"}},{body:i(e=>[d(_(e.data.local_conveyance_remarks),1)]),_:1})]),_:1},8,["value"])]),n(S,{visible:t(l).localconvergance_dailog,"onUpdate:visible":a[19]||(a[19]=e=>t(l).localconvergance_dailog=e),style:{width:"450px"},header:"Local Conveyance",modal:!0,class:"p-fluid"},{footer:i(()=>[n(h,{label:"Cancel",icon:"pi pi-times",style:{height:"30px",color:"black"},class:"p-button-text",onClick:t(l).hideDialog},null,8,["onClick"]),n(h,{label:"Save",icon:"pi pi-check",style:{height:"30px",background:"rgb(255 135 38)",color:"white"},onClick:t(l).post_data_for_local_convergance},null,8,["onClick"])]),default:i(()=>[o("div",uo,[po,n(x,{inputId:"dateformat",modelValue:t(l).employee_local_conveyance.travelled_date,"onUpdate:modelValue":a[11]||(a[11]=e=>t(l).employee_local_conveyance.travelled_date=e),dateFormat:"dd/mm/yy"},null,8,["modelValue"])]),o("div",vo,[bo,n(r,{modelValue:t(l).employee_local_conveyance.mode_of_transport,"onUpdate:modelValue":a[12]||(a[12]=e=>t(l).employee_local_conveyance.mode_of_transport=e),options:t(l).local_Conveyance_Mode_of_transport,optionLabel:"label",optionValue:"value",placeholder:"Select Mode Of Transport",class:"w-full"},null,8,["modelValue","options"])]),o("div",fo,[o("div",yo,[go,n(C,{modelValue:t(l).employee_local_conveyance.travel_from,"onUpdate:modelValue":a[13]||(a[13]=e=>t(l).employee_local_conveyance.travel_from=e)},null,8,["modelValue"])]),o("div",ho,[ko,n(C,{modelValue:t(l).employee_local_conveyance.travel_to,"onUpdate:modelValue":a[14]||(a[14]=e=>t(l).employee_local_conveyance.travel_to=e)},null,8,["modelValue"])])]),o("div",wo,[o("div",Co,[To,n(C,{modelValue:t(l).employee_local_conveyance.total_distance_travelled,"onUpdate:modelValue":a[15]||(a[15]=e=>t(l).employee_local_conveyance.total_distance_travelled=e),onInput:t(l).amount_calculation},null,8,["modelValue","onInput"])]),o("div",Do,[Vo,n(C,{modelValue:t(l).employee_local_conveyance.total_distance_travelled,"onUpdate:modelValue":a[16]||(a[16]=e=>t(l).employee_local_conveyance.total_distance_travelled=e)},null,8,["modelValue"])])]),o("div",{class:"field col",hidden:t(l).employee_local_conveyance.mode_of_transport!="Public Transport"},[Po,n(C,{modelValue:t(l).employee_local_conveyance.local_convenyance_total_amount,"onUpdate:modelValue":a[17]||(a[17]=e=>t(l).employee_local_conveyance.local_convenyance_total_amount=e)},null,8,["modelValue"])],8,xo),o("div",Ro,[So,n(R,{modelValue:t(l).employee_local_conveyance.local_conveyance_remarks,"onUpdate:modelValue":a[18]||(a[18]=e=>t(l).employee_local_conveyance.local_conveyance_remarks=e),autoResize:"",rows:"2",cols:"30"},null,8,["modelValue"])])]),_:1},8,["visible"])])])])])])],64)}}},s=W(Ao),Lo=oe();s.use(q,{ripple:!0});s.use(re);s.use(Q);s.use(pe);s.use(Lo);s.directive("tooltip",le);s.directive("badge",te);s.directive("ripple",Y);s.directive("styleclass",ae);s.directive("focustrap",ce);s.component("Button",Z);s.component("DataTable",ne);s.component("Column",se);s.component("ColumnGroup",ye);s.component("Row",fe);s.component("Toast",ve);s.component("ConfirmDialog",ue);s.component("Dropdown",me);s.component("InputText",de);s.component("Dialog",_e);s.component("ProgressSpinner",be);s.component("Calendar",ge);s.component("Textarea",he);s.component("Chips",ke);s.component("InputNumber",ie);s.mount("#vjs_employee_reimbursement");
