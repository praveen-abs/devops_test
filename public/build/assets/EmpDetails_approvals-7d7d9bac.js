import{H as p,I as O,o as L,c as F,h as l,w as s,d as r,j as k,t as _,a2 as P,b as H,a as J,X as f,g,J as Q,P as z,K,R as W,u as Y,v as G,Q as X,L as q,N as Z,A as ee,M as oe}from"./toastservice.esm-28d3ae2b.js";import{d as te,c as le}from"./pinia-e771661c.js";import{T as ae,B as se,S as ne,b as ie,a as re}from"./styleclass.esm-3c85e840.js";import"./blockui.esm-d26f8782.js";import{D as ce}from"./dialogservice.esm-82e9a52f.js";import{C as pe}from"./confirmationservice.esm-ac7837bb.js";import{s as ue}from"./progressspinner.esm-713a603e.js";import{s as de}from"./row.esm-6ebc942e.js";import{s as me}from"./columngroup.esm-9dd1458e.js";import{s as ve}from"./calendar.esm-2f7b0fa0.js";import{h as fe}from"./moment-fbc5633a.js";import{s as ge}from"./checkbox.esm-1a77b157.js";import{s as be}from"./tag.esm-a3e5dfa8.js";import{a as D}from"./index-3716a3fc.js";import{m as we}from"./map-fe2cdc34.js";import"./_commonjsHelpers-042e6b4d.js";import"./_baseToString-a2807de3.js";const he=te("EmpDetailApprovalsStore",()=>{const b=p();async function w(){await D.get("/fetch-proof-doc").then(m=>{console.log(m.data),b.value=m.data,console.log(b.value)}).finally(()=>{})}return{array_EmpDetails_list:b,getEmpDetails_list:w}}),ye=r("h5",{style:{"text-align":"center"}},"Please wait...",-1),Ce={class:"confirmation-content"},Se={class:"confirmation-content"},Ae=r("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),ke=["src","alt"],_e={__name:"EmpDetails_approvals",setup(b){const w=he(),m=p([]),h=p(),y=p(!1),C=p(!1);let n=null,d=null;const v=p(!1),R=p(!1),x=p();O(async()=>{await w.getEmpDetails_list()}),p({global:{value:null,matchMode:f.CONTAINS},name:{value:null,matchMode:f.STARTS_WITH,matchMode:f.EQUALS,matchMode:f.CONTAINS},status:{value:"Pending",matchMode:f.EQUALS}});const U=t=>{v.value=!0,R.value=!0,D.post("/view-profile-private-file",{emp_doc_record_id:t}).then(e=>{console.log(e.data.data),x.value=e.data.data,console.log("data sent",x.value)}).finally(()=>{v.value=!1})};function $(t,e){C.value=!0,n=e,d=t,console.log("Selected Bulk Row Data : "+JSON.stringify(t))}function S(){n="",d=null}function E(t){C.value=!1,t&&S()}function B(t){y.value=!1,t&&S()}const T=(t,e)=>{y.value=!0,n=e,d=t},M=()=>{B();let t=we(d,"record_id");console.log("Processing Rowdata : "+JSON.stringify(d.documents)),console.log("currentlySelectedStatus : "+n),console.log("Processed doc record ids : "+t),D.post("/approvals/EmployeeProof-bulkdocs-approve-reject",{record_id:t,status:n=="Approve"?"Approved":n=="Reject"?"Rejected":n,reviewer_comments:""}).then(e=>{console.log("testing data",e.data)}).finally(()=>{S()})};function V(){E(),D.post("/approvals/EmployeeProof-docs-approve-reject",{record_id:d.record_id,status:n=="Approve"?"Approved":n=="Reject"?"Rejected":n,reviewer_comments:""}).then(t=>{console.log("testing data",t.data)}).finally(()=>{S()})}return(t,e)=>{const I=g("ProgressSpinner"),A=g("Dialog"),c=g("Button"),i=g("Column"),N=g("DataTable");return L(),F("div",null,[l(A,{header:"Header",visible:v.value,"onUpdate:visible":e[0]||(e[0]=a=>v.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:s(()=>[l(I,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:s(()=>[ye]),_:1},8,["visible"]),l(A,{header:"Confirmation",visible:y.value,"onUpdate:visible":e[3]||(e[3]=a=>y.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"580px"},modal:!0},{footer:s(()=>[l(c,{label:"Yes",icon:"pi pi-check",onClick:e[1]||(e[1]=a=>M()),class:"p-button-text",autofocus:""}),l(c,{label:"No",icon:"pi pi-times",onClick:e[2]||(e[2]=a=>B(!0)),class:"p-button-text"})]),default:s(()=>[r("div",Ce,[k(" Documents Approvals "),r("span",null,"Are you sure you want to "+_(P(n))+" all the documents of this employee?",1)])]),_:1},8,["visible"]),l(A,{header:"Confirmation",visible:C.value,"onUpdate:visible":e[6]||(e[6]=a=>C.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:s(()=>[l(c,{label:"Yes",icon:"pi pi-check",onClick:e[4]||(e[4]=a=>V()),class:"p-button-text",autofocus:""}),l(c,{label:"No",icon:"pi pi-times",onClick:e[5]||(e[5]=a=>E(!0)),class:"p-button-text"})]),default:s(()=>[r("div",Se,[Ae,r("span",null,"Are you sure you want to "+_(P(n))+"?",1)])]),_:1},8,["visible"]),l(N,{value:P(w).array_EmpDetails_list,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:t.onRowExpand,onRowCollapse:t.onRowCollapse,expandedRows:m.value,"onUpdate:expandedRows":e[8]||(e[8]=a=>m.value=a),selection:h.value,"onUpdate:selection":e[9]||(e[9]=a=>h.value=a),selectAll:t.selectAll,onSelectAllChange:t.onSelectAllChange,onRowSelect:t.onRowSelect,onRowUnselect:t.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{empty:s(()=>[k(" No Employee Details documents for the selected status filter ")]),expansion:s(a=>[r("div",null,[l(N,{value:a.data.documents,responsiveLayout:"scroll",selection:h.value,"onUpdate:selection":e[7]||(e[7]=u=>h.value=u),selectAll:t.selectAll,onSelectAllChange:t.onSelectAllChange},{default:s(()=>[l(i,{field:"doc_name",header:"Document Name"},{default:s(()=>[k(_(a.data.doc_name),1)]),_:2},1024),l(i,{field:"doc_status",header:"Status"}),l(i,{field:"",header:"View"},{body:s(u=>[l(c,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:j=>U(u.data.record_id),style:{height:"2em"}},null,8,["onClick"])]),_:2},1024),l(i,{field:"",header:"Action"},{body:s(u=>[r("span",null,[l(c,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve",onClick:j=>$(u.data,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),l(c,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2.5em"},onClick:j=>$(u.data,"Reject")},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:s(()=>[l(i,{expander:!0}),l(i,{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),l(i,{field:"user_code",header:"Employee Id",sortable:""}),l(i,{field:"name",header:"Employee Name"}),l(i,{field:"doc_status",header:"Approval Status",sortable:!1},{body:s(({data:a})=>[k(_(a.doc_status),1)]),_:1}),l(i,{field:"",header:"Action"},{body:s(a=>[r("span",null,[l(c,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve All",onClick:u=>T(a.data.documents,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),l(c,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject All",style:{"margin-left":"8px",height:"2.5em"},onClick:u=>T(a.data.documents,"Reject")},null,8,["onClick"])])]),_:1})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"]),v.value==!1?(L(),H(A,{key:0,visible:R.value,"onUpdate:visible":e[10]||(e[10]=a=>R.value=a),class:"z-0",modal:"",header:"Documents",style:{width:"40vw"}},{default:s(()=>[r("img",{src:`data:image/png;base64,${x.value}`,alt:t.doc_url,class:"block pb-3 m-auto"},null,8,ke)]),_:1},8,["visible"])):J("",!0)])}}},o=Q(_e),De=le();o.use(z,{ripple:!0});o.use(pe);o.use(K);o.use(ce);o.use(De);o.directive("tooltip",ae);o.directive("badge",se);o.directive("ripple",W);o.directive("styleclass",ne);o.directive("focustrap",Y);o.component("Button",G);o.component("DataTable",ie);o.component("Column",re);o.component("ColumnGroup",me);o.component("Row",de);o.component("Toast",X);o.component("ConfirmDialog",q);o.component("Dropdown",Z);o.component("InputText",ee);o.component("Dialog",oe);o.component("ProgressSpinner",ue);o.component("Calendar",ve);o.component("moment",fe);o.component("Checkbox",ge);o.component("Tag",be);o.mount("#EmpDetails_approvals");
