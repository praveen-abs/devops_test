import{d as I}from"./dayjs.min-2f06af28.js";import{e as W}from"./exceljs.min-edd65134.js";import{a as H,c as C}from"./index-362795f3.js";import{d as Y}from"./pinia-6d7ff470.js";import{Q as m,aa as c,o as g,c as y,d as t,t as f,a as P,ae as T,g as A,h as v,n as O,F as U,f as F,ag as G,b as z,l as X,w as R,ai as q,aj as K}from"./inputnumber.esm-4a242a4c.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{L as Q}from"./LoadingSpinner-3dabac18.js";import"./_commonjs-dynamic-modules-302442b1.js";/* empty css                                                                       */const M=Y("useAttendanceDashboardMainStore",()=>{const _=m(!1);m();const a=m(),h=m(),l=m(!1),u=m([]),d=m(),o=m(),r=m([]);return{canShowLoading:_,attendanceDashboardWorkShiftSource:h,getAttendanceDashboardMainSource:async()=>{_.value=!0;let e="/get-attendance-dashboard";await H.get(e).then(n=>{a.value=n.data.attendance_overview,h.value=n.data.work_shift;let x=Object.entries(n.data.upcomings).map(i=>({title:i[0],value:i[1]}));o.value=x}).finally(()=>{_.value=!1})},attendanceOverview:a,canShowShiftDetails:l,currentlySelectedShiftDetails:u,currentlySelectedShiftName:d,downloadShiftDetails:r,attendanceDashboardUpcoming:o}}),J={key:0,class:"grid grid-cols-7 gap-4"},Z={class:"bg-white rounded-lg p-2 border"},tt={class:"px-auto flex justify-center"},et={class:"text-2xl font-semibold text-center"},ot=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Present",-1),st={class:"bg-white rounded-lg p-2 border"},nt={class:"px-auto flex justify-center"},at={class:"text-2xl font-semibold text-center"},it=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Absent",-1),ct={class:"bg-white rounded-lg p-2 border"},dt={class:"px-auto flex justify-center"},lt={class:"text-2xl font-semibold text-center"},rt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Leave",-1),_t={class:"bg-white rounded-lg p-2 border"},ut={class:"px-auto flex justify-center"},pt={class:"text-2xl font-semibold text-center"},ht=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Late coming",-1),ft={class:"bg-white rounded-lg p-2 border"},mt={class:"px-auto flex justify-center"},xt={class:"text-2xl font-semibold text-center"},vt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Early going",-1),bt={class:"bg-white rounded-lg p-2 border"},gt={class:"px-auto flex justify-center"},yt={class:"text-2xl font-semibold text-center"},wt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Missed in punch",-1),St={class:"bg-white rounded-lg p-2 border"},$t={class:"px-auto flex justify-center"},kt={class:"text-2xl font-semibold text-center"},Dt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Missed out punch",-1),Ct={__name:"attendanceCount",setup(_){const a=M();return(h,l)=>c(a).attendanceOverview?(g(),y("div",J,[t("div",Z,[t("div",tt,[t("span",et,f(c(a).attendanceOverview.present_count),1)]),ot]),t("div",st,[t("div",nt,[t("span",at,f(c(a).attendanceOverview.absent_count),1)]),it]),t("div",ct,[t("div",dt,[t("span",lt,f(c(a).attendanceOverview.leave_emp_count),1)]),rt]),t("div",_t,[t("div",ut,[t("span",pt,f(c(a).attendanceOverview.lg_count),1)]),ht]),t("div",ft,[t("div",mt,[t("span",xt,f(c(a).attendanceOverview.eg_count),1)]),vt]),t("div",bt,[t("div",gt,[t("span",yt,f(c(a).attendanceOverview.mip_count),1)]),wt]),t("div",St,[t("div",$t,[t("span",kt,f(c(a).attendanceOverview.mop_count),1)]),Dt])])):P("",!0)}},Et={},At={class:"p-2 overflow-hidden bg-white rounded-lg border",style:{height:"200px"}},Mt=t("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Exception Analytics",-1),jt=t("div",{class:"h-full overflow-x-scroll bg-white rounded-lg"},[t("p",{class:"font-medium text-sm text-center"},"No data to display")],-1),Lt=[Mt,jt];function Rt(_,a){return g(),y("div",At,Lt)}const Ot=N(Et,[["render",Rt]]);const Pt={class:"bg-white rounded-lg p-2 border"},Ut=t("p",{class:"font-semibold text-[14px] text-[#000] font-['Poppins] text-center"},"Attendance Analytics",-1),Bt={class:"grid grid-cols-2 gap-4 my-2.5"},Tt={class:"h-full"},Ft={class:"flex items-center"},Nt={class:"my-auto"},Vt=t("div",null,null,-1),It={__name:"attendanceAnalytics",setup(_){T(()=>{a.value=u(),h.value=d()});const a=m(),h=m(),l=m(0),u=()=>{const o=getComputedStyle(document.body);return{labels:["Bio-Metric","Mobile","Web"],datasets:[{data:[1,1,1],backgroundColor:["rgba(122, 94, 162, 1)","rgba(255, 177, 184, 1)","rgba(107, 183, 192, 1)"],hoverBackgroundColor:[o.getPropertyValue("--blue-400"),o.getPropertyValue("--yellow-400"),o.getPropertyValue("--green-400")]}]}},d=()=>{const o=getComputedStyle(document.documentElement),r=o.getPropertyValue("--text-color");return o.getPropertyValue("--text-color-secondary"),o.getPropertyValue("--surface-border"),{maintainAspectRatio:!1,aspectRatio:1,plugins:{labels:{usePointStyle:!0},title:{display:!1,text:"Custom Chart Title"},legend:{display:!1,labels:{fontColor:r}}}}};return(o,r)=>{const b=A("Chart");return g(),y("div",Pt,[Ut,t("div",Bt,[t("div",Tt,[v(b,{type:"pie",data:a.value,options:h.value},null,8,["data","options"])]),t("div",Ft,[t("div",Nt,[t("div",null,[t("button",{class:O(["orange_btn font-semibold text-sm",[l.value===1?"bg-white text-slate-600 border border-black":"text-slate-600"]]),onClick:r[0]||(r[0]=e=>l.value=0)},"Check In ",2),t("button",{class:O(["Enable_btn font-semibold text-sm",[l.value===1?"bg-[#d4d4d4] text-slate-600":"text-slate-600"]]),onClick:r[1]||(r[1]=e=>l.value=1)},"Check Out ",2)]),Vt])])])])}}},Wt={class:"p-2 overflow-hidden bg-white rounded-lg border",style:{height:"200px"}},Ht=t("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Upcomings",-1),Yt={class:"h-full overflow-x-scroll bg-white rounded-lg"},Gt={class:"px-auto"},zt={class:"p-2 my-2 transition duration-700 ease-in-out bg-[#E4ECFF] rounded-lg cursor-pointer hover:-translate-y-1 hover:scale-100"},Xt={class:"flex px-2 justify-between items-center"},qt={class:"text-[14px] font-semibold"},Kt={class:"flex items-center gap-6"},Qt={class:"text-xl font-semibold text-black"},Jt=t("span",null,[t("i",{class:"fa fa-chevron-right","aria-hidden":"true"})],-1),Zt={key:1,class:"font-medium text-sm text-center"},te={__name:"Upcomings",setup(_){const a=M();return(h,l)=>(g(),y("div",Wt,[Ht,t("div",Yt,[c(a).attendanceDashboardUpcoming?(g(!0),y(U,{key:0},F(c(a).attendanceDashboardUpcoming,u=>(g(),y("div",Gt,[t("div",zt,[t("div",Xt,[t("div",null,[t("span",qt,f(u.title),1)]),t("div",Kt,[t("span",Qt,f(u.value),1),Jt])])])]))),256)):(g(),y("p",Zt,"No data to display"))])]))}},ee={key:0,class:"bg-white p-2 rounded-lg border"},oe=t("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Shift",-1),se={class:"grid grid-cols-6 gap-2 my-2"},ne=["onClick"],ae={class:"w-full bg-gray-200 p-2 rounded-lg"},ie={class:"font-semibold text-[12px] text-[#000] font-['Poppins]"},ce={class:"p-2"},de=t("p",{class:"font-semibold text-sm text-[#000] font-['Poppins]"},"Shift Timing",-1),le={class:"font-medium text-[12px] text-gray-600 font-['Poppins]"},re={class:"my-3"},_e=t("p",{class:"font-semibold text-sm text-[#000] font-['Poppins]"},"Total Employees",-1),ue={class:"font-medium text-[12px] text-gray-600 font-['Poppins]"},pe=G('<div class="flex justify-between"><div><p class="font-semibold text-sm text-[#000] font-[&#39;Poppins]">Present</p><p class="font-medium text-[12px] text-gray-600 font-[&#39;Poppins]">-</p></div><div class="mx-3"><p class="font-semibold text-sm text-[#000] font-[&#39;Poppins]">Absent</p><p class="font-medium text-[12px] text-gray-600 font-[&#39;Poppins]">-</p></div></div>',1),he={__name:"Shifts",setup(_){const a=M();function h(l){const[u,d]=l.split(":").map(Number),o=u>=12?"PM":"AM";return`${u%12===0?12:u%12}:${String(d).padStart(2,"0")} ${o}`}return(l,u)=>c(a).attendanceDashboardWorkShiftSource?(g(),y("div",ee,[oe,t("div",se,[(g(!0),y(U,null,F(c(a).attendanceDashboardWorkShiftSource,(d,o)=>(g(),y("div",{class:"bg-gray-100 w-[180px] h-[200px] rounded-lg cursor-pointer",onClick:r=>(c(a).canShowShiftDetails=!0,c(a).currentlySelectedShiftDetails={...d.work_shift_employee_data},c(a).downloadShiftDetails.push({...d.work_shift_employee_data})),key:o},[t("div",ae,[t("span",ie,f(d.work_shift_employee_data[0].shift_name),1)]),t("div",ce,[t("div",null,[de,t("p",le,f(h(d.work_shift_employee_data[0].shift_start_time))+" - "+f(h(d.work_shift_employee_data[0].shift_end_time)),1)]),t("div",re,[_e,t("p",ue,f(d.work_shift_assigned_employees?d.work_shift_assigned_employees:"-"),1)]),pe])],8,ne))),128))])])):P("",!0)}};var B={},fe={get exports(){return B},set exports(_){B=_}};(function(_,a){(function(h,l){l()})(C,function(){function h(e,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function l(e,n,x){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){b(i.response,n,x)},i.onerror=function(){console.error("could not download file")},i.send()}function u(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function d(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof C=="object"&&C.global===C?C:void 0,r=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,n,x){var i=o.URL||o.webkitURL,p=document.createElement("a");n=n||e.name||"download",p.download=n,p.rel="noopener",typeof e=="string"?(p.href=e,p.origin===location.origin?d(p):u(p.href)?l(e,n,x):d(p,p.target="_blank")):(p.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(p.href)},4e4),setTimeout(function(){d(p)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,x){if(n=n||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(h(e,x),n);else if(u(e))l(e,n,x);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){d(i)})}}:function(e,n,x,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return l(e,n,x);var p=e.type==="application/octet-stream",D=/constructor/i.test(o.HTMLElement)||o.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||p&&D||r)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var k=S.result;k=w?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=k:location=k,i=null},S.readAsDataURL(e)}else{var $=o.URL||o.webkitURL,E=$.createObjectURL(e);i?i.location=E:location.href=E,i=null,setTimeout(function(){$.revokeObjectURL(E)},4e4)}});o.saveAs=b.saveAs=b,_.exports=b})})(fe);const j=_=>(q("data-v-bfac7129"),_=_(),K(),_),me={class:"w-full"},xe=j(()=>t("p",{class:"mb-2 text-2xl text-black font-semibold"}," Attendance dashboard ",-1)),ve={class:"bg-white p-2 rounded-lg border flex justify-between"},be={class:"mx-2"},ge={class:"font-[14px] font-['Poppins'] text-gray-500"},ye={class:"mb-2 text-sm font-semibold"},we=j(()=>t("div",{class:"flex justify-end gap-5 mx-4"},null,-1)),Se={class:"my-3"},$e={class:"grid grid-cols-3 gap-6"},ke={class:"my-3"},De={class:"absolute left-0 mx-4 font-semibold fs-5"},Ce={class:"relative right-0 mx-4 font-semibold fs-5"},Ee=j(()=>t("p",{class:"relative left-2 font-['poppins']"},"Download",-1)),Ae=j(()=>t("svg",{width:"22px",height:"16px",viewBox:"0 0 22 16"},[t("path",{d:"M2,10 L6,13 L12.8760559,4.5959317 C14.1180021,3.0779974 16.2457925,2.62289624 18,3.5 L18,3.5 C19.8385982,4.4192991 21,6.29848669 21,8.35410197 L21,10 C21,12.7614237 18.7614237,15 16,15 L1,15",id:"check"}),t("polyline",{points:"4.5 8.5 8 11 11.5 8.5",class:"svg-out"}),t("path",{d:"M8,1 L8,11",class:"svg-out"})],-1)),Me=[Ae],je={class:"mt-6"},Le={__name:"attendanceDashboard",setup(_){const a=M();T(async()=>{await a.getAttendanceDashboardMainSource()}),s;const h=async()=>{const d=new W.Workbook,o=d.addWorksheet("Sheet1"),r=["user_code","user_code","shift_start_time","shift_end_time","shift_end_time"],b="this report generated by ABShrms payroll software ",e=r;o.addRow(e).eachCell((w,S)=>{w.fill={type:"pattern",pattern:"solid",fgColor:{argb:"252f70"}},w.font={bold:!0,color:{argb:"ffffff"}},o.getColumn(S).width=20}),Object.values(a.currentlySelectedShiftDetails).forEach((w,S)=>{console.log(w);const $=[];e.forEach(L=>{$.push(w[L])}),o.addRow($);const V={fill:{type:"pattern",pattern:"solid",fgColor:(S+2)%2===1?{argb:"cad1fa"}:{argb:"cad1fa"}}};o.addRow($).eachCell(L=>{L.style=V})}),[["","",""],["","",""],[b,"",""]].forEach(w=>{o.addRow(w)});const i=await d.xlsx.writeBuffer(),p=window.URL.createObjectURL(new Blob([i])),D=document.createElement("a");D.href=p,D.download="shift.xlsx",D.click(),window.URL.revokeObjectURL(p)},l=m(!1),u=m("downloaded");return(d,o)=>{const r=A("Column"),b=A("DataTable"),e=A("Sidebar");return g(),y(U,null,[c(a).canShowLoading?(g(),z(Q,{key:0,class:"absolute z-50 bg-white"})):P("",!0),t("div",me,[xe,t("div",ve,[t("div",be,[t("p",ge,[X(" Daily Analytics - "),t("span",ye,f(c(I)(new Date).format("MMMM DD,YYYY")),1)])]),we]),t("div",Se,[v(Ct)]),t("div",$e,[t("div",null,[v(Ot)]),t("div",null,[v(It)]),t("div",null,[v(te)])]),t("div",ke,[v(he)])]),v(e,{visible:c(a).canShowShiftDetails,"onUpdate:visible":o[1]||(o[1]=n=>c(a).canShowShiftDetails=n),position:"right",class:"w-full"},{header:R(()=>[t("p",De,f(c(a).currentlySelectedShiftDetails?c(a).currentlySelectedShiftDetails[0].shift_name:null)+" Reports",1),t("div",Ce,[t("button",{class:"bg-[#E6E6E6] p-2 mx-2 rounded-md w-[120px]",onClick:o[0]||(o[0]=n=>(l.value=!l.value,h()))},[Ee,t("div",{id:"btn-download",style:{position:"absolute",right:"0"},class:O([l.value==!0?u.value:" "])},Me,2)])])]),default:R(()=>[t("div",je,[v(b,{value:c(a).currentlySelectedShiftDetails?c(a).currentlySelectedShiftDetails:[]},{default:R(()=>[v(r,{field:"user_code",header:"User code"}),v(r,{field:"name",header:"Name"}),v(r,{field:"shift_start_time",header:"Shift start time"}),v(r,{field:"shift_end_time",header:"Shift end time"}),v(r,{field:"grace_time",header:"Grace time"})]),_:1},8,["value"])])]),_:1},8,["visible"])],64)}}},Ie=N(Le,[["__scopeId","data-v-bfac7129"]]);export{Ie as default};
