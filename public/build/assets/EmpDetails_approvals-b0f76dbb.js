import{H as p,I as O,o as j,c as z,h as t,w as n,d as i,t as _,af as x,j as L,b as F,a as H,X as f,g,J,P as Q,K,R as W,u as Y,v as G,Q as X,L as q,N as Z,A as ee,M as oe}from"./toastservice.esm-8fb4434b.js";import{T as te,B as le,S as ae,b as ne,a as se}from"./styleclass.esm-177a019b.js";import"./blockui.esm-28d5b93f.js";import{D as ie}from"./dialogservice.esm-5a1ef638.js";import{C as re}from"./confirmationservice.esm-70c98e17.js";import{s as ce}from"./progressspinner.esm-ad93ab56.js";import{s as pe}from"./row.esm-6ebc942e.js";import{s as ue}from"./columngroup.esm-9dd1458e.js";import{s as de}from"./calendar.esm-cb84fdd3.js";import{h as me}from"./moment-fbc5633a.js";import{s as ve}from"./checkbox.esm-7d46e5fa.js";import{s as fe}from"./tag.esm-458846fd.js";import{d as ge}from"./pinia-e794dd07.js";import{a as k}from"./index-3716a3fc.js";import{m as be}from"./map-fe2cdc34.js";import"./_commonjsHelpers-042e6b4d.js";import"./_baseToString-a2807de3.js";const we=ge("EmpDetailApprovalsStore",()=>{const b=p();async function w(){await k.get("/fetch-proof-doc").then(m=>{console.log(m.data),b.value=m.data,console.log(b.value)}).finally(()=>{})}return{array_EmpDetails_list:b,getEmpDetails_list:w}}),he=i("h5",{style:{"text-align":"center"}},"Please wait...",-1),ye={class:"confirmation-content"},Ce=i("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),Se={class:"confirmation-content"},Ae=i("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),_e=["src","alt"],ke={__name:"EmpDetails_approvals",setup(b){const w=we(),m=p([]),h=p(),y=p(!1),C=p(!1);let s=null,d=null;const v=p(!1),R=p(!1),D=p();O(async()=>{await w.getEmpDetails_list()}),p({global:{value:null,matchMode:f.CONTAINS},name:{value:null,matchMode:f.STARTS_WITH,matchMode:f.EQUALS,matchMode:f.CONTAINS},status:{value:"Pending",matchMode:f.EQUALS}});const U=o=>{v.value=!0,R.value=!0,k.post("/view-profile-private-file",{emp_doc_record_id:o}).then(e=>{console.log(e.data.data),D.value=e.data.data,console.log("data sent",D.value)}).finally(()=>{v.value=!1})};function $(o,e){C.value=!0,s=e,d=o,console.log("Selected Bulk Row Data : "+JSON.stringify(o))}function S(){s="",d=null}function P(o){C.value=!1,o&&S()}function E(o){y.value=!1,o&&S()}const B=(o,e)=>{y.value=!0,s=e,d=o},M=()=>{E();let o=be(d,"record_id");console.log("Processing Rowdata : "+JSON.stringify(d.documents)),console.log("currentlySelectedStatus : "+s),console.log("Processed doc record ids : "+o),k.post("/approvals/EmployeeProof-bulkdocs-approve-reject",{record_id:o,status:s=="Approve"?"Approved":s=="Reject"?"Rejected":s,reviewer_comments:""}).then(e=>{console.log("testing data",e.data)}).finally(()=>{S()})};function V(){P(),k.post("/approvals/EmployeeProof-docs-approve-reject",{record_id:d.record_id,status:s=="Approve"?"Approved":s=="Reject"?"Rejected":s,reviewer_comments:""}).then(o=>{console.log("testing data",o.data)}).finally(()=>{S()})}return(o,e)=>{const I=g("ProgressSpinner"),A=g("Dialog"),c=g("Button"),r=g("Column"),T=g("DataTable");return j(),z("div",null,[t(A,{header:"Header",visible:v.value,"onUpdate:visible":e[0]||(e[0]=a=>v.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:n(()=>[t(I,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:n(()=>[he]),_:1},8,["visible"]),t(A,{header:"Confirmation",visible:y.value,"onUpdate:visible":e[3]||(e[3]=a=>y.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"580px"},modal:!0},{footer:n(()=>[t(c,{label:"Yes",icon:"pi pi-check",onClick:e[1]||(e[1]=a=>M()),class:"p-button-text",autofocus:""}),t(c,{label:"No",icon:"pi pi-times",onClick:e[2]||(e[2]=a=>E(!0)),class:"p-button-text"})]),default:n(()=>[i("div",ye,[Ce,i("span",null,"Are you sure you want to "+_(x(s))+" all the documents of this employee?",1)])]),_:1},8,["visible"]),t(A,{header:"Confirmation",visible:C.value,"onUpdate:visible":e[6]||(e[6]=a=>C.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:n(()=>[t(c,{label:"Yes",icon:"pi pi-check",onClick:e[4]||(e[4]=a=>V()),class:"p-button-text",autofocus:""}),t(c,{label:"No",icon:"pi pi-times",onClick:e[5]||(e[5]=a=>P(!0)),class:"p-button-text"})]),default:n(()=>[i("div",Se,[Ae,i("span",null,"Are you sure you want to "+_(x(s))+"?",1)])]),_:1},8,["visible"]),t(T,{value:x(w).array_EmpDetails_list,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:o.onRowExpand,onRowCollapse:o.onRowCollapse,expandedRows:m.value,"onUpdate:expandedRows":e[8]||(e[8]=a=>m.value=a),selection:h.value,"onUpdate:selection":e[9]||(e[9]=a=>h.value=a),selectAll:o.selectAll,onSelectAllChange:o.onSelectAllChange,onRowSelect:o.onRowSelect,onRowUnselect:o.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:n(a=>[i("div",null,[t(T,{value:a.data.documents,responsiveLayout:"scroll",selection:h.value,"onUpdate:selection":e[7]||(e[7]=u=>h.value=u),selectAll:o.selectAll,onSelectAllChange:o.onSelectAllChange},{default:n(()=>[t(r,{field:"doc_name",header:"Document Name"},{default:n(()=>[L(_(a.data.doc_name),1)]),_:2},1024),t(r,{field:"doc_status",header:"Status"}),t(r,{field:"",header:"View"},{body:n(u=>[t(c,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:N=>U(u.data.record_id),style:{height:"2em"}},null,8,["onClick"])]),_:2},1024),t(r,{field:"",header:"Action"},{body:n(u=>[i("span",null,[t(c,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve",onClick:N=>$(u.data,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),t(c,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2.5em"},onClick:N=>$(u.data,"Reject")},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:n(()=>[t(r,{expander:!0}),t(r,{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),t(r,{field:"user_code",header:"Employee Id",sortable:""}),t(r,{field:"name",header:"Employee Name"}),t(r,{field:"doc_status",header:"Approval Status",sortable:!1},{body:n(({data:a})=>[L(_(a.doc_status),1)]),_:1}),t(r,{field:"",header:"Action"},{body:n(a=>[i("span",null,[t(c,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve All",onClick:u=>B(a.data.documents,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),t(c,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject All",style:{"margin-left":"8px",height:"2.5em"},onClick:u=>B(a.data.documents,"Reject")},null,8,["onClick"])])]),_:1})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"]),v.value==!1?(j(),F(A,{key:0,visible:R.value,"onUpdate:visible":e[10]||(e[10]=a=>R.value=a),class:"z-0",modal:"",header:"Documents",style:{width:"40vw"}},{default:n(()=>[i("img",{src:`data:image/png;base64,${D.value}`,alt:o.doc_url,class:"block pb-3 m-auto"},null,8,_e)]),_:1},8,["visible"])):H("",!0)])}}},l=J(ke);l.use(Q,{ripple:!0});l.use(re);l.use(K);l.use(ie);l.directive("tooltip",te);l.directive("badge",le);l.directive("ripple",W);l.directive("styleclass",ae);l.directive("focustrap",Y);l.component("Button",G);l.component("DataTable",ne);l.component("Column",se);l.component("ColumnGroup",ue);l.component("Row",pe);l.component("Toast",X);l.component("ConfirmDialog",q);l.component("Dropdown",Z);l.component("InputText",ee);l.component("Dialog",oe);l.component("ProgressSpinner",ce);l.component("Calendar",de);l.component("moment",me);l.component("Checkbox",ve);l.component("Tag",fe);l.mount("#EmpDetails_approvals");
