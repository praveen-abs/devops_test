/* empty css              *//* empty css                     *//* empty css                   */import{ab as U,Q as r,W as V,o as i,c as l,d as o,h as c,w as d,l as x,t as $,aa as _,a as p,b as L,g,H as M,P as j,R as O,u as A,x as H,I,K,M as W,J as G}from"./inputnumber.esm-5d69a21b.js";import{c as J}from"./pinia-c08c4665.js";import{u as Q,a as q,T as z,B as X,S as Y,b as Z,s as ee}from"./toastservice.esm-9d3b5dc9.js";import"./blockui.esm-3d95c539.js";import{a as te}from"./datatable.esm-7205543b.js";import{D as oe,s as se}from"./dialogservice.esm-ea919e3d.js";import{C as ae}from"./confirmationservice.esm-9a37c562.js";import{s as ne}from"./progressspinner.esm-7d63b3de.js";import{s as ie}from"./progressbar.esm-48fccd8a.js";import{s as le}from"./row.esm-6ebc942e.js";import{s as re}from"./calendar.esm-0c5ba9cf.js";import{s as ce}from"./textarea.esm-e5a5a0a6.js";import{s as de}from"./chips.esm-7b2af6dc.js";import{s as me}from"./multiselect.esm-951f3d22.js";import{s as pe}from"./checkbox.esm-8e251a83.js";import{a as P}from"./index-362795f3.js";import{U as ue}from"./EmployeeDocumentsManagerService-4781294d.js";import"./Service-7a074f26.js";import"./ProfilePagesStore-1a7b7a12.js";const fe={class:"card p-3",style:{"margin-top":"-25px"}},_e=o("h2",{class:"font-semibold text-2xl my-4 mx-3"},"Employee Documents",-1),ge={class:"w-full"},he={key:0},ve=o("p",{class:"text-red-600 font-semibold fs-5"},"Pending",-1),be=[ve],ye={key:1},we=o("p",{class:"text-red-600 font-semibold fs-5"},"Approved",-1),xe=[we],De={key:2},ke=o("p",{class:"text-red-600 font-semibold fs-5"},"Rejected",-1),Ce=[ke],Se={key:3},$e=o("p",{class:"text-green-600 font-semibold"},"-",-1),Pe=[$e],Be={key:0},Te={key:0},Ee=["onClick"],Fe=o("label",{for:"file",class:"cursor-pointer"},[o("i",{class:"pi pi-upload"}),x(" Upload file")],-1),Re=[Fe],Ne={key:1},Ue={key:1},Ve=["onClick"],Le=o("label",{for:"file",class:"cursor-pointer"},[o("i",{class:"pi pi-upload"}),x(" Upload file ")],-1),Me=[Le],je={key:0,class:""},Oe=["disabled"],Ae={class:"w-full h-full d-flex justify-content-center"},He=["src"],Ie=o("h5",{style:{"text-align":"center"}},"Please wait...",-1),Ke={__name:"EmployeeDocumentsManager",setup(Ge){U(()=>{a.fetch_EmployeeDocument(),console.log(" ",B.value)});const a=ue();Q();const b=r(!1),D=V({name:""}),B=r({}),y=r();r();const w=r(),u=r(),h=new FormData,v=r(),T=n=>{b.value=!0,a.loading=!0,P.post("/view-profile-private-file",{user_code:a.getEmployeeDetails.current_user_code,document_name:n.document_name}).then(t=>{y.value=t.data.data,console.log("data sent",y.value)}).finally(()=>{a.loading=!1})},k=n=>{u.value=n},C=n=>{if(console.log(u),n.target.files&&n.target.files[0]){w.value=n.target.files[0],h.append(`${u.value}`,w.value),console.log(h),D.name=w.value,console.log("testing name",u.value);let t=Object.keys(h)[0];console.log("testing",t),console.log()}};async function E(){if(v.value=="Failure")Swal.fire({title:v.value="Failure",text:"Please upload all mandatory documents",icon:"error",showCancelButton:!1}).then(n=>{});else{a.loading=!0;let n="/vmt-documents-route/";P.post(n,h).then(t=>{v.value=t.data.status,console.log(v.value),console.log("Photo not send"),t.data.status=="Success"?Swal.fire({title:t.data.status="Success",text:t.data.message,icon:"success",showCancelButton:!1}).then(f=>{window.location.reload()}):t.data.status=="Failure"&&Swal.fire({title:t.data.status="Failure",text:t.data.message,icon:"error",showCancelButton:!1}).then(f=>{window.location.reload()})}).finally(()=>{a.fetch_EmployeeDocument(),a.loading=!1})}}return(n,t)=>{const f=g("Column"),F=g("Button"),R=g("DataTable"),S=g("Dialog"),N=g("ProgressSpinner");return i(),l("div",fe,[_e,o("div",ge,[c(R,{ref:"dt",value:_(a).getEmployeeDoc,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:d(()=>[c(f,{header:"File Name",field:"document_name",style:{"min-width":"8rem"}},{default:d(()=>[x($(_(a).getEmployeeDoc.document_name),1)]),_:1}),c(f,{field:"status",header:"status",style:{"min-width":"12rem"}},{body:d(s=>[s.data.status==="Pending"?(i(),l("div",he,be)):p("",!0),s.data.status==="Approved"?(i(),l("div",ye,xe)):p("",!0),s.data.status==="Rejected"?(i(),l("div",De,Ce)):p("",!0),s.data.status===null?(i(),l("div",Se,Pe)):p("",!0)]),_:1}),c(f,{field:"",header:"View ",style:{"min-width":"12rem"}},{body:d(s=>[s.data.doc_id?(i(),l("div",Be,[s.data.status=="Rejected"?(i(),l("div",Te,[o("input",{type:"file",name:"",id:"file",hidden:"",onChange:t[0]||(t[0]=m=>C(m))},null,32),o("button",{class:"btn btn-success",onClick:m=>k(s.data.document_name)},Re,8,Ee)])):(i(),l("div",Ne,[c(F,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:m=>T(s.data),style:{height:"2em"}},null,8,["onClick"])]))])):(i(),l("div",Ue,[o("input",{type:"file",name:"",id:"file",hidden:"",onChange:t[1]||(t[1]=m=>C(m))},null,32),o("button",{class:"btn btn-success",onClick:m=>k(s.data.document_name)},Me,8,Ve),s.data.document_name==u.value?(i(),l("p",je,$(D.name.name),1)):p("",!0)]))]),_:1})]),_:1},8,["value"]),o("button",{severity:"warn",type:"submit",data:"row-6",next:"row-6",name:"submit_form",id:"msform",class:"text-center btn btn-orange processOnboardForm float-end text-light mr-5 mt-5",value:"Submit",disabled:n.fileUploadValidation,onClick:E}," Submit ",8,Oe),_(a).loading==!1?(i(),L(S,{key:0,visible:b.value,"onUpdate:visible":t[2]||(t[2]=s=>b.value=s),modal:"",header:"Documents",style:{width:"40vw"}},{default:d(()=>[o("div",Ae,[o("img",{src:`data:image/png;base64,${y.value}`,class:"",alt:"File not found",style:{"object-fit":"cover","max-width":"400px",", min-height":"350px",height:"300px"}},null,8,He)])]),_:1},8,["visible"])):p("",!0),c(S,{header:"Header",visible:_(a).loading,"onUpdate:visible":t[3]||(t[3]=s=>_(a).loading=s),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:d(()=>[c(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:d(()=>[Ie]),_:1},8,["visible"])])])}}},e=M(Ke),We=J();e.use(j,{ripple:!0});e.use(ae);e.use(q);e.use(oe);e.use(We);e.directive("tooltip",z);e.directive("badge",X);e.directive("ripple",O);e.directive("styleclass",Y);e.directive("focustrap",A);e.component("Button",H);e.component("DataTable",te);e.component("Column",I);e.component("ColumnGroup",se);e.component("Row",le);e.component("Toast",Z);e.component("ConfirmDialog",ee);e.component("Dropdown",K);e.component("InputText",W);e.component("Dialog",G);e.component("ProgressSpinner",ne);e.component("Calendar",re);e.component("Textarea",ce);e.component("Chips",de);e.component("MultiSelect",me);e.component("ProgressBar",ie);e.component("Checkbox",pe);e.mount("#EmployeeDocumentManager");
