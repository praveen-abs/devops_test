import{S as N}from"./Service-d72aa37a.js";import{e as r,f as c,g as e,n as s,F as A,m as j,t as o,h as t,r as p,R as L,o as U,c as h,l as d,i as x,p as R,H as O,j as M,k as F}from"./app-052ddeba.js";import"./moment-fbc5633a.js";import{c as E}from"./LeaveApply.vue_vue_type_style_index_0_lang-854bd27f.js";import{_ as I}from"./LeaveApply-86c06d54.js";import{d as y}from"./dayjs.min-2f06af28.js";import"./index-362795f3.js";import{L as H}from"./LoadingSpinner-5ceab6f2.js";import"./index.esm-76e75368.js";/* empty css                                                                       */const W={class:"mb-3 card"},q={class:"card-body"},Q={class:"mb-2 row"},z=e("div",{class:"col-sm-6 col-xl-6 col-md-6 col-lg-6"},[e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Leave balance")],-1),K={class:"col-6 justify-content-end d-flex"},G={class:"grid gap-4 md:grid-cols-4 sm:grid-cols-1 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-5",style:{display:"grid"}},J={class:"my-1 lg:text-[12px] font-semibold text-center md:text-[10px] xl:text-[13px]"},X={class:"my-1 text-xl font-semibold text-center"},Z={key:0,class:"text-lg font-semibold"},ee={key:1,class:"text-lg font-semibold"},te={class:"card"},ae={class:"card-body"},le=e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Leave Availed",-1),se={class:"grid gap-4 md:grid-cols-4 sm:grid-cols-1 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-5",style:{display:"grid"}},oe={class:"text-center"},ne={class:"my-1 lg:text-[12px] font-semibold text-center md:text-[10px] xl:text-[13px]"},de={class:"my-1 text-xl font-semibold text-center"},ie={key:0,class:"text-lg font-semibold"},re={key:1,class:"text-lg font-semibold"},ce={__name:"EmployeeLeaveBalance",setup(P){const a=E();return(f,b)=>(r(),c(A,null,[e("div",W,[e("div",q,[e("div",Q,[z,e("div",K,[s(I)])]),e("div",G,[(r(!0),c(A,null,j(t(a).array_employeeLeaveBalance,m=>(r(),c("div",{key:m,class:"p-1 my-2 rounded-lg border bg-gray-100 hover:bg-slate-100 cursor-pointer"},[e("p",J,o(m.leave_type),1),e("p",X,[m.leave_balance==""?(r(),c("span",Z,"0")):(r(),c("span",ee,o(m.leave_balance),1))])]))),128))])])]),e("div",te,[e("div",ae,[le,e("div",se,[(r(!0),c(A,null,j(t(a).array_employeeLeaveBalance,m=>(r(),c("div",{class:"bg-gray-100 border-l-4 border-indigo-300 p-1 rounded-lg border my-2 cursor-pointer hover:bg-slate-100",key:m},[e("div",oe,[e("p",ne,o(m.leave_type),1),e("p",de,[m.availed_leaves==""?(r(),c("span",ie,"0")):(r(),c("span",re,o(m.availed_leaves),1))])])]))),128))])])])],64))}},_e={class:"mt-3 row"},pe={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},ue={class:"mb-0 card leave-history"},me={class:"card-body"},ve={class:"flex justify-between"},he=e("div",null,[e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins] mb-4"}," Leave history ")],-1),fe={class:"mb-2 d-flex justify-content-end"},ye=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),ge={class:"table-responsive"},xe={key:0},be={key:1},we={key:1},Le={class:"flex justify-center"},De=["onClick"],$e=e("i",{class:"pi pi-eye"},null,-1),Se=[$e],ke={class:"w-full"},Ce={class:"w-full"},Re={class:"w-full border rounded-lg"},Me={class:"p-3 pl-5 border d-flex align-items-center"},Ae={class:"bg-yellow-100 shadow-sm rounded-circle d-flex justify-content-center align-items-center",style:{width:"80px",height:"80px"}},Te={class:"text-3xl font-semibold"},Ye={class:"ml-5"},Ve={class:"text-lg font-semibold"},Ee={class:"fs-6 text-neutral-400"},Pe={class:"w-full px-4 py-4 border d-flex"},Ue={class:"p-1 mx-2 rounded-lg"},Be={class:"px-2 py-1 text-center text-light rounded-top fw-bold",style:{"background-color":"navy"}},je={class:"px-2 py-1 text-center fs-5 fw-bold"},Ne={class:"px-2 py-1 text-center fs-6 fw-bold"},Oe={class:"py-3"},Fe={class:"text-lg font-semibold text-primary-800"},Ie={class:"text-xs font-semibold"},He={class:"w-full px-4 py-4 border"},We=e("h1",{class:"text-lg font-semibold"},"Notified To:",-1),qe={class:"px-3 py-2 mt-3 card d-flex",style:{"min-width":"250px","max-width":"300px",display:"flex"}},Qe={class:"p-2 d-flex align-items-center"},ze={class:"bg-blue-100 rounded-circle d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},Ke={class:"px-3 flex-column"},Ge={class:"fs-6 fw-bold"},Je={class:"py-2 text-neutral-400"},Xe={class:"w-full px-4 py-4 border"},Ze=e("h1",{class:"text-lg font-semibold"},"Approved by",-1),et={class:"px-3 py-2 mt-3 card d-flex",style:{"min-width":"180px","max-width":"300px",display:"flex"}},tt={class:"p-2 d-flex align-items-center"},at=e("div",{class:"bg-green-400 rounded-circle d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},[e("i",{class:"pi pi-check text-light"})],-1),lt={class:"px-3 flex-column"},st={class:"fs-6 fw-bold"},ot={class:"py-2 text-neutral-400"},nt={class:"mx-3 my-4"},dt={class:"mx-4 my-4 text-end"},it=e("div",{class:"bg-[#F9BE00] w-[500px] h-[60px] absolute top-0 left-0"},[e("h1",{class:"m-4 text-[#ffff] font-['poppins] font-semibold"},"Leave Request Details")],-1),rt={class:"flex items-center mt-6"},ct=e("img",{src:"",alt:"",class:"rounded-full"},null,-1),_t={class:"bg-blue-200 w-[40px] h-[40px] rounded-full mr-4 flex items-center justify-center"},pt={class:"flex flex-col items-center justify-center"},ut={class:"font-semibold"},mt={class:"grid grid-cols-3 gap-2 p-2 my-2 bg-gray-200 rounded-md"},vt={class:"flex flex-col"},ht=e("b",null,"Leave Type",-1),ft={class:"flex flex-col"},yt=e("b",null,"Start Date",-1),gt={class:"flex flex-col"},xt=e("b",null,"End Date",-1),bt={class:"flex flex-col"},wt=e("b",null,"Total Leave Days",-1),Lt={class:"flex flex-col"},Dt=e("b",null,"Status",-1),$t={class:"my-2 p-2 h-[60px]"},St=e("b",null,"Leave Reason",-1),kt={class:"p-2 my-2"},Ct=e("b",null,"Notified to",-1),Rt={class:"flex items-center mt-2"},Mt=e("img",{src:"",alt:"",class:"rounded-full"},null,-1),At={class:"bg-orange-200 w-[40px] h-[40px] rounded-full mr-4 flex items-center justify-center"},Tt={class:"flex flex-col items-center justify-center"},Yt={class:"font-semibold"},Vt=e("p",null,"-",-1),Et=e("div",{class:"flex flex-col"},[e("b",null,"Comments"),e("textarea",{name:"",id:"",cols:"20",rows:"5",class:"border-[1px] border-[#000] rounded-lg mt-2 p-2"})],-1),Pt={class:"flex justify-center items-center mt-[50px]"},Ut={__name:"EmployeeLeaveDetails",setup(P){const a=E(),f=p(!0),b=p(),m=p(),w=S=>{b.value.toggle(S)};p(!0);const $=p({global:{value:null,matchMode:L.CONTAINS},employee_name:{value:null,matchMode:L.STARTS_WITH,matchMode:L.EQUALS,matchMode:L.CONTAINS},status:{value:null,matchMode:L.EQUALS}}),u=p(["Pending","Approved","Rejected"]);U(async()=>{await a.getEmployeeLeaveHistory(y().month()+1,y().year(),["Approved","Pending","Rejected"]),f.value=!1});function n(){a.canShowLeaveDetails=!1}return(S,i)=>{const C=h("Calendar"),D=h("Column"),T=h("OverlayPanel"),Y=h("Dropdown"),V=h("DataTable"),l=h("Textarea"),g=h("Dialog"),_=h("Sidebar");return r(),c(A,null,[s(ce),e("div",_e,[e("div",pe,[e("div",ue,[e("div",me,[e("div",ve,[he,e("div",fe,[ye,s(C,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=v=>m.value=v),style:{"border-radius":"7px",height:"30px"},onDateSelect:i[1]||(i[1]=v=>(t(a).getEmployeeLeaveHistory(m.value.getMonth()+1,m.value.getFullYear(),u.value),t(a).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",ge,[s(V,{value:t(a).array_employeeLeaveHistory,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:$.value,"onUpdate:filters":i[2]||(i[2]=v=>$.value=v),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:d(()=>[x(" No Employee data..... ")]),default:d(()=>[s(D,{field:"leave_type",header:"Leave Type",style:{"min-width":"14rem"}}),s(D,{field:"start_date",header:"Start Date",style:{"min-width":"8rem"}},{body:d(v=>[x(o(t(y)(v.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),s(D,{field:"end_date",header:"End Date",dataType:"date",style:{"min-width":"8rem"}},{body:d(v=>[x(o(t(y)(v.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),s(D,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:d(v=>[v.data.leave_reason&&v.data.leave_reason.length>70?(r(),c("div",xe,[e("p",{onClick:w,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),s(T,{ref_key:"overlayPanel",ref:b,style:{height:"80px"}},{default:d(()=>[x(o(v.data.leave_reason),1)]),_:2},1536)])):(r(),c("div",be,o(v.data.leave_reason??""),1))]),_:1}),s(D,{field:"reviewer_name",header:"Approver Name"}),s(D,{field:"reviewer_comments",header:"Approver Comments"}),s(D,{field:"status",header:"Status",icon:"pi pi-check"},{body:d(({data:v})=>[e("span",{class:R("customer-badge status-"+v.status)},o(v.status),3)]),filter:d(({filterModel:v,filterCallback:B})=>[s(Y,{modelValue:v.value,"onUpdate:modelValue":k=>v.value=k,onChange:k=>B(),options:u.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(k=>[k.value?(r(),c("span",{key:0,class:R("customer-badge status-"+k.value)},o(k.value),3)):(r(),c("span",we,o(k.placeholder),1))]),option:d(k=>[e("span",{class:R("customer-badge status-"+k.option)},o(k.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),s(D,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(v=>[e("div",Le,[e("button",{class:"text-[#000] px-4 py-2 rounded-xl",onClick:B=>t(a).getLeaveDetails(v.data),style:{}},Se,8,De)])]),_:1})]),_:1},8,["value","filters"])])])])])]),s(g,{header:"Header",breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw",borderTop:"5px solid #002f56"},modal:!0,closable:!0,closeOnEscape:!0},{header:d(()=>[e("div",ke,[e("h5",{style:O({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"text-xl font-semibold"}," Leave Details Request",4)])]),default:d(()=>[e("div",Ce,[e("div",Re,[e("div",Me,[e("div",Ae,[e("h1",Te,o(t(a).setLeaveDetails.user_short_name),1)]),e("div",Ye,[e("h1",Ve,o(t(a).setLeaveDetails.name),1),e("div",null,[e("p",Ee,"Requested on "+o(t(a).setLeaveDetails.leaverequest_date),1)])])]),e("div",Pe,[e("div",Ue,[e("h1",Be,o(t(y)(t(a).setLeaveDetails.end_date).format("MMM")),1),e("h1",je,o(t(y)(t(a).setLeaveDetails.end_date).format("DD")),1),e("h1",Ne,o(t(y)(t(a).setLeaveDetails.end_date).format("dddd")),1)]),e("div",Oe,[e("h1",Fe,[x(o(t(a).setLeaveDetails.total_leave_datetime)+" Day of "+o(t(a).setLeaveDetails.leave_type)+" ",1),e("span",Ie," ("+o(t(a).setLeaveDetails.leave_reason)+") ",1)])])]),e("div",He,[We,e("div",qe,[e("div",Qe,[e("div",ze,o(t(a).setLeaveDetails.reviewer_short_name),1),e("div",Ke,[e("h1",Ge,o(t(a).setLeaveDetails.reviewer_name),1),e("h1",Je,o(t(a).setLeaveDetails.reviewer_designation),1)])])])]),e("div",Xe,[Ze,e("div",et,[e("div",tt,[at,e("div",lt,[e("h1",st,o(t(a).setLeaveDetails.reviewer_name),1),e("h1",ot," on "+o(t(y)(t(a).setLeaveDetails.leaverequest_date).format("DD-MMM-YYYY hh: mm: ss A")),1)])])])]),e("div",nt,[s(l,{name:"",id:"",cols:"70",rows:"3",autoResize:"",placeholder:"Add Comment"})])])]),e("div",dt,[t(a).setLeaveDetails.can_withdraw_leave!==null&&t(a).setLeaveDetails.can_withdraw_leave?(r(),c("button",{key:0,class:"px-5 mx-2 btn btn-orange",onClick:i[3]||(i[3]=v=>t(a).performLeaveWithdraw(t(a).setLeaveDetails.id))},"Withdraw")):M("",!0),t(a).setLeaveDetails.can_revoke_leave!==null&&t(a).setLeaveDetails.can_revoke_leave?(r(),c("button",{key:1,class:"px-5 mx-2 btn btn-orange",onClick:n},"Revoke")):M("",!0),e("button",{class:"px-5 btn btn-orange",onClick:n},"Post")])]),_:1}),s(_,{visible:t(a).canShowLeaveDetails,"onUpdate:visible":i[5]||(i[5]=v=>t(a).canShowLeaveDetails=v),position:"right",style:{width:"30vw !important"}},{header:d(()=>[it]),default:d(()=>[e("div",rt,[ct,e("div",_t,o(t(a).setLeaveDetails.user_short_name),1),e("div",pt,[e("h1",ut,o(t(a).setLeaveDetails.name),1),e("p",null,o(t(a).setLeaveDetails.user_code),1)])]),e("div",mt,[e("div",vt,[ht,e("span",null,o(t(a).setLeaveDetails.leave_type),1)]),e("div",ft,[yt,e("span",null,o(t(y)(t(a).setLeaveDetails.start_date).format("DD-MMM-YYYY")),1)]),e("div",gt,[xt,e("span",null,o(t(y)(t(a).setLeaveDetails.end_date).format("DD-MMM-YYYY")),1)]),e("div",bt,[wt,e("span",null,o(t(a).setLeaveDetails.total_leave_datetime),1)]),e("div",Lt,[Dt,e("span",null,o(t(a).setLeaveDetails.status),1)])]),e("div",$t,[St,e("p",null,o(t(a).setLeaveDetails.leave_reason),1)]),e("div",kt,[Ct,e("div",Rt,[Mt,e("div",At,o(t(a).setLeaveDetails.reviewer_short_name),1),e("div",Tt,[e("h1",Yt,o(t(a).setLeaveDetails.reviewer_name),1),Vt])])]),Et,e("div",Pt,[t(a).setLeaveDetails.can_revoke_leave!==null&&t(a).setLeaveDetails.can_revoke_leave?(r(),c("button",{key:0,class:"border-[2px] border-[#000] rounded-md p-2 mx-2 font-semibold text-[12px]",onClick:n},"revoke")):M("",!0),t(a).setLeaveDetails.can_withdraw_leave!==null&&t(a).setLeaveDetails.can_withdraw_leave?(r(),c("button",{key:1,class:"bg-[#000] text-[#fff] rounded-md font-semibold p-2 mx-2 text-[12px]",onClick:i[4]||(i[4]=v=>t(a).performLeaveWithdraw(t(a).setLeaveDetails.id))},"Withdraw")):M("",!0)])]),_:1},8,["visible"])],64)}}},Bt={class:"mb-0 card leave-history"},jt={class:"card-body"},Nt={class:"my-2 d-flex justify-content-between align-items-center"},Ot=e("h6",{class:"h-7 mt-3 text-lg font-semibold text-gray-900"},"Org Leave Balance",-1),Ft={class:"d-flex"},It={class:""},Ht=e("label",{for:" ",class:"text-lg font-semibold"},"Start Date",-1),Wt={class:""},qt=e("label",{for:" ",class:"text-lg font-semibold mx-2"},"End Date",-1),Qt={class:"mt-3 row card"},zt={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 card-body"},Kt={class:"flex justify-between"},Gt=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900"},"Org Leave history")],-1),Jt={class:"d-flex justify-content-end"},Xt=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),Zt={class:"table-responsive"},ea={key:0},ta={key:1},aa={key:1},la={__name:"OrgLeaveDetails",setup(P){const a=E();p(),p(),p(!0);const f=p(),b=p([]),m=p();p();const w=p({employee_name:{value:null,matchMode:L.STARTS_WITH,matchMode:L.EQUALS,matchMode:L.CONTAINS},status:{value:null,matchMode:L.EQUALS}}),$=p(["Pending","Approved","Rejected"]);return U(async()=>{await a.getOrgLeaveBalance(),await a.getAllEmployeesLeaveHistory(y().month()+1,y().year(),["Approved","Pending","Rejected"]),console.log("Org Leave details : "+a.array_orgLeaveHistory)}),(u,n)=>{const S=h("Calendar"),i=h("Column"),C=h("DataTable"),D=h("InputText"),T=h("OverlayPanel"),Y=h("Dropdown"),V=h("Button");return r(),c(A,null,[e("div",Bt,[e("div",jt,[e("div",Nt,[Ot,e("div",Ft,[e("div",It,[Ht,s(S,{modelValue:t(a).selectedStartDate,"onUpdate:modelValue":n[0]||(n[0]=l=>t(a).selectedStartDate=l),dateFormat:"dd-mm-yy",class:"pl-3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",Wt,[qt,s(S,{class:"mr-3",modelValue:t(a).selectedEndDate,"onUpdate:modelValue":n[1]||(n[1]=l=>t(a).selectedEndDate=l),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",style:{height:"30px"},onClick:n[2]||(n[2]=l=>t(a).getOrgLeaveBalance(t(y)(t(a).selectedStartDate).format("YYYY-MM-DD"),t(y)(t(a).selectedEndDate).format("YYYY-MM-DD")))},"submit")])]),s(C,{value:t(a).array_orgLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:u.onRowExpand,onRowCollapse:u.onRowCollapse,expandedRows:b.value,"onUpdate:expandedRows":n[4]||(n[4]=l=>b.value=l),selection:m.value,"onUpdate:selection":n[5]||(n[5]=l=>m.value=l),selectAll:u.selectAll,onSelectAllChange:u.onSelectAllChange,onRowSelect:u.onRowSelect,onRowUnselect:u.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:d(l=>[e("div",null,[s(C,{value:l.data.leave_balance_details,responsiveLayout:"scroll",selection:m.value,"onUpdate:selection":n[3]||(n[3]=g=>m.value=g),selectAll:u.selectAll,onSelectAllChange:u.onSelectAllChange},{default:d(()=>[s(i,{field:"leave_type",header:"Leave Type"},{default:d(()=>[x(o(l.data.leave_type),1)]),_:2},1024),s(i,{field:"opening_balance",header:"Opening Balance"}),s(i,{field:"availed",header:"availed"}),s(i,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:d(()=>[s(i,{expander:!0}),s(i,{field:"user_code",header:"Employee Id",sortable:""}),s(i,{field:"name",header:"Employee Name"}),s(i,{field:"location",header:"Location",sortable:!1}),s(i,{field:"department",header:"Department"}),s(i,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])]),e("div",Qt,[e("div",zt,[e("div",Kt,[Gt,e("div",Jt,[Xt,s(S,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:f.value,"onUpdate:modelValue":n[6]||(n[6]=l=>f.value=l),style:{"border-radius":"7px",height:"30px"},onDateSelect:n[7]||(n[7]=l=>t(a).getAllEmployeesLeaveHistory(f.value.getMonth()+1,f.value.getFullYear(),$.value))},null,8,["modelValue"])])]),e("div",Zt,[s(C,{value:t(a).array_orgLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:w.value,"onUpdate:filters":n[9]||(n[9]=l=>w.value=l),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:d(()=>[x(" No Employee data..... ")]),default:d(()=>[s(i,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:d(l=>[x(o(l.data.employee_name),1)]),filter:d(({filterModel:l,filterCallback:g})=>[s(D,{modelValue:l.value,"onUpdate:modelValue":_=>l.value=_,onInput:_=>g(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),s(i,{field:"leave_type",header:"Leave Type"}),s(i,{field:"start_date",header:"Start Date"},{body:d(l=>[x(o(t(y)(l.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),s(i,{field:"end_date",header:"End Date"},{body:d(l=>[x(o(t(y)(l.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),s(i,{field:"total_leave_datetime",header:"Total Leave Days"}),s(i,{field:"leave_reason",header:"Leave Reason"},{body:d(l=>[l.data.leave_reason&&l.data.leave_reason.length>70?(r(),c("div",ea,[e("p",{onClick:n[8]||(n[8]=(...g)=>u.toggle&&u.toggle(...g)),class:"font-medium text-orange-400 underline cursor-pointer"}," More... "),s(T,{ref:"overlayPanel",style:{height:"80px"}},{default:d(()=>[x(o(l.data.leave_reason),1)]),_:2},1536)])):(r(),c("div",ta,o(l.data.leave_reason??""),1))]),_:1}),s(i,{field:"status",header:"Status"},{body:d(({data:l})=>[e("span",{class:R("customer-badge status-"+l.status)},o(l.status),3)]),filter:d(({filterModel:l,filterCallback:g})=>[s(Y,{modelValue:l.value,"onUpdate:modelValue":_=>l.value=_,onChange:_=>g(),options:$.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(_=>[_.value?(r(),c("span",{key:0,class:R("customer-badge status-"+_.value)},o(_.value),3)):(r(),c("span",aa,o(_.placeholder),1))]),option:d(_=>[e("span",{class:R("customer-badge status-"+_.option)},o(_.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),s(i,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(l=>[s(V,{icon:"",class:"text-[#000] border-[#000] border-[1px] py-2.5",label:"View",onClick:g=>t(a).getLeaveDetails(l.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])],64)}}},sa={class:"card"},oa={class:"card-body"},na={class:"row"},da={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-items-center"},ia=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900"},"Team Leave Balance",-1),ra={class:"my-2 d-flex justify-content-between align-items-center"},ca=e("div",null,null,-1),_a={class:"d-flex"},pa={class:""},ua=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"Start Date",-1),ma={class:""},va=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"End Date",-1),ha={class:"mt-3 row"},fa={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},ya={class:"mb-0 card leave-history"},ga={class:"card-body"},xa={class:"flex justify-between"},ba=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900"},"Team Leave history")],-1),wa={class:"d-flex justify-content-end"},La=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),Da={class:"table-responsive"},$a={key:0},Sa={key:1},ka={key:1},Ca={__name:"TeamLeaveDetails",setup(P){const a=E();p(),p(),p(),p(),p(),p(!0),p();const f=p([]),b=p(),m=p(),w=p({employee_name:{value:null,matchMode:L.STARTS_WITH,matchMode:L.EQUALS,matchMode:L.CONTAINS},status:{value:null,matchMode:L.EQUALS}}),$=p(["Pending","Approved","Rejected"]);return U(async()=>{await a.getTermLeaveBalance(),await a.getTeamLeaveHistory(y().month()+1,y().year(),["Approved","Pending","Rejected"])}),(u,n)=>{const S=h("Calendar"),i=h("Column"),C=h("DataTable"),D=h("InputText"),T=h("OverlayPanel"),Y=h("Dropdown"),V=h("Button");return r(),c(A,null,[e("div",sa,[e("div",oa,[e("div",na,[e("div",da,[ia,e("div",ra,[ca,e("div",_a,[e("div",pa,[ua,s(S,{modelValue:t(a).selectedStartDate,"onUpdate:modelValue":n[0]||(n[0]=l=>t(a).selectedStartDate=l),dateFormat:"dd-mm-yy",class:"p-l3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",ma,[va,s(S,{class:"mr-3",modelValue:t(a).selectedEndDate,"onUpdate:modelValue":n[1]||(n[1]=l=>t(a).selectedEndDate=l),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",onClick:n[2]||(n[2]=l=>(t(a).getTermLeaveBalance(t(y)(t(a).selectedStartDate).format("YYYY-MM-DD"),t(y)(t(a).selectedEndDate).format("YYYY-MM-DD")),t(a).canShowLoading=!0))},"submit")])])]),e("div",null,[s(C,{value:t(a).arrayTermLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:u.onRowExpand,onRowCollapse:u.onRowCollapse,expandedRows:f.value,"onUpdate:expandedRows":n[4]||(n[4]=l=>f.value=l),selection:b.value,"onUpdate:selection":n[5]||(n[5]=l=>b.value=l),selectAll:u.selectAll,onSelectAllChange:u.onSelectAllChange,onRowSelect:u.onRowSelect,onRowUnselect:u.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:d(l=>[e("div",null,[s(C,{value:l.data.leave_balance_details,responsiveLayout:"scroll",selection:b.value,"onUpdate:selection":n[3]||(n[3]=g=>b.value=g),selectAll:u.selectAll,onSelectAllChange:u.onSelectAllChange},{default:d(()=>[s(i,{field:"leave_type",header:"Leave Type"},{default:d(()=>[x(o(l.data.leave_type),1)]),_:2},1024),s(i,{field:"opening_balance",header:"Opening Balance"}),s(i,{field:"availed",header:"availed"}),s(i,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:d(()=>[s(i,{style:{width:"1rem !important"},expander:!0}),s(i,{field:"user_code",header:"Employee Id",sortable:""}),s(i,{field:"name",header:"Employee Name"}),s(i,{field:"location",header:"Location",sortable:!1}),s(i,{field:"department",header:"Department"}),s(i,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",ha,[e("div",fa,[e("div",ya,[e("div",ga,[e("div",xa,[ba,e("div",wa,[La,s(S,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:m.value,"onUpdate:modelValue":n[6]||(n[6]=l=>m.value=l),style:{"border-radius":"7px",height:"30px"},onDateSelect:n[7]||(n[7]=l=>(t(a).getTeamLeaveHistory(m.value.getMonth()+1,m.value.getFullYear(),$.value),t(a).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",Da,[s(C,{value:t(a).array_teamLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:w.value,"onUpdate:filters":n[9]||(n[9]=l=>w.value=l),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:d(()=>[x(" No Employee data..... ")]),default:d(()=>[s(i,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:d(l=>[x(o(l.data.employee_name),1)]),filter:d(({filterModel:l,filterCallback:g})=>[s(D,{modelValue:l.value,"onUpdate:modelValue":_=>l.value=_,onInput:_=>g(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),s(i,{field:"leave_type",header:"Leave Type"}),s(i,{field:"start_date",header:"Start Date"},{body:d(l=>[x(o(t(y)(l.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),s(i,{field:"end_date",header:"End Date"},{body:d(l=>[x(o(t(y)(l.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),s(i,{field:"total_leave_datetime",header:"Total Leave Days"}),s(i,{field:"leave_reason",header:"Leave Reason"},{body:d(l=>[l.data.leave_reason&&l.data.leave_reason.length>70?(r(),c("div",$a,[e("p",{onClick:n[8]||(n[8]=(...g)=>u.toggle&&u.toggle(...g)),class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),s(T,{ref:"overlayPanel",style:{height:"80px"}},{default:d(()=>[x(o(l.data.leave_reason),1)]),_:2},1536)])):(r(),c("div",Sa,o(l.data.leave_reason??""),1))]),_:1}),s(i,{field:"status",header:"Status"},{body:d(({data:l})=>[e("span",{class:R("customer-badge status-"+l.status)},o(l.status),3)]),filter:d(({filterModel:l,filterCallback:g})=>[s(Y,{modelValue:l.value,"onUpdate:modelValue":_=>l.value=_,onChange:_=>g(),options:$.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(_=>[_.value?(r(),c("span",{key:0,class:R("customer-badge status-"+_.value)},o(_.value),3)):(r(),c("span",ka,o(_.placeholder),1))]),option:d(_=>[e("span",{class:R("customer-badge status-"+_.option)},o(_.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),s(i,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(l=>[s(V,{icon:"",class:"border-[1px] text-[#000] border-[#000] py-2.5",label:"View",onClick:g=>t(a).getLeaveDetails(l.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},Ra={class:"w-full"},Ma={key:0},Aa=e("p",{class:"font-semibold text-2xl text-[#000] font-['Poppins]"},"Leave",-1),Ta=e("p",{class:"font-semibold text-sm"},[x("Here you can apply Leave,"),e("a",null,[e("span",{class:"underline cursor-pointer hover:text-indigo-500"}," Company's Leave Policy")]),x(".")],-1),Ya=[Aa,Ta],Va={key:1,class:"flex justify-between"},Ea={class:"divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},Pa=e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Leave Balance")],-1),Ua=e("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Team Leave Balance",-1),Ba=[Ua],ja=e("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#org_leave","aria-selected":"false",tabindex:"-1",role:"tab "}," Org Leave Balance",-1),Na=[ja],Oa=e("div",{class:"flex items-center"},[e("div",{class:"mr-3"}),e("a",{href:"/attendance-leave-policydocument",id:"",class:"text-[14px] text-blue-500 !underline font-semibold",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")],-1),Fa=e("div",null,null,-1),Ia={class:"tab-content py-2",id:"pills-tabContent"},Ha={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Wa={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},qa={class:"tab-pane show",id:"org_leave",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Qa=e("h6",{class:"mb-4 modal-title fs-21"}," Leave Request",-1),sl={__name:"LeaveModule",setup(P){const a=E(),f=N(),b=p(!1);return U(async()=>{await a.getEmployeeLeaveBalance()}),(m,w)=>{const $=h("leaveapply2"),u=h("Dialog");return r(),c(A,null,[t(a).canShowLoading?(r(),F(H,{key:0,class:"absolute z-50 bg-white"})):M("",!0),e("div",Ra,[e("div",null,[t(f).current_user_role==5?(r(),c("div",Ma,Ya)):(r(),c("div",Va,[e("ul",Ea,[Pa,t(f).current_user_role==1||t(f).current_user_role==2||t(f).current_user_role==3||t(f).current_user_role==4?(r(),c("li",{key:0,class:"nav-item text-muted",role:"presentation",onClick:w[0]||(w[0]=(...n)=>t(f).clearfunction&&t(f).clearfunction(...n))},Ba)):M("",!0),t(f).current_user_role==1||t(f).current_user_role==2||t(f).current_user_role==3?(r(),c("li",{key:1,class:"nav-item text-muted",role:"presentation",onClick:w[1]||(w[1]=(...n)=>t(f).clearfunction&&t(f).clearfunction(...n))},Na)):M("",!0)]),Oa])),Fa]),e("div",Ia,[e("div",Ha,[s(Ut)]),e("div",Wa,[s(Ca)]),e("div",qa,[s(la)])])]),s(u,{visible:b.value,"onUpdate:visible":w[2]||(w[2]=n=>b.value=n),style:{width:"80vw"},breakpoints:{"960px":"75vw","641px":"100vw"}},{header:d(()=>[Qa]),default:d(()=>[s($)]),_:1},8,["visible"])],64)}}};export{sl as default};
