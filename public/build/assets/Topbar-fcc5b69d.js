import{Q as d,ab as X,a9 as H,o,c as a,d as e,aa as t,t as u,k as h,l as C,a as i,b as z,w as p,F as k,f as M,T as S,B as J,h as D,g as W,j as Z,n as ee}from"./inputnumber.esm-e362c3ab.js";import{a as g}from"./index-362795f3.js";import{u as te}from"./dashboard_service-581787d8.js";import{S as oe}from"./Service-4ef425c0.js";import{p as ne}from"./ProfilePagesStore-775c8cd8.js";const se="/build/assets/setting-7207a137.svg",O="/build/assets/notification-429a4257.svg",ae="/build/assets/exit-9e7ca153.svg";const re={class:"grid items-center justify-between grid-cols-12"},le={class:"relative col-span-4 px-2 py-2 mx-2 border-1 border-x-gray-300"},ie={class:"text-black rounded focus:outline-none"},ce=e("p",{class:"text-left text-gray-600 text-md"},"Your organization",-1),ue={key:0,class:"flex justify-between items-center gap-2 py-0.5"},de=["src"],me={key:0,class:"absolute z-20 w-11/12 bg-white rounded shadow-lg top-5 left-2 mt-14"},_e={class:"transition transform cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},ge=["onClick"],fe={class:"cursor-pointer flex mx-2 align-center justify-between rounded-lg p-0.5"},ve={class:"flex items-center justify-between gap-4 p-1 mx-2 border rounded",style:{height:"30px",width:"30px"}},he=["src"],pe={key:0,class:"px-2 text-sm font-semibold whitespace-nowrap"},ye={key:1,class:"px-2 text-sm font-semibold whitespace-nowrap"},be={key:0},we=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 font-semibold text-green-600"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"})],-1),xe=[we],ke={class:"relative col-span-4"},Se={key:0,class:"absolute top-0 left-0 z-40 w-3/4 px-3 py-4 mt-16 overflow-x-scroll bg-white rounded shadow-lg"},Ce=["onClick"],Ee={class:"flex"},Ne={class:"text-sm font-bold text-gray-900"},Le={class:"float-right text-xs font-bold text-gray-600"},Te={class:"text-xs text-gray-600"},Ae={class:"flex justify-end col-span-4"},Me=e("img",{src:se,alt:"",class:"w-6 h-6"},null,-1),De=[Me],Ie={key:0,href:"config-master",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Be={key:1,href:"clientOnboarding",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},$e={key:2,href:"document_preview",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},je={key:3,href:"documents_settings",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Pe={key:4,href:"attendance-leavesettings",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},ze={key:5,href:"attendance_settings",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Oe={key:6,href:"investment_settings",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Ve={key:7,href:"Settings-Mobile",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Ge={key:8,href:"module-settings",class:"block w-full p-2 text-black transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Re=e("img",{src:O,alt:"",class:"w-6 h-6"},null,-1),Ue=[Re],Fe={class:"p-2 transition duration-700 ease-in-out transform bg-gray-100 rounded-full hover:bg-gray-200 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},qe=e("img",{src:ae,alt:"",class:"w-6 h-6"},null,-1),Ye=[qe],Ke={class:"flex px-3 py-2 text-white transition duration-700 ease-in-out transform focus:outline-none hover:bg-gray-200 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Qe=["src"],Xe={key:1,class:"rounded-lg bg-blue-50 text-black font-semibold p-1.5 text-sm"},He={key:2,class:"px-2 mx-2 my-auto text-sm font-semibold text-black whitespace-nowrap"},Je={key:3,class:"font-semibold text-[12px] mx-2 whitespace-nowrap font-['Poppins'] text-center text-black my-auto"},We={key:0,class:"absolute top-0 right-0 z-30 w-48 bg-white rounded shadow-lg mt-14"},Ze=e("a",{class:"block w-full p-2 transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",href:"pages-profile-new "},"View profile",-1),et=e("p",{class:"absolute left-0 mx-4 font-semibold fs-5"},[e("img",{src:O,alt:"",class:"w-6 h-6 animate-pulse"}),C(" Notification ")],-1),tt={class:"flex justify-between"},ot={class:"font-semibold orange-median fs-6"},nt=["onClick"],st=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),at=[st],rt={class:"text-sm"},lt={key:1,class:"w-full p-2 px-2 my-2 rounded-lg bg-red-50"},it=e("p",null,"No notifications to display",-1),ct=[it],ut={key:0,class:"relative z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},dt=e("div",{class:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75"},null,-1),mt={class:"fixed inset-0 z-10 overflow-y-auto"},_t={class:"flex items-end justify-center min-h-full p-4 text-center sm:items-center sm:p-0"},gt={class:"absolute z-50 p-8 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-2xl top-1/2 left-1/2"},ft=e("h2",{class:"text-lg font-bold"},"Are you sure you want to do that?",-1),vt=e("p",{class:"mt-2 text-sm text-gray-500"}," Do you really wish to log out? Any unsaved modifications will not be retained. ",-1),ht={class:"flex justify-center gap-2 mt-4"},Ct={__name:"Topbar",setup(pt){const l=te();let y=ne();const c=oe(),E=d(!1),b=d(""),N=d(),I=d(),V=d(!1),L=d(!1);d([{id:1,label:"Attendance",to:"attendance-timesheet"}]);const m=d(),G=()=>{g.get("/clients-fetchAll").then(r=>{I.value=r.data}).finally(()=>{})},B=()=>{g.get("session-sessionselectedclient").then(r=>{console.log(r.data),m.value=r.data}).finally(()=>{T()})},R=r=>{l.canShowLoading=!0;let n="/session-update-globalClient";console.log({client_id:r}),g.post(n,{client_id:r}).finally(()=>{B(),$()}).finally(()=>{l.canShowLoading=!1,T()})};function U(r,n){return n.filter(v=>v.emp_name.toLowerCase().includes(r.toLowerCase())||v.emp_code.toLowerCase().includes(r.toLowerCase()))}d();const $=()=>{g.get("/vmt-activeemployees-fetchall").then(r=>{N.value=r.data})},w=d(),j=()=>{g.get("/getNotifications").then(r=>{w.value=r.data.data})},F=r=>{g.post("/readNotification",{record_id:r}).finally(()=>{j()})};function T(){g.get("/update-MasterConfig-ClientCode",{}).then(()=>{})}const _=d();function q(){g.get("/getClient_AllModulePermissionDetails",{}).then(r=>{_.value=r.data.data})}X(()=>{$(),G(),B(),T(),setTimeout(()=>{V.value=!0},2e3),j(),q(),y.fetchEmployeeDetails(),y.getProfilePhoto()}),H(()=>{});async function Y(){try{const r=document.head.querySelector('meta[name="csrf-token"]').content;await g.post("/logout",null,{headers:{"X-CSRF-TOKEN":r}}).finally(()=>{window.location.reload()})}catch(r){console.error("Logout error:",r)}}async function K(r){console.log(r),window.location.href="/pages-profile-new?uid="+r}const P=["bg-orange-50","bg-emerald-50","bg-yellow-50","bg-rose-50","bg-cyan-50","bg-amber-50","bg-red-50","bg-blue-50","bg-pink-50","bg-green-50","bg-fuchsia-50"],Q=r=>(console.log(r),P[r%P.length]);function f(r,n){return r.find(x=>x.module_name===n)}return(r,n)=>{const x=W("Sidebar"),v=Z("tooltip");return o(),a(k,null,[e("div",{class:"bg-white h-[60px]",onMouseleave:n[12]||(n[12]=s=>t(l).canShowConfiguration=!1)},[e("div",re,[e("div",le,[e("button",ie,[ce,m.value?(o(),a("div",ue,[e("img",{src:m.value.client_logo,alt:"",class:"w-12 h-6"},null,8,de),m.value.client_fullname.length<=13?(o(),a("p",{key:0,class:"px-2 text-sm font-semibold whitespace-nowrap",onClick:n[0]||(n[0]=s=>t(l).canShowClients=!t(l).canShowClients)},u(m.value.client_fullname),1)):h((o(),a("p",{key:1,class:"font-semibold text-[12px] font-['Poppins'] text-center text-black my-auto",onClick:n[1]||(n[1]=s=>t(l).canShowClients=!t(l).canShowClients)},[C(u(m.value.client_fullname?m.value.client_fullname.substring(0,13)+"..":""),1)])),[[v,m.value.client_fullname]])])):i("",!0)]),t(c).current_user_role==1||t(c).current_user_role==2||t(c).current_user_role==3||t(c).current_user_role==4?(o(),z(S,{key:0,"enter-active-class":"transition duration-200 ease-out transform","enter-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-100 ease-in transform","leave-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0",onMouseleave:n[2]||(n[2]=s=>t(l).canShowClients=!1)},{default:p(()=>[t(l).canShowClients?(o(),a("div",me,[(o(!0),a(k,null,M(I.value,s=>(o(),a("div",_e,[e("div",{class:"flex items-center justify-between p-2 hover:bg-gray-200",onClick:A=>(R(s.id),t(l).canShowClients=!1)},[e("div",fe,[e("div",ve,[e("img",{src:s.client_logo,alt:"",class:"mh-100 mw-100"},null,8,he),s.client_fullname.length<=40?(o(),a("p",pe,u(s.client_fullname)+" "+u(s.abs_client_code),1)):h((o(),a("p",ye,[C(u(s.client_fullname?s.client_fullname.substring(0,40)+"..":""),1)])),[[v,s.client_fullname]])])]),m.value&&m.value.id==s.id?(o(),a("div",be,xe)):i("",!0)],8,ge)]))),256))])):i("",!0)]),_:1})):i("",!0)]),e("div",ke,[h(e("input",{type:"text",name:"",id:"",class:"border p-1.5 bg-gray-100 border-gray-300 rounded-lg w-full","onUpdate:modelValue":n[3]||(n[3]=s=>b.value=s),placeholder:"Search...."},null,512),[[J,b.value]]),D(S,{"enter-active-class":"transition duration-200 ease-out transform","enter-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-100 ease-in transform","leave-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0"},{default:p(()=>[b.value?(o(),a("div",Se,[(o(!0),a(k,null,M(U(b.value,N.value?N.value:[]),s=>(o(),a("div",{class:"w-full p-2 transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",onClick:A=>K(s.enc_user_id)},[e("div",Ee,[e("p",Ne,[C(u(s.emp_name)+" ",1),e("span",Le,u(s.emp_code),1)])]),e("div",null,[e("p",Te,u(s.emp_designation),1)])],8,Ce))),256))])):i("",!0)]),_:1})]),e("div",Ae,[t(c).current_user_role==1||t(c).current_user_role==2||t(c).current_user_role==3?h((o(),a("button",{key:0,class:"p-2 mx-2 transition duration-700 ease-in-out transform bg-gray-100 rounded-full hover:bg-gray-200 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",onClick:n[4]||(n[4]=s=>t(l).canShowConfiguration=!t(l).canShowConfiguration)},De)),[[v,"Settings"]]):i("",!0),_.value?(o(),z(S,{key:1,"enter-active-class":"transition duration-200 ease-out transform","enter-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-100 ease-in transform","leave-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0",onMouseleave:n[7]||(n[7]=s=>t(l).canShowConfiguration=!1)},{default:p(()=>[t(l).canShowConfiguration?(o(),a("div",{key:0,onClick:n[5]||(n[5]=s=>t(l).canShowConfiguration=!t(l).canShowConfiguration),class:"absolute top-0 z-50 p-2 mt-16 bg-white rounded shadow-lg right-40 w-60",onMouseleave:n[6]||(n[6]=s=>t(l).canShowConfiguration=!1)},[f(_.value,"MASTER CONFIG").sub_module_name.IS_ENABLED===1?(o(),a("a",Ie," Master config")):i("",!0),f(_.value,"CLIENT ONBOARDING").sub_module_name.IS_ENABLED===1?(o(),a("a",Be," Client onboarding")):i("",!0),f(_.value,"DOCUMENT TEMPLATES").sub_module_name.IS_ENABLED===1?(o(),a("a",$e," Document template")):i("",!0),f(_.value,"DOCUMENT SETTINGS").sub_module_name.IS_ENABLED===1?(o(),a("a",je," Document settings")):i("",!0),f(_.value,"LEAVE SETTINGS").sub_module_name.IS_ENABLED===1?(o(),a("a",Pe," Leave setting")):i("",!0),f(_.value,"ATTENDANCE SETTINGS").sub_module_name.IS_ENABLED===1?(o(),a("a",ze," Attendance setting")):i("",!0),f(_.value,"INVESTMENT SETTINGS").sub_module_name.IS_ENABLED===1?(o(),a("a",Oe," Investment setting")):i("",!0),f(_.value,"MOBILE APP SETTINGS").sub_module_name.IS_ENABLED===1?(o(),a("a",Ve," Mobile setting")):i("",!0),t(c).current_user_is_ssa==1?(o(),a("a",Ge," Module setting")):i("",!0)],32)):i("",!0)]),_:1})):i("",!0),h((o(),a("button",{class:"p-2 mx-2 transition duration-700 ease-in-out transform bg-gray-100 rounded-full animate-pulse hover:bg-gray-200 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",onClick:n[8]||(n[8]=s=>E.value=!0)},Ue)),[[v,"Notification"]]),h((o(),a("button",Fe,Ye)),[[v,"Exit"]]),e("div",{class:"relative mx-3",onClick:n[11]||(n[11]=s=>t(l).canShowCurrentEmployee=!t(l).canShowCurrentEmployee)},[e("button",Ke,[t(c).current_user_code!="SA_ABS"&&t(y).profile_img?(o(),a("img",{key:0,class:"forRounded w-[30px] h-[30px] rounded-full",src:`data:image/png;base64,${t(y).profile}`,srcset:"",alt:"",id:"output"},null,8,Qe)):(o(),a("p",Xe,u(t(c).current_user_name?t(c).current_user_name.substring(0,2):""),1)),t(c).current_user_name&&t(c).current_user_name.length<=10?(o(),a("p",He,u(t(c).current_user_name?t(c).current_user_name:""),1)):(o(),a("p",Je,u(t(c).current_user_name?t(c).current_user_name.substring(0,10)+"..":""),1))]),D(S,{"enter-active-class":"transition duration-200 ease-out transform","enter-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-100 ease-in transform","leave-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-2 opacity-0",onMouseleave:n[10]||(n[10]=s=>t(l).canShowCurrentEmployee=!1)},{default:p(()=>[t(l).canShowCurrentEmployee?(o(),a("div",We,[Ze,e("a",{onClick:n[9]||(n[9]=s=>L.value=!0),class:"block w-full p-2 transition transform rounded-lg cursor-pointer hover:bg-gray-100 hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},"Log out")])):i("",!0)]),_:1})])])])],32),D(x,{visible:E.value,"onUpdate:visible":n[13]||(n[13]=s=>E.value=s),position:"right",class:"w-full"},{header:p(()=>[et]),default:p(()=>[w.value&&w.value.length>0?(o(!0),a(k,{key:0},M(w.value,(s,A)=>(o(),a("div",{class:ee(["w-full p-2 px-2 my-2 rounded-lg",`${Q(A)}`])},[e("div",tt,[e("div",null,[e("p",ot,u(s.notification_title),1)]),e("div",null,[e("button",{onClick:yt=>F(s.id)},at,8,nt)])]),e("p",rt,u(s.notification_body),1)],2))),256)):(o(),a("div",lt,ct))]),_:1},8,["visible"]),L.value?(o(),a("div",ut,[dt,e("div",mt,[e("div",_t,[e("div",gt,[ft,vt,e("div",ht,[e("button",{onClick:Y,type:"button",class:"px-4 py-2 text-sm font-medium text-green-600 rounded bg-green-50"}," Yes, I'm sure "),e("button",{onClick:n[14]||(n[14]=s=>L.value=!1),type:"button",class:"px-4 py-2 text-sm font-medium text-gray-600 rounded bg-gray-50"}," No, go back ")])])])])])):i("",!0)],64)}}};export{Ct as _};
