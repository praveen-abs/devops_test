import{B as x,X as Q,E as X,c as L,h as s,w as u,W as k,a0 as B,e as N,K as O,g as b,o as R,t as S,j as P,n as E,a as ee,G as te,P as ne,H as ae,R as oe,q as re}from"./toastservice.esm-c4f6de4c.js";import{T as se,B as ie,S as le,b as ue,a as de}from"./styleclass.esm-ea560a03.js";import"./blockui.esm-85692cd0.js";import{u as me,C as ce,F as pe,b as ye,s as fe,a as ve}from"./inputtext.esm-5faf66bf.js";import{s as ge}from"./confirmdialog.esm-51539a4d.js";import{D as he}from"./dialogservice.esm-b46cc252.js";import{s as _e}from"./toast.esm-8d255b70.js";import{s as Te}from"./progressspinner.esm-455f2fd3.js";import{s as De}from"./row.esm-6ebc942e.js";import{s as we}from"./columngroup.esm-9dd1458e.js";import{s as Me}from"./tag.esm-82557d24.js";import{s as be}from"./overlaypanel.esm-e6b90e82.js";import{a as J}from"./index-f7a317fc.js";var Se=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,Ne=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,Ce=/[^-+\dA-Z]/g;function j(n,o,a,d){if(arguments.length===1&&typeof n=="string"&&!/\d/.test(n)&&(o=n,n=void 0),n=n||n===0?n:new Date,n instanceof Date||(n=new Date(n)),isNaN(n))throw TypeError("Invalid date");o=String(z[o]||o||z.default);var v=o.slice(0,4);(v==="UTC:"||v==="GMT:")&&(o=o.slice(4),a=!0,v==="GMT:"&&(d=!0));var r=function(){return a?"getUTC":"get"},g=function(){return n[r()+"Date"]()},w=function(){return n[r()+"Day"]()},h=function(){return n[r()+"Month"]()},c=function(){return n[r()+"FullYear"]()},m=function(){return n[r()+"Hours"]()},D=function(){return n[r()+"Minutes"]()},C=function(){return n[r()+"Seconds"]()},A=function(){return n[r()+"Milliseconds"]()},_=function(){return a?0:n.getTimezoneOffset()},H=function(){return Ae(n)},W=function(){return xe(n)},l={d:function(){return g()},dd:function(){return f(g())},ddd:function(){return p.dayNames[w()]},DDD:function(){return I({y:c(),m:h(),d:g(),_:r(),dayName:p.dayNames[w()],short:!0})},dddd:function(){return p.dayNames[w()+7]},DDDD:function(){return I({y:c(),m:h(),d:g(),_:r(),dayName:p.dayNames[w()+7]})},m:function(){return h()+1},mm:function(){return f(h()+1)},mmm:function(){return p.monthNames[h()]},mmmm:function(){return p.monthNames[h()+12]},yy:function(){return String(c()).slice(2)},yyyy:function(){return f(c(),4)},h:function(){return m()%12||12},hh:function(){return f(m()%12||12)},H:function(){return m()},HH:function(){return f(m())},M:function(){return D()},MM:function(){return f(D())},s:function(){return C()},ss:function(){return f(C())},l:function(){return f(A(),3)},L:function(){return f(Math.floor(A()/10))},t:function(){return m()<12?p.timeNames[0]:p.timeNames[1]},tt:function(){return m()<12?p.timeNames[2]:p.timeNames[3]},T:function(){return m()<12?p.timeNames[4]:p.timeNames[5]},TT:function(){return m()<12?p.timeNames[6]:p.timeNames[7]},Z:function(){return d?"GMT":a?"UTC":ke(n)},o:function(){return(_()>0?"-":"+")+f(Math.floor(Math.abs(_())/60)*100+Math.abs(_())%60,4)},p:function(){return(_()>0?"-":"+")+f(Math.floor(Math.abs(_())/60),2)+":"+f(Math.floor(Math.abs(_())%60),2)},S:function(){return["th","st","nd","rd"][g()%10>3?0:(g()%100-g()%10!=10)*g()%10]},W:function(){return H()},WW:function(){return f(H())},N:function(){return W()}};return o.replace(Se,function(e){return e in l?l[e]():e.slice(1,e.length-1)})}var z={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},p={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},f=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(o).padStart(a,"0")},I=function(o){var a=o.y,d=o.m,v=o.d,r=o._,g=o.dayName,w=o.short,h=w===void 0?!1:w,c=new Date,m=new Date;m.setDate(m[r+"Date"]()-1);var D=new Date;D.setDate(D[r+"Date"]()+1);var C=function(){return c[r+"Date"]()},A=function(){return c[r+"Month"]()},_=function(){return c[r+"FullYear"]()},H=function(){return m[r+"Date"]()},W=function(){return m[r+"Month"]()},l=function(){return m[r+"FullYear"]()},e=function(){return D[r+"Date"]()},V=function(){return D[r+"Month"]()},U=function(){return D[r+"FullYear"]()};return _()===a&&A()===d&&C()===v?h?"Tdy":"Today":l()===a&&W()===d&&H()===v?h?"Ysd":"Yesterday":U()===a&&V()===d&&e()===v?h?"Tmw":"Tomorrow":g},Ae=function(o){var a=new Date(o.getFullYear(),o.getMonth(),o.getDate());a.setDate(a.getDate()-(a.getDay()+6)%7+3);var d=new Date(a.getFullYear(),0,4);d.setDate(d.getDate()-(d.getDay()+6)%7+3);var v=a.getTimezoneOffset()-d.getTimezoneOffset();a.setHours(a.getHours()-v);var r=(a-d)/(864e5*7);return 1+Math.floor(r)},xe=function(o){var a=o.getDay();return a===0&&(a=7),a},ke=function(o){return(String(o).match(Ne)||[""]).pop().replace(Ce,"").replace(/GMT\+0000/g,"UTC")};const Pe=N("h5",{style:{"text-align":"center"}},"Please wait...",-1),He=N("h5",{style:{"text-align":"center"}},"Please wait...",-1),Le={class:"confirmation-content"},Re=N("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),We={key:0},Fe={key:1},Oe={key:1},Ue={key:0},$e={__name:"LeaveApproval",setup(n){let o=x(),a=x(!1),d=x(!1);me(),Q();const v=x({global:{value:null,matchMode:O.CONTAINS},employee_name:{value:null,matchMode:O.STARTS_WITH,matchMode:O.EQUALS,matchMode:O.CONTAINS},status:{value:"Pending",matchMode:O.EQUALS}}),r=x(!0),g=x(["Pending","Approved","Rejected"]),w=x(),h=l=>{w.value.toggle(l)};let c=null,m=null;X(()=>{D()});function D(){let l=window.location.origin+"/fetch-leaverequests/org/Approved,Rejected,Pending";console.log("AJAX URL : "+l),J.get(l).then(e=>{console.log("Axios : "+e.data),o.value=e.data,r.value=!1})}function C(l,e){a.value=!0,c=e,m=l,console.log("Selected Row Data : "+JSON.stringify(l))}function A(l){a.value=!1,l&&_()}function _(){c="",m=null}function H(){A(!1),d.value=!0,console.log("Processing Rowdata : "+JSON.stringify(m)),J.post(window.location.origin+"/attendance-approve-rejectleave",{leave_id:m.id,status:c=="Approve"?"Approved":c=="Reject"?"Rejected":c,leave_rejection_text:""}).then(l=>{console.log(l),D(),d.value=!1,_()}).catch(l=>{d.value=!1,_(),console.log(l.toJSON())})}const W=l=>{switch(l){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};return(l,e)=>{const V=b("Toast"),U=b("ProgressSpinner"),T=b("Dialog"),$=b("Button"),Y=b("InputText"),M=b("Column"),Z=b("OverlayPanel"),G=b("Tag"),q=b("Dropdown"),K=b("DataTable");return R(),L("div",null,[s(V),s(T,{header:"Header",visible:r.value,"onUpdate:visible":e[0]||(e[0]=t=>r.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:u(()=>[s(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:u(()=>[Pe]),_:1},8,["visible"]),s(T,{header:"Header",visible:k(d),"onUpdate:visible":e[1]||(e[1]=t=>B(d)?d.value=t:d=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:u(()=>[s(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:u(()=>[He]),_:1},8,["visible"]),s(T,{header:"Confirmation",visible:k(a),"onUpdate:visible":e[4]||(e[4]=t=>B(a)?a.value=t:a=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:u(()=>[s($,{label:"Yes",icon:"pi pi-check",onClick:e[2]||(e[2]=t=>H()),class:"p-button-text",autofocus:""}),s($,{label:"No",icon:"pi pi-times",onClick:e[3]||(e[3]=t=>A(!0)),class:"p-button-text"})]),default:u(()=>[N("div",Le,[Re,N("span",null,"Are you sure you want to "+S(k(c))+"?",1)])]),_:1},8,["visible"]),N("div",null,[s(K,{value:k(o),paginator:!0,rows:10,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:v.value,"onUpdate:filters":e[5]||(e[5]=t=>v.value=t),filterDisplay:"menu",loading:l.loading2,globalFilterFields:["name","status"],style:{"white-space":"nowrap"}},{empty:u(()=>[P(" No Employee found ")]),loading:u(()=>[P(" Loading customers data. Please wait. ")]),default:u(()=>[s(M,{class:"font-bold",field:"employee_name",header:"Employee Name",style:{"min-width":"18em"}},{body:u(t=>[P(S(t.data.employee_name),1)]),filter:u(({filterModel:t,filterCallback:F})=>[s(Y,{modelValue:t.value,"onUpdate:modelValue":y=>t.value=y,onInput:y=>F(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),s(M,{field:"leaverequest_date",header:"Date",sortable:!0},{body:u(t=>[P(S(k(j)(t.data.leaverequest_date,"dd-mm-yyyy, h:MM TT")),1)]),_:1}),s(M,{field:"leave_type",header:"Leave Type"}),s(M,{field:"start_date",header:"Start Time"},{body:u(t=>[P(S(k(j)(t.data.start_date,"dd-mm-yyyy, h:MM TT")),1)]),_:1}),s(M,{field:"end_date",header:"End Time"},{body:u(t=>[P(S(k(j)(t.data.end_date,"dd-mm-yyyy, h:MM TT")),1)]),_:1}),s(M,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"25em","white-space":"pre-wrap"}},{body:u(t=>[t.data.leave_reason.length>80?(R(),L("div",We,[N("p",{onClick:h,class:"font-medium text-orange-400 underline cursor-pointer"},"explore more... "),s(Z,{ref_key:"overlayPanel",ref:w,style:{height:"80px"}},{default:u(()=>[P(S(t.data.leave_reason),1)]),_:2},1536)])):(R(),L("div",Fe,S(t.data.leave_reason),1))]),_:1}),s(M,{field:"reviewer_name",header:"Approver Name"}),s(M,{field:"reviewer_comments",header:"Approver Comments"}),s(M,{field:"status",header:"Status",icon:"pi pi-check"},{body:u(({data:t})=>[s(G,{value:t.status,severity:W(t.status)},null,8,["value","severity"])]),filter:u(({filterModel:t,filterCallback:F})=>[s(q,{modelValue:t.value,"onUpdate:modelValue":y=>t.value=y,onChange:y=>F(),options:g.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:u(y=>[y.value?(R(),L("span",{key:0,class:E("customer-badge status-"+y.value)},S(y.value),3)):(R(),L("span",Oe,S(y.placeholder),1))]),option:u(y=>[N("span",{class:E("customer-badge status-"+y.option)},S(y.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),s(M,{style:{width:"300px"},field:"",header:"Action"},{body:u(t=>[t.data.status=="Pending"?(R(),L("span",Ue,[s($,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve",onClick:F=>C(t.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),s($,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2em"},onClick:F=>C(t.data,"Reject")},null,8,["onClick"])])):ee("",!0)]),_:1})]),_:1},8,["value","filters","loading"])])])}}},i=te($e);i.use(ne,{ripple:!0});i.use(ce);i.use(ae);i.use(he);i.directive("tooltip",se);i.directive("badge",ie);i.directive("ripple",oe);i.directive("styleclass",le);i.directive("focustrap",pe);i.component("Button",re);i.component("DataTable",ue);i.component("Column",de);i.component("ColumnGroup",we);i.component("Row",De);i.component("Toast",_e);i.component("ConfirmDialog",ge);i.component("Dropdown",ye);i.component("InputText",fe);i.component("Dialog",ve);i.component("ProgressSpinner",Te);i.component("Tag",Me);i.component("OverlayPanel",be);i.mount("#VJS_LeaveApproval");
