import{G as _,aj as Y,aa as h,ah as F,o as p,c as u,h as t,w as a,H as y,Y as P,d as l,t as c,l as V,n as $,a as H,g as d,I as W,P as G,J as K,R as Q,u as X,v as q,K as Z,N as ee,L as te,M as ae,A as oe}from"./toastservice.esm-b6cf114f.js";import{T as se,B as ne,S as ie,b as le,a as re}from"./styleclass.esm-04f8718d.js";import"./blockui.esm-5ec0c8d8.js";import{u as ce,C as de}from"./confirmationservice.esm-080a66d2.js";import{s as pe}from"./progressspinner.esm-9b11e3fc.js";import{s as ue}from"./tag.esm-7957b37f.js";import{a as z}from"./index-362795f3.js";import{h as me}from"./moment-fbc5633a.js";const ve=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),ge=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),_e={class:"confirmation-content"},fe=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),he={class:"flex justify-content-center align-items-center"},ye={key:0,if:"",class:"p-2 w-3 h-18 text-semibold rounded-full bg-blue-900 text-white"},we=["src"],be={class:"text-left pl-2"},xe={class:"text-right"},Se={class:"text-center p-2"},Ce={key:0},ke={key:1},Te={key:1},Ae={key:0,style:{width:"250px",display:"block"}},Re={__name:"AttRegularizationApproval",setup(De){let k=_(),v=_(!1),m=_(!1);ce();const L=Y(),x=_(!0),T=_({global:{value:null,matchMode:h.CONTAINS},employee_name:{value:null,matchMode:h.STARTS_WITH,matchMode:h.EQUALS,matchMode:h.CONTAINS},status:{value:"Pending",matchMode:h.EQUALS}}),O=_(["Pending","Approved","Rejected"]);let g=null,w=null;F(()=>{A()});function A(){let n=window.location.origin+"/fetch-att-regularization-data";console.log("AJAX URL : "+n),z.get(n).then(s=>{console.log("Axios : "+s.data),k.value=Object.values(s.data),x.value=!1})}function R(n,s){v.value=!0,g=s,w=n,console.log("Selected Row Data : "+JSON.stringify(n))}function D(n){v.value=!1,n&&S()}function S(){g="",w=null}const j=n=>{switch(n){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function U(){D(!1),m.value=!0,console.log("Processing Rowdata : "+JSON.stringify(w)),z.post(window.location.origin+"/attendance-regularization-approvals",{id:w.id,status:g=="Approve"?"Approved":g=="Reject"?"Rejected":g,status_text:""}).then(n=>{console.log("Response : "+n),m.value=!1,L.add({severity:"success",summary:"Info",detail:"Success",life:3e3}),A(),S()}).catch(n=>{m.value=!1,S(),console.log(n.toJSON())})}return(n,s)=>{const B=d("Toast"),N=d("ProgressSpinner"),C=d("Dialog"),b=d("Button"),I=d("InputText"),r=d("Column"),M=d("Tag"),J=d("Dropdown"),E=d("DataTable");return p(),u("div",null,[t(B),t(C,{header:"Header",visible:x.value,"onUpdate:visible":s[0]||(s[0]=e=>x.value=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:a(()=>[t(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:a(()=>[ve]),_:1},8,["visible"]),t(C,{header:"Header",visible:y(m),"onUpdate:visible":s[1]||(s[1]=e=>P(m)?m.value=e:m=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:a(()=>[t(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:a(()=>[ge]),_:1},8,["visible"]),t(C,{header:"Confirmation",visible:y(v),"onUpdate:visible":s[4]||(s[4]=e=>P(v)?v.value=e:v=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:a(()=>[t(b,{label:"Yes",icon:"pi pi-check",onClick:s[2]||(s[2]=e=>U()),class:"p-button-text",autofocus:""}),t(b,{label:"No",icon:"pi pi-times",onClick:s[3]||(s[3]=e=>D(!0)),class:"p-button-text"})]),default:a(()=>[l("div",_e,[fe,l("span",null,"Are you sure you want to "+c(y(g))+"?",1)])]),_:1},8,["visible"]),l("div",null,[t(E,{value:y(k),paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:T.value,"onUpdate:filters":s[5]||(s[5]=e=>T.value=e),filterDisplay:"menu",loading:n.loading2,globalFilterFields:["name","status"]},{empty:a(()=>[V(" No Employeee found. ")]),loading:a(()=>[V(" Loading customers data. Please wait. ")]),default:a(()=>[t(r,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:a(e=>[l("div",he,[JSON.parse(e.data.employee_avatar).type=="shortname"?(p(),u("p",ye,c(JSON.parse(e.data.employee_avatar).data),1)):(p(),u("img",{key:1,class:"rounded-circle img-md w-3 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(e.data.employee_avatar).data}`,srcset:"",alt:""},null,8,we)),l("p",be,c(e.data.employee_name),1)])]),filter:a(({filterModel:e,filterCallback:f})=>[t(I,{modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,onInput:i=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(r,{field:"attendance_date",header:"Date",sortable:!0,style:{"min-width":"10rem"}},{body:a(e=>[l("h1",xe,c(y(me)(e.data.attendance_date).format("DD-MM-YYYY")),1)]),_:1}),t(r,{field:"regularization_type",header:"Type",style:{"min-width":"10rem"}},{body:a(e=>[l("div",Se,c(e.data.regularization_type),1)]),_:1}),t(r,{field:"user_time",header:"Actual Time",style:{"min-width":"10rem"}}),t(r,{field:"regularize_time",header:"Regularize Time",style:{"min-width":"10rem"}}),t(r,{field:"reason_type",header:"Reason",style:{"min-width":"18rem"}},{body:a(e=>[e.data.reason_type=="Others"?(p(),u("span",Ce,c(e.data.custom_reason),1)):(p(),u("span",ke,c(e.data.reason_type),1))]),_:1}),t(r,{field:"reviewer_comments",header:"Approve Comments"}),t(r,{field:"reviewer_reviewed_date",header:"Reviewed Date"}),t(r,{field:"status",header:"Status",icon:"pi pi-check"},{body:a(({data:e})=>[t(M,{value:e.status,severity:j(e.status)},null,8,["value","severity"])]),filter:a(({filterModel:e,filterCallback:f})=>[t(J,{modelValue:e.value,"onUpdate:modelValue":i=>e.value=i,onChange:i=>f(),options:O.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:a(i=>[i.value?(p(),u("span",{key:0,class:$("customer-badge status-"+i.value)},c(i.value),3)):(p(),u("span",Te,c(i.placeholder),1))]),option:a(i=>[l("span",{class:$("customer-badge status-"+i.option)},c(i.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),t(r,{field:"",header:"Action"},{body:a(e=>[e.data.status=="Pending"?(p(),u("span",Ae,[t(b,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:f=>R(e.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(b,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:f=>R(e.data,"Reject")},null,8,["onClick"])])):H("",!0)]),_:1})]),_:1},8,["value","filters","loading"])])])}}},o=W(Re);o.use(G,{ripple:!0});o.use(de);o.use(K);o.directive("tooltip",se);o.directive("badge",ne);o.directive("ripple",Q);o.directive("styleclass",ie);o.directive("focustrap",X);o.component("Button",q);o.component("DataTable",le);o.component("Column",re);o.component("ConfirmDialog",Z);o.component("Toast",ee);o.component("Dialog",te);o.component("Dropdown",ae);o.component("ProgressSpinner",pe);o.component("InputText",oe);o.component("Tag",ue);o.mount("#vjs_regularizationTable");
