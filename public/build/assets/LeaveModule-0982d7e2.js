import{H as i,_ as b,g as y,o as m,c as g,e,h as t,w as o,k as _,t as d,a3 as R,n as A,a as I,F as V,al as B,I as O,f as M,b as U,J as Y,P as H,K as Q,L as G,R as J,u as K,v as W,V as q,M as z,Q as X,A as Z,N as ee,S as ae}from"./toastservice.esm-1e19bead.js";import{d as te,c as le}from"./pinia-8c47295b.js";import{T as oe,B as se,S as ne,b as ie,a as re}from"./styleclass.esm-fce48f9f.js";import"./blockui.esm-2f48c23f.js";import{D as de}from"./dialogservice.esm-341570db.js";import{s as ce}from"./row.esm-6ebc942e.js";import{s as me}from"./columngroup.esm-9dd1458e.js";import{s as ue}from"./calendar.esm-d56ef9a8.js";import{s as pe}from"./checkbox.esm-c15bef39.js";import{h as N}from"./moment-fbc5633a.js";import{a as S}from"./index-f7a317fc.js";import"./dayjs.min-ed58423a.js";const F=te("useLeaveModuleStore",()=>{const P=i(),x=i(),w=i();i();async function k(u,s,p,c){S.post("/attendance/getEmployeeLeaveDetails",{user_code:u,filter_month:s,filter_year:p,filter_leave_status:c}).then(n=>{P.value=n.data,console.log("getEmployeeLeaveHistory() : "+n.data)})}async function D(u,s,p,c){S.post("/attendance/getTeamLeaveDetails",{manager_code:u,filter_month:s,filter_year:p,filter_leave_status:c}).then(n=>{x.value=n.data,console.log("getTeamLeaveHistory() : "+n.data)})}async function L(u,s,p){S.post("/attendance/getAllEmployeesLeaveDetails",{filter_month:u,filter_year:s,filter_leave_status:p}).then(c=>{w.value=c.data,console.log("getOrgLeaveHistory() : "+c.data)})}async function T(u){S.post("/attendance/getLeaveDetails",{record_id:u}).then(s=>{w.value=s.data,console.log("getLeaveDetails() : "+s.data)})}return{array_employeeLeaveHistory:P,array_teamLeaveHistory:x,array_orgLeaveHistory:w,getEmployeeLeaveHistory:k,getTeamLeaveHistory:D,getAllEmployeesLeaveDetails:L,getLeaveDetails:T}}),ve=B('<div class="mb-3 tw-card"><div class="mb-2 row"><div class="col-sm-6 col-xl-6 col-md-6 col-lg-6"><h6 class="text-lg font-semibold text-gray-900 modal-title">Leave Balance</h6></div><div class="col-6 justify-content-end d-flex"></div></div><div class="grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4" style="display:grid;"><div class="tw-card dynamic-card"><div class="text-center"><p class="mb-2 text-base font-semibold"></p><h6 class="mb-0 text-sm font-semibold"></h6></div></div></div></div><div class="tw-card"><h6 class="mb-4 text-lg font-semibold text-gray-900 modal-title">Leave Availed</h6><div class="grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4" style="display:grid;"><div class="bg-indigo-100 border-l-4 border-indigo-300 tw-card"><div class="text-center"><p class="mb-2 text-base font-semibold"></p><h6 class="mb-0 text-base font-semibold"></h6></div></div></div></div>',2),_e={class:"mt-3 row"},ge={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},he={class:"mb-0 card leave-history"},ye={class:"card-body"},fe=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Leave history",-1),be={class:"table-responsive"},we=e("div",null,null,-1),Le={key:0},xe={key:1},ke={key:1},Te={key:0},Ce={__name:"EmployeeLeaveDetails",setup(P){F();const x=i(),w=L=>{x.value.toggle(L)},k=i({global:{value:null,matchMode:b.CONTAINS},employee_name:{value:null,matchMode:b.STARTS_WITH,matchMode:b.EQUALS,matchMode:b.CONTAINS},status:{value:null,matchMode:b.EQUALS}}),D=i(["Pending","Approved","Rejected"]);return(L,T)=>{const u=y("InputText"),s=y("Column"),p=y("OverlayPanel"),c=y("Dropdown"),n=y("Button"),f=y("DataTable");return m(),g(V,null,[ve,e("div",_e,[e("div",ge,[e("div",he,[e("div",ye,[fe,e("div",be,[t(f,{paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:k.value,"onUpdate:filters":T[0]||(T[0]=a=>k.value=a),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[_(" No Employee data..... ")]),loading:o(()=>[_(" Loading customers data. Please wait. ")]),default:o(()=>[t(s,{field:"employee_name",header:"Employee Name"},{body:o(a=>[we,_(" "+d(a.data.employee_name),1)]),filter:o(({filterModel:a,filterCallback:$})=>[t(u,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,onInput:h=>$(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(s,{field:"leave_type",header:"Leave Type",style:{"min-width":"8rem"}}),t(s,{field:"start_date",header:"Start Date"},{body:o(a=>[_(d(R(N)(a.data.start_date).format("DD-MM-YYYY")),1)]),_:1}),t(s,{field:"end_date",header:"End Date",dataType:"date"},{body:o(a=>[_(d(R(N)(a.data.end_date).format("DD-MM-YYYY")),1)]),_:1}),t(s,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:o(a=>[a.data.leave_reason&&a.data.leave_reason.length>70?(m(),g("div",Le,[e("p",{onClick:w,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),t(p,{ref_key:"overlayPanel",ref:x,style:{height:"80px"}},{default:o(()=>[_(d(a.data.leave_reason),1)]),_:2},1536)])):(m(),g("div",xe,d(a.data.leave_reason??""),1))]),_:1}),t(s,{field:"reviewer_name",header:"Approver Name"}),t(s,{field:"reviewer_comments",header:"Approver Comments"}),t(s,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:a})=>[e("span",{class:A("customer-badge status-"+a.status)},d(a.status),3)]),filter:o(({filterModel:a,filterCallback:$})=>[t(c,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,onClick:h=>$(),options:D.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(h=>[h.value?(m(),g("span",{key:0,class:A("customer-badge status-"+h.value)},d(h.value),3)):(m(),g("span",ke,d(h.placeholder),1))]),option:o(h=>[e("span",{class:A("customer-badge status-"+h.option)},d(h.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick","options"])]),_:1}),t(s,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:o(a=>[a.data.status=="Pending"?(m(),g("span",Te,[t(n,{type:"button",icon:"pi pi-check-circle",class:"p-button-success text-white Button py-2.5",label:"Approve",onClick:$=>L.showConfirmDialog(a.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(n,{type:"button",icon:"pi pi-times-circle",class:"text-white p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2em"},onClick:$=>L.showConfirmDialog(a.data,"Reject")},null,8,["onClick"])])):I("",!0)]),_:1})]),_:1},8,["filters"])])])])])])],64)}}},De={class:"mt-3 row"},$e={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Se={class:"mb-0 card leave-history"},Pe={class:"card-body"},Ae=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave Balance",-1),Ve={class:"mt-3 row"},Re={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Ne={class:"mb-0 card leave-history"},Oe={class:"card-body"},Ee=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave history",-1),Ie=e("div",null,null,-1),Be={key:0},Me={key:1},Ue={key:1},Fe={key:0},je={__name:"OrgLeaveDetails",setup(P){const x=i(),w=i(),k=i(),D=i();i(),i();const L=i(!0),T=i(),u=c=>{T.value.toggle(c)},s=i({global:{value:null,matchMode:b.CONTAINS},employee_name:{value:null,matchMode:b.STARTS_WITH,matchMode:b.EQUALS,matchMode:b.CONTAINS},status:{value:null,matchMode:b.EQUALS}}),p=i(["Pending","Approved","Rejected"]);return O(()=>{let c=window.location.origin+"/fetch-org-leaves-balance";console.log("Fetching ORG LEAVE from url : "+c),S.get(c).then(f=>{x.value=Object.values(f.data),w.value=Object.values(f.data.leave_types),k.value=Object.values(f.data.employees),L.value=!1});let n=window.location.origin+"/fetch-leaverequests/org/Approved,Rejected,Pending";S.get(n).then(f=>{D.value=f.data,L.value=!1})}),(c,n)=>{const f=y("InputText"),a=y("Column"),$=y("DataTable"),h=y("OverlayPanel"),j=y("Dropdown"),E=y("Button");return m(),g(V,null,[e("div",De,[e("div",$e,[e("div",Se,[e("div",Pe,[Ae,e("div",null,[t($,{value:k.value,rows:5,rowsPerPageOptions:[5,10,25],paginator:!0,responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",filters:s.value,"onUpdate:filters":n[0]||(n[0]=l=>s.value=l),filterDisplay:"menu",globalFilterFields:["name","status"]},{default:o(()=>[t(a,{field:"employee_name",header:"Employee Name",style:{"min-width":"15rem"}},{body:o(l=>[_(d(l.data.employee_name),1)]),filter:o(({filterModel:l,filterCallback:C})=>[t(f,{modelValue:l.value,"onUpdate:modelValue":v=>l.value=v,onInput:v=>C(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),(m(!0),g(V,null,M(w.value,l=>(m(),U(a,{key:l.id,header:l,field:"array_leave_details"},{body:o(({data:C})=>[_(d(C.array_leave_details[l]),1)]),_:2},1032,["header"]))),128))]),_:1},8,["value","filters"])])])])])]),e("div",Ve,[e("div",Re,[e("div",Ne,[e("div",Oe,[Ee,e("div",null,[t($,{value:D.value,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:s.value,"onUpdate:filters":n[1]||(n[1]=l=>s.value=l),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[_(" No Employee data..... ")]),loading:o(()=>[_(" Loading customers data. Please wait. ")]),default:o(()=>[t(a,{field:"employee_name",header:"Employee Name"},{body:o(l=>[Ie,_(" "+d(l.data.employee_name),1)]),filter:o(({filterModel:l,filterCallback:C})=>[t(f,{modelValue:l.value,"onUpdate:modelValue":v=>l.value=v,onInput:v=>C(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(a,{field:"leave_type",header:"Leave Type",style:{"min-width":"8rem"}}),t(a,{field:"start_date",header:"Start Date"},{body:o(l=>[_(d(R(N)(l.data.start_date).format("DD-MM-YYYY")),1)]),_:1}),t(a,{field:"end_date",header:"End Date",dataType:"date"},{body:o(l=>[_(d(R(N)(l.data.end_date).format("DD-MM-YYYY")),1)]),_:1}),t(a,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:o(l=>[l.data.leave_reason&&l.data.leave_reason.length>70?(m(),g("div",Be,[e("p",{onClick:u,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),t(h,{ref_key:"overlayPanel",ref:T,style:{height:"80px"}},{default:o(()=>[_(d(l.data.leave_reason),1)]),_:2},1536)])):(m(),g("div",Me,d(l.data.leave_reason??""),1))]),_:1}),t(a,{field:"reviewer_name",header:"Approver Name"}),t(a,{field:"reviewer_comments",header:"Approver Comments"}),t(a,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:l})=>[e("span",{class:A("customer-badge status-"+l.status)},d(l.status),3)]),filter:o(({filterModel:l,filterCallback:C})=>[t(j,{modelValue:l.value,"onUpdate:modelValue":v=>l.value=v,onClick:v=>C(),options:p.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(v=>[v.value?(m(),g("span",{key:0,class:A("customer-badge status-"+v.value)},d(v.value),3)):(m(),g("span",Ue,d(v.placeholder),1))]),option:o(v=>[e("span",{class:A("customer-badge status-"+v.option)},d(v.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick","options"])]),_:1}),t(a,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:o(l=>[l.data.status=="Pending"?(m(),g("span",Fe,[t(E,{type:"button",icon:"pi pi-check-circle",class:"p-button-success text-white Button py-2.5",label:"Approve",onClick:C=>c.showConfirmDialog(l.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(E,{type:"button",icon:"pi pi-times-circle",class:"text-white p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2em"},onClick:C=>c.showConfirmDialog(l.data,"Reject")},null,8,["onClick"])])):I("",!0)]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},Ye={class:"card top-line"},He={class:"card-body"},Qe={class:"row"},Ge=e("div",{class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave Balance")],-1),Je=B('<div class="mt-3 row"><div class="col-sm-12 col-xl-12 col-md-12 col-lg-12"><div class="mb-0 card leave-history"><div class="card-body"><h6 class="mb-4 text-lg font-semibold text-gray-900 modal-title">Team Leave history</h6><div class="table-responsive"><div id="team_leaveHistory" class="custom_gridJs"></div></div></div></div></div></div>',1),Ke={__name:"TeamLeaveDetails",setup(P){const x=i(),w=i(),k=i();i(),i();const D=i(!0),L=i({employee_name:{value:null,matchMode:b.STARTS_WITH,matchMode:b.EQUALS,matchMode:b.CONTAINS}});return O(()=>{let T=null;S.get(window.location.origin+"/currentUser").then(s=>{T=s.data,S.post(u,{user_id:T}).then(p=>{x.value=Object.values(p.data),w.value=Object.values(p.data.leave_types),k.value=Object.values(p.data.employees),D.value=!1,console.log("Response Data Team Leave: "+JSON.stringify(Object.values(p.data)))})});let u=window.location.origin+"/fetch-team-leaves-balance/";console.log("Fetching Team LEAVE from url : "+u)}),(T,u)=>{const s=y("InputText"),p=y("Column"),c=y("DataTable");return m(),g(V,null,[e("div",Ye,[e("div",He,[e("div",Qe,[Ge,e("div",null,[t(c,{value:k.value,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:L.value,"onUpdate:filters":u[0]||(u[0]=n=>L.value=n),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{default:o(()=>[t(p,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(n=>[_(d(n.data.employee_name),1)]),filter:o(({filterModel:n,filterCallback:f})=>[t(s,{modelValue:n.value,"onUpdate:modelValue":a=>n.value=a,onInput:a=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),(m(!0),g(V,null,M(w.value,n=>(m(),U(p,{header:n,key:n.id,field:"array_leave_details"},{body:o(({data:f})=>[_(d(f.array_leave_details[n]),1)]),_:2},1032,["header"]))),128))]),_:1},8,["value","filters"])])])])]),Je],64)}}};const We={class:"Leave_dashboard mt-30"},qe=e("div",{class:"pt-1 pb-0 mb-3 tw-card left-line"},[e("div",{class:"flex justify-between"},[e("ul",{class:"nav nav-pills nav-tabs-dashed",role:"tablist"},[e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Leave Balance")]),e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Team Leave Balance")]),e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#org_leave","aria-selected":"false",tabindex:"-1",role:"tab"}," Org Leave Balance")])]),e("div",{class:"flex items-center"},[e("div",{class:"mr-3"},[e("div",{class:"input-group me-2"},[e("label",{class:"input-group-text",for:"inputGroupSelect01"},[e("i",{class:"fa fa-calendar text-primary","aria-hidden":"true"})]),e("select",{class:"form-select btn-line-primary",id:"inputGroupSelect01"})])]),e("div",{class:""},[e("a",{href:"/attendance-leave-policydocument",id:"",class:"btn btn-orange",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")])])])],-1),ze={class:"tab-content",id:"pills-tabContent"},Xe={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ze={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},ea={class:"tab-pane show",id:"org_leave",role:"tabpanel","aria-labelledby":"pills-profile-tab"},aa={__name:"LeaveModule",setup(P){const x=F();return O(()=>{setTimeout(()=>{x.getCurrentEmployeeLeaveBalance()},2e3)}),(w,k)=>(m(),g("div",We,[qe,e("div",ze,[e("div",Xe,[t(Ce)]),e("div",Ze,[t(Ke)]),e("div",ea,[t(je)])])]))}},r=Y(aa),ta=le();r.use(H,{ripple:!0});r.use(Q);r.use(G);r.use(de);r.use(ta);r.directive("tooltip",oe);r.directive("badge",se);r.directive("ripple",J);r.directive("styleclass",ne);r.directive("focustrap",K);r.component("Button",W);r.component("DataTable",ie);r.component("Column",re);r.component("ColumnGroup",me);r.component("Row",ce);r.component("Toast",q);r.component("ConfirmDialog",z);r.component("Dropdown",X);r.component("InputText",Z);r.component("Dialog",ee);r.component("ProgressSpinner",ae);r.component("Calendar",ue);r.component("Checkbox",pe);r.mount("#LeaveModule");
