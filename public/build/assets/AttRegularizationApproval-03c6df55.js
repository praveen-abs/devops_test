import{Q as g,ac as W,$ as K,ad as q,a9 as y,af as G,g as r,o as d,c,h as t,w as o,ae as R,X as H,d as s,t as n,a as B,l as L,n as I,F as Z,G as ee,P as te,H as ae,R as oe,u as se,v as le,I as ne,L as ie,J as re,K as de,A as ce}from"./toastservice.esm-c06f2f8b.js";import{T as ue,B as pe,S as me,b as _e,a as ve}from"./styleclass.esm-f13b5ad8.js";import"./blockui.esm-b5c5eeb1.js";import{u as fe,C as he}from"./confirmationservice.esm-5e8ac686.js";import{s as ge}from"./progressspinner.esm-7742d82c.js";import{s as be}from"./tag.esm-b5d266a8.js";import{s as ye}from"./textarea.esm-0239076c.js";import{c as we}from"./pinia-c421e60d.js";import{a as F}from"./index-362795f3.js";import{h as xe}from"./moment-fbc5633a.js";import{S as X}from"./Service-e63d88b6.js";import{d as ke}from"./dayjs.min-2f06af28.js";const Se=s("h5",{style:{"text-align":"center"}},"Please wait...",-1),Ce={class:"confirmation-content"},Te=s("i",{class:"mr-2 pi pi-exclamation-triangle text-red-600",style:{"font-size":"1.3rem"}},null,-1),Re={class:"my-auto"},Ae={key:0,class:"w-full flex justify-left p-2"},$e={class:"flex justify-content-center align-items-center"},De={key:0,if:"",class:"p-2 w-3 h-18 text-semibold rounded-full bg-blue-900 text-white"},je=["src"],Ne={class:"text-left pl-2"},Ve={class:"text-right"},ze={class:"text-center p-2"},Le={key:0},Ue={key:1},Pe={class:"text-bold"},Oe={class:"text-bold"},Be={class:"text-bold"},Ie={key:1},Fe={key:0,style:{width:"250px",display:"block"}},Me={__name:"attendance_regularization",setup(Q){let j=g(),p=g(!1),m=g(!1);fe();const x=W(),b=g(""),k=g(),C=X();K("$swal"),q(()=>{p&&(k.value=null)});const S=g({global:{value:null,matchMode:y.CONTAINS},employee_name:{value:null,matchMode:y.STARTS_WITH,matchMode:y.EQUALS,matchMode:y.CONTAINS},status:{value:"Pending",matchMode:y.EQUALS}}),U=g(["Pending","Approved","Rejected"]);let w=null,A=null;G(()=>{P()});function P(){m.value=!0;let _=window.location.origin+"/fetch-att-regularization-data";F.get(_).then(l=>{j.value=Object.values(l.data)}).finally(()=>{m.value=!1})}function N(_,l){p.value=!0,w=l,b.value=l,A=_}function M(_){p.value=!1,_&&V()}function V(){w="",A=null}const f=_=>{switch(_){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function u(){M(!1),m.value=!0,F.post(window.location.origin+"/attendance-regularization-approvals",{record_id:A.id,approver_user_code:C.current_user_code,status:w=="Approve"?"Approved":w=="Reject"?"Rejected":w,status_text:k.value}).then(_=>{_.data.status=="success"?x.add({severity:"success",summary:"Success",detail:"Your request has been recorded successfully",life:3e3}):Swal.fire("Failure",`${_.data.message}`,"error"),V()}).catch(_=>{m.value=!1,V()}).finally(()=>{k.value=null,m.value=!1,P()})}return(_,l)=>{const Y=r("ProgressSpinner"),O=r("Dialog"),$=r("Textarea"),D=r("Button"),E=r("InputText"),v=r("Column"),J=r("Tag"),a=r("Dropdown"),T=r("DataTable");return d(),c("div",null,[t(O,{header:"Header",visible:R(m),"onUpdate:visible":l[0]||(l[0]=e=>H(m)?m.value=e:m=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[t(Y,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[Se]),_:1},8,["visible"]),t(O,{header:"Confirmation",visible:R(p),"onUpdate:visible":l[3]||(l[3]=e=>H(p)?p.value=e:p=e),breakpoints:{"960px":"80vw","640px":"90vw"},style:{width:"380px"},modal:!0},{footer:o(()=>[t(D,{label:"Yes",icon:"pi pi-check",onClick:u,class:"p-button-text",autofocus:""}),t(D,{label:"No",icon:"pi pi-times",onClick:l[2]||(l[2]=e=>H(p)?p.value=!1:p=!1),class:"p-button-text"})]),default:o(()=>[s("div",Ce,[Te,s("span",Re,"Are you sure you want to "+n(R(w))+"?",1)]),b.value=="Reject"?(d(),c("div",Ae,[t($,{modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=e=>k.value=e),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])])):B("",!0)]),_:1},8,["visible"]),s("div",null,[t(T,{value:R(j),paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"attendance_date",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:S.value,"onUpdate:filters":l[4]||(l[4]=e=>S.value=e),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[L(" No Employeee found. ")]),loading:o(()=>[L(" Loading customers data. Please wait. ")]),default:o(()=>[t(v,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(e=>[s("div",$e,[JSON.parse(e.data.employee_avatar).type=="shortname"?(d(),c("p",De,n(JSON.parse(e.data.employee_avatar).data),1)):(d(),c("img",{key:1,class:"rounded-circle img-md w-3 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(e.data.employee_avatar).data}`,srcset:"",alt:""},null,8,je)),s("p",Ne,n(e.data.employee_name),1)])]),filter:o(({filterModel:e,filterCallback:z})=>[t(E,{modelValue:e.value,"onUpdate:modelValue":h=>e.value=h,onInput:h=>z(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(v,{field:"attendance_date",header:"Date",sortable:!0,style:{"min-width":"10rem"}},{body:o(e=>[s("h1",Ve,n(R(xe)(e.data.attendance_date).format("DD-MM-YYYY")),1)]),_:1}),t(v,{field:"regularization_type",header:"Type",style:{"min-width":"10rem"}},{body:o(e=>[s("div",ze,n(e.data.regularization_type),1)]),_:1}),t(v,{field:"user_time",header:"Actual Time",style:{"min-width":"10rem"}}),t(v,{field:"regularize_time",header:"Regularize Time",style:{"min-width":"10rem"}}),t(v,{field:"reason_type",header:"Reason",style:{"min-width":"18rem"}},{body:o(e=>[e.data.reason_type=="Others"?(d(),c("span",Le,n(e.data.custom_reason),1)):(d(),c("span",Ue,n(e.data.reason_type),1))]),_:1}),t(v,{field:"reviewer_name",header:"Approve Name"},{body:o(e=>[s("p",Pe,n(e.data.reviewer_name?e.data.reviewer_name:"---"),1)]),_:1}),t(v,{field:"reviewer_comments",header:"Approve Comments"},{body:o(e=>[s("p",Oe,n(e.data.reviewer_comments?e.data.reviewer_comments:"---"),1)]),_:1}),t(v,{field:"reviewer_reviewed_date",header:"Reviewed Date"},{body:o(e=>[s("p",Be,n(e.data.reviewer_reviewed_date?e.data.reviewer_reviewed_date:"---"),1)]),_:1}),t(v,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:e})=>[t(J,{value:e.status,severity:f(e.status)},null,8,["value","severity"])]),filter:o(({filterModel:e,filterCallback:z})=>[t(a,{modelValue:e.value,"onUpdate:modelValue":h=>e.value=h,onChange:h=>z(),options:U.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(h=>[h.value?(d(),c("span",{key:0,class:I("customer-badge status-"+h.value)},n(h.value),3)):(d(),c("span",Ie,n(h.placeholder),1))]),option:o(h=>[s("span",{class:I("customer-badge status-"+h.option)},n(h.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),t(v,{field:"",header:"Action"},{body:o(e=>[e.data.status=="Pending"?(d(),c("span",Fe,[t(D,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:z=>N(e.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(D,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:z=>N(e.data,"Reject")},null,8,["onClick"])])):B("",!0)]),_:1})]),_:1},8,["value","filters"])])])}}},Ye={class:"flex justify-content-center align-items-center"},Ee={key:0,if:"",class:"p-2 w-3 h-18 text-semibold rounded-full bg-blue-900 text-white"},Je=["src"],He={class:"text-left pl-2"},Qe={class:"text-bold"},We={class:"text-bold"},Ke={class:"text-bold"},qe={key:1},Ge={key:0,style:{width:"250px",display:"block"}},Xe={class:"confirmation-content"},Ze=s("i",{class:"mr-2 pi pi-exclamation-triangle text-red-600",style:{"font-size":"1.3rem"}},null,-1),et={class:"my-auto"},tt={key:0,class:"w-full flex justify-left p-2"},at=s("h5",{style:{"text-align":"center"}},"Please wait...",-1),ot={__name:"absent_Regularization",setup(Q){const j=W(),p=g(),m=X();K("$swal");const x=g(!1),b=g(!1),k=g(""),C=g();let S=null,U=null;const w=g({global:{value:null,matchMode:y.CONTAINS},employee_name:{value:null,matchMode:y.STARTS_WITH,matchMode:y.EQUALS,matchMode:y.CONTAINS},status:{value:"Pending",matchMode:y.EQUALS}});q(()=>{x&&(C.value=null)}),G(()=>{A()});async function A(){b.value=!0,await F.get("/fetch-absent-regularization-data").then(f=>{p.value=f.data}).finally(()=>{b.value=!1})}const P=f=>{switch(f){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function N(f,u){x.value=!0,S=u,k.value=u,U=f}function M(){x.value=!1}function V(){M(),b.value=!0,F.post("/approveRejectAbsentRegularization",{record_id:U.id,approver_user_code:m.current_user_code,status:S=="Approve"?"Approved":S=="Reject"?"Rejected":S,status_text:C.value,user_code:m.current_user_code}).then(f=>{f.data.status=="success"?j.add({severity:"success",summary:"Success",detail:"Your request has been recorded successfully",life:3e3}):Swal.fire("Failure",`${f.data.message}`,"error"),A()}).catch(f=>{b.value=!1}).finally(()=>{b.value=!1,C.value=null})}return(f,u)=>{const _=r("InputText"),l=r("Column"),Y=r("Tag"),O=r("Dropdown"),$=r("Button"),D=r("DataTable"),E=r("Textarea"),v=r("Dialog"),J=r("ProgressSpinner");return d(),c("div",null,[t(D,{value:p.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"attendance_date",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:w.value,"onUpdate:filters":u[0]||(u[0]=a=>w.value=a),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[L(" No Employeee found. ")]),loading:o(()=>[L(" Loading customers data. Please wait. ")]),default:o(()=>[t(l,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(a=>[s("div",Ye,[JSON.parse(a.data.employee_avatar).type=="shortname"?(d(),c("p",Ee,n(JSON.parse(a.data.employee_avatar).data),1)):(d(),c("img",{key:1,class:"rounded-circle img-md w-3 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(a.data.employee_avatar).data}`,srcset:"",alt:""},null,8,Je)),s("p",He,n(a.data.employee_name),1)])]),filter:o(({filterModel:a,filterCallback:T})=>[t(_,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onInput:e=>T(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(l,{class:"font-bold",field:"attendance_date",sortable:!0,header:"Attendance Date"},{body:o(a=>[L(n(R(ke)(a.data.attendance_date).format("DD-MMM-YYYY")),1)]),_:1}),t(l,{class:"font-bold",field:"regularization_type",header:"Regularization Type"}),t(l,{class:"font-bold",field:"checkin_time",header:"Checkin Time"}),t(l,{class:"font-bold",field:"checkout_time",header:"Checkout Time"}),t(l,{class:"font-bold",field:"reason",header:"Reason"}),t(l,{class:"font-bold",field:"custom_reason",header:"Custom Reason"}),t(l,{field:"reviewer_name",header:"Approve Name"},{body:o(a=>[s("p",Qe,n(a.data.reviewer_name?a.data.reviewer_name:"---"),1)]),_:1}),t(l,{field:"reviewer_comments",header:"Approve Comments"},{body:o(a=>[s("p",We,n(a.data.reviewer_comments?a.data.reviewer_comments:"---"),1)]),_:1}),t(l,{field:"reviewer_reviewed_date",header:"Reviewed Date"},{body:o(a=>[s("p",Ke,n(a.data.reviewer_reviewed_date?a.data.reviewer_reviewed_date:"---"),1)]),_:1}),t(l,{class:"font-bold",field:"status",header:"Status"},{body:o(({data:a})=>[t(Y,{value:a.status,severity:P(a.status)},null,8,["value","severity"])]),filter:o(({filterModel:a,filterCallback:T})=>[t(O,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onChange:e=>T(),options:f.statuses,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(e=>[e.value?(d(),c("span",{key:0,class:I("customer-badge status-"+e.value)},n(e.value),3)):(d(),c("span",qe,n(e.placeholder),1))]),option:o(e=>[s("span",{class:I("customer-badge status-"+e.option)},n(e.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),t(l,{class:"font-bold",field:"",header:"Action"},{body:o(a=>[a.data.status=="Pending"?(d(),c("span",Ge,[t($,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:T=>N(a.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t($,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:T=>N(a.data,"Reject")},null,8,["onClick"])])):B("",!0)]),_:1})]),_:1},8,["value","filters"]),t(v,{header:"Confirmation",visible:x.value,"onUpdate:visible":u[3]||(u[3]=a=>x.value=a),breakpoints:{"960px":"80vw","640px":"90vw"},style:{width:"380px"},modal:!0},{footer:o(()=>[t($,{label:"Yes",icon:"pi pi-check",onClick:V,class:"p-button-text",autofocus:""}),t($,{label:"No",icon:"pi pi-times",onClick:u[2]||(u[2]=a=>x.value=!1),class:"p-button-text"})]),default:o(()=>[s("div",Xe,[Ze,s("span",et,"Are you sure you want to "+n(R(S))+"?",1)]),k.value=="Reject"?(d(),c("div",tt,[t(E,{modelValue:C.value,"onUpdate:modelValue":u[1]||(u[1]=a=>C.value=a),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])])):B("",!0)]),_:1},8,["visible"]),t(v,{header:"Header",visible:b.value,"onUpdate:visible":u[4]||(u[4]=a=>b.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[t(J,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[at]),_:1},8,["visible"])])}}};const st={class:"Attendance regularization"},lt=s("div",{class:"p-2 pb-0 mb-3 bg-white rounded-lg shadow tw-card left-line",style:{"background-color":"white"}},[s("div",{class:"flex justify-between"},[s("ul",{class:"bg-white divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},[s("li",{class:"nav-item text-muted",role:"presentation"},[s("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Attendance Regularization")]),s("li",{class:"nav-item text-muted",role:"presentation"},[s("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Absent Regularization")])])])],-1),nt={class:"tab-content h-[100vh]",id:"pills-tabContent"},it={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},rt={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},dt={__name:"AttRegularizationApproval",setup(Q){return(j,p)=>{const m=r("Toast");return d(),c(Z,null,[t(m),s("div",st,[lt,s("div",nt,[s("div",it,[t(Me)]),s("div",rt,[t(ot)])])])],64)}}},i=ee(dt),ct=we();i.use(te,{ripple:!0});i.use(he);i.use(ae);i.use(ct);i.directive("tooltip",ue);i.directive("badge",pe);i.directive("ripple",oe);i.directive("styleclass",me);i.directive("focustrap",se);i.component("Button",le);i.component("DataTable",_e);i.component("Column",ve);i.component("ConfirmDialog",ne);i.component("Toast",ie);i.component("Dialog",re);i.component("Dropdown",de);i.component("ProgressSpinner",ge);i.component("InputText",ce);i.component("Tag",be);i.component("Textarea",ye);i.mount("#vjs_regularizationTable");
