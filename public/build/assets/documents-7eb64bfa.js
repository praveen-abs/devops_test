import{l as ge}from"./lodash-facb8280.js";import{a as I}from"./index-362795f3.js";import{S as le}from"./Service-c397fabe.js";import{p as ee}from"./ProfilePagesStore-49333c02.js";import{r as oe,u as ue}from"./index.esm-bb531237.js";import{$ as b,a2 as z,I as se,ac as J,g as V,o as $,c as k,h as i,aj as t,d as e,n as G,t as m,b as ce,a as F,w as y,p as q,F as me,l as E,ah as te,k as ie,E as re,aq as De,af as pe}from"./toastservice.esm-134e08fe.js";import{d as R}from"./dayjs.min-2f06af28.js";import"./moment-fbc5633a.js";import{u as $e}from"./confirmationservice.esm-bbe3e128.js";import{d as we}from"./pinia-c1aabf4a.js";import{U as he}from"./EmployeeDocumentsManagerService-4e65a0c9.js";const Z="/build/assets/edit-fdffc648.svg";const ke={key:0,class:"bg-white border rounded-lg grid grid-cols-12 p-3 content-center"},Pe={class:"col-span-4 h-full grid grid-cols-12 gap-6"},Ce={class:"col-span-4"},Ve={class:"profile-pic"},Le=["src"],Se=e("label",{class:"-label",for:"file"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})])],-1),Me={class:"col-span-8"},Ee={class:"flex justify-between pr-4"},Ae={class:"font-semibold text-md"},Ue={class:"font-semibold text-xs text-gray-500"},Ye={class:"py-2"},Ne=e("p",{class:"font-semibold text-xs"},"Profile completeness",-1),Te={class:"w-11/12 my-1"},Fe=e("p",{class:"mb-2 text-muted f-10 text-start fw-bold"}," Your profile is completed ",-1),Ie={class:"col-span-5 grid grid-cols-3 gap-4 h-full"},Be={class:""},je=e("p",{class:"font-semibold text-xs text-gray-500"},"Employee Status",-1),Re={key:0,class:"font-semibold text-sm"},Oe={key:1,class:"font-semibold text-sm"},He={class:""},qe=e("p",{class:"font-semibold text-xs text-gray-500"},"Designation",-1),Ge={class:"font-semibold text-sm"},ze={class:"flex justify-between items-center"},Ke=e("p",{class:"font-semibold text-xs text-gray-500"},"Department",-1),Je={class:"font-semibold text-sm"},We={class:""},Ze=e("p",{class:"font-semibold text-xs text-gray-500"},"Employee Code",-1),Xe={class:"font-semibold text-sm"},Qe={class:""},et=e("p",{class:"font-semibold text-xs text-gray-500"},"Location",-1),tt={class:"font-semibold text-sm"},st={class:"flex justify-between items-center"},ot={class:""},lt=e("p",{class:"font-semibold text-xs text-gray-500"},"Reporting to",-1),at={key:0,class:"font-semibold text-sm whitespace-nowrap"},it={class:"col-span-3 h-full"},nt={class:"flex justify-end"},dt=e("div",null,null,-1),rt={class:"mx-2"},ct={class:"p-0 m-0 bg-transparent border-0 outline-none btn"},_t={class:"confirmation-content"},mt=e("i",{class:"mr-3 pi pi-check-circle",style:{"font-size":"2rem"}},null,-1),pt={class:"bg-blue-900 w-100 py-4 px-2 rounded-lg d-flex justify-content-around overflow-x-scroll ... lg:w-100"},ut={class:"card p-3 d-flex justify-items-center align-items-center mr-2 :lg:mx-0 Digital_Id_Card_",style:{width:"260px",height:"380px","flex-direction":"column !important","box-shadow":"rgba(0, 0, 0, 0.05) 0px 6px 24px 0px, rgba(0, 0, 0, 0.08) 0px 0px 0px 1px"}},ft={style:{height:"45px",width:"140px"},class:"mt-2"},gt=["src"],yt={class:"card-body d-flex justify-items-center align-items-center mt-6",style:{"flex-direction":"column"}},bt=["src"],ht={key:1,class:"text-white fs-4"},vt={class:"card-title mt-12 mb-3 f-12 text-blue-900 subpixel-antialiased font-semibold",style:{"text-align":"center"}},xt={key:0,class:"f-12 card-text mb-3 text-gray-600 subpixel-antialiased font-semibold"},Dt={key:1,class:"f-12 card-text"},$t={key:2,class:"f-16 mb-2 text-gray-700 subpixel-antialiased font-semibold"},wt={key:3,class:"f-12 mb-2 text-secondary-emphasis"},kt={class:"card p-2 d-flex justify-items-center align-items-center ml-2 Digital_Id_Card_ :lg:p-2",style:{width:"260px",height:"380px","flex-direction":"column !important","box-shadow":"rgba(0, 0, 0, 0.05) 0px 6px 24px 0px, rgba(0, 0, 0, 0.08) 0px 0px 0px 1px"}},Pt={class:"w-100 d-flex justify-content-center align-items-center flex-column"},Ct=e("h1",{class:"text-orange-500 fs-14 subpixel-antialiased font-semibold fw-600"},"EMPLOYEE DETAILS",-1),Vt={class:"row w-100 mt-3"},Lt=e("div",{class:"col-5 fs-14 subpixel-antialiased font-semibold text-left text-blue-900"},[E(" Blood Group "),e("span",{class:"position-absolute",style:{position:"absolute",left:"90px"}},":")],-1),St={class:"col-6 fs-6 text-blue-900"},Mt={class:"text-left pt-1"},Et={class:"row w-100 mt-3"},At=e("div",{class:"col-5 fs-14 subpixel-antialiased font-semibold text-left text-blue-900"},[E(" Phone "),e("span",{class:"position-absolute",style:{position:"absolute",left:"90px"}},":")],-1),Ut={class:"col-6 fs-6 text-blue-900"},Yt={class:"text-left pt-1"},Nt={class:"row w-100 mt-3"},Tt=e("div",{class:"col-5 fs-14 subpixel-antialiased font-semibold text-left text-blue-900 position-relative"},[E(" Email Id "),e("span",{class:"position-absolute",style:{position:"absolute",left:"90px"}},":")],-1),Ft={class:"col-6 subpixel-antialiased fs-12"},It={class:"text-left"},Bt={class:"row w-100 mt-3"},jt={class:"col fs-14 subpixel-antialiased font-semibold text-left text-blue-900"},Rt=e("h1",{class:"text-orange-500 fs-12"},"Residential Address :",-1),Ot={class:"ml-2"},Ht={class:"text-blue-900 mt-2 subpixel-antialiased font-semibold fs-11 text-center"},qt=e("div",{class:"row bg-gradient-to-r from-orange-500 to-orange-300 h-1 w-100 mt-2 :lg:mt-2"},null,-1),Gt=e("div",{class:"row bg-gradient-to-r from-orange-500 to-orange-300 h-3 w-100 mt-1"},null,-1),zt={class:"row"},Kt={class:"col-12"},Jt={key:0,class:"text-center font-semibold text-orange-500 fs-14 subpixel-antialiased mt-2 :lg:mt-2"},Wt={class:"col-12"},Zt={class:"fs-11 text-center font-semibold text-blue-900 mt-2"},Xt={class:"col-12"},Qt={class:"fs-12 text-center font-semibold text-blue-900 mt-2"},es={class:"col-12"},ts={class:"fs-11 text-center font-semibold lining-nums ... text-blue-900 mt-2"},ss=e("div",{class:"col-12"},null,-1),os=e("h5",{style:{"text-align":"center"}},"Please wait...",-1),ls={class:"modal-body"},as={class:"row"},is={class:"col-md-6"},ns={class:"mb-3 form-group"},ds=e("label",{class:"mb-2 font-semibold text-lg"},"Employee Name",-1),rs={key:0,class:"text-red-400 fs-6 font-semibold"},cs={class:"col-md-6"},_s={class:"form-group"},ms=e("label",{for:"",class:"mb-1 mb-1 font-semibold text-lg"},"Documents",-1),ps={key:0,class:"text-red-400 fs-6 font-semibold"},us={class:"col-md-6 d-flex flex-column"},fs={class:"d-flex justify-items-center flex-column"},gs=e("label",{for:"",class:"float-label mb-2 font-semibold text-lg"},"Upload Documents",-1),ys={class:"d-flex justify-items-center align-items-center"},bs=e("label",{class:"cursor-pointer text-primary d-flex align-items-center fs-5 btn bg-primary",style:{width:"100px"},id:"",for:"uploadPassBook"},[e("i",{class:"pi pi-arrow-circle-up fs-5 mr-2"}),e("h1",{class:"text-light"},"Upload")],-1),hs={key:0,class:"p-2 px-3 bg-green-100 rounded-lg font-semibold fs-11 mx-4"},vs={key:0,class:"text-red-400 fs-6 font-semibold"},rd={__name:"EmployeeCard",setup(C){const n=le(),s=b(!1),P=b(!1),g=z({department:"",reporting_manager:""}),w=z({emp_name:"",emp_doc_name:"",emp_upload_doc:""}),h=b([{name:"Birth Certificate",code:1},{name:"Aadhar Card Front",code:2},{name:"Pan Card",code:3}]),d=b(!1);let o=ee();const x=Y=>{Y.target.files&&Y.target.files[0]&&(o.profile=Y.target.files[0]);let _=new FormData;_.append("user_code",o.user_code),_.append("file_object",o.profile);let u="/profile-pages/updateProfilePicture";I.post(u,_).then(A=>{}).finally(()=>{console.log("Photo Sent"),o.getProfilePhoto()})},L=b(),U=b(),v=b(!1),r=b(!1),l=b(!1),c=b("None"),p=Y=>{console.log(Y),I.post("/profile-pages/updateDepartment",{user_code:o.employeeDetails.user_code,department_id:g.department}).then(_=>{let u=ge._.find(L.value,["id",g.department]).name;console.log("Lodash [Selected Dept]: "+u),o.employeeDetails.get_employee_office_details.department_name=u,c.value="Department updated successfully !",console.log(_.data)}).catch(_=>{c.value="Error while updating department. Kindly contact the Admin.",console.log("Error while updating Department : "+_)}).finally(()=>{l.value=!0,v.value=!1})},B=Y=>{console.log("editReportingManager : "+Y),I.post("/profile-pages/updateReportingManager",{user_code:o.employeeDetails.user_code,manager_user_code:g.reporting_manager}).then(_=>{let u=ge._.find(U.value,["user_code",g.reporting_manager]);o.employeeDetails.get_employee_office_details.l1_manager_name=u.name,o.employeeDetails.get_employee_office_details.l1_manager_code=u.user_code,c.value="Reporting Manager updated successfully !",console.log(_.data)}).catch(_=>{c.value="Error while updating Reporting Manager. Kindly contact the Admin.",console.log("Error while updating Reporting Manager : "+_)}).finally(()=>{l.value=!0,r.value=!1})},O=()=>{g.department=o.employeeDetails.get_employee_office_details.department_name,g.reporting_manager=o.employeeDetails.get_employee_office_details.l1_manager_name,console.log(g.department)};se(()=>{n.DepartmentDetails().then(Y=>{L.value=Y.data,console.log("testing"+o.employeeDetails.get_employee_office_details.l1_manager_name)}),n.ManagerDetails().then(Y=>{U.value=Y.data}),O(),console.log()});const j=Y=>{Y.target.files&&Y.target.files[0]&&(w.emp_upload_doc=Y.target.files[0],console.log(w.emp_upload_doc))},M=J(()=>({emp_name:{required:oe},emp_doc_name:{required:oe},emp_upload_doc:{required:oe}})),D=ue(M,w),f=()=>{D.value.$validate(),D.value.$error?console.log("Form failed submitted."):(console.log("Form successfully submitted."),X())},X=()=>{s.value=!0,d.value=!1;const _=`/update-EmplpoyeeName-info/${n.current_user_id}`,u=new FormData;u.append("user_code",o.employeeDetails.user_code),u.append("name",w.emp_name),u.append("onboard_document_type",w.emp_doc_name.name),u.append("emp_doc",w.emp_upload_doc),I.post(_,u).finally(()=>{s.value=!1})},ae=J(()=>{if(o.employeeDetails.get_employee_details.blood_group_id==1)return"A Positive";if(o.employeeDetails.get_employee_details.blood_group_id==2)return"A Negative";if(o.employeeDetails.get_employee_details.blood_group_id==3)return"B Positive";if(o.employeeDetails.get_employee_details.blood_group_id==4)return"B Negative";if(o.employeeDetails.get_employee_details.blood_group_id==5)return"AB Positive";if(o.employeeDetails.get_employee_details.blood_group_id==6)return"AB Negative";if(o.employeeDetails.get_employee_details.blood_group_id==7)return"O Positive";if(o.employeeDetails.get_employee_details.blood_group_id==8)return"O Negative"});return(Y,_)=>{const u=V("Toast"),A=V("ProgressBar"),H=V("Dialog"),K=V("Dropdown"),W=V("ProgressSpinner"),N=V("InputText");return $(),k(me,null,[i(u),t(o).employeeDetails.get_employee_office_details?($(),k("div",ke,[e("div",Pe,[e("div",Ce,[e("div",Ve,[t(o).profile?($(),k("img",{key:0,class:"forRounded",src:`data:image/png;base64,${t(o).profile}`,srcset:"",alt:"",id:"output",width:"200"},null,8,Le)):($(),k("p",{key:1,class:G(["font-semibold text-5xl text-center flex items-center justify-center text-white forRounded",[t(o).employeeDetails.short_name_Color?t(o).employeeDetails.short_name_Color:"",t(o).employeeDetails.short_name_Color]])},m(t(o).employeeDetails.user_short_name),3)),Se,e("input",{id:"file",type:"file",onChange:_[0]||(_[0]=a=>x(a))},null,32)])]),e("div",Me,[e("div",Ee,[e("div",null,[e("p",Ae,m(t(o).employeeDetails?t(o).employeeDetails.name:"-"),1),e("p",Ue,m(t(o).employeeDetails?t(o).employeeDetails.get_employee_office_details.designation:"-"),1)]),e("img",{src:Z,class:"h-4 w-4 cursor-pointer my-auto",alt:"",onClick:_[1]||(_[1]=a=>d.value=!0)})]),e("div",Ye,[Ne,e("div",Te,[t(o).employeeDetails.profile_completeness<=39?($(),ce(A,{key:0,value:t(o).employeeDetails.profile_completeness,class:G([t(o).employeeDetails.profile_completeness<=39?"progressbar":""])},null,8,["value","class"])):F("",!0),t(o).employeeDetails.profile_completeness>=40&&t(o).employeeDetails.profile_completeness<=59?($(),ce(A,{key:1,class:G(["progressbar_val2",[t(o).employeeDetails.profile_completeness>=40&&t(o).employeeDetails.profile_completeness<=59]]),value:t(o).employeeDetails.profile_completeness},null,8,["class","value"])):F("",!0),t(o).employeeDetails.profile_completeness>=60?($(),ce(A,{key:2,class:G(["progressbar_val3",[t(o).employeeDetails.profile_completeness>=60]]),value:t(o).employeeDetails.profile_completeness},null,8,["class","value"])):F("",!0)]),Fe])])]),e("div",Ie,[e("div",Be,[je,t(o).employeeDetails.active==1?($(),k("p",Re,"Active ")):($(),k("p",Oe,"Not active"))]),e("div",He,[qe,e("p",Ge,m(t(o).employeeDetails.get_employee_office_details.designation?t(o).employeeDetails.get_employee_office_details.designation:"-"),1)]),e("div",ze,[e("div",null,[Ke,e("p",Je,m(t(o).employeeDetails.get_employee_office_details.department_name?t(o).employeeDetails.get_employee_office_details.department_name:"-"),1)]),t(o).employeeDetails.Current_login_user.org_role==1||t(o).employeeDetails.Current_login_user.org_role==2||t(o).employeeDetails.Current_login_user.org_role==3?($(),k("img",{key:0,src:Z,class:"h-4 w-4 cursor-pointer my-auto",onClick:_[2]||(_[2]=a=>v.value=!0),alt:""})):F("",!0)]),e("div",We,[Ze,e("p",Xe,m(t(o).employeeDetails?t(o).employeeDetails.user_code:"-"),1)]),e("div",Qe,[et,e("p",tt,m(t(o).employeeDetails.get_employee_office_details.work_location?t(o).employeeDetails.get_employee_office_details.work_location:"-"),1)]),e("div",st,[e("div",ot,[lt,t(o).employeeDetails?($(),k("p",at,m(`${t(o).employeeDetails.get_employee_office_details.l1_manager_name}(${t(o).employeeDetails.get_employee_office_details.l1_manager_code})`),1)):F("",!0)]),t(o).employeeDetails.Current_login_user.org_role==1||t(o).employeeDetails.Current_login_user.org_role==2||t(o).employeeDetails.Current_login_user.org_role==3?($(),k("img",{key:0,src:Z,onClick:_[3]||(_[3]=a=>r.value=!0),class:"h-4 w-4 cursor-pointer my-auto",alt:""})):F("",!0)])]),e("div",it,[e("div",nt,[dt,e("div",rt,[e("button",ct,[e("i",{class:"pi pi-id-card text-success fs-4","aria-hidden":"true",onClick:_[4]||(_[4]=a=>P.value=!0)})])])])])])):F("",!0),i(H,{header:"Status",visible:l.value,"onUpdate:visible":_[5]||(_[5]=a=>l.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{default:y(()=>[e("div",_t,[mt,e("span",null,m(c.value),1)])]),_:1},8,["visible"]),i(H,{visible:v.value,"onUpdate:visible":_[7]||(_[7]=a=>v.value=a),modal:"",header:"Edit Department",style:{width:"30vw",borderTop:"5px solid #002f56"}},{footer:y(()=>[e("div",null,[e("button",{type:"button",class:"submit_btn warning success",onClick:p}," Save ")])]),default:y(()=>[i(K,{options:L.value,optionLabel:"name",modelValue:g.department,"onUpdate:modelValue":_[6]||(_[6]=a=>g.department=a),placeholder:"Select Department",class:"w-full form-selects",optionValue:"id"},null,8,["options","modelValue"])]),_:1},8,["visible"]),i(H,{visible:r.value,"onUpdate:visible":_[9]||(_[9]=a=>r.value=a),modal:"",header:"Edit Reporting Manager",style:{width:"30vw",borderTop:"5px solid #002f56"}},{footer:y(()=>[e("div",null,[e("button",{type:"button",class:"submit_btn warning success",onClick:B}," Save ")])]),default:y(()=>[i(K,{optionLabel:"name",options:U.value,modelValue:g.reporting_manager,"onUpdate:modelValue":_[8]||(_[8]=a=>g.reporting_manager=a),optionValue:"user_code",placeholder:"Select Reporting Manager",class:"w-full form-selects"},null,8,["options","modelValue"])]),_:1},8,["visible"]),i(H,{visible:P.value,"onUpdate:visible":_[10]||(_[10]=a=>P.value=a),modal:"",header:"",style:q([{width:"45vw",borderTop:"5px solid #002f56"},{"@media (min-width":"1024px){background-image:particular_ad_small.png"}])},{header:y(()=>[e("div",null,[e("h5",{class:"fw-bolder fs-5",style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Digital Id Preview ",4)])]),default:y(()=>[e("div",pt,[e("div",ut,[e("div",ft,[e("img",{src:`${t(o).employeeDetails.client_logo}`,alt:"",style:{"object-fit":"cover"}},null,8,gt)]),e("div",yt,[e("div",{class:G(["mx-auto rounded-circle img-xl userActive-status profile-img d-flex justify-content-center align-items-center",[t(o).profile?"":t(o).employeeDetails.short_name_Color,t(o).employeeDetails.short_name_Color]])},[t(o).profile?($(),k("img",{key:0,class:"rounded-circle img-xl userActive-status profile-img border object-cover",src:`data:image/png;base64,${t(o).profile}`,srcset:"",style:{"box-shadow":"rgba(0, 0, 0, 0.05) 0px 6px 24px 0px, rgba(0, 0, 0, 0.08) 0px 0px 0px 1px",width:"80px",height:"80px"}},null,8,bt)):F("",!0),t(o).profile?F("",!0):($(),k("h1",ht,m(t(o).employeeDetails.user_short_name),1))],2),e("h1",vt,m(t(o).employeeDetails.name),1),t(o).employeeDetails.get_employee_office_details.department_id?($(),k("h5",xt,m(t(o).employeeDetails.get_employee_office_details.department_name),1)):($(),k("h1",Dt,"-")),t(o).employeeDetails.user_code?($(),k("h5",$t,m(t(o).employeeDetails.user_code),1)):($(),k("p",wt,"-"))])]),e("div",kt,[e("div",Pt,[Ct,e("div",Vt,[Lt,e("div",St,[e("h1",Mt,m(t(ae)),1)])]),e("div",Et,[At,e("div",Ut,[e("h1",Yt,m(t(o).employeeDetails.get_employee_details.mobile_number),1)])]),e("div",Nt,[Tt,e("div",Ft,[e("h1",It,m(t(o).employeeDetails.get_employee_office_details.officical_mail),1)])]),e("div",Bt,[e("div",jt,[Rt,e("div",Ot,[e("p",Ht,m(t(o).employeeDetails.get_employee_details.current_address_line_1),1)])])]),qt,Gt,e("div",zt,[e("div",Kt,[t(o).employeeDetails.client_details.client_name?($(),k("h1",Jt,m(t(o).employeeDetails.client_details.client_name),1)):F("",!0)]),e("div",Wt,[e("h1",Zt,m(t(o).employeeDetails.client_details.address),1)]),e("div",Xt,[e("h1",Qt,m(t(o).employeeDetails.client_details.authorised_person_contact_email),1)]),e("div",es,[e("h1",ts,m(t(o).employeeDetails.client_details.authorised_person_contact_number),1)]),ss])])])])]),_:1},8,["visible"]),i(H,{header:"Header",visible:s.value,"onUpdate:visible":_[11]||(_[11]=a=>s.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:y(()=>[i(W,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:y(()=>[os]),_:1},8,["visible"]),i(H,{visible:d.value,"onUpdate:visible":_[15]||(_[15]=a=>d.value=a),modal:"",header:" ",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"fw-bold fs-5"}," Edit Employee Name",4)])]),default:y(()=>[e("div",null,[e("div",ls,[e("div",as,[e("div",is,[e("div",ns,[ds,i(N,{type:"text",modelValue:w.emp_name,"onUpdate:modelValue":_[12]||(_[12]=a=>w.emp_name=a),style:{"text-transform":"uppercase"},class:G(["form-controls pl-2",[t(D).emp_name.$error?"p-invalid":""]])},null,8,["modelValue","class"]),t(D).emp_name.$error?($(),k("span",rs,m(t(D).emp_name.required.$message.replace("Value","Employee Name")),1)):F("",!0)])]),e("div",cs,[e("div",_s,[ms,i(K,{modelValue:w.emp_doc_name,"onUpdate:modelValue":_[13]||(_[13]=a=>w.emp_doc_name=a),options:h.value,optionLabel:"name",placeholder:"Select a document ",class:G(["form-controls pl-2 w-full h-12",[t(D).emp_doc_name.$error?"p-invalid":""]])},null,8,["modelValue","options","class"]),t(D).emp_doc_name.$error?($(),k("span",ps,m(t(D).emp_doc_name.required.$message.replace("Value","Documents")),1)):F("",!0)])]),e("div",us,[e("div",fs,[gs,e("div",ys,[i(u),bs,w.emp_upload_doc?($(),k("div",hs,m(w.emp_upload_doc.name),1)):F("",!0),e("input",{type:"file",name:"",id:"uploadPassBook",hidden:"",onChange:_[14]||(_[14]=a=>j(a)),class:G([t(D).emp_upload_doc.$error?"p-invalid":""])},null,34)]),t(D).emp_upload_doc.$error?($(),k("span",vs,m(t(D).emp_upload_doc.required.$message.replace("Value","document")),1)):F("",!0)])])]),e("div",{class:"col-12"},[e("div",{class:"text-right"},[e("button",{id:"btn_submit_bank_info",class:"btn btn-orange submit-btn",onClick:f},"Submit")])])])])]),_:1},8,["visible"])],64)}}};var ye;const xs=typeof window<"u";xs&&((ye=window==null?void 0:window.navigator)!=null&&ye.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function be(C){return typeof C=="function"?C():t(C)}const Ds=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ws=(C,n,s,P)=>{let g=C<12?"AM":"PM";return P&&(g=g.split("").reduce((w,h)=>w+=`${h}.`,"")),s?g.toLowerCase():g},ks=(C,n,s={})=>{var P;const g=C.getFullYear(),w=C.getMonth(),h=C.getDate(),d=C.getHours(),o=C.getMinutes(),x=C.getSeconds(),L=C.getMilliseconds(),U=C.getDay(),v=(P=s.customMeridiem)!=null?P:ws,r={YY:()=>String(g).slice(-2),YYYY:()=>g,M:()=>w+1,MM:()=>`${w+1}`.padStart(2,"0"),MMM:()=>C.toLocaleDateString(s.locales,{month:"short"}),MMMM:()=>C.toLocaleDateString(s.locales,{month:"long"}),D:()=>String(h),DD:()=>`${h}`.padStart(2,"0"),H:()=>String(d),HH:()=>`${d}`.padStart(2,"0"),h:()=>`${d%12||12}`.padStart(1,"0"),hh:()=>`${d%12||12}`.padStart(2,"0"),m:()=>String(o),mm:()=>`${o}`.padStart(2,"0"),s:()=>String(x),ss:()=>`${x}`.padStart(2,"0"),SSS:()=>`${L}`.padStart(3,"0"),d:()=>U,dd:()=>C.toLocaleDateString(s.locales,{weekday:"narrow"}),ddd:()=>C.toLocaleDateString(s.locales,{weekday:"short"}),dddd:()=>C.toLocaleDateString(s.locales,{weekday:"long"}),A:()=>v(d,o),AA:()=>v(d,o,!1,!0),a:()=>v(d,o,!0),aa:()=>v(d,o,!0,!0)};return n.replace($s,(l,c)=>c||r[l]())},Ps=C=>{if(C===null)return new Date(NaN);if(C===void 0)return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){const n=C.match(Ds);if(n){const s=n[2]-1||0,P=(n[7]||"0").substring(0,3);return new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,P)}}return new Date(C)};function _e(C,n="HH:mm:ss",s={}){return J(()=>ks(Ps(be(C)),be(n),s))}const Cs={key:0,class:"w-full"},Vs={class:"w-full bg-white rounded-lg p-2 border"},Ls=e("p",{class:"font-semibold text-sm"},"General Information",-1),Ss={class:"grid grid-cols-12 gap-2 h-full py-2"},Ms={class:"col-span-2"},Es=e("p",{class:"font-semibold text-xs text-gray-500"},"Birthday",-1),As={class:"font-semibold text-sm"},Us={class:"col-span-2"},Ys=e("p",{class:"font-semibold text-xs text-gray-500"},"Gender",-1),Ns={class:"font-semibold text-sm"},Ts={class:"col-span-2"},Fs=e("p",{class:"font-semibold text-xs text-gray-500"},"Date Of Joining (DOJ)",-1),Is={class:"font-semibold text-sm"},Bs={class:"col-span-2"},js=e("p",{class:"font-semibold text-xs text-gray-500"},"Marital Status",-1),Rs={class:"font-semibold text-sm"},Os={class:"col-span-2"},Hs=e("p",{class:"font-semibold text-xs text-gray-500"},"Blood Group",-1),qs={class:"font-semibold text-sm"},Gs={class:"col-span-2"},zs=e("p",{class:"font-semibold text-xs text-gray-500"},"Physically Handicapped",-1),Ks={class:"font-semibold text-sm"},Js={class:"w-full bg-white rounded-lg p-2 border my-3"},Ws=e("p",{class:"font-semibold text-sm"},"Contact Information",-1),Zs={class:"grid grid-cols-12 gap-4 h-full py-2"},Xs={class:"col-span-3"},Qs=e("p",{class:"font-semibold text-xs text-gray-500"},"Personal Email",-1),eo={class:"font-semibold text-sm"},to={class:"col-span-3"},so=e("p",{class:"font-semibold text-xs text-gray-500"},"Official Email",-1),oo={class:"font-semibold text-sm"},lo={class:"col-span-3"},ao=e("p",{class:"font-semibold text-xs text-gray-500"},"Mobile Number",-1),io={class:"font-semibold text-sm"},no={class:"col-span-3"},ro=e("p",{class:"font-semibold text-xs text-gray-500"},"Official Mobile Number",-1),co={class:"font-semibold text-sm"},_o={class:"w-full bg-white rounded-lg p-2 border"},mo=e("p",{class:"font-semibold text-sm"},"Address",-1),po={class:"grid grid-cols-12 gap-4 h-full py-2"},uo={class:"col-span-6"},fo=e("p",{class:"font-semibold text-xs text-gray-500"},"Current Address",-1),go={class:"font-semibold text-sm"},yo={class:"col-span-6"},bo=e("p",{class:"font-semibold text-xs text-gray-500"},"Permanent Address ",-1),ho={class:"font-semibold text-sm"},vo={class:"grid grid-cols-2"},xo={class:""},Do={class:"mb-1 form-group"},$o=e("label",{class:"ml-[5px]"},[E("Birth Date"),e("span",{class:"text-danger"},"*")],-1),wo={class:"cal-icon"},ko={class:""},Po={class:"mb-1 form-group"},Co=e("label",null,[E("Gender"),e("span",{class:"text-danger"},"*")],-1),Vo={class:""},Lo={class:"mb-1 form-group"},So=e("label",{style:{marginLeft:"10px",marginRight:"10px"}},[E("Marital status "),e("span",{class:"text-danger"},"*")],-1),Mo={class:""},Eo={class:"mb-2 form-group"},Ao=e("label",null,[E("Blood Group"),e("span",{class:"text-danger"},"*")],-1),Uo={class:"cal-icon"},Yo={class:""},No={class:"form-group w-full",style:{marginLeft:"10px"}},To=e("label",{class:"my-1"},"Physically Handicapped",-1),Fo=e("div",{class:""},[e("div",{class:"mb-3 form-group"})],-1),Io={class:"text-right col-12"},Bo={class:"modal-body"},jo={class:"row"},Ro={class:"col-md-6"},Oo={class:"mb-3 form-group"},Ho=e("label",null,"Personal Email",-1),qo={class:"col-md-6"},Go={class:"mb-3 form-group"},zo=e("label",null," Office Email",-1),Ko={class:"col-md-6"},Jo={class:"mb-3 form-group"},Wo=e("label",null,"Mobile Number",-1),Zo={class:"col-md-6"},Xo={class:"mb-3 form-group"},Qo=e("label",null,"Official Mobile Number",-1),el={class:"modal-body"},tl={class:"col-md-12"},sl={class:"mb-3 form-group"},ol=e("label",null,"Current Address",-1),ll={class:"mb-3 form-group"},al=e("label",null,"Permanent Address ",-1),il={class:"col-12"},nl={class:"d-flex justify-content-between align-items-center"},dl={class:"d-flex justify-content-center align-items-center"},rl=e("h1",{class:"mx-2"},"Copy current address to the permanent address",-1),cl={class:""},cd={__name:"EmployeeDetails",setup(C){const n=le(),s=ee(),P=b(!1),g=te(),w=te(),h=b(!1),d=b(!1),o=b(!1),x=z({dob:"",gender:"",doj:"",blood_group_id:"",marital_status_id:"",physically_challenged:""}),L=b([{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Others",value:"others"}]),U=b(),v=z({email:"",official_email:"",mobile_number:"",official_mobile_number:""}),r=b(),l=z({current_address:"",Permanent_Address:""}),c=b(!1);function p(){c.value==1?l.Permanent_Address=l.current_address:c.value=!1}J(()=>s.employeeDetails.get_employee_details.gender=="male"?"Male":s.employeeDetails.get_employee_details.gender=="female"?"Female":s.employeeDetails.get_employee_details.gender=="others"?"Others":"-"),J(()=>s.employeeDetails.get_employee_details.marital_status),J(()=>{if(s.employeeDetails.get_employee_details.blood_group_id==1)return"A Positive";if(s.employeeDetails.get_employee_details.blood_group_id==2)return"A Negative";if(s.employeeDetails.get_employee_details.blood_group_id==3)return"B Positive";if(s.employeeDetails.get_employee_details.blood_group_id==4)return"B Negative";if(s.employeeDetails.get_employee_details.blood_group_id==5)return"AB Positive";if(s.employeeDetails.get_employee_details.blood_group_id==6)return"AB Negative";if(s.employeeDetails.get_employee_details.blood_group_id==7)return"O Positive";if(s.employeeDetails.get_employee_details.blood_group_id==8)return"O Negative"}),J(()=>{if(s.employeeDetails.get_employee_details.physically_challenged=="no")return"No";if(s.employeeDetails.get_employee_details.physically_challenged=="yes")return"Yes"});const B=b([{name:"Yes",value:"yes"},{name:"No",value:"no"}]),O=b(),j=b();$e(),se(()=>{s.fetchEmployeeDetails(),n.getBloodGroups().then(_=>{console.log(_.data),O.value=_.data}),n.getMaritalStatus().then(_=>{console.log(_),j.value=_.data})});function M(){console.log("Opening General Info Dialog"),x.dob=s.employeeDetails.get_employee_details.dob,x.doj=s.employeeDetails.get_employee_details.doj,x.marital_status_id=parseInt(s.employeeDetails.get_employee_details.marital_status_id),x.gender=s.employeeDetails.get_employee_details.gender,x.blood_group_id=parseInt(s.employeeDetails.get_employee_details.blood_group_id),x.physically_challenged=s.employeeDetails.get_employee_details.physically_challenged,h.value=!0}function D(){console.log(x.dob),P.value=!0;let u=`/profile-pages-update-generalinfo/${n.current_user_id}`;I.post(u,{user_code:s.employeeDetails.user_code,dob:R(x.dob).format("YYYY-MM-DD"),gender:x.gender,marital_status_id:x.marital_status_id,doj:x.doj,blood_group_id:x.blood_group_id,physically_challenged:x.physically_challenged}).then(A=>{A.data.status=="success"?(s.employeeDetails.get_employee_details.dob=_e(x.dob,"YYYY-MM-DD"),s.employeeDetails.gender=x.gender,s.employeeDetails.marital_status_id=x.marital_status_id,s.employeeDetails.get_employee_details.doj=x.doj,s.employeeDetails.blood_group_id=x.blood_group_id,s.employeeDetails.physically_challenged=x.physically_challenged):A.data.status=="failure"&&(leave_data.leave_request_error_messege=A.data.message)}).catch(A=>{console.log(A)}).finally(()=>{s.fetchEmployeeDetails(),P.value=!1,g.add({severity:"success",summary:"Updated",detail:"General information updated",life:3e3})}),h.value=!1}function f(){console.log("Opening General Info Dialog : "),v.email=s.employeeDetails.email,v.official_email=s.employeeDetails.get_employee_office_details.officical_mail,v.mobile_number=parseInt(s.employeeDetails.get_employee_details.mobile_number),s.employeeDetails.get_employee_office_details.official_mobile?v.official_mobile_number=parseInt(s.employeeDetails.get_employee_office_details.official_mobile):v.official_mobile_number=0,console.log("testing"),d.value=!0}function X(){let u=`/profile-pages-update-contactinfo/${n.current_user_id}`;P.value=!0,I.post(u,{user_code:s.employeeDetails.user_code,email:v.email,officical_mail:v.official_email,mobile_number:v.mobile_number,official_mobile_number:parseInt(v.official_mobile_number)}).then(A=>{A.data.status=="success"?(g.add({severity:"success",summary:"Updated",detail:"Contact information updated",life:3e3}),s.employeeDetails.email=v.email,s.employeeDetails.get_employee_office_details.officical_mail=v.official_email,s.employeeDetails.get_employee_details.mobile_number=v.mobile_number,s.employeeDetails.get_employee_office_details.official_mobile=v.official_mobile_number):A.data.status=="failure"&&(U.leave_request_error_messege=A.data.message)}).catch(A=>{console.log(A)}).finally(()=>{s.fetchEmployeeDetails(),P.value=!1}),d.value=!1}function ae(){console.log("Opening General Info Dialog"),l.current_address=s.employeeDetails.get_employee_details.current_address_line_1,l.Permanent_Address=s.employeeDetails.get_employee_details.permanent_address_line_1,o.value=!0}const Y=()=>{if(P.value=!0,l.current_address==" "||l.Permanent_Address==" ")w.add({severity:"warn",summary:"Warn Message",detail:"Message Content",life:3e3});else{let u=`/profile-pages-update-address_info/${n.current_user_id}`;I.post(u,{user_code:s.employeeDetails.user_code,current_address_line_1:l.current_address,permanent_address_line_1:l.Permanent_Address}).then(A=>{data_checking.value=!1,A.data.status=="success"?(g.add({severity:"success",summary:"Updated",detail:"Address information updated",life:3e3}),s.employeeDetails.current_address_line_1=l.current_address,s.employeeDetails.get_employee_office_details.permanent_address_line_1=l.Permanent_Address):A.data.status=="failure"&&(r.leave_request_error_messege=A.data.message)}).catch(A=>{console.log(A)}).finally(()=>{s.fetchEmployeeDetails(),P.value=!1}),o.value=!1}};return(_,u)=>{const A=V("Calendar"),H=V("Dropdown"),K=V("Dialog"),W=V("InputMask"),N=V("Toast");return $(),k(me,null,[t(s).employeeDetails.get_employee_details?($(),k("div",Cs,[e("div",Vs,[e("div",{class:"flex justify-around"},[Ls,e("div",{class:"flex justify-end"},[e("img",{src:Z,class:"h-4 mb-1 w-4 cursor-pointer my-auto",alt:"",onClick:M})])]),e("div",Ss,[e("div",Ms,[Es,e("p",As,m(t(R)(t(s).employeeDetails.get_employee_details.dob).format("DD-MMM-YYYY")),1)]),e("div",Us,[Ys,e("p",Ns,m(t(n).capitalizeFLetter(t(s).employeeDetails.get_employee_details.gender)),1)]),e("div",Ts,[Fs,e("p",Is,m(t(R)(t(s).employeeDetails.get_employee_details.doj).format("DD-MMM-YYYY")),1)]),e("div",Bs,[js,e("p",Rs,m(t(s).employeeDetails.get_employee_details.marital_status),1)]),e("div",Os,[Hs,e("p",qs,m(t(s).employeeDetails.get_employee_details.blood_group_name),1)]),e("div",Gs,[zs,e("p",Ks,m(t(n).capitalizeFLetter(t(s).employeeDetails.get_employee_details.physically_challenged)),1)])])]),e("div",Js,[e("div",{class:"flex justify-around"},[Ws,e("div",{class:"flex justify-end"},[e("img",{src:Z,class:"h-4 mb-1 w-4 cursor-pointer my-auto",alt:"",onClick:f})])]),e("div",Zs,[e("div",Xs,[Qs,e("p",eo,m(t(s).employeeDetails.email?t(s).employeeDetails.email:"-"),1)]),e("div",to,[so,e("p",oo,m(t(s).employeeDetails.get_employee_office_details.officical_mail?t(s).employeeDetails.get_employee_office_details.officical_mail:"-"),1)]),e("div",lo,[ao,e("p",io,m(t(s).employeeDetails.get_employee_details.mobile_number?t(s).employeeDetails.get_employee_details.mobile_number:"-"),1)]),e("div",no,[ro,e("p",co,m(t(s).employeeDetails.get_employee_office_details.official_mobile?t(s).employeeDetails.get_employee_office_details.official_mobile:"-"),1)])])]),e("div",_o,[e("div",{class:"flex justify-around"},[mo,e("div",{class:"flex justify-end"},[e("img",{src:Z,class:"h-4 mb-1 w-4 cursor-pointer my-auto",alt:"",onClick:ae})])]),e("div",po,[e("div",uo,[fo,e("p",go,m(t(s).employeeDetails.get_employee_details.current_address_line_1?t(s).employeeDetails.get_employee_details.current_address_line_1:"-"),1)]),e("div",yo,[bo,e("p",ho,m(t(s).employeeDetails.get_employee_details.permanent_address_line_1?t(s).employeeDetails.get_employee_details.permanent_address_line_1:"-"),1)])])])])):F("",!0),i(K,{visible:h.value,"onUpdate:visible":u[6]||(u[6]=a=>h.value=a),modal:"",header:"General Information",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," General Information",4)])]),default:y(()=>[e("div",vo,[e("div",xo,[e("div",Do,[$o,e("div",wo,[i(A,{class:"mb-3 form-selects w-[94%]",modelValue:x.dob,"onUpdate:modelValue":u[0]||(u[0]=a=>x.dob=a),placeholder:"DD-MM-YYYY",dateFormat:"dd-mm-yy"},null,8,["modelValue"])])])]),e("div",ko,[e("div",Po,[Co,i(H,{modelValue:x.gender,"onUpdate:modelValue":u[1]||(u[1]=a=>x.gender=a),options:L.value,optionLabel:"name",optionValue:"value",placeholder:"Choose Gender",class:"form-selects w-[94%]"},null,8,["modelValue","options"])])]),e("div",Vo,[e("div",Lo,[So,i(H,{modelValue:x.marital_status_id,"onUpdate:modelValue":u[2]||(u[2]=a=>x.marital_status_id=a),options:j.value,optionLabel:"name",optionValue:"id",placeholder:"Select Marital Status",class:"form-selects w-[94%]",style:{marginLeft:"10px",marginRight:"10px"}},null,8,["modelValue","options"])])]),e("div",Mo,[e("div",Eo,[Ao,e("div",Uo,[i(H,{modelValue:x.blood_group_id,"onUpdate:modelValue":u[3]||(u[3]=a=>x.blood_group_id=a),options:O.value,optionLabel:"name",optionValue:"id",placeholder:"Select Bloodgroup",class:"form-selects w-[94%]"},null,8,["modelValue","options"])])])]),e("div",Yo,[e("div",No,[To,i(H,{modelValue:x.physically_challenged,"onUpdate:modelValue":u[4]||(u[4]=a=>x.physically_challenged=a),options:B.value,optionLabel:"name",optionValue:"value",placeholder:"Select",class:"form-selects w-[94%]"},null,8,["modelValue","options"])])]),Fo]),e("div",Io,[e("button",{id:"btn_submit_generalInfo",class:"btn btn-border-orange submit-btn",onClick:u[5]||(u[5]=a=>D())},"Save")])]),_:1},8,["visible"]),i(K,{visible:d.value,"onUpdate:visible":u[11]||(u[11]=a=>d.value=a),modal:"",header:"Contact Information",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Contact Information",4)])]),default:y(()=>[e("div",Bo,[e("div",jo,[e("div",Ro,[e("div",Oo,[Ho,ie(e("input",{type:"email",name:"present_email",class:"form-control","onUpdate:modelValue":u[7]||(u[7]=a=>v.email=a)},null,512),[[re,v.email]])])]),e("div",qo,[e("div",Go,[zo,ie(e("input",{type:"email",class:"form-control",name:"officical_mail","onUpdate:modelValue":u[8]||(u[8]=a=>v.official_email=a)},null,512),[[re,v.official_email]])])]),e("div",Ko,[e("div",Jo,[Wo,i(W,{id:"basic",class:"form-control h-10",modelValue:v.mobile_number,"onUpdate:modelValue":u[9]||(u[9]=a=>v.mobile_number=a),mask:"9999999999",placeholder:"999999999"},null,8,["modelValue"])])]),e("div",Zo,[e("div",Xo,[Qo,i(W,{id:"basic",class:"form-control h-10",modelValue:v.official_mobile_number,"onUpdate:modelValue":u[10]||(u[10]=a=>v.official_mobile_number=a),mask:"9999999999",placeholder:"999999999"},null,8,["modelValue"])])]),e("div",{class:"col-12"},[e("div",{class:"text-right"},[e("button",{class:"btn btn-border-orange submit-btn",onClick:X},"Save")])])])])]),_:1},8,["visible"]),i(K,{visible:o.value,"onUpdate:visible":u[15]||(u[15]=a=>o.value=a),modal:"",header:"",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Address Information",4)])]),default:y(()=>[e("div",el,[e("div",tl,[e("div",sl,[ol,ie(e("textarea",{name:"current_address_line_1",id:"current_address_line_1",cols:"30",rows:"3",class:"form-control","onUpdate:modelValue":u[12]||(u[12]=a=>l.current_address=a)},null,512),[[re,l.current_address]])]),e("div",ll,[al,ie(e("textarea",{name:"permanent_address_line_1",id:"permanent_address_line_1",cols:"30",rows:"3",class:"form-control","onUpdate:modelValue":u[13]||(u[13]=a=>l.Permanent_Address=a)},null,512),[[re,l.Permanent_Address]])])]),e("div",il,[e("div",nl,[e("div",dl,[ie(e("input",{type:"checkbox",class:"border rounded-md","onUpdate:modelValue":u[14]||(u[14]=a=>c.value=a),style:{width:"20px",height:"20px"},onChange:p,value:1},null,544),[[De,c.value]]),rl]),e("div",cl,[i(N),e("button",{id:"btn_submit_address",class:"btn btn-border-orange submit-btn warn",onClick:Y,severity:"warn"},"Save")])])])])]),_:1},8,["visible"])],64)}}};const _l={class:"mb-2 card"},ml={class:"card-body"},pl={class:"font-semibold text-lg"},ul={class:"grid grid-cols-2"},fl={class:"mr-[10px] ml-[8px]"},gl=e("span",null,[E("Name "),e("span",{class:"text-danger"},"*")],-1),yl={class:""},bl=e("span",null,[E("Relationship"),e("span",{class:"text-danger"},"*")],-1),hl={class:"grid grid-cols-2"},vl={class:"mr-2"},xl=e("span",null,[E("Date of birth "),e("span",{class:"text-danger"},"*")],-1),Dl={class:"ml-1"},$l=e("span",null,[E("phone"),e("span",{class:"text-danger"},"*")],-1),wl={class:"my-6 table-responsive"},kl={key:0},Pl={key:1},Cl=["onClick"],Vl=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),Ll=[Vl],Sl=["onClick"],Ml=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 font-bold"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),El=[Ml],Al=e("template",null,null,-1),Ul={class:"grid grid-cols-2"},Yl={class:""},Nl=e("span",null,[E("Name "),e("span",{class:"text-danger"},"*")],-1),Tl={class:""},Fl=e("span",null,[E("Relationship"),e("span",{class:"text-danger"},"*")],-1),Il={class:"grid grid-cols-2"},Bl={class:"mr-2"},jl=e("span",null,[E("Date of birth "),e("span",{class:"text-danger"},"*")],-1),Rl={class:"ml-2"},Ol=e("span",null,[E("phone"),e("span",{class:"text-danger"},"*")],-1),_d={__name:"FamilyDetails",setup(C){const n=le(),s=ee(),P=te();b("");const g=b(!1),w=b(!1),h=z({name:"",relationship:"",dob:"",phone_number:""}),d=z({name:"",relationship:"",dob:"",phone_number:""}),o=b(),x=()=>{s.loading_screen=!0;let l=`/add-family-info/${n.current_user_id}`;I.post(l,{user_code:s.employeeDetails.user_code,name:h.name,relationship:h.relationship,dob:R(h.dob).format("YYYY-MM-DD"),phone_number:h.phone_number}).then(c=>{c.data.status=="success"?(P.add({severity:"success",summary:"Updated",detail:"Family information updated",life:3e3}),s.employeeDetails.get_family_details.dob=_e(h.dob,"YYYY-MM-DD"),s.employeeDetails.get_family_details.name=h.gender,s.employeeDetails.get_family_details.relationship=h.relationship,s.employeeDetails.get_family_details.phone_number=h.phone_number):c.data.status=="failure"}).catch(c=>{console.log(c)}).finally(()=>{s.fetchEmployeeDetails(),s.loading_screen=!1}),g.value=!1},L=r=>{w.value=!0,o.value=r.id,d.name=r.name,d.relationship=r.relationship,d.dob=r.dob,d.phone_number=r.phone_number},U=r=>{s.loading_screen=!0,o.value=r.id;let c=` /delete-family-info/${n.current_user_id}`;I.post(c,{current_table_id:o.value}).then(p=>{p.data.status=="success"?(P.add({severity:"success",summary:"Deleted",detail:"General information updated",life:3e3}),s.employeeDetails.get_family_details.dob=_e(h.dob,"YYYY-MM-DD"),s.employeeDetails.get_family_details.name=h.gender,s.employeeDetails.get_family_details.relationship=h.relationship,s.employeeDetails.get_family_details.phone_number=h.phone_number):p.data.status=="failure"&&(leave_data.leave_request_error_messege=p.data.message)}).catch(p=>{console.log(p)}).finally(()=>{s.loading_screen=!1,s.fetchEmployeeDetails()})},v=r=>{s.loading_screen=!0;let c=`/update-family-info/${n.current_user_id}`;I.post(c,{user_code:s.employeeDetails.user_code,current_table_id:o.value,name:d.name,relationship:d.relationship,dob:R(d.dob).format("YYYY-MM-DD"),phone_number:d.phone_number}).then(p=>{p.data.status=="success"?(P.add({severity:"success",summary:"Updated",detail:"General information updated",life:3e3}),s.employeeDetails.get_family_details.dob=_e(d.dob,"YYYY-MM-DD"),s.employeeDetails.get_family_details.name=d.gender,s.employeeDetails.get_family_details.relationship=h.relationship,s.employeeDetails.get_family_details.phone_number=d.phone_number):p.data.status=="failure"&&(leave_data.leave_request_error_messege=p.data.message)}).catch(p=>{console.log(p)}).finally(()=>{s.fetchEmployeeDetails(),s.loading_screen=!1}),w.value=!1};return se(()=>{}),(r,l)=>{const c=V("InputText"),p=V("Calendar"),B=V("InputMask"),O=V("Toast"),j=V("Dialog"),M=V("Column"),D=V("DataTable");return $(),k(me,null,[e("div",_l,[e("div",ml,[e("h6",pl,[E("Family Information "),e("button",{type:"button",class:"float-right btn btn-orange",onClick:l[0]||(l[0]=f=>g.value=!0)}," Add New "),i(j,{visible:g.value,"onUpdate:visible":l[5]||(l[5]=f=>g.value=f),modal:"",style:{width:"50vw",borderTop:"5px solid #002f56"},id:""},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"fw-bold fs-15"}," Family Information",4)])]),footer:y(()=>[i(O),e("div",null,[e("button",{type:"button",class:"submit_btn warning success",id:"submit_button_family_details",onClick:x},"submit")])]),default:y(()=>[e("div",ul,[e("div",fl,[gl,i(c,{type:"text",modelValue:h.name,"onUpdate:modelValue":l[1]||(l[1]=f=>h.name=f),class:"w-[94%] h-10"},null,8,["modelValue"])]),e("div",yl,[bl,i(c,{type:"text",modelValue:h.relationship,"onUpdate:modelValue":l[2]||(l[2]=f=>h.relationship=f),class:"w-[90%] h-10"},null,8,["modelValue"])])]),e("div",hl,[e("div",vl,[xl,i(p,{dateFormat:"dd/mm/yy",modelValue:h.dob,"onUpdate:modelValue":l[3]||(l[3]=f=>h.dob=f),class:"h-10 w-[98%]",minDate:r.minDate,maxDate:r.maxDate},null,8,["modelValue","minDate","maxDate"])]),e("div",Dl,[$l,i(B,{id:"basic",mask:"9999999999",placeholder:"9999999999",class:"h-10",modelValue:h.phone_number,"onUpdate:modelValue":l[4]||(l[4]=f=>h.phone_number=f)},null,8,["modelValue"])])])]),_:1},8,["visible"])]),e("div",wl,[i(D,{ref:"dt",dataKey:"id",paginator:!0,rows:10,value:t(s).employeeDetails.get_family_details,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:y(()=>[i(M,{header:"Name",field:"name",style:{"min-width":"8rem"}}),i(M,{field:"relationship",header:"Relationship",style:{"min-width":"12rem"}}),i(M,{field:"dob",header:"Date of Birth ",style:{"min-width":"12rem"}},{body:y(f=>[f.data.dob=="Invalid Date"?($(),k("div",kl," - ")):($(),k("div",Pl,m(t(R)(f.data.dob).format("DD-MMM-YYYY")),1))]),_:1}),i(M,{field:"phone_number",header:"Phone",style:{"min-width":"12rem"}}),i(M,{exportable:!1,header:"Action",style:{"min-width":"20rem"}},{body:y(f=>[e("button",{class:"p-2 mx-4 bg-green-200 border-green-500 rounded-xl",onClick:X=>L(f.data)},Ll,8,Cl),e("button",{class:"p-2 bg-red-200 border-red-500 rounded-xl",onClick:X=>U(f.data)},El,8,Sl),Al]),_:1})]),_:1},8,["value"])])])]),i(j,{visible:w.value,"onUpdate:visible":l[10]||(l[10]=f=>w.value=f),modal:"",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Family Information",4)])]),footer:y(()=>[i(O),e("div",null,[e("button",{type:"button",class:"submit_btn warning success",id:"submit_button_family_details",onClick:v},"submit")])]),default:y(()=>[e("div",Ul,[e("div",Yl,[Nl,i(c,{type:"text",modelValue:d.name,"onUpdate:modelValue":l[6]||(l[6]=f=>d.name=f),class:"h-10 w-[90%]"},null,8,["modelValue"])]),e("div",Tl,[Fl,i(c,{type:"text",modelValue:d.relationship,"onUpdate:modelValue":l[7]||(l[7]=f=>d.relationship=f),class:"h-10 w-[90%] ml-2"},null,8,["modelValue"])])]),e("div",Il,[e("div",Bl,[jl,i(p,{modelValue:d.dob,"onUpdate:modelValue":l[8]||(l[8]=f=>d.dob=f),min:"2000-01-02",class:"w-[100%] h-10"},null,8,["modelValue"])]),e("div",Rl,[Ol,i(B,{id:"basic",modelValue:d.phone_number,"onUpdate:modelValue":l[9]||(l[9]=f=>d.phone_number=f),mask:"9999999999",placeholder:"999999999",class:"h-10 m"},null,8,["modelValue"])])])]),_:1},8,["visible"])],64)}}},Hl=we("employeePayslipStore",()=>{const C=he(),n=b(),s=b(),P=b(!1),g=new URLSearchParams(window.location.search);function w(){return g.has("uid")?g.get("uid"):""}async function h(){I.post("/payroll/paycheck/getEmployeeAllPayslipList",{uid:w()}).then(L=>{n.value=L.data.data})}async function d(L,U){let v=parseInt(R(U).month())+1,r=R(U).year();await I.post("/payroll/paycheck/getEmployeePayslipDetailsAsHTML",{uid:w(),user_code:L,month:v,year:r}).then(l=>{s.value=l.data,P.value=!0})}function o(L,U,v){const r=L,l=document.createElement("a"),c=`${U}-${v}.pdf`;l.href=r,l.download=c,l.click()}async function x(L,U){C.loading=!0,console.log("Downloading payslip PDF.....");let v=parseInt(R(U).month())+1,r=R(U).year();await I.post("/payroll/paycheck/getEmployeePayslipDetailsAsPDF",{uid:w(),user_code:L,month:v,year:r}).then(l=>{if(console.log(" Response [downloadPayslipReleaseStatus] : "+JSON.stringify(l.data.data)),l.data.data){let c=l.data.data,p=l.data.emp_name,B=l.data.emp_month;c.startsWith("JVB")?(c="data:application/pdf;base64,"+c,o(c,p,B)):c.startsWith("data:application/pdf;base64")&&o(c)}else console.log("Response Url Not Found")}).finally(()=>{C.loading=!1})}return{array_employeePayslips_list:n,paySlipHTMLView:s,canShowPayslipView:P,getEmployeeAllPayslipList:h,getEmployeePayslipDetailsAsHTML:d,getEmployeePayslipDetailsAsPDF:x}}),ql={class:"my-4"},Gl={class:"card flex justify-content-center inline-flex"},zl=["innerHTML"],Kl={__name:"EmployeePayslips",setup(C){const n=Hl();se(async()=>{console.log("EmployeePayslips,vue loaded"),await n.getEmployeeAllPayslipList()});const s=b({PAYROLL_MONTH:{value:null,matchMode:pe.STARTS_WITH,matchMode:pe.EQUALS,matchMode:pe.CONTAINS}});return(P,g)=>{const w=V("Column"),h=V("Button"),d=V("column"),o=V("DataTable"),x=V("Dialog");return $(),k(me,null,[e("div",ql,[i(o,{value:t(n).array_employeePayslips_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"PAYROLL_MONTH",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:s.value,"onUpdate:filters":g[0]||(g[0]=L=>s.value=L),filterDisplay:"menu",loading:P.loading2,globalFilterFields:["name"]},{default:y(()=>[i(w,{field:"PAYROLL_MONTH",header:"Month",sortable:!0},{body:y(L=>[E(m(t(R)(L.data.PAYROLL_MONTH).format("DD-MMM-YYYY")),1)]),_:1}),i(w,{field:"TOTAL_EARNED_GROSS",header:"Gross Pay"}),i(w,{field:"Reimbursements",header:"Reimbursements"},{body:y(L=>[E(m(0))]),_:1}),i(w,{field:"TOTAL_DEDUCTIONS",header:"Deductions"}),i(w,{field:"NET_TAKE_HOME",header:"Take Home"}),i(w,{header:"Action"},{body:y(L=>[i(h,{class:"btn-primary z-0",label:"View ",onClick:U=>t(n).getEmployeePayslipDetailsAsHTML("",L.data.PAYROLL_MONTH)},null,8,["onClick"])]),_:1}),i(d,{header:"Download"},{body:y(L=>[i(h,{class:"btn-primary z-0",label:"Download ",onClick:U=>t(n).getEmployeePayslipDetailsAsPDF("",L.data.PAYROLL_MONTH)},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","loading"])]),e("div",Gl,[i(x,{visible:t(n).canShowPayslipView,"onUpdate:visible":g[1]||(g[1]=L=>t(n).canShowPayslipView=L),modal:"",header:"Payslip",style:{width:"58vw"}},{default:y(()=>[e("div",{innerHTML:t(n).paySlipHTMLView},null,8,zl)]),_:1},8,["visible"])])],64)}}};const Jl=e("div",{class:""},[e("div",{class:""},[e("ul",{class:"nav nav-pills nav-tabs-dashed",id:"pills-tab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("a",{class:"nav-link active",id:"","data-bs-toggle":"pill",href:"","data-bs-target":"#finance_summary",role:"tab","aria-controls":"pills-home","aria-selected":"true"},"Summary ")]),e("li",{class:"mx-4 nav-item",role:"presentation"},[e("a",{class:"nav-link",id:"","data-bs-toggle":"pill",href:"","data-bs-target":"#finance_pay",role:"tab","aria-controls":"pills-home","aria-selected":"true"}," Payslips ")])])])],-1),Wl={class:"tab-content",id:"pills-tabContent"},Zl={class:"tab-pane fade active show",id:"finance_summary",role:"tabpanel","aria-labelledby":""},Xl={key:0,class:"my-2"},Ql={class:"w-full bg-white rounded-lg p-2 border"},ea=e("div",{class:"flex justify-around"},[e("p",{class:"font-semibold text-sm"},"Payroll Summary"),e("div",{class:"flex justify-end"})],-1),ta={class:"grid grid-cols-12 gap-2 h-full py-2"},sa={class:"col-span-2"},oa=e("p",{class:"font-semibold text-xs text-gray-500"},"Last Processed",-1),la={class:"font-semibold text-sm"},aa={class:"col-span-2"},ia=e("p",{class:"font-semibold text-xs text-gray-500"},"Total Working Days",-1),na={class:"font-semibold text-sm"},da={class:"col-span-2"},ra=e("p",{class:"font-semibold text-xs text-gray-500"},"Loss Of Pay(LOP)",-1),ca={class:"font-semibold text-sm"},_a={class:"w-full bg-white rounded-lg p-2 border my-3"},ma=e("p",{class:"font-semibold text-sm"},"Bank Information",-1),pa={class:"grid grid-cols-12 gap-2 h-full py-2"},ua={class:"col-span-2"},fa=e("p",{class:"font-semibold text-xs text-gray-500"},"Bank Name",-1),ga={class:"font-semibold text-sm"},ya={class:"col-span-2"},ba=e("p",{class:"font-semibold text-xs text-gray-500"},"Bank Account No",-1),ha={class:"font-semibold text-sm"},va={class:"col-span-2"},xa=e("p",{class:"font-semibold text-xs text-gray-500"},"IFSC Code",-1),Da={class:"font-semibold text-sm"},$a={class:"col-span-2"},wa=e("p",{class:"font-semibold text-xs text-gray-500"},"PAN No",-1),ka={class:"font-semibold text-sm"},Pa={class:"w-full bg-white rounded-lg p-2 border"},Ca=e("p",{class:"font-semibold text-sm"},"Statutory Information",-1),Va={class:"grid grid-cols-12 gap-2 h-full py-2"},La={class:"col-span-2"},Sa=e("p",{class:"font-semibold text-xs text-gray-500"},"PF Applicable",-1),Ma={class:"font-semibold text-sm"},Ea={class:"col-span-2"},Aa=e("p",{class:"font-semibold text-xs text-gray-500"},"EPF Number",-1),Ua={class:"font-semibold text-sm"},Ya={class:"col-span-2"},Na=e("p",{class:"font-semibold text-xs text-gray-500"},"UAN Number",-1),Ta={class:"font-semibold text-sm"},Fa={class:"col-span-2"},Ia=e("p",{class:"font-semibold text-xs text-gray-500"},"ESIC Applicable",-1),Ba={class:"font-semibold text-sm"},ja={class:"col-span-2"},Ra=e("p",{class:"font-semibold text-xs text-gray-500"},"ESIC Number",-1),Oa={class:"font-semibold text-sm"},Ha={class:"tab-pane fade",id:"finance_pay",role:"tabpanel","aria-labelledby":""},qa={class:"mb-2 card"},Ga={class:"card-body"},za={class:"modal-body"},Ka={class:"row"},Ja={class:"col-md-6"},Wa={class:"mb-3 form-group"},Za=e("label",null,"Bank Name",-1),Xa={class:"col-md-6"},Qa={class:"mb-3 form-group"},ei=e("label",null,"Bank Account No",-1),ti=e("div",{class:"cal-icon"},null,-1),si={class:"col-md-6"},oi={class:"mb-3 form-group"},li=e("label",null,"IFSC Code",-1),ai={class:"col-md-6"},ii={class:"floating d-block justify-items-start al"},ni=e("label",{for:"",class:"float-label mb-2"},"Bank Passbook or Cheque Leaf",-1),di={class:"flex justify-content-start"},ri=e("label",{class:"cursor-pointer text-primary d-flex align-items-center fs-5 btn bg-primary",style:{width:"135px"},id:"",for:"uploadPassBook"},[e("i",{class:"pi pi-arrow-circle-up fs-5 mr-3"}),e("h1",{class:"text-light"},"Upload file")],-1),ci={class:"d-flex flex-column justify-content-center align-items-center border"},_i={key:0,class:"text-red-400 fs-6 font-semibold text-center"},mi={key:0,class:"p-2 px-3 bg-green-100 rounded-lg font-semibold fs-11 mx-4"},pi={class:"modal-body"},ui={class:"row"},fi={class:"col-md-6"},gi={class:"mb-3 form-group"},yi=e("label",{class:"mb-2 font-semibold text-lg"},"PAN No",-1),bi={key:0,class:"text-red-400 fs-6 font-semibold"},hi={class:"col-md-6 d-flex flex-column"},vi={class:"d-flex justify-items-center flex-column ml-10"},xi=e("label",{for:"",class:"float-label mb-2 font-semibold text-lg"},"Pancard",-1),Di={class:"d-flex justify-items-center align-items-center"},$i=e("label",{class:"cursor-pointer text-primary d-flex align-items-center fs-5 btn bg-primary",style:{width:"100px"},id:"",for:"uploadPassBook"},[e("i",{class:"pi pi-arrow-circle-up fs-5 mr-2"}),e("h1",{class:"text-light"},"Upload")],-1),wi={key:0,class:"p-2 bg-blue-100 rounded-lg font-semibold fs-11 mx-4"},ki={key:0,class:"text-red-400 fs-6 font-semibold"},Pi={class:"modal-body"},Ci={class:"row"},Vi={class:"col"},Li=e("label",{for:"",class:""},[E("PF Applicable"),e("span",{class:"text-danger"},"*")],-1),Si={class:"col"},Mi=e("label",{class:"ml-2"},"EPF Number",-1),Ei={class:"row"},Ai={class:"col"},Ui=e("label",{class:"ml-1"},"UAN Number",-1),Yi={class:"col ml-2"},Ni=e("label",{class:"ml-2"},[E("ESIC Applicable"),e("span",{class:"text-danger"},"*")],-1),Ti={class:"row"},Fi={class:"col-6"},Ii=e("label",{for:"",class:"ml-2"},"ESIC Number",-1),Bi=e("div",{class:"col"},null,-1),ji=e("h5",{style:{"text-align":"center"}},"Please wait...",-1),md={__name:"FinanceDetails",setup(C){const n=ee(),s=le(),P=te(),g=b(!1),w=b(!1),h=b();h.value=n.employeeDetails.payroll_summary,console.log("testing payroll summary :",h.value);let d=new FormData;d.append("user_code",le.current_user_code),d.append("file_object",ee.value);let o="/profile-pages/updateProfilePicture";I.post(o,d).then(N=>{}).finally(()=>{console.log("Photo Sent")});const x=b([]),L=b();x.value.push(n.employeeDetails.get_statutory_details),se(()=>{s.getBankList().then(N=>{L.value=N.data}),n.fetchEmployeeDetails()});const U=b(!1),v=b(!1);b(),b();const r=z({bank_id:"",bank_ac_no:"",ifsc_code:"",PassBook:""}),l=z({pan_no:"",Pancard:""}),c=N=>{N.target.files&&N.target.files[0]&&(r.PassBook=N.target.files[0],console.log(r.PassBook))},p=b([{name:"Yes",value:"Yes"},{name:"No",value:"No"}]),B=()=>{g.value=!0;let a=`/update-bank-info/${s.current_user_id}`,T=new FormData;T.append("user_code",n.employeeDetails.user_code),T.append("bank_id",r.bank_id),T.append("account_no",r.bank_ac_no),T.append("bank_ifsc",r.ifsc_code),T.append("PassBook",r.PassBook),T.append("onboard_document_type","Cheque leaf/Bank Passbook"),I.post(a,T).then(Q=>{Q.data.status=="success"?(P.add({severity:"success",summary:"Updated",detail:"Bank information updated",life:3e3}),n.employeeDetails.get_employee_details.bank_id=r.bank_id,n.employeeDetails.get_employee_details.bank_account_number=r.bank_ac_no,n.employeeDetails.get_employee_details.bank_ifsc_code=r.ifsc_code,n.employeeDetails.get_employee_details.pan_no=r.pan_no):Q.data.status=="failure"&&(leave_data.leave_request_error_messege=Q.data.message)}).catch(Q=>{console.log(Q)}).finally(()=>{n.fetchEmployeeDetails(),g.value=!1}),U.value=!1};function O(){r.bank_id=parseInt(n.employeeDetails.get_employee_details.bank_id),r.bank_ac_no=n.employeeDetails.get_employee_details.bank_account_number,r.ifsc_code=n.employeeDetails.get_employee_details.bank_ifsc_code,r.pan_no=n.employeeDetails.get_employee_details.pan_number,U.value=!0}function j(){n.employeeDetails.get_statutory_details?(M.pf_applicable=n.employeeDetails.get_statutory_details.pf_applicable,M.epf_no=n.employeeDetails.get_statutory_details.epf_number,M.uan_no=n.employeeDetails.get_statutory_details.uan_number,M.esic_applicable=n.employeeDetails.get_statutory_details.esic_applicable,M.esic_no=n.employeeDetails.get_statutory_details.esic_number):v.value=!0,v.value=!0}const M=z({pf_applicable:"",epf_no:"",uan_no:"",esic_applicable:"",esic_no:""}),D=()=>{g.value=!0;let a=`/update-statutory-info/${s.current_user_id}`;I.post(a,{user_code:n.employeeDetails.user_code,pf_applicable:M.pf_applicable,epf_number:M.epf_no,uan_number:M.uan_no,esic_applicable:M.esic_applicable,esic_number:M.esic_no}).then(T=>{T.data.status=="success"?P.add({severity:"success",summary:"Updated",detail:"General information updated",life:3e3}):T.data.status=="failure"&&(leave_data.leave_request_error_messege=T.data.message)}).catch(T=>{console.log(T)}).finally(()=>{n.fetchEmployeeDetails(),g.value=!1}),v.value=!1},f=N=>{N.target.files&&N.target.files[0]&&(l.Pancard=N.target.files[0],console.log(l.Pancard))},X=()=>{g.value=!0;const a=`/update-Pancard-info/${s.current_user_id}`,T=new FormData;T.append("pan_no",l.pan_no),T.append("pancard",l.Pancard),T.append("user_code",n.employeeDetails.user_code),T.append("onboard_document_type","Pan Card"),w.value=!1,l.Pancard&&I.post(a,T).finally(()=>{g.value=!1})},ae=J(()=>({PassBook:{required:oe}})),Y=ue(ae,r),_=()=>{Y.value.$validate(),Y.value.$error?console.log("Form failed submitted."):(console.log("Form successfully submitted."),B())},u=J(()=>({pan_no:{required:oe},Pancard:{required:oe}})),A=ue(u,l),H=()=>{A.value.$validate(),A.value.$error?console.log("Form failed submitted."):(console.log("Form successfully submitted."),X())},K=N=>{let a=String.fromCharCode(N.keyCode);if(/^[A-Za-z_ ]+$/.test(a))return!0;N.preventDefault()},W=N=>{let a=String.fromCharCode(N.keyCode);if(/^[A-Za-z0-9]+$/.test(a))return!0;N.preventDefault()};return(N,a)=>{const T=V("Dropdown"),Q=V("InputNumber"),ne=V("InputText"),fe=V("Toast"),de=V("Dialog"),ve=V("InputMask"),xe=V("ProgressSpinner");return $(),k("div",null,[Jl,e("div",Wl,[e("div",Zl,[t(n).employeeDetails.get_employee_details?($(),k("div",Xl,[e("div",Ql,[ea,e("div",ta,[e("div",sa,[oa,e("p",la,m(t(n).employeeDetails.payroll_summary.payroll_date?t(R)(t(n).employeeDetails.payroll_summary.payroll_date).format("DD-MMM-YYYY"):"-"),1)]),e("div",aa,[ia,e("p",na,m(t(n).employeeDetails.payroll_summary.worked_Days?t(n).employeeDetails.payroll_summary.worked_Days:"-"),1)]),e("div",da,[ra,e("p",ca,m(t(n).employeeDetails.payroll_summary.lop?t(n).employeeDetails.payroll_summary.lop:"-"),1)])])]),e("div",_a,[e("div",{class:"flex justify-around"},[ma,e("div",{class:"flex justify-end"},[e("img",{src:Z,class:"h-4 mb-1 w-4 cursor-pointer my-auto",onClick:O,alt:""})])]),e("div",pa,[e("div",ua,[fa,e("p",ga,m(t(n).employeeDetails.get_employee_details.bank_name?t(n).employeeDetails.get_employee_details.bank_name:"-"),1)]),e("div",ya,[ba,e("p",ha,m(t(n).employeeDetails.get_employee_details.bank_account_number?t(n).employeeDetails.get_employee_details.bank_account_number:"-"),1)]),e("div",va,[xa,e("p",Da,m(t(n).employeeDetails.get_employee_details.bank_ifsc_code?t(n).employeeDetails.get_employee_details.bank_ifsc_code:"-"),1)]),e("div",$a,[wa,e("p",ka,m(t(n).employeeDetails.get_employee_details.pan_number?t(n).employeeDetails.get_employee_details.pan_number:"-"),1)])])]),e("div",Pa,[e("div",{class:"flex justify-around"},[Ca,e("div",{class:"flex justify-end"},[e("img",{src:Z,class:"h-4 mb-1 w-4 cursor-pointer my-auto",onClick:j,alt:""})])]),e("div",Va,[e("div",La,[Sa,e("p",Ma,m(t(n).employeeDetails.get_statutory_details.pf_applicable?t(n).employeeDetails.get_statutory_details.pf_applicable:"-"),1)]),e("div",Ea,[Aa,e("p",Ua,m(t(n).employeeDetails.get_statutory_details.epf_number?t(n).employeeDetails.get_statutory_details.epf_number:"-"),1)]),e("div",Ya,[Na,e("p",Ta,m(t(n).employeeDetails.get_statutory_details.uan_number?t(n).employeeDetails.get_statutory_details.uan_number:"-"),1)]),e("div",Fa,[Ia,e("p",Ba,m(t(n).employeeDetails.get_statutory_details.esic_applicable?t(n).employeeDetails.get_statutory_details.esic_applicable:"-"),1)]),e("div",ja,[Ra,e("p",Oa,m(t(n).employeeDetails.get_statutory_details.esic_number?t(n).employeeDetails.get_statutory_details.esic_number:"-"),1)])])])])):F("",!0)]),e("div",Ha,[e("div",qa,[e("div",Ga,[i(Kl)])])])]),i(de,{visible:U.value,"onUpdate:visible":a[5]||(a[5]=S=>U.value=S),modal:"",header:"Header",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"fw-bold fs-5"}," Bank Information",4)])]),default:y(()=>[e("div",null,[e("div",za,[e("div",Ka,[e("div",Ja,[e("div",Wa,[Za,i(T,{editable:"",onKeypress:a[0]||(a[0]=S=>K(S)),options:L.value,optionLabel:"bank_name",optionValue:"id",placeholder:"Select Bank Name",class:"w-full form-controls",modelValue:r.bank_id,"onUpdate:modelValue":a[1]||(a[1]=S=>r.bank_id=S)},null,8,["options","modelValue"])])]),e("div",Xa,[e("div",Qa,[ei,ti,i(Q,{modelValue:r.bank_ac_no,"onUpdate:modelValue":a[2]||(a[2]=S=>r.bank_ac_no=S),class:"form-controls onboard-form",inputId:"withoutgrouping",useGrouping:!1},null,8,["modelValue"])])]),e("div",si,[e("div",oi,[li,i(ne,{type:"text",name:"bank_ifsc_",class:"form-controls pl-2",modelValue:r.ifsc_code,"onUpdate:modelValue":a[3]||(a[3]=S=>r.ifsc_code=S)},null,8,["modelValue"])])]),e("div",ai,[e("div",ii,[ni,e("div",di,[i(fe),ri,e("div",ci,[e("input",{type:"file",name:"",id:"uploadPassBook",hidden:"",onChange:a[4]||(a[4]=S=>c(S)),style:{"text-transform":"uppercase"},class:G(["form-controls pl-2",[t(Y).PassBook.$error?"p-invalid":""]])},null,34),t(Y).PassBook.$error?($(),k("span",_i,m(t(Y).PassBook.required.$message.replace("Value","PassBook or Cheque Leaf")),1)):F("",!0)]),r.PassBook?($(),k("div",mi,m(r.PassBook.name),1)):F("",!0)])])])]),e("div",{class:"col-12"},[e("div",{class:"text-right"},[e("button",{id:"btn_submit_bank_info",class:"btn btn-orange submit-btn",onClick:_},"Submit")])])])])]),_:1},8,["visible"]),i(de,{visible:w.value,"onUpdate:visible":a[8]||(a[8]=S=>w.value=S),modal:"",header:"Header",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"fw-bold fs-5"}," Pancard Information",4)])]),default:y(()=>[e("div",null,[e("div",pi,[e("div",ui,[e("div",fi,[e("div",gi,[yi,i(ve,{onFocusout:N.panCardExists,id:"serial",mask:"aaaaa9999a",modelValue:l.pan_no,"onUpdate:modelValue":a[6]||(a[6]=S=>l.pan_no=S),placeholder:"AHFCS1234F",style:{"text-transform":"uppercase"},class:G(["form-controls pl-2",[t(A).pan_no.$error?"p-invalid":""]])},null,8,["onFocusout","modelValue","class"]),t(A).pan_no.$error?($(),k("span",bi,m(t(A).pan_no.required.$message.replace("Value","Pancard number")),1)):F("",!0)])]),e("div",hi,[e("div",vi,[xi,e("div",Di,[i(fe),$i,l.Pancard?($(),k("div",wi,m(l.Pancard.name),1)):F("",!0),e("input",{type:"file",name:"",id:"uploadPassBook",hidden:"",onChange:a[7]||(a[7]=S=>f(S)),class:G([t(A).Pancard.$error?"p-invalid":""])},null,34)]),t(A).Pancard.$error?($(),k("span",ki,m(t(A).Pancard.required.$message.replace("Value","Pancard attachment")),1)):F("",!0)])])]),e("div",{class:"col-12"},[e("div",{class:"text-right"},[e("button",{id:"btn_submit_bank_info",class:"btn btn-orange submit-btn",onClick:H},"Submit")])])])])]),_:1},8,["visible"]),i(de,{visible:v.value,"onUpdate:visible":a[17]||(a[17]=S=>v.value=S),modal:"",header:"Statutory Details",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"fw-bold fs-5"}," Statutory information",4)])]),default:y(()=>[e("div",Pi,[e("div",Ci,[e("div",Vi,[Li,i(T,{modelValue:M.pf_applicable,"onUpdate:modelValue":a[9]||(a[9]=S=>M.pf_applicable=S),options:p.value,placeholder:"PF Applicable",optionLabel:"name",optionValue:"value",class:"w-100"},null,8,["modelValue","options"])]),e("div",Si,[Mi,i(ne,{onKeypress:a[10]||(a[10]=S=>W(S)),modelValue:M.epf_no,"onUpdate:modelValue":a[11]||(a[11]=S=>M.epf_no=S),class:"w-100 mt-1",type:"text",placeholder:"EPF Number"},null,8,["modelValue"])])]),e("div",Ei,[e("div",Ai,[Ui,i(ne,{onKeypress:a[12]||(a[12]=S=>W(S)),modelValue:M.uan_no,"onUpdate:modelValue":a[13]||(a[13]=S=>M.uan_no=S),class:"w-100",type:"text",placeholder:"EPF Number"},null,8,["modelValue"])]),e("div",Yi,[Ni,i(T,{modelValue:M.esic_applicable,"onUpdate:modelValue":a[14]||(a[14]=S=>M.esic_applicable=S),options:p.value,optionLabel:"name",placeholder:"ESIC Applicable",class:"w-100",optionValue:"value"},null,8,["modelValue","options"])])]),e("div",Ti,[e("div",Fi,[Ii,i(ne,{onKeypress:a[15]||(a[15]=S=>W(S)),modelValue:M.esic_no,"onUpdate:modelValue":a[16]||(a[16]=S=>M.esic_no=S),class:"w-100 mt-1",type:"text",placeholder:"EPF Number"},null,8,["modelValue"])]),Bi]),e("div",{class:"col-12"},[e("div",{class:"text-right"},[e("button",{id:"btn_submit_statutory_info",class:"btn btn-border-orange submit-btn",onClick:D},"Save")])])])]),_:1},8,["visible"]),i(de,{header:"Header",visible:g.value,"onUpdate:visible":a[18]||(a[18]=S=>g.value=S),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:y(()=>[i(xe,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:y(()=>[ji]),_:1},8,["visible"])])}}};const Ri={class:"mb-2 card"},Oi={class:"card-body"},Hi={class:"font-semibold text-lg"},qi={class:"grid grid-cols-2"},Gi={class:"",style:{"margin-right":"20px"}},zi=e("span",null,[E("Company Name "),e("span",{class:"text-danger"},"*")],-1),Ki={class:"mr-2"},Ji=e("span",null,[E(" Location"),e("span",{class:"text-danger"},"*")],-1),Wi={class:""},Zi=e("span",null,[E("Job Position "),e("span",{class:"text-danger"},"*")],-1),Xi={class:""},Qi=e("span",{style:{paddingLeft:"6px"}},[E("Period From"),e("span",{class:"text-danger"},"*")],-1),en={class:"grid grid-cols-2"},tn={class:"mr-2"},sn=e("span",{style:{paddingLeft:"6px"}},[E("Period To "),e("span",{class:"text-danger"},"*")],-1),on=e("div",{class:""},null,-1),ln={class:"my-6 table-responsive"},an=["onClick"],nn=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),dn=[nn],rn=["onClick"],cn=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 font-bold"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),_n=[cn],mn={style:{padding:"0.5rem"}},pn={class:"grid grid-cols-2"},un={class:"mr-2"},fn=e("span",null,[E("Company Name "),e("span",{class:"text-danger"},"*")],-1),gn={class:"ml-2"},yn=e("span",null,[E(" Location"),e("span",{class:"text-danger"},"*")],-1),bn={class:"grid grid-cols-2"},hn={class:"mr-2"},vn=e("span",null,[E("Job Position "),e("span",{class:"text-danger"},"*")],-1),xn={class:"ml-2"},Dn=e("span",{style:{paddingLeft:"6px"}},[E("Period From"),e("span",{class:"text-danger"},"*")],-1),$n={class:"grid grid-cols-2"},wn={class:""},kn=e("span",{style:{paddingLeft:"6px"}},[E("Period To "),e("span",{class:"text-danger"},"*")],-1),Pn=e("div",{class:""},null,-1),pd={__name:"ExperienceDetails",setup(C){const n=le(),s=ee(),P=te();te(),b("");const g=b(!1),w=b(!1),h=b(),d=z({company_name:"",location:"",job_position:"",period_from:"",period_to:""}),o=()=>{console.log(d),s.loading_screen=!0;let l=`/add-experience-info/${n.current_user_id}`;I.post(l,{user_code:s.employeeDetails.user_code,company_name:d.company_name,experience_location:d.location,job_position:d.job_position,period_from:R(d.period_from).format("YYYY-MM-DD"),period_to:R(d.period_to).format("YYYY-MM-DD")}).then(c=>{c.data.status=="success"?P.add({severity:"success",summary:"Updated",detail:"Experiance information updated",life:3e3}):c.data.status=="failure"&&(leave_data.leave_request_error_messege=c.data.message)}).catch(c=>{console.log(c)}).finally(()=>{s.fetchEmployeeDetails(),s.loading_screen=!1}),g.value=!1};se(()=>{});const x=r=>{w.value=!0,h.value=r.id,console.log(h.value),d.company_name=r.company_name,d.location=r.location,d.job_position=r.job_position,d.period_from=r.period_from,d.period_to=r.period_to},L=r=>{w.value=!1;let c=`/update-experience-info/${n.current_user_id}`;I.post(c,{user_code:s.employeeDetails.user_code,exp_current_table_id:h.value,company_name:d.company_name,experience_location:d.location,job_position:d.job_position,period_from:R(d.period_from).format("YYYY-MM-DD"),period_to:R(d.period_to).format("YYYY-MM-DD")}).then(p=>{p.data.status=="success"?(window.location.reload(),P.add({severity:"success",summary:"Updated",detail:"General information updated",life:3e3})):p.data.status=="failure"&&(leave_data.leave_request_error_messege=p.data.message)}).catch(p=>{console.log(p)})},U=r=>{h.value=r.id;let c=`/delete-experience-info/${n.current_user_id}`;I.post(c,{exp_current_table_id:h.value}).then(p=>{p.data.status=="success"?P.add({severity:"success",summary:"Deleted",detail:"General information updated",life:3e3}):p.data.status=="failure"&&(leave_data.leave_request_error_messege=p.data.message)}).catch(p=>{console.log(p)}).finally(()=>{s.fetchEmployeeDetails(),s.loading_screen=!1})},v=r=>{let l=String.fromCharCode(r.keyCode);if(/^[A-Za-z_ ]+$/.test(l))return!0;r.preventDefault()};return(r,l)=>{const c=V("InputText"),p=V("Calendar"),B=V("Toast"),O=V("Dialog"),j=V("Column"),M=V("DataTable");return $(),k("div",null,[e("div",Ri,[e("div",Oi,[e("h6",Hi,[E("Experience Information "),e("button",{type:"button",class:"float-right btn btn-orange",onClick:l[0]||(l[0]=D=>g.value=!0)}," Add New "),i(O,{visible:g.value,"onUpdate:visible":l[7]||(l[7]=D=>g.value=D),modal:"",style:{width:"50vw",borderTop:"5px solid #002f56"},id:""},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"fs-5 fw-bold"}," Experience Information",4)])]),footer:y(()=>[e("div",null,[i(B),e("button",{type:"button",class:"submit_btn success warning",severity:"success",id:"",onClick:o},"submit")])]),default:y(()=>[e("div",qi,[e("div",Gi,[zi,i(c,{type:"text",modelValue:d.company_name,"onUpdate:modelValue":l[1]||(l[1]=D=>d.company_name=D),name:"ExperienceDetails_company_name[]",required:"",class:"!w-[100%]"},null,8,["modelValue"])]),e("div",Ki,[Ji,i(c,{type:"text",modelValue:d.location,"onUpdate:modelValue":l[2]||(l[2]=D=>d.location=D),name:"experienceDet_location[]",required:"",class:"w-[100%]"},null,8,["modelValue"])]),e("div",Wi,[Zi,i(c,{type:"text",onKeypress:l[3]||(l[3]=D=>v(D)),modelValue:d.job_position,"onUpdate:modelValue":l[4]||(l[4]=D=>d.job_position=D),name:"experienceDet_job_position[]",class:"!w-[95%]",required:""},null,8,["modelValue"])]),e("div",Xi,[Qi,i(p,{class:"!w-[98%] !mr-[15px] relative right-2",modelValue:d.period_from,"onUpdate:modelValue":l[5]||(l[5]=D=>d.period_from=D)},null,8,["modelValue"])])]),e("div",en,[e("div",tn,[sn,i(p,{modelValue:d.period_to,"onUpdate:modelValue":l[6]||(l[6]=D=>d.period_to=D),name:"experienceDet_period_to[]",class:"!w-[96%] relative right-2"},null,8,["modelValue"])]),on])]),_:1},8,["visible"])]),e("div",ln,[i(M,{ref:"dt",value:t(s).employeeDetails.get_experience_details,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:y(()=>[i(j,{header:"Company Name",field:"company_name",style:{"min-width":"12rem"}}),i(j,{field:"location",header:"Location",style:{"min-width":"8rem"}}),i(j,{field:"job_position",header:"Job Position ",style:{"min-width":"10rem"}}),i(j,{field:"period_from",header:"Period from",style:{"min-width":"6rem"}}),i(j,{field:"period_to",header:"Period To",style:{"min-width":"6rem"}}),i(j,{exportable:!1,header:"Action",style:{"min-width":"12rem"}},{body:y(D=>[e("button",{class:"p-2 mx-4 bg-green-200 border-green-500 rounded-xl",onClick:f=>x(D.data)},dn,8,an),e("button",{class:"p-2 bg-red-200 border-red-500 rounded-xl",onClick:f=>U(D.data)},_n,8,rn),e("template",null,[i(O,{visible:w.value,"onUpdate:visible":l[15]||(l[15]=f=>w.value=f),modal:"",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:y(()=>[e("div",null,[e("h5",{style:q({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Experience Information",4)])]),footer:y(()=>[e("div",null,[i(B),e("button",{type:"button",class:"submit_btn success warning",severity:"success",id:"",onClick:l[14]||(l[14]=f=>L())},"submit")])]),default:y(()=>[e("div",mn,[e("div",null,[e("div",pn,[e("div",un,[fn,i(c,{type:"text",modelValue:d.company_name,"onUpdate:modelValue":l[8]||(l[8]=f=>d.company_name=f),required:"",class:"!w-[98%]"},null,8,["modelValue"])]),e("div",gn,[yn,i(c,{type:"text",modelValue:d.location,"onUpdate:modelValue":l[9]||(l[9]=f=>d.location=f),name:"experienceDet_location[]",class:"!w-[100%]",required:""},null,8,["modelValue"])])]),e("div",bn,[e("div",hn,[vn,i(c,{type:"text",modelValue:d.job_position,"onUpdate:modelValue":l[10]||(l[10]=f=>d.job_position=f),required:"",onKeypress:l[11]||(l[11]=f=>v(f)),class:"!w-[98%]"},null,8,["modelValue"])]),e("div",xn,[Dn,i(p,{modelValue:d.period_from,"onUpdate:modelValue":l[12]||(l[12]=f=>d.period_from=f),class:"w-[100%] relative right-2"},null,8,["modelValue"])])]),e("div",$n,[e("div",wn,[kn,i(p,{modelValue:d.period_to,"onUpdate:modelValue":l[13]||(l[13]=f=>d.period_to=f),class:"w-[95%] relative right-2"},null,8,["modelValue"])]),Pn])])])]),_:1},8,["visible"])])]),_:1})]),_:1},8,["value"])])])])])}}},Cn={class:"card"},Vn={class:"w-full"},Ln={key:0},Sn=e("span",{class:"inline-flex items-center px-3 py-1 text-sm font-semibold text-green-800 rounded-md bg-green-50 ring-1 ring-inset ring-green-100/20"},"Approved",-1),Mn=[Sn],En={key:1},An=e("span",{class:"inline-flex items-center px-3 py-1 text-sm font-semibold text-yellow-800 rounded-md bg-yellow-50 ring-1 ring-inset ring-yellow-100/20"},"Pending",-1),Un=[An],Yn={key:2},Nn=e("span",{class:"inline-flex items-center px-3 py-1 text-sm font-semibold text-red-800 rounded-md bg-red-50 ring-1 ring-inset ring-yellow-100/20"},"Pending",-1),Tn=[Nn],Fn={key:3},In={key:0},Bn={key:0},jn=["onClick"],Rn=e("label",{for:"file",class:"cursor-pointer"},[e("i",{class:"pi pi-upload"}),E(" Upload file")],-1),On=[Rn],Hn={key:1},qn={key:1},Gn=["onClick"],zn=e("label",{for:"file",class:"cursor-pointer"},[e("i",{class:"pi pi-upload"}),E(" Upload file")],-1),Kn=[zn],Jn=["disabled"],Wn={class:"w-full h-full d-flex justify-content-center"},Zn=["src"],ud={__name:"documents",setup(C){const n=b([]);se(()=>{P.fetch_EmployeeDocument(),console.log(" ",w.value),console.log("employeeDetails employee_documents ",s.employeeDetails.employee_documents),n.value=s});let s=ee();const P=he();te();const g=b(!1),w=b({}),h=b();b();const d=b(),o=b(),x=new FormData,L=b(),U=c=>{g.value=!0,P.loading=!0,I.post("/view-profile-private-file",{user_code:s.user_code,document_name:c.document_name}).then(p=>{h.value=p.data.data,console.log("data sent",h.value)}).finally(()=>{P.loading=!1})};b(["Pending","Approved","Rejected"]);const v=c=>{o.value=c},r=c=>{console.log(o),c.target.files&&c.target.files[0]&&(d.value=c.target.files[0],x.append(`${o.value}`,d.value),x.append("user_code",s.employeeDetails.user_code),console.log(x),Object.keys(x)[0])};async function l(){if(L.value=="Failure")Swal.fire({title:L.value="Failure",text:"Please upload all mandatory documents",icon:"error",showCancelButton:!1}).then(c=>{});else{P.loading=!0;let c="/profile-page/saveEmployeeDocument";I.post(c,x).then(p=>{L.value=p.data.status,console.log(L.value),console.log("Photo not send"),p.data.status=="Success"?Swal.fire({title:p.data.status="Success",text:p.data.message,icon:"success",showCancelButton:!1}).then(B=>{}):p.data.status=="Failure"&&Swal.fire({title:p.data.status="Failure",text:p.data.message,icon:"error",showCancelButton:!1}).then(B=>{})}).finally(()=>{s.fetchEmployeeDetails(),P.fetch_EmployeeDocument(),P.loading=!1})}}return(c,p)=>{const B=V("Column"),O=V("Button"),j=V("DataTable"),M=V("Dialog");return $(),k("div",Cn,[e("div",Vn,[i(j,{ref:"dt",value:t(s).employeeDetails.employee_documents,dataKey:"id",paginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],rows:5,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:y(()=>[i(B,{header:"File Name",field:"document_name",style:{"min-width":"8rem"}},{default:y(()=>[E(m(t(P).getEmployeeDoc.document_name),1)]),_:1}),i(B,{field:"status",header:"status",style:{"min-width":"12rem"}},{body:y(D=>[D.data.status=="Approved"?($(),k("div",Ln,Mn)):D.data.status==="Pending"?($(),k("div",En,Un)):D.data.status==="Rejected"?($(),k("div",Yn,Tn)):($(),k("div",Fn))]),_:1}),i(B,{field:"",header:"View ",style:{"min-width":"12rem"}},{body:y(D=>[D.data.doc_id?($(),k("div",In,[D.data.status=="Rejected"?($(),k("div",Bn,[e("input",{type:"file",name:"",id:"file",hidden:"",onChange:p[0]||(p[0]=f=>r(f))},null,32),e("button",{class:"btn btn-success",onClick:f=>v(D.data.document_name)},On,8,jn)])):($(),k("div",Hn,[i(O,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:f=>U(D.data),style:{height:"1.5em"}},null,8,["onClick"])]))])):($(),k("div",qn,[e("input",{type:"file",name:"",id:"file",hidden:"",onChange:p[1]||(p[1]=f=>r(f))},null,32),e("button",{class:"btn btn-success",onClick:f=>v(D.data.document_name)},Kn,8,Gn)]))]),_:1})]),_:1},8,["value"]),e("button",{severity:"warn",type:"submit",data:"row-6",next:"row-6",name:"submit_form",id:"msform",class:"text-center btn btn-orange processOnboardForm float-end text-light mr-5 my-5",value:"Submit",disabled:c.fileUploadValidation,onClick:l}," Submit ",8,Jn),t(P).loading==!1?($(),ce(M,{key:0,visible:g.value,"onUpdate:visible":p[2]||(p[2]=D=>g.value=D),modal:"",header:"Documents",style:{width:"40vw"}},{default:y(()=>[e("div",Wn,[e("img",{src:`data:image/png;base64,${h.value}`,class:"",alt:"File not found",style:{"object-fit":"cover","max-width":"400px",", min-height":"350px",height:"300px"}},null,8,Zn)])]),_:1},8,["visible"])):F("",!0)])])}}};export{rd as _,cd as a,_d as b,pd as c,md as d,ud as e};
