import{H as h,a5 as A,a3 as c,a4 as j,a2 as B,ai as Q,I as ee,c as oe,h as b,e,k as D,w,t as f,F as le,g as C,o as se,p as O,j as S,E as M,aj as te,ak as ae}from"./toastservice.esm-371af8c0.js";import{d as H}from"./dayjs.min-2f06af28.js";import"./moment-fbc5633a.js";import{a as P}from"./index-362795f3.js";import{S as ie}from"./Service-0e4cd938.js";import{d as ne}from"./pinia-3100160b.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";const re=ne("employeeService",()=>{const l=h([]),n=h(!0),o=new URLSearchParams(window.location.search);let p="/profile-pages-getEmpDetails";o.has("uid")&&(p=p+"?uid="+o.get("uid"));async function g(){console.log("Getting employee details"),await P.get(p).then(_=>{console.log("fetchEmployeeDetails() : "+_.data),n.value=!1,l.value=_.data}).catch(_=>console.log(_)).finally(()=>console.log("completed"))}return{fetchEmployeeDetails:g,employeeDetails:l,loading_screen:n}});var T;const ce=typeof window<"u";ce&&((T=window==null?void 0:window.navigator)!=null&&T.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function F(l){return typeof l=="function"?l():c(l)}const _e=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,me=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g,pe=(l,n,o,p)=>{let g=l<12?"AM":"PM";return p&&(g=g.split("").reduce((_,y)=>_+=`${y}.`,"")),o?g.toLowerCase():g},ue=(l,n,o={})=>{var p;const g=l.getFullYear(),_=l.getMonth(),y=l.getDate(),m=l.getHours(),t=l.getMinutes(),V=l.getSeconds(),E=l.getMilliseconds(),G=l.getDay(),x=(p=o.customMeridiem)!=null?p:pe,U={YY:()=>String(g).slice(-2),YYYY:()=>g,M:()=>_+1,MM:()=>`${_+1}`.padStart(2,"0"),MMM:()=>l.toLocaleDateString(o.locales,{month:"short"}),MMMM:()=>l.toLocaleDateString(o.locales,{month:"long"}),D:()=>String(y),DD:()=>`${y}`.padStart(2,"0"),H:()=>String(m),HH:()=>`${m}`.padStart(2,"0"),h:()=>`${m%12||12}`.padStart(1,"0"),hh:()=>`${m%12||12}`.padStart(2,"0"),m:()=>String(t),mm:()=>`${t}`.padStart(2,"0"),s:()=>String(V),ss:()=>`${V}`.padStart(2,"0"),SSS:()=>`${E}`.padStart(3,"0"),d:()=>G,dd:()=>l.toLocaleDateString(o.locales,{weekday:"narrow"}),ddd:()=>l.toLocaleDateString(o.locales,{weekday:"short"}),dddd:()=>l.toLocaleDateString(o.locales,{weekday:"long"}),A:()=>x(m,t),AA:()=>x(m,t,!1,!0),a:()=>x(m,t,!0),aa:()=>x(m,t,!0,!0)};return n.replace(me,(L,Y)=>Y||U[L]())},fe=l=>{if(l===null)return new Date(NaN);if(l===void 0)return new Date;if(l instanceof Date)return new Date(l);if(typeof l=="string"&&!/Z$/i.test(l)){const n=l.match(_e);if(n){const o=n[2]-1||0,p=(n[7]||"0").substring(0,3);return new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,p)}}return new Date(l)};function ge(l,n="HH:mm:ss",o={}){return A(()=>ue(fe(F(l)),F(n),o))}const i=l=>(te("data-v-41d353d6"),l=l(),ae(),l),be={class:"mb-2 card"},he={class:"card-body"},ye={class:"fw-bold mb-3 fs-15"},ve=i(()=>e("i",{class:"ri-pencil-fill"},null,-1)),De=[ve],xe={class:"row"},we={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Se={class:"mb-3 form-group"},Me=i(()=>e("label",{style:{marginLeft:"10px"}},[D("Birth Date"),e("span",{class:"text-danger"},"*")],-1)),Ae={class:"cal-icon"},Ve={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Ye={class:"mb-3 form-group"},Ie=i(()=>e("label",null,[D("Gender"),e("span",{class:"text-danger"},"*")],-1)),Ce={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Pe={class:"mb-3 form-group"},Ee=i(()=>e("label",{style:{marginLeft:"10px"}},[D("Date Of Joining(DOJ)"),e("span",{class:"text-danger"},"*")],-1)),Ge={class:"cal-icon"},Ue={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Le={class:"mb-3 form-group"},ke=i(()=>e("label",null,[D("Blood Group"),e("span",{class:"text-danger"},"*")],-1)),Be={class:"cal-icon"},Oe={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Ne={class:"mb-3 form-group",style:{marginLeft:"10px"}},$e=i(()=>e("label",null,[D("Marital status "),e("span",{class:"text-danger"},"*")],-1)),je={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},He={class:"mb-3 form-group"},Te=i(()=>e("label",null,"Physically Handicapped",-1)),Fe={class:"text-right col-12"},ze={class:"personal-info"},Re={class:"pb-1 border-bottom-liteAsh"},Je=i(()=>e("div",{class:"title"},"Birthday",-1)),qe={class:"text"},We={class:"pb-1 border-bottom-liteAsh"},Xe=i(()=>e("div",{class:"title"},"Gender ",-1)),Ze={class:"text"},Ke={class:"pb-1 border-bottom-liteAsh"},Qe=i(()=>e("div",{class:"title"},"Date Of Joining (DOJ)",-1)),eo={class:"text"},oo={class:"pb-1 border-bottom-liteAsh"},lo=i(()=>e("div",{class:"title"},"Marital Status ",-1)),so={class:"text text-capitalize"},to={class:"pb-1 border-bottom-liteAsh"},ao=i(()=>e("div",{class:"title"}," Blood Group",-1)),io={class:"text"},no={class:"pb-1"},ro=i(()=>e("div",{class:"title"},"Physically Handicapped",-1)),co={class:"text"},_o={class:"mb-2 card"},mo={class:"card-body"},po={class:"mb-3 fw-bold fs-15"},uo=i(()=>e("i",{class:"ri-pencil-fill"},null,-1)),fo=[uo],go={class:"modal-body"},bo={class:"row"},ho={class:"col-md-6"},yo={class:"mb-3 form-group"},vo=i(()=>e("label",null,"Personal Email",-1)),Do={class:"col-md-6"},xo={class:"mb-3 form-group"},wo=i(()=>e("label",null," Office Email",-1)),So={class:"col-md-6"},Mo={class:"mb-3 form-group"},Ao=i(()=>e("label",null,"Mobile Number",-1)),Vo={class:"col-md-6"},Yo={class:"mb-3 form-group"},Io=i(()=>e("label",null,"Official Mobile Number",-1)),Co={class:"personal-info"},Po={class:"pb-1 border-bottom-liteAsh"},Eo=i(()=>e("div",{class:"title"},"Personal Email",-1)),Go={class:"text"},Uo={class:"pb-1 border-bottom-liteAsh"},Lo=i(()=>e("div",{class:"title"},"Official Email",-1)),ko={class:"text"},Bo={class:"pb-1"},Oo=i(()=>e("div",{class:"title"},"Mobile Number",-1)),No={class:"text"},$o={class:"pb-1"},jo=i(()=>e("div",{class:"title"},"Official Mobile Number",-1)),Ho={class:"text"},To={class:"mb-2 card"},Fo={class:"card-body"},zo={class:"ml-2 fw-bold fs-15"},Ro=i(()=>e("i",{class:"ri-pencil-fill"},null,-1)),Jo=[Ro],qo={class:"modal-body"},Wo={class:"col-md-12"},Xo={class:"mb-3 form-group"},Zo=i(()=>e("label",null,"Current Address",-1)),Ko={class:"mb-3 form-group"},Qo=i(()=>e("label",null,"Permanent Address ",-1)),el={class:"col-12"},ol={class:"text-right"},ll={class:"row"},sl={class:"col-6"},tl={class:"personal-info"},al={class:"pb-1 border-bottom-liteAsh flex-column"},il=i(()=>e("div",{class:"title"},"Current Address ",-1)),nl={class:"text"},dl={class:"col-6"},rl={class:"personal-info"},cl={class:"pb-1 border-bottom-liteAsh flex-column"},_l=i(()=>e("div",{class:"title"},"Permanent Address ",-1)),ml={class:"text"},pl={__name:"EmployeeDetails",setup(l){const n=ie(),o=re(),p=j(),g=j(),_=h(!1),y=h(!1),m=h(!1),t=B({dob:"",gender:"",doj:"",blood_group_id:"",marital_status_id:"",physically_challenged:""}),V=h([{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Others",value:"others"}]),E=A(()=>o.employeeDetails.get_employee_details.gender=="male"?"Male":o.employeeDetails.get_employee_details.gender=="female"?"Female":o.employeeDetails.get_employee_details.gender=="others"?"Others":"-"),G=A(()=>{if(o.employeeDetails.get_employee_details.marital_status_id==1)return"Unmarried";if(o.employeeDetails.get_employee_details.marital_status_id==2)return"Married";if(o.employeeDetails.get_employee_details.marital_status_id==3)return"Separated";if(o.employeeDetails.get_employee_details.marital_status_id==4)return"Widowed";if(o.employeeDetails.get_employee_details.marital_status_id==5)return"Divorced"}),x=A(()=>{if(o.employeeDetails.get_employee_details.blood_group_id==1)return"A Positive";if(o.employeeDetails.get_employee_details.blood_group_id==2)return"A Negative";if(o.employeeDetails.get_employee_details.blood_group_id==3)return"B Positive";if(o.employeeDetails.get_employee_details.blood_group_id==4)return"B Negative";if(o.employeeDetails.get_employee_details.blood_group_id==5)return"AB Positive";if(o.employeeDetails.get_employee_details.blood_group_id==6)return"AB Negative";if(o.employeeDetails.get_employee_details.blood_group_id==7)return"O Positive";if(o.employeeDetails.get_employee_details.blood_group_id==8)return"O Negative"}),U=A(()=>{if(o.employeeDetails.get_employee_details.physically_challenged=="no")return"No";if(o.employeeDetails.get_employee_details.physically_challenged=="yes")return"Yes"}),L=h([{name:"Yes",value:"yes"},{name:"No",value:"no"}]),Y=h(),N=h();Q(),ee(()=>{n.getBloodGroups().then(v=>{console.log(v.data),Y.value=v.data}),n.getMaritalStatus().then(v=>{console.log(v),N.value=v.data})});function z(){console.log("Opening General Info Dialog"),t.dob=o.employeeDetails.get_employee_details.dob,t.doj=o.employeeDetails.get_employee_details.doj,t.marital_status_id=parseInt(o.employeeDetails.get_employee_details.marital_status_id),t.gender=o.employeeDetails.get_employee_details.gender,t.blood_group_id=parseInt(o.employeeDetails.get_employee_details.blood_group_id),t.physically_challenged=o.employeeDetails.get_employee_details.physically_challenged,_.value=!0}function R(){console.log("Called saveGeneralInformationDetails.... ");let s=`/profile-pages-update-generalinfo/${n.current_user_id}`;P.post(s,{user_code:o.employeeDetails.user_code,dob:t.dob,gender:t.gender,marital_status_id:t.marital_status_id,doj:t.doj,blood_group_id:t.blood_group_id,physically_challenged:t.physically_challenged}).then(r=>{r.data.status=="success"?(window.location.reload(),p.add({severity:"success",summary:"Updated",detail:"General information updated",life:3e3}),o.employeeDetails.get_employee_details.dob=ge(t.dob,"YYYY-MM-DD"),o.employeeDetails.gender=t.gender,o.employeeDetails.marital_status_id=t.marital_status_id,o.employeeDetails.get_employee_details.doj=t.doj,o.employeeDetails.blood_group_id=t.blood_group_id,o.employeeDetails.physically_challenged=t.physically_challenged):r.data.status=="failure"&&(leave_data.leave_request_error_messege=r.data.message)}).catch(r=>{console.log(r)}),_.value=!1,window.location.reload()}const J=h(),d=B({email:"",official_email:"",mobile_number:"",official_mobile_number:""});function q(){console.log("Opening General Info Dialog : "),d.email=o.employeeDetails.email,d.official_email=o.employeeDetails.get_employee_office_details.officical_mail,console.log("Mobile number : "+o.employeeDetails.mobile_number),d.mobile_number=parseInt(o.employeeDetails.get_employee_details.mobile_number),d.official_mobile_number=parseInt(o.employeeDetails.get_employee_office_details.official_mobile),console.log("testing"),y.value=!0}function W(){console.log("testing contact");let s=`/profile-pages-update-contactinfo/${n.current_user_id}`;P.post(s,{user_code:o.employeeDetails.user_code,email:d.email,officical_mail:d.official_email,mobile_number:d.mobile_number,official_mobile_number:d.official_mobile_number}).then(r=>{r.data.status=="success"?(console.log("Updating mobile number : "+d.mobile_number),o.employeeDetails.email=d.email,o.employeeDetails.get_employee_office_details.officical_mail=d.official_email,o.employeeDetails.get_employee_details.mobile_number=d.mobile_number,o.employeeDetails.get_employee_office_details.official_mobile=d.official_mobile_number):r.data.status=="failure"&&(J.leave_request_error_messege=r.data.message)}).catch(r=>{console.log(r)}),y.value=!1,window.location.reload()}const X=h(),u=B({current_address:"",Permanent_Address:""});function Z(){console.log("Opening General Info Dialog"),u.current_address=o.employeeDetails.get_employee_details.current_address_line_1,u.Permanent_Address=o.employeeDetails.get_employee_details.permanent_address_line_1,m.value=!0}const K=()=>{if(u.current_address==" "||u.Permanent_Address==" ")g.add({severity:"warn",summary:"Warn Message",detail:"Message Content",life:3e3}),console.log(Addressinfo);else{let s=`/profile-pages-update-address_info/${n.current_user_id}`;P.post(s,{user_code:o.employeeDetails.user_code,current_address_line_1:u.current_address,permanent_address_line_1:u.Permanent_Address}).then(r=>{data_checking.value=!1,r.data.status=="success"?(o.employeeDetails.current_address_line_1=u.current_address,o.employeeDetails.get_employee_office_details.permanent_address_line_1=u.Permanent_Address):r.data.status=="failure"&&(X.leave_request_error_messege=r.data.message)}).catch(r=>{console.log(r)}),m.value=!1,window.location.reload()}};return(v,s)=>{const r=C("Toast"),$=C("Calendar"),I=C("Dropdown"),k=C("Dialog");return se(),oe(le,null,[b(r),e("div",be,[e("div",he,[e("h6",ye,[D("General Information "),e("a",{type:"button",class:"edit-icon",onClick:z},De),b(k,{visible:_.value,"onUpdate:visible":s[7]||(s[7]=a=>_.value=a),modal:"",header:"General Information",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:w(()=>[e("div",null,[e("h5",{style:O({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," General Information",4)])]),default:w(()=>[e("div",xe,[e("div",we,[e("div",Se,[Me,e("div",Ae,[b($,{showIcon:"",class:"mb-3 form-selects",modelValue:t.dob,"onUpdate:modelValue":s[0]||(s[0]=a=>t.dob=a),placeholder:"DD-MM-YYYY",dateFormat:"dd-mm-yy"},null,8,["modelValue"])])])]),e("div",Ve,[e("div",Ye,[Ie,b(I,{modelValue:t.gender,"onUpdate:modelValue":s[1]||(s[1]=a=>t.gender=a),options:V.value,optionLabel:"name",optionValue:"value",placeholder:"Choose Gender",class:"form-selects"},null,8,["modelValue","options"])])]),e("div",Ce,[e("div",Pe,[Ee,e("div",Ge,[b($,{showIcon:"",class:"mb-3 form-selects",modelValue:t.doj,"onUpdate:modelValue":s[2]||(s[2]=a=>t.doj=a),placeholder:"DD-MM-YYYY",dateFormat:"dd-mm-yy"},null,8,["modelValue"])])])]),e("div",Ue,[e("div",Le,[ke,e("div",Be,[b(I,{modelValue:t.blood_group_id,"onUpdate:modelValue":s[3]||(s[3]=a=>t.blood_group_id=a),options:Y.value,optionLabel:"name",optionValue:"id",placeholder:"Select Bloodgroup",class:"form-selects"},null,8,["modelValue","options"])])])]),e("div",Oe,[e("div",Ne,[$e,b(I,{modelValue:t.marital_status_id,"onUpdate:modelValue":s[4]||(s[4]=a=>t.marital_status_id=a),options:N.value,optionLabel:"name",optionValue:"id",placeholder:"Select Marital Status",class:"form-selects"},null,8,["modelValue","options"])])]),e("div",je,[e("div",He,[Te,b(I,{modelValue:t.physically_challenged,"onUpdate:modelValue":s[5]||(s[5]=a=>t.physically_challenged=a),options:L.value,optionLabel:"name",optionValue:"value",placeholder:"Select",class:"form-selects"},null,8,["modelValue","options"])])])]),e("div",Fe,[e("button",{id:"btn_submit_generalInfo",class:"btn btn-border-orange submit-btn",onClick:s[6]||(s[6]=a=>R())},"Save")])]),_:1},8,["visible"])]),e("div",null,[e("ul",ze,[e("li",Re,[Je,e("div",qe,f(c(H)(c(o).employeeDetails.get_employee_details.dob).format("DD-MMM-YYYY")),1)]),e("li",We,[Xe,e("div",Ze,f(c(E)),1)]),e("li",Ke,[Qe,e("div",eo,f(c(H)(c(o).employeeDetails.get_employee_details.doj).format("DD-MMM-YYYY")),1)]),e("li",oo,[lo,e("div",so,f(c(G)),1)]),e("li",to,[ao,e("div",io,f(c(x))+" ",1)]),e("li",no,[ro,e("div",co,f(c(U)),1)])])])])]),e("div",_o,[e("div",mo,[e("h6",po,[D("Contact Information "),e("span",{class:"personal-edit"},[e("a",{href:"#",class:"edit-icon",onClick:q},fo)]),b(k,{visible:y.value,"onUpdate:visible":s[12]||(s[12]=a=>y.value=a),modal:"",header:"Contact Information",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:w(()=>[e("div",null,[e("h5",{style:O({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Contact Information",4)])]),default:w(()=>[e("div",go,[e("div",bo,[e("div",ho,[e("div",yo,[vo,S(e("input",{type:"email",name:"present_email",class:"form-control","onUpdate:modelValue":s[8]||(s[8]=a=>d.email=a)},null,512),[[M,d.email]])])]),e("div",Do,[e("div",xo,[wo,S(e("input",{type:"email",class:"form-control",name:"officical_mail","onUpdate:modelValue":s[9]||(s[9]=a=>d.official_email=a)},null,512),[[M,d.official_email]])])]),e("div",So,[e("div",Mo,[Ao,S(e("input",{type:"text",size:"20",maxlength:"10",name:"mobile_number",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=a=>d.mobile_number=a)},null,512),[[M,d.mobile_number]])])]),e("div",Vo,[e("div",Yo,[Io,S(e("input",{type:"text",size:"20",maxlength:"10",name:"official_mobile_number",class:"form-control","onUpdate:modelValue":s[11]||(s[11]=a=>d.official_mobile_number=a)},null,512),[[M,d.official_mobile_number]])])]),e("div",{class:"col-12"},[e("div",{class:"text-right"},[e("button",{class:"btn btn-border-orange submit-btn",onClick:W},"Save")])])])])]),_:1},8,["visible"])]),e("div",null,[e("ul",Co,[e("li",Po,[Eo,e("div",Go,f(c(o).employeeDetails.email),1)]),e("li",Uo,[Lo,e("div",ko,f(c(o).employeeDetails.get_employee_office_details.officical_mail),1)]),e("li",Bo,[Oo,e("div",No,f(c(o).employeeDetails.get_employee_details.mobile_number),1)]),e("li",$o,[jo,e("div",Ho,f(c(o).employeeDetails.get_employee_office_details.official_mobile),1)])])])])]),e("div",To,[e("div",Fo,[e("h6",zo,[D("Address "),e("span",{class:"personal-edit"},[e("a",{href:"#",class:"edit-icon",onClick:Z},Jo)]),b(k,{visible:m.value,"onUpdate:visible":s[15]||(s[15]=a=>m.value=a),modal:"",header:"",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:w(()=>[e("div",null,[e("h5",{style:O({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Address Information",4)])]),default:w(()=>[e("div",qo,[e("div",Wo,[e("div",Xo,[Zo,S(e("textarea",{name:"current_address_line_1",id:"current_address_line_1",cols:"30",rows:"3",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=a=>u.current_address=a)},null,512),[[M,u.current_address]])]),e("div",Ko,[Qo,S(e("textarea",{name:"permanent_address_line_1",id:"permanent_address_line_1",cols:"30",rows:"3",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=a=>u.Permanent_Address=a)},null,512),[[M,u.Permanent_Address]])])]),e("div",el,[e("div",ol,[b(r),e("button",{id:"btn_submit_address",class:"btn btn-border-orange submit-btn warn",onClick:K,severity:"warn"},"Save")])])])]),_:1},8,["visible"])]),e("div",null,[e("div",ll,[e("div",sl,[e("ul",tl,[e("li",al,[il,e("div",nl,f(c(o).employeeDetails.get_employee_details.current_address_line_1),1)])])]),e("div",dl,[e("ul",rl,[e("li",cl,[_l,e("div",ml,f(c(o).employeeDetails.get_employee_details.permanent_address_line_1),1)])])])])])])])],64)}}},Dl=de(pl,[["__scopeId","data-v-41d353d6"]]);export{Dl as E,re as p};
