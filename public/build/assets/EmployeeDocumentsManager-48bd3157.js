import{G as i,H as L,ag as N,o as l,c,d as o,h as u,w as m,l as k,t as V,a2 as g,a as h,b as M,g as v,I as U,P as j,J as A,R as O,u as I,v as G,N as H,K,M as J,A as W,L as q}from"./toastservice.esm-089fd174.js";import{d as z,c as Q}from"./pinia-33c7e0da.js";import{T as X,B as Y,S as Z,b as ee,a as te}from"./styleclass.esm-c4aad718.js";import"./blockui.esm-fe051704.js";import{D as oe}from"./dialogservice.esm-5a9d18a9.js";import{C as se}from"./confirmationservice.esm-66a41967.js";import{s as ae}from"./progressspinner.esm-76560800.js";import{s as ne}from"./progressbar.esm-1d9e195a.js";import{s as ie}from"./row.esm-6ebc942e.js";import{s as le}from"./columngroup.esm-9dd1458e.js";import{s as ce}from"./calendar.esm-42fe84c3.js";import{s as re}from"./textarea.esm-8cab7db9.js";import{s as de}from"./chips.esm-bdf07124.js";import{s as ue}from"./multiselect.esm-34e50992.js";import{s as me}from"./checkbox.esm-7ae5b8ab.js";import{a as x}from"./index-362795f3.js";import{S as pe}from"./Service-c3c14bcb.js";const fe=z("EmployeeDocumentManagerService",()=>{const w=pe(),s=i(!1),d=i([]);i();const D=i();return{EmployeeDocs_upload:i({AadharCardFront:null,AadharCardBack:null,PanCardDoc:null,DrivingLicenseDoc:null,EductionDoc:null,VoterIdDoc:null,RelievingLetterDoc:null,PassportDoc:null,save_draft_messege:null}),getEmployeeDetails:w,getEmployeeDoc:d,getEmpdocPhoto:D,fetch_EmployeeDocument:async()=>{let p="";await w.getCurrentUserCode().then(r=>{p=r.data}),s.value=!0,await x.post("/employee-documents-details",{user_code:p}).then(r=>{d.value=r.data.data,console.log("employee document : ",d.value)}).finally(()=>{s.value=!1,console.log("completed")})},loading:s}}),_e={class:"card p-3",style:{"margin-top":"-25px"}},ge=o("h2",{class:"font-semibold text-2xl my-4 mx-3"},"Employee Documents",-1),he={class:"w-full"},ve={key:0},ye=o("p",{class:"text-red-600 font-semibold fs-5"},"Pending",-1),be=[ye],we={key:1},De=o("p",{class:"text-red-600 font-semibold fs-5"},"Approved",-1),Ce=[De],xe={key:2},ke=o("p",{class:"text-red-600 font-semibold fs-5"},"Rejected",-1),Se=[ke],Ee={key:3},Pe=o("p",{class:"text-green-600 font-semibold"},"-",-1),$e=[Pe],Be={key:0},Te={key:0},Fe=["onClick"],Re=o("label",{for:"file",class:"cursor-pointer"},[o("i",{class:"pi pi-upload"}),k(" Upload file")],-1),Le=[Re],Ne={key:1},Ve={key:1},Me=["onClick"],Ue=o("label",{for:"file",class:"cursor-pointer"},[o("i",{class:"pi pi-upload"}),k(" Upload file")],-1),je=[Ue],Ae=["disabled"],Oe={class:"w-full h-full d-flex justify-content-center"},Ie=["src"],Ge=o("h5",{style:{"text-align":"center"}},"Please wait...",-1),He={__name:"EmployeeDocumentsManager",setup(w){L(()=>{s.fetch_EmployeeDocument(),console.log(" ",D.value)});const s=fe();N();const d=i(!1),D=i({}),y=i();i();const C=i(),p=i(),r=new FormData,b=i(),$=n=>{d.value=!0,s.loading=!0,x.post("/view-profile-private-file",{user_code:s.getEmployeeDetails.current_user_code,document_name:n.document_name}).then(t=>{y.value=t.data.data,console.log("data sent",y.value)}).finally(()=>{s.loading=!1})},S=n=>{p.value=n},E=n=>{console.log(p),n.target.files&&n.target.files[0]&&(C.value=n.target.files[0],r.append(`${p.value}`,C.value),console.log(r),Object.keys(r)[0])};async function B(){if(b.value=="Failure")Swal.fire({title:b.value="Failure",text:"Please upload all mandatory documents",icon:"error",showCancelButton:!1}).then(n=>{});else{s.loading=!0;let n="/vmt-documents-route/";x.post(n,r).then(t=>{b.value=t.data.status,console.log(b.value),console.log("Photo not send"),t.data.status=="Success"?Swal.fire({title:t.data.status="Success",text:t.data.message,icon:"success",showCancelButton:!1}).then(_=>{window.location.reload()}):t.data.status=="Failure"&&Swal.fire({title:t.data.status="Failure",text:t.data.message,icon:"error",showCancelButton:!1}).then(_=>{window.location.reload()})}).finally(()=>{s.fetch_EmployeeDocument(),s.loading=!1})}}return(n,t)=>{const _=v("Column"),T=v("Button"),F=v("DataTable"),P=v("Dialog"),R=v("ProgressSpinner");return l(),c("div",_e,[ge,o("div",he,[u(F,{ref:"dt",value:g(s).getEmployeeDoc,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:m(()=>[u(_,{header:"File Name",field:"document_name",style:{"min-width":"8rem"}},{default:m(()=>[k(V(g(s).getEmployeeDoc.document_name),1)]),_:1}),u(_,{field:"status",header:"status",style:{"min-width":"12rem"}},{body:m(a=>[a.data.status==="Pending"?(l(),c("div",ve,be)):h("",!0),a.data.status==="Approved"?(l(),c("div",we,Ce)):h("",!0),a.data.status==="Rejected"?(l(),c("div",xe,Se)):h("",!0),a.data.status===null?(l(),c("div",Ee,$e)):h("",!0)]),_:1}),u(_,{field:"",header:"View ",style:{"min-width":"12rem"}},{body:m(a=>[a.data.doc_id?(l(),c("div",Be,[a.data.status=="Rejected"?(l(),c("div",Te,[o("input",{type:"file",name:"",id:"file",hidden:"",onChange:t[0]||(t[0]=f=>E(f))},null,32),o("button",{class:"btn btn-success",onClick:f=>S(a.data.document_name)},Le,8,Fe)])):(l(),c("div",Ne,[u(T,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:f=>$(a.data),style:{height:"2em"}},null,8,["onClick"])]))])):(l(),c("div",Ve,[o("input",{type:"file",name:"",id:"file",hidden:"",onChange:t[1]||(t[1]=f=>E(f))},null,32),o("button",{class:"btn btn-success",onClick:f=>S(a.data.document_name)},je,8,Me)]))]),_:1})]),_:1},8,["value"]),o("button",{severity:"warn",type:"submit",data:"row-6",next:"row-6",name:"submit_form",id:"msform",class:"text-center btn btn-orange processOnboardForm float-end text-light mr-5 mt-5",value:"Submit",disabled:n.fileUploadValidation,onClick:B}," Submit ",8,Ae),g(s).loading==!1?(l(),M(P,{key:0,visible:d.value,"onUpdate:visible":t[2]||(t[2]=a=>d.value=a),modal:"",header:"Documents",style:{width:"40vw"}},{default:m(()=>[o("div",Oe,[o("img",{src:`data:image/png;base64,${y.value}`,class:"",alt:"File not found",style:{"object-fit":"cover","max-width":"400px",", min-height":"350px",height:"300px"}},null,8,Ie)])]),_:1},8,["visible"])):h("",!0),u(P,{header:"Header",visible:g(s).loading,"onUpdate:visible":t[3]||(t[3]=a=>g(s).loading=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:m(()=>[u(R,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:m(()=>[Ge]),_:1},8,["visible"])])])}}},e=U(He),Ke=Q();e.use(j,{ripple:!0});e.use(se);e.use(A);e.use(oe);e.use(Ke);e.directive("tooltip",X);e.directive("badge",Y);e.directive("ripple",O);e.directive("styleclass",Z);e.directive("focustrap",I);e.component("Button",G);e.component("DataTable",ee);e.component("Column",te);e.component("ColumnGroup",le);e.component("Row",ie);e.component("Toast",H);e.component("ConfirmDialog",K);e.component("Dropdown",J);e.component("InputText",W);e.component("Dialog",q);e.component("ProgressSpinner",ae);e.component("Calendar",ce);e.component("Textarea",re);e.component("Chips",de);e.component("MultiSelect",ue);e.component("ProgressBar",ne);e.component("Checkbox",me);e.mount("#EmployeeDocumentManager");
