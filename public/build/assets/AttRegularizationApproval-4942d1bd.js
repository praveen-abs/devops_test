import{G as i,a9 as G,ac as _,I as H,g as c,o as u,c as f,h as e,w as o,H as T,_ as W,d as l,t as d,b as K,a as M,l as V,n as B,J as Z,P as ee,K as te,R as ae,u as oe,v as le,L as ne,Q as se,M as ie,N as re,A as ce}from"./toastservice.esm-703f66b2.js";import{T as de,B as ue,S as pe,b as me,a as ve}from"./styleclass.esm-dbba737a.js";import"./blockui.esm-7874af30.js";import{u as X,C as ge}from"./confirmationservice.esm-5566e2b7.js";import{s as fe}from"./progressspinner.esm-e2bd8dd3.js";import{s as _e}from"./tag.esm-755eee37.js";import{s as he}from"./textarea.esm-c29cd658.js";import{c as be}from"./pinia-8fba8b03.js";import{a as z}from"./index-362795f3.js";import{h as ye}from"./moment-fbc5633a.js";import{d as we}from"./dayjs.min-2f06af28.js";import{S as xe}from"./Service-42a04e77.js";const Se=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),ke=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),Ce={class:"confirmation-content"},Re=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),Ae={class:"w-full d-flex justify-center mt-12"},Te={class:"flex justify-content-center align-items-center"},De={key:0,if:"",class:"p-2 w-3 h-18 text-semibold rounded-full bg-blue-900 text-white"},$e=["src"],Ne={class:"text-left pl-2"},je={class:"text-right"},Pe={class:"text-center p-2"},Le={key:0},Ve={key:1},ze={key:1},Oe={key:0,style:{width:"250px",display:"block"}},Ue={__name:"attendance_regularization",setup(Q){let k=i(),y=i(!1),m=i(!1);X();const b=G(),w=i(!0),D=i(""),x=i(),$=i({global:{value:null,matchMode:_.CONTAINS},employee_name:{value:null,matchMode:_.STARTS_WITH,matchMode:_.EQUALS,matchMode:_.CONTAINS},status:{value:"Pending",matchMode:_.EQUALS}}),O=i(["Pending","Approved","Rejected"]);let S=null,N=null;H(()=>{j()});function j(){let n=window.location.origin+"/fetch-att-regularization-data";console.log("AJAX URL : "+n),z.get(n).then(s=>{console.log("Axios : "+s.data),k.value=Object.values(s.data),w.value=!1})}function U(n,s){y.value=!0,S=s,D.value=s,N=n,console.log("Selected Row Data : "+JSON.stringify(n))}function I(n){y.value=!1,n&&p()}function p(){S="",N=null}const v=n=>{switch(n){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function E(){I(!1),m.value=!0,console.log("Processing Rowdata : "+JSON.stringify(N)),z.post(window.location.origin+"/attendance-regularization-approvals",{id:N.id,status:S=="Approve"?"Approved":S=="Reject"?"Rejected":S,status_text:x.value}).then(n=>{console.log("Response : "+n),m.value=!1,b.add({severity:"success",summary:"Info",detail:"Success",life:3e3}),j(),p()}).catch(n=>{m.value=!1,p(),console.log(n.toJSON())})}return(n,s)=>{const J=c("Toast"),C=c("ProgressSpinner"),P=c("Dialog"),Y=c("Textarea"),R=c("Button"),F=c("InputText"),t=c("Column"),A=c("Tag"),g=c("Dropdown"),q=c("DataTable");return u(),f("div",null,[e(J),e(P,{header:"Header",visible:w.value,"onUpdate:visible":s[0]||(s[0]=a=>w.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[e(C,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[Se]),_:1},8,["visible"]),e(P,{header:"Header",visible:T(m),"onUpdate:visible":s[1]||(s[1]=a=>W(m)?m.value=a:m=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[e(C,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[ke]),_:1},8,["visible"]),e(P,{header:"Confirmation",visible:T(y),"onUpdate:visible":s[5]||(s[5]=a=>W(y)?y.value=a:y=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:o(()=>[e(R,{label:"Yes",icon:"pi pi-check",onClick:s[3]||(s[3]=a=>E()),class:"p-button-text",autofocus:""}),e(R,{label:"No",icon:"pi pi-times",onClick:s[4]||(s[4]=a=>I(!0)),class:"p-button-text"})]),default:o(()=>[l("div",Ce,[Re,l("span",null,"Are you sure you want to "+d(T(S))+"?",1)]),l("div",Ae,[D.value=="Reject"?(u(),K(Y,{key:0,modelValue:x.value,"onUpdate:modelValue":s[2]||(s[2]=a=>x.value=a),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])):M("",!0)])]),_:1},8,["visible"]),l("div",null,[e(q,{value:T(k),paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:$.value,"onUpdate:filters":s[6]||(s[6]=a=>$.value=a),filterDisplay:"menu",loading:n.loading2,globalFilterFields:["name","status"]},{empty:o(()=>[V(" No Employeee found. ")]),loading:o(()=>[V(" Loading customers data. Please wait. ")]),default:o(()=>[e(t,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(a=>[l("div",Te,[JSON.parse(a.data.employee_avatar).type=="shortname"?(u(),f("p",De,d(JSON.parse(a.data.employee_avatar).data),1)):(u(),f("img",{key:1,class:"rounded-circle img-md w-3 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(a.data.employee_avatar).data}`,srcset:"",alt:""},null,8,$e)),l("p",Ne,d(a.data.employee_name),1)])]),filter:o(({filterModel:a,filterCallback:L})=>[e(F,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,onInput:h=>L(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),e(t,{field:"attendance_date",header:"Date",sortable:!0,style:{"min-width":"10rem"}},{body:o(a=>[l("h1",je,d(T(ye)(a.data.attendance_date).format("DD-MM-YYYY")),1)]),_:1}),e(t,{field:"regularization_type",header:"Type",style:{"min-width":"10rem"}},{body:o(a=>[l("div",Pe,d(a.data.regularization_type),1)]),_:1}),e(t,{field:"user_time",header:"Actual Time",style:{"min-width":"10rem"}}),e(t,{field:"regularize_time",header:"Regularize Time",style:{"min-width":"10rem"}}),e(t,{field:"reason_type",header:"Reason",style:{"min-width":"18rem"}},{body:o(a=>[a.data.reason_type=="Others"?(u(),f("span",Le,d(a.data.custom_reason),1)):(u(),f("span",Ve,d(a.data.reason_type),1))]),_:1}),e(t,{field:"reviewer_comments",header:"Approve Comments"}),e(t,{field:"reviewer_reviewed_date",header:"Reviewed Date"}),e(t,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:a})=>[e(A,{value:a.status,severity:v(a.status)},null,8,["value","severity"])]),filter:o(({filterModel:a,filterCallback:L})=>[e(g,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,onChange:h=>L(),options:O.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(h=>[h.value?(u(),f("span",{key:0,class:B("customer-badge status-"+h.value)},d(h.value),3)):(u(),f("span",ze,d(h.placeholder),1))]),option:o(h=>[l("span",{class:B("customer-badge status-"+h.option)},d(h.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),e(t,{field:"",header:"Action"},{body:o(a=>[a.data.status=="Pending"?(u(),f("span",Oe,[e(R,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:L=>U(a.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),e(R,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:L=>U(a.data,"Reject")},null,8,["onClick"])])):M("",!0)]),_:1})]),_:1},8,["value","filters","loading"])])])}}},Ie={class:"flex justify-content-center align-items-center"},Me={key:0,if:"",class:"p-2 w-3 h-18 text-semibold rounded-full bg-blue-900 text-white"},Be=["src"],Ee={class:"text-left pl-2"},Je={key:1},Ye={key:0,style:{width:"250px",display:"block"}},Fe={class:"confirmation-content"},He=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),Qe={class:"w-full d-flex justify-center mt-12"},We=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),Ge={__name:"absent_Regularization",setup(Q){const k=i(),y=xe(),m=i(!1),b=i(!1),w=i("");i();const D=i();let x=null,$=null;const O=i({global:{value:null,matchMode:_.CONTAINS},employee_name:{value:null,matchMode:_.STARTS_WITH,matchMode:_.EQUALS,matchMode:_.CONTAINS},status:{value:"Pending",matchMode:_.EQUALS}});H(()=>{S()});async function S(){await z.get("/fetch-absent-regularization-data").then(p=>{k.value=p.data,console.log(k.value)}).finally(()=>{})}const N=p=>{switch(p){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function j(p,v){m.value=!0,x=v,w.value=v,$=p,console.log("Selected Row Data : "+JSON.stringify(p))}function U(){m.value=!1}function I(){U(),b.value=!0,console.log("Processing Rowdata : "+JSON.stringify($)),z.post("/approveRejectAbsentRegularization",{record_id:$.id,status:x=="Approve"?"Approved":x=="Reject"?"Rejected":x,status_text:D.value,user_code:y.current_user_code}).then(p=>{console.log("Response : "+p),b.value=!1,toast.add({severity:"success",summary:"Info",detail:"Success",life:3e3}),ajax_GetAttRegularizationData()}).catch(p=>{b.value=!1}).finally(()=>{S()})}return(p,v)=>{const E=c("InputText"),n=c("Column"),s=c("Tag"),J=c("Dropdown"),C=c("Button"),P=c("DataTable"),Y=c("Textarea"),R=c("Dialog"),F=c("ProgressSpinner");return u(),f("div",null,[e(P,{value:k.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:O.value,"onUpdate:filters":v[0]||(v[0]=t=>O.value=t),filterDisplay:"menu",loading:p.loading2,globalFilterFields:["name","status"]},{empty:o(()=>[V(" No Employeee found. ")]),loading:o(()=>[V(" Loading customers data. Please wait. ")]),default:o(()=>[e(n,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(t=>[l("div",Ie,[JSON.parse(t.data.employee_avatar).type=="shortname"?(u(),f("p",Me,d(JSON.parse(t.data.employee_avatar).data),1)):(u(),f("img",{key:1,class:"rounded-circle img-md w-3 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(t.data.employee_avatar).data}`,srcset:"",alt:""},null,8,Be)),l("p",Ee,d(t.data.employee_name),1)])]),filter:o(({filterModel:t,filterCallback:A})=>[e(E,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,onInput:g=>A(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),e(n,{class:"font-bold",field:"attendance_date",header:"Attendance Date"},{body:o(t=>[V(d(T(we)(t.data.attendance_date).format("DD-MMM-YYYY")),1)]),_:1}),e(n,{class:"font-bold",field:"regularization_type",header:"Regularization Type"}),e(n,{class:"font-bold",field:"checkin_time",header:"Checkin Time"}),e(n,{class:"font-bold",field:"checkout_time",header:"Checkout Time"}),e(n,{class:"font-bold",field:"reason",header:"Reason"}),e(n,{class:"font-bold",field:"custom_reason",header:"Custom Reason"}),e(n,{class:"font-bold",field:"reviewer_comments",header:"Reviewer Comments"}),e(n,{class:"font-bold",field:"reviewer_reviewed_date",header:"Reviewed Date"}),e(n,{class:"font-bold",field:"status",header:"Status"},{body:o(({data:t})=>[e(s,{value:t.status,severity:N(t.status)},null,8,["value","severity"])]),filter:o(({filterModel:t,filterCallback:A})=>[e(J,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,onChange:g=>A(),options:p.statuses,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(g=>[g.value?(u(),f("span",{key:0,class:B("customer-badge status-"+g.value)},d(g.value),3)):(u(),f("span",Je,d(g.placeholder),1))]),option:o(g=>[l("span",{class:B("customer-badge status-"+g.option)},d(g.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),e(n,{class:"font-bold",field:"",header:"Action"},{body:o(t=>[t.data.status=="Pending"?(u(),f("span",Ye,[e(C,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:A=>j(t.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),e(C,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:A=>j(t.data,"Reject")},null,8,["onClick"])])):M("",!0)]),_:1})]),_:1},8,["value","filters","loading"]),e(R,{header:"Confirmation",visible:m.value,"onUpdate:visible":v[3]||(v[3]=t=>m.value=t),breakpoints:{"960px":"80vw","640px":"90vw"},style:{width:"380px"},modal:!0},{footer:o(()=>[e(C,{label:"Yes",icon:"pi pi-check",onClick:I,class:"p-button-text",autofocus:""}),e(C,{label:"No",icon:"pi pi-times",onClick:v[2]||(v[2]=t=>m.value=!1),class:"p-button-text"})]),default:o(()=>[l("div",Fe,[He,l("span",null,"Are you sure you want to "+d(T(x))+"?",1),l("div",Qe,[w.value=="Reject"?(u(),K(Y,{key:0,modelValue:D.value,"onUpdate:modelValue":v[1]||(v[1]=t=>D.value=t),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])):M("",!0)])])]),_:1},8,["visible"]),e(R,{header:"Header",visible:b.value,"onUpdate:visible":v[4]||(v[4]=t=>b.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[e(F,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[We]),_:1},8,["visible"])])}}};const Ke={class:"Leave_dashboard"},Xe=l("div",{class:"p-2 pb-0 mb-3 bg-white rounded-lg shadow tw-card left-line",style:{"background-color":"white"}},[l("div",{class:"flex justify-between"},[l("ul",{class:"bg-white divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},[l("li",{class:"nav-item text-muted",role:"presentation"},[l("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Attendance Regularization")]),l("li",{class:"nav-item text-muted",role:"presentation"},[l("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Absent Regularization")])])])],-1),qe={class:"tab-content h-[100vh]",id:"pills-tabContent"},Ze={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},et={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},tt={__name:"AttRegularizationApproval",setup(Q){let k=i();i(!1),i(!1),X(),G();const y=i(!0);i({global:{value:null,matchMode:_.CONTAINS},employee_name:{value:null,matchMode:_.STARTS_WITH,matchMode:_.EQUALS,matchMode:_.CONTAINS},status:{value:"Pending",matchMode:_.EQUALS}}),i(["Pending","Approved","Rejected"]),H(()=>{m()});function m(){let b=window.location.origin+"/fetch-att-regularization-data";console.log("AJAX URL : "+b),z.get(b).then(w=>{console.log("Axios : "+w.data),k.value=Object.values(w.data),y.value=!1})}return(b,w)=>(u(),f("div",Ke,[Xe,l("div",qe,[l("div",Ze,[e(Ue)]),l("div",et,[e(Ge)])])]))}},r=Z(tt),at=be();r.use(ee,{ripple:!0});r.use(ge);r.use(te);r.use(at);r.directive("tooltip",de);r.directive("badge",ue);r.directive("ripple",ae);r.directive("styleclass",pe);r.directive("focustrap",oe);r.component("Button",le);r.component("DataTable",me);r.component("Column",ve);r.component("ConfirmDialog",ne);r.component("Toast",se);r.component("Dialog",ie);r.component("Dropdown",re);r.component("ProgressSpinner",fe);r.component("InputText",ce);r.component("Tag",_e);r.component("Textarea",he);r.mount("#vjs_regularizationTable");
