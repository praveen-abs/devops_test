import{B as c,X as j,E as F,c as m,h as t,w as o,W as h,a0 as L,e as p,K as y,g as r,o as v,t as l,j as _,n as C,a as H,G as W,P as q,H as z,R as G,q as K}from"./toastservice.esm-c4f6de4c.js";import{T as Q,B as X,S as J,b as Z,a as ee}from"./styleclass.esm-ea560a03.js";import"./blockui.esm-85692cd0.js";import{u as te,C as ae,F as oe,a as ne,s as se,b as le}from"./inputtext.esm-5faf66bf.js";import{D as ie}from"./dialogservice.esm-b46cc252.js";import{s as re}from"./columngroup.esm-9dd1458e.js";import{s as pe}from"./row.esm-6ebc942e.js";import{s as ce}from"./overlaypanel.esm-e6b90e82.js";import{s as de}from"./progressspinner.esm-455f2fd3.js";import{a as ue}from"./index-f7a317fc.js";import{h as R}from"./moment-fbc5633a.js";const me=p("h5",{style:{"text-align":"center"}},"Please wait...",-1),ve={class:"confirmation-content"},_e=p("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),fe=p("div",null,null,-1),ge={key:0},he={key:1},ye={key:1},be={key:0},we={__name:"OrgLeaveHistoryTable",setup(Ce){const k=c();c();let u=c(!1),f=c(!1);te(),j();const A=c(!0),x=c(),V=d=>{x.value.toggle(d)},S=c({global:{value:null,matchMode:y.CONTAINS},employee_name:{value:null,matchMode:y.STARTS_WITH,matchMode:y.EQUALS,matchMode:y.CONTAINS},status:{value:null,matchMode:y.EQUALS}}),N=c(["Pending","Approved","Rejected"]);let w=null;F(()=>{let d=window.location.origin+"/fetch-leaverequests/org/Approved,Rejected,Pending";ue.get(d).then(n=>{k.value=n.data,A.value=!1})});function T(d,n){u.value=!0,w=n}function D(d){u.value=!1,d&&$()}function $(){w=""}function B(){D(!1),f.value=!0}return(d,n)=>{const M=r("Toast"),O=r("ProgressSpinner"),P=r("Dialog"),b=r("Button"),U=r("InputText"),i=r("Column"),Y=r("OverlayPanel"),E=r("Dropdown"),I=r("DataTable");return v(),m("div",null,[t(M),t(P,{header:"Header",visible:h(f),"onUpdate:visible":n[0]||(n[0]=e=>L(f)?f.value=e:f=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[t(O,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[me]),_:1},8,["visible"]),t(P,{header:"Confirmation",visible:h(u),"onUpdate:visible":n[3]||(n[3]=e=>L(u)?u.value=e:u=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:o(()=>[t(b,{label:"Yes",icon:"pi pi-check",onClick:n[1]||(n[1]=e=>B()),class:"text-white p-button-text",autofocus:""}),t(b,{label:"No",icon:"pi pi-times",onClick:n[2]||(n[2]=e=>D(!0)),class:"text-white p-button-text"})]),default:o(()=>[p("div",ve,[_e,p("span",null,"Are you sure you want to "+l(h(w))+"?",1)])]),_:1},8,["visible"]),p("div",null,[t(I,{value:k.value,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:S.value,"onUpdate:filters":n[4]||(n[4]=e=>S.value=e),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[_(" No Employee data..... ")]),loading:o(()=>[_(" Loading customers data. Please wait. ")]),default:o(()=>[t(i,{field:"employee_name",header:"Employee Name"},{body:o(e=>[fe,_(" "+l(e.data.employee_name),1)]),filter:o(({filterModel:e,filterCallback:g})=>[t(U,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,onInput:s=>g(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(i,{field:"leave_type",header:"Leave Type",style:{"min-width":"8rem"}}),t(i,{field:"start_date",header:"Start Date"},{body:o(e=>[_(l(h(R)(e.data.start_date).format("DD-MM-YYYY")),1)]),_:1}),t(i,{field:"end_date",header:"End Date",dataType:"date"},{body:o(e=>[_(l(h(R)(e.data.end_date).format("DD-MM-YYYY")),1)]),_:1}),t(i,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:o(e=>[e.data.leave_reason&&e.data.leave_reason.length>70?(v(),m("div",ge,[p("p",{onClick:V,class:"font-medium text-orange-400 underline cursor-pointer"},"explore more... "),t(Y,{ref_key:"overlayPanel",ref:x,style:{height:"80px"}},{default:o(()=>[_(l(e.data.leave_reason),1)]),_:2},1536)])):(v(),m("div",he,l(e.data.leave_reason??""),1))]),_:1}),t(i,{field:"reviewer_name",header:"Approver Name"}),t(i,{field:"reviewer_comments",header:"Approver Comments"}),t(i,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:e})=>[p("span",{class:C("customer-badge status-"+e.status)},l(e.status),3)]),filter:o(({filterModel:e,filterCallback:g})=>[t(E,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,onClick:s=>g(),options:N.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(s=>[s.value?(v(),m("span",{key:0,class:C("customer-badge status-"+s.value)},l(s.value),3)):(v(),m("span",ye,l(s.placeholder),1))]),option:o(s=>[p("span",{class:C("customer-badge status-"+s.option)},l(s.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick","options"])]),_:1}),t(i,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:o(e=>[e.data.status=="Pending"?(v(),m("span",be,[t(b,{type:"button",icon:"pi pi-check-circle",class:"p-button-success text-white Button py-2.5",label:"Approve",onClick:g=>T(e.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(b,{type:"button",icon:"pi pi-times-circle",class:"text-white p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2em"},onClick:g=>T(e.data,"Reject")},null,8,["onClick"])])):H("",!0)]),_:1})]),_:1},8,["value","filters"])])])}}},a=W(we);a.use(q,{ripple:!0});a.use(ae);a.use(z);a.use(ie);a.directive("tooltip",Q);a.directive("badge",X);a.directive("ripple",G);a.directive("styleclass",J);a.directive("focustrap",oe);a.component("DataTable",Z);a.component("Column",ee);a.component("Button",K);a.component("ColumnGroup",re);a.component("Row",pe);a.component("Dialog",ne);a.component("InputText",se);a.component("Dropdown",le);a.component("ProgressSpinner",de);a.component("OverlayPanel",ce);a.mount("#vjs_orgLeaveHistoryTable");
