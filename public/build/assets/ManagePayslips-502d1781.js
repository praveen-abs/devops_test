import{B as P,V as b,E as h,c as D,e as p,h as a,W as r,w as u,F as w,g as m,o as M,G as S,P as C,H as T,R as L,q as V}from"./toastservice.esm-c4f6de4c.js";import{T as k,B as x,S as E,b as $,a as F}from"./styleclass.esm-ea560a03.js";import"./blockui.esm-85692cd0.js";import{C as H,F as A,a as B,b as R,s as N}from"./inputtext.esm-5faf66bf.js";import{s as j}from"./confirmdialog.esm-51539a4d.js";import{s as U}from"./toast.esm-8d255b70.js";import{s as G}from"./progressspinner.esm-455f2fd3.js";import{s as O}from"./calendar.esm-7c3ebc21.js";import{d as Y,c as q}from"./pinia-0f325ab3.js";import{a as _}from"./index-f7a317fc.js";const I=Y("managePayslipStore",()=>{const g=P(),n=P(),l=P(!1);async function c(i,t){_.post("getAllEmployeesPayslipDetails",{month:i,year:t}).then(d=>{g.value=d.data.data})}async function s(i,t,d){_.post("/payroll/paycheck/getEmployeePayslipDetailsAsHTML",{user_code:i,month:t,year:d}).then(y=>{console.log("Response [getEmployeePayslipDetailsAsHTML] : "+JSON.stringify(y.data.data)),n.value=y.data,l.value=!0})}async function f(i){_.post("http://localhost:3000/sendEmail",{user_code:i}).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}return{array_employees_list:g,paySlipHTMLView:n,canShowPayslipView:l,getAllEmployeesPayslipDetails:c,getEmployeePayslipDetailsAsHTML:s,sendPayslipMail:f}});const J={class:"d-flex justify-content-end"},K=p("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),W={class:"my-4"},z={class:"d-flex justify-content-end"},Q={class:"card flex justify-content-center inline-flex"},X=["innerHTML"],Z={__name:"ManagePayslips",setup(g){const n=I(),l=b({selectmonth:"",selectDate:"",selectyear:""});return h(async()=>{}),(c,s)=>{const f=m("Calendar"),i=m("Button"),t=m("Column"),d=m("DataTable"),y=m("Dialog");return M(),D(w,null,[p("div",J,[K,a(f,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:l.selectDate,"onUpdate:modelValue":s[0]||(s[0]=o=>l.selectDate=o),style:{border:"1px solid orange","border-radius":"7px",height:"38px"}},null,8,["modelValue"]),a(i,{class:"mb-2 h-10 btn btn-orange",label:"Generate",onClick:s[1]||(s[1]=o=>r(n).getAllEmployeesPayslipDetails(l.selectDate.getMonth()+1,l.selectDate.getFullYear()))})]),p("div",W,[a(d,{value:r(n).array_employees_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],selection:l.selectedProduct,"onUpdate:selection":s[2]||(s[2]=o=>l.selectedProduct=o),currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:c.filters,"onUpdate:filters":s[3]||(s[3]=o=>c.filters=o),filterDisplay:"menu",loading:c.loading2,globalFilterFields:["name","status"]},{default:u(()=>[a(t,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(t,{field:"user_code",header:"Employee Code"}),a(t,{field:"name",header:"Employee Name"}),a(t,{field:"email",header:"Personal Mail"}),a(t,{header:"View Payslip"},{body:u(o=>[a(i,{class:"btn-primary",label:"View ",onClick:v=>r(n).getEmployeePayslipDetailsAsHTML(o.data.user_code,l.selectDate.getMonth()+1,l.selectDate.getFullYear())},null,8,["onClick"])]),_:1}),a(t,{header:"Action"},{body:u(o=>[a(i,{class:"btn-success",label:"Send Mail",onClick:v=>r(n).sendPayslipMail(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters","loading"])]),p("div",z,[a(i,{class:"mb-2 btn btn-primary",label:"Submit"})]),p("div",Q,[a(y,{visible:r(n).canShowPayslipView,"onUpdate:visible":s[4]||(s[4]=o=>r(n).canShowPayslipView=o),modal:"",header:"Header",style:{width:"50vw"}},{default:u(()=>[p("div",{innerHTML:r(n).paySlipHTMLView},null,8,X)]),_:1},8,["visible"])])],64)}}},e=S(Z),ee=q();e.use(C,{ripple:!0});e.use(H);e.use(T);e.use(ee);e.directive("tooltip",k);e.directive("badge",x);e.directive("ripple",L);e.directive("styleclass",E);e.directive("focustrap",A);e.component("Button",V);e.component("DataTable",$);e.component("Column",F);e.component("ConfirmDialog",j);e.component("Toast",U);e.component("Dialog",B);e.component("Dropdown",R);e.component("ProgressSpinner",G);e.component("InputText",N);e.component("Calendar",O);e.mount("#vjs_manage_payslips");
