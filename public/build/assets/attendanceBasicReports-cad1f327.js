import{_ as C}from"./printer-e0530634.js";import{_ as S}from"./download-5ba6c221.js";import{_ as B}from"./no-data-d6f55554.js";import{a as y}from"./index-362795f3.js";import{d as x}from"./dayjs.min-2f06af28.js";import{S as Y}from"./Service-4ef425c0.js";import{L as A}from"./LoadingSpinner-235e9bb4.js";import{W as U,Q as n,ab as j,c as u,b as k,a as E,d as e,h as i,w as f,F as D,g as c,o as d,f as F}from"./inputnumber.esm-e362c3ab.js";const M={class:"w-full"},T=e("div",null,[e("p",{class:"font-semibold text-lg"},"Attendance Basic Reports")],-1),$={class:"grid grid-cols-12"},I=e("div",{class:"col-span-6"},null,-1),N={class:"col-span-6 gap-8 grid grid-cols-12 place-content-end"},O={class:"flex gap-3 col-span-6 justify-end items-center"},H=e("div",null,[e("p",{class:"text-sm font-semibold"},"Period:")],-1),z={class:"flex gap-3 col-span-5 justify-end items-center"},G=e("div",null,[e("p",{class:"text-sm font-semibold"},"Department:")],-1),Q=e("div",{class:"grid grid-cols-12 gap-6 col-span-6"},null,-1),W=e("button",null,[e("img",{src:C,alt:"",srcset:"",class:"w-9 h-9 p-2 bg-gray-50 rounded-lg"})],-1),q={key:0,class:"my-4 w-full overflow-hidden"},J={key:1,class:"w-2/5 h-1/4 mx-auto"},K=e("img",{src:B,alt:"",class:"h-full w-full"},null,-1),X=[K],Z=e("p",{class:"font-semibold text-lg"},"Select period",-1),ee={class:"w-full"},te={class:"grid grid-cols-12 gap-6 col-span-6 place-items-center"},oe={class:"col-span-4"},ae=e("p",{class:"font-semibold text-sm my-1"},"Start date",-1),se={class:"col-span-4"},le=e("p",{class:"font-semibold text-sm my-1"},"End date",-1),ne={class:"col-span-4 mt-4"},ve={__name:"attendanceBasicReports",setup(de){const a=U({start_date:"",end_date:"",department:""}),R=Y(),p=n(!1),m=n([]),_=n([]),r=n(!1),h=async()=>{let l="/fetch-attendance-data";r.value=!0,await y.post(l,{start_date:a.start_date,end_date:a.end_date,department:g.value}).then(t=>{console.log(t.data.rows),_.value=t.data.rows,t.data.headers.forEach(s=>{let v={title:s};m.value.push(v),console.log(s)}),console.log(m.value)}).finally(()=>{r.value=!1})},L=()=>{let l="/reports/generate-basic-attendance";r.value=!0,y.post(l,{start_date:a.start_date,end_date:a.end_date,department:a.department},{responseType:"blob"}).then(t=>{console.log(t.data);var s=document.createElement("a");s.href=window.URL.createObjectURL(t.data),s.download=`Attendance Basic Report_${x(a.start_date).format("DD-MM-YYYY")}_${x(a.end_date).format("DD-MM-YYYY")}.xlsx`,s.click()}).finally(()=>{r.value=!1})},g=n(),b=n();return j(()=>{R.DepartmentDetails().then(l=>{b.value=l.data})}),(l,t)=>{const s=c("Dropdown"),v=c("Column"),P=c("DataTable"),w=c("Calendar"),V=c("Dialog");return d(),u(D,null,[r.value?(d(),k(A,{key:0,class:"absolute z-50 bg-white"})):E("",!0),e("div",M,[T,e("div",$,[I,e("div",N,[e("div",O,[H,e("div",null,[e("button",{onClick:t[0]||(t[0]=o=>p.value=!0),class:"bg-white hover:bg-gray-100 text-gray-800 font-semibold fs-6 px-2 border border-gray-400 rounded shadow"}," select ")])]),e("div",z,[G,e("div",null,[i(s,{modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=o=>g.value=o),onChange:h,options:b.value,optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"])])])])]),e("div",{class:"bg-white p-2 my-2 rounded-lg grid grid-cols-12"},[Q,e("div",{class:"col-span-6 flex justify-end gap-4"},[W,e("button",null,[e("img",{src:S,alt:"",srcset:"",onClick:L,class:"w-9 h-9 p-2 bg-gray-50 rounded-lg"})])])]),_.value.length>0?(d(),u("div",q,[i(P,{value:_.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:f(()=>[(d(!0),u(D,null,F(m.value,o=>(d(),k(v,{key:o.title,field:o.title,header:o.title,style:{"white-space":"nowrap","text-align":"left"}},null,8,["field","header"]))),128))]),_:1},8,["value"])])):(d(),u("div",J,X)),i(V,{visible:p.value,"onUpdate:visible":t[5]||(t[5]=o=>p.value=o),modal:"",header:"Header",style:{width:"40vw"}},{header:f(()=>[Z]),default:f(()=>[e("div",ee,[e("div",te,[e("div",oe,[ae,i(w,{inputId:"icon",dateFormat:"dd-mm-yy",showIcon:!0,style:{height:"2.5rem"},modelValue:a.start_date,"onUpdate:modelValue":t[2]||(t[2]=o=>a.start_date=o)},null,8,["modelValue"])]),e("div",se,[le,i(w,{inputId:"icon",dateFormat:"dd-mm-yy",showIcon:!0,style:{height:"2.5rem"},modelValue:a.end_date,"onUpdate:modelValue":t[3]||(t[3]=o=>a.end_date=o)},null,8,["modelValue"])]),e("div",ne,[e("button",{onClick:t[4]||(t[4]=o=>(p.value=!1,h())),class:"bg-yellow-500 hover:bg-yellow-700 text-white font-semibold fs-6 px-2 py-1.5 border border-gray-400 rounded shadow"}," Generate ")])])])]),_:1},8,["visible"])])],64)}}};export{ve as _};
