import{G as i,a9 as G,a1 as K,ay as q,ac as f,I as H,g as c,o as m,c as _,h as e,w as o,H as N,_ as W,d as l,t as p,b as X,a as B,l as L,n as E,F as ae,J as oe,P as le,K as se,R as ne,u as ie,v as re,L as ce,Q as de,M as ue,N as pe,A as me}from"./toastservice.esm-703f66b2.js";import{T as ve,B as ge,S as _e,b as fe,a as he}from"./styleclass.esm-dbba737a.js";import"./blockui.esm-7874af30.js";import{u as Z,C as be}from"./confirmationservice.esm-5566e2b7.js";import{s as ye}from"./progressspinner.esm-e2bd8dd3.js";import{s as we}from"./tag.esm-755eee37.js";import{s as xe}from"./textarea.esm-c29cd658.js";import{c as Se}from"./pinia-8fba8b03.js";import{a as U}from"./index-362795f3.js";import{h as ke}from"./moment-fbc5633a.js";import{S as ee}from"./Service-42a04e77.js";import{d as Ae}from"./dayjs.min-2f06af28.js";const Ce=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),Re=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),Te={class:"confirmation-content"},De=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),$e={class:"w-full d-flex justify-center mt-12"},Ne={class:"flex justify-content-center align-items-center"},je={key:0,if:"",class:"p-2 w-3 h-18 text-semibold rounded-full bg-blue-900 text-white"},Pe=["src"],ze={class:"text-left pl-2"},Ve={class:"text-right"},Le={class:"text-center p-2"},Ue={key:0},Oe={key:1},Me={key:1},Ie={key:0,style:{width:"250px",display:"block"}},Be={__name:"attendance_regularization",setup(Q){let A=i(),y=i(!1),v=i(!1);Z();const w=G(),S=i(!0),k=i(""),x=i(),j=ee();K("$swal"),q(()=>{y&&(x.value=null)});const P=i({global:{value:null,matchMode:f.CONTAINS},employee_name:{value:null,matchMode:f.STARTS_WITH,matchMode:f.EQUALS,matchMode:f.CONTAINS},status:{value:"Pending",matchMode:f.EQUALS}}),O=i(["Pending","Approved","Rejected"]);let C=null,R=null;H(()=>{M()});function M(){let r=window.location.origin+"/fetch-att-regularization-data";console.log("AJAX URL : "+r),U.get(r).then(s=>{console.log("Axios : "+s.data),A.value=Object.values(s.data),S.value=!1})}function I(r,s){y.value=!0,C=s,k.value=s,R=r,console.log("Selected Row Data : "+JSON.stringify(r))}function d(r){y.value=!1,r&&u()}function u(){C="",R=null}const J=r=>{switch(r){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function h(){d(!1),v.value=!0,console.log("Processing Rowdata : "+JSON.stringify(R)),U.post(window.location.origin+"/attendance-regularization-approvals",{record_id:R.id,approver_user_code:j.current_user_code,status:C=="Approve"?"Approved":C=="Reject"?"Rejected":C,status_text:x.value}).then(r=>{console.log("Response : "+r),M(),r.data.status=="success"?w.add({severity:"success",summary:"Success",detail:"Your request has been recorded successfully",life:3e3}):Swal.fire("Failure",`${r.data.message}`,"error"),u()}).catch(r=>{v.value=!1,u(),console.log(r.toJSON())}).finally(()=>{x.value=null,v.value=!1})}return(r,s)=>{const T=c("ProgressSpinner"),z=c("Dialog"),F=c("Textarea"),D=c("Button"),Y=c("InputText"),t=c("Column"),$=c("Tag"),g=c("Dropdown"),te=c("DataTable");return m(),_("div",null,[e(z,{header:"Header",visible:S.value,"onUpdate:visible":s[0]||(s[0]=a=>S.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[e(T,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[Ce]),_:1},8,["visible"]),e(z,{header:"Header",visible:N(v),"onUpdate:visible":s[1]||(s[1]=a=>W(v)?v.value=a:v=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[e(T,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[Re]),_:1},8,["visible"]),e(z,{header:"Confirmation",visible:N(y),"onUpdate:visible":s[5]||(s[5]=a=>W(y)?y.value=a:y=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:o(()=>[e(D,{label:"Yes",icon:"pi pi-check",onClick:s[3]||(s[3]=a=>h()),class:"p-button-text",autofocus:""}),e(D,{label:"No",icon:"pi pi-times",onClick:s[4]||(s[4]=a=>d(!0)),class:"p-button-text"})]),default:o(()=>[l("div",Te,[De,l("span",null,"Are you sure you want to "+p(N(C))+"?",1)]),l("div",$e,[k.value=="Reject"?(m(),X(F,{key:0,modelValue:x.value,"onUpdate:modelValue":s[2]||(s[2]=a=>x.value=a),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])):B("",!0)])]),_:1},8,["visible"]),l("div",null,[e(te,{value:N(A),paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:P.value,"onUpdate:filters":s[6]||(s[6]=a=>P.value=a),filterDisplay:"menu",loading:r.loading2,globalFilterFields:["name","status"]},{empty:o(()=>[L(" No Employeee found. ")]),loading:o(()=>[L(" Loading customers data. Please wait. ")]),default:o(()=>[e(t,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(a=>[l("div",Ne,[JSON.parse(a.data.employee_avatar).type=="shortname"?(m(),_("p",je,p(JSON.parse(a.data.employee_avatar).data),1)):(m(),_("img",{key:1,class:"rounded-circle img-md w-3 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(a.data.employee_avatar).data}`,srcset:"",alt:""},null,8,Pe)),l("p",ze,p(a.data.employee_name),1)])]),filter:o(({filterModel:a,filterCallback:V})=>[e(Y,{modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,onInput:b=>V(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),e(t,{field:"attendance_date",header:"Date",sortable:!0,style:{"min-width":"10rem"}},{body:o(a=>[l("h1",Ve,p(N(ke)(a.data.attendance_date).format("DD-MM-YYYY")),1)]),_:1}),e(t,{field:"regularization_type",header:"Type",style:{"min-width":"10rem"}},{body:o(a=>[l("div",Le,p(a.data.regularization_type),1)]),_:1}),e(t,{field:"user_time",header:"Actual Time",style:{"min-width":"10rem"}}),e(t,{field:"regularize_time",header:"Regularize Time",style:{"min-width":"10rem"}}),e(t,{field:"reason_type",header:"Reason",style:{"min-width":"18rem"}},{body:o(a=>[a.data.reason_type=="Others"?(m(),_("span",Ue,p(a.data.custom_reason),1)):(m(),_("span",Oe,p(a.data.reason_type),1))]),_:1}),e(t,{field:"reviewer_comments",header:"Approve Comments"}),e(t,{field:"reviewer_reviewed_date",header:"Reviewed Date"}),e(t,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:a})=>[e($,{value:a.status,severity:J(a.status)},null,8,["value","severity"])]),filter:o(({filterModel:a,filterCallback:V})=>[e(g,{modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,onChange:b=>V(),options:O.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(b=>[b.value?(m(),_("span",{key:0,class:E("customer-badge status-"+b.value)},p(b.value),3)):(m(),_("span",Me,p(b.placeholder),1))]),option:o(b=>[l("span",{class:E("customer-badge status-"+b.option)},p(b.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),e(t,{field:"",header:"Action"},{body:o(a=>[a.data.status=="Pending"?(m(),_("span",Ie,[e(D,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:V=>I(a.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),e(D,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:V=>I(a.data,"Reject")},null,8,["onClick"])])):B("",!0)]),_:1})]),_:1},8,["value","filters","loading"])])])}}},Ee={class:"flex justify-content-center align-items-center"},Je={key:0,if:"",class:"p-2 w-3 h-18 text-semibold rounded-full bg-blue-900 text-white"},Fe=["src"],Ye={class:"text-left pl-2"},He={key:1},Qe={key:0,style:{width:"250px",display:"block"}},We={class:"confirmation-content"},Ge=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),Ke={class:"w-full d-flex justify-center mt-12"},qe=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),Xe={__name:"absent_Regularization",setup(Q){const A=i(),y=ee();K("$swal");const v=i(!1),w=i(!1),S=i(""),k=i();let x=null,j=null;const P=i({global:{value:null,matchMode:f.CONTAINS},employee_name:{value:null,matchMode:f.STARTS_WITH,matchMode:f.EQUALS,matchMode:f.CONTAINS},status:{value:"Pending",matchMode:f.EQUALS}});q(()=>{v&&(k.value=null)}),H(()=>{O()});async function O(){await U.get("/fetch-absent-regularization-data").then(d=>{A.value=d.data,console.log(A.value)}).finally(()=>{})}const C=d=>{switch(d){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function R(d,u){v.value=!0,x=u,S.value=u,j=d,console.log("Selected Row Data : "+JSON.stringify(d))}function M(){v.value=!1}function I(){M(),w.value=!0,console.log("Processing Rowdata : "+JSON.stringify(j)),U.post("/approveRejectAbsentRegularization",{record_id:j.id,approver_user_code:y.current_user_code,status:x=="Approve"?"Approved":x=="Reject"?"Rejected":x,status_text:k.value,user_code:y.current_user_code}).then(d=>{console.log("Response : "+d),w.value=!1,d.data.status=="success"?toast.add({severity:"success",summary:"Success",detail:"Your request has been recorded successfully",life:3e3}):Swal.fire("Failure",`${d.data.message}`,"error"),ajax_GetAttRegularizationData()}).catch(d=>{w.value=!1}).finally(()=>{O(),k.value=null})}return(d,u)=>{const J=c("InputText"),h=c("Column"),r=c("Tag"),s=c("Dropdown"),T=c("Button"),z=c("DataTable"),F=c("Textarea"),D=c("Dialog"),Y=c("ProgressSpinner");return m(),_("div",null,[e(z,{value:A.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:P.value,"onUpdate:filters":u[0]||(u[0]=t=>P.value=t),filterDisplay:"menu",loading:d.loading2,globalFilterFields:["name","status"]},{empty:o(()=>[L(" No Employeee found. ")]),loading:o(()=>[L(" Loading customers data. Please wait. ")]),default:o(()=>[e(h,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(t=>[l("div",Ee,[JSON.parse(t.data.employee_avatar).type=="shortname"?(m(),_("p",Je,p(JSON.parse(t.data.employee_avatar).data),1)):(m(),_("img",{key:1,class:"rounded-circle img-md w-3 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(t.data.employee_avatar).data}`,srcset:"",alt:""},null,8,Fe)),l("p",Ye,p(t.data.employee_name),1)])]),filter:o(({filterModel:t,filterCallback:$})=>[e(J,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,onInput:g=>$(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),e(h,{class:"font-bold",field:"attendance_date",header:"Attendance Date"},{body:o(t=>[L(p(N(Ae)(t.data.attendance_date).format("DD-MMM-YYYY")),1)]),_:1}),e(h,{class:"font-bold",field:"regularization_type",header:"Regularization Type"}),e(h,{class:"font-bold",field:"checkin_time",header:"Checkin Time"}),e(h,{class:"font-bold",field:"checkout_time",header:"Checkout Time"}),e(h,{class:"font-bold",field:"reason",header:"Reason"}),e(h,{class:"font-bold",field:"custom_reason",header:"Custom Reason"}),e(h,{class:"font-bold",field:"reviewer_comments",header:"Reviewer Comments"}),e(h,{class:"font-bold",field:"reviewer_reviewed_date",header:"Reviewed Date"}),e(h,{class:"font-bold",field:"status",header:"Status"},{body:o(({data:t})=>[e(r,{value:t.status,severity:C(t.status)},null,8,["value","severity"])]),filter:o(({filterModel:t,filterCallback:$})=>[e(s,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,onChange:g=>$(),options:d.statuses,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(g=>[g.value?(m(),_("span",{key:0,class:E("customer-badge status-"+g.value)},p(g.value),3)):(m(),_("span",He,p(g.placeholder),1))]),option:o(g=>[l("span",{class:E("customer-badge status-"+g.option)},p(g.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),e(h,{class:"font-bold",field:"",header:"Action"},{body:o(t=>[t.data.status=="Pending"?(m(),_("span",Qe,[e(T,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:$=>R(t.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),e(T,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:$=>R(t.data,"Reject")},null,8,["onClick"])])):B("",!0)]),_:1})]),_:1},8,["value","filters","loading"]),e(D,{header:"Confirmation",visible:v.value,"onUpdate:visible":u[3]||(u[3]=t=>v.value=t),breakpoints:{"960px":"80vw","640px":"90vw"},style:{width:"380px"},modal:!0},{footer:o(()=>[e(T,{label:"Yes",icon:"pi pi-check",onClick:I,class:"p-button-text",autofocus:""}),e(T,{label:"No",icon:"pi pi-times",onClick:u[2]||(u[2]=t=>v.value=!1),class:"p-button-text"})]),default:o(()=>[l("div",We,[Ge,l("span",null,"Are you sure you want to "+p(N(x))+"?",1),l("div",Ke,[S.value=="Reject"?(m(),X(F,{key:0,modelValue:k.value,"onUpdate:modelValue":u[1]||(u[1]=t=>k.value=t),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])):B("",!0)])])]),_:1},8,["visible"]),e(D,{header:"Header",visible:w.value,"onUpdate:visible":u[4]||(u[4]=t=>w.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[e(Y,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[qe]),_:1},8,["visible"])])}}};const Ze={class:"Attendance regularization"},et=l("div",{class:"p-2 pb-0 mb-3 bg-white rounded-lg shadow tw-card left-line",style:{"background-color":"white"}},[l("div",{class:"flex justify-between"},[l("ul",{class:"bg-white divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},[l("li",{class:"nav-item text-muted",role:"presentation"},[l("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Attendance Regularization")]),l("li",{class:"nav-item text-muted",role:"presentation"},[l("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Absent Regularization")])])])],-1),tt={class:"tab-content h-[100vh]",id:"pills-tabContent"},at={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},ot={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},lt={__name:"AttRegularizationApproval",setup(Q){let A=i();i(!1),i(!1),Z(),G();const y=i(!0);i({global:{value:null,matchMode:f.CONTAINS},employee_name:{value:null,matchMode:f.STARTS_WITH,matchMode:f.EQUALS,matchMode:f.CONTAINS},status:{value:"Pending",matchMode:f.EQUALS}}),i(["Pending","Approved","Rejected"]),H(()=>{v()});function v(){let w=window.location.origin+"/fetch-att-regularization-data";console.log("AJAX URL : "+w),U.get(w).then(S=>{console.log("Axios : "+S.data),A.value=Object.values(S.data),y.value=!1})}return(w,S)=>{const k=c("Toast");return m(),_(ae,null,[e(k),l("div",Ze,[et,l("div",tt,[l("div",at,[e(Be)]),l("div",ot,[e(Xe)])])])],64)}}},n=oe(lt),st=Se();n.use(le,{ripple:!0});n.use(be);n.use(se);n.use(st);n.directive("tooltip",ve);n.directive("badge",ge);n.directive("ripple",ne);n.directive("styleclass",_e);n.directive("focustrap",ie);n.component("Button",re);n.component("DataTable",fe);n.component("Column",he);n.component("ConfirmDialog",ce);n.component("Toast",de);n.component("Dialog",ue);n.component("Dropdown",pe);n.component("ProgressSpinner",ye);n.component("InputText",me);n.component("Tag",we);n.component("Textarea",xe);n.mount("#vjs_regularizationTable");
