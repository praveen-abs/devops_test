import{B as g,V as b,E as D,c as w,e as c,h as a,W as n,w as f,j as C,t as S,F as M,g as u,o as k,G as x,P as T,H as $,R as L,q as V}from"./toastservice.esm-c4f6de4c.js";import{T as E,B as F,S as R,b as A,a as B}from"./styleclass.esm-ea560a03.js";import"./blockui.esm-85692cd0.js";import{C as H,F as N,a as U,b as Y,s as j}from"./inputtext.esm-5faf66bf.js";import{s as O}from"./confirmdialog.esm-51539a4d.js";import{s as G}from"./toast.esm-8d255b70.js";import{s as J}from"./progressspinner.esm-455f2fd3.js";import{s as q}from"./calendar.esm-7c3ebc21.js";import{d as z,c as I}from"./pinia-0f325ab3.js";import{a as v}from"./index-f7a317fc.js";const K=z("managePayslipStore",()=>{const _=g(),o=g(),l=g(!1),r=g(!1);async function s(p,t){v.post("getAllEmployeesPayslipDetails",{month:p,year:t}).then(d=>{_.value=d.data.data})}async function P(p,t,d){v.post("/payroll/paycheck/getEmployeePayslipDetailsAsHTML",{user_code:p,month:t,year:d}).then(y=>{console.log("Response [getEmployeePayslipDetailsAsHTML] : "+JSON.stringify(y.data.data)),o.value=y.data,l.value=!0})}async function m(p,t,d){console.log("sendMail_employeePayslip() : Sending mail to user : "+p),r.value=!1,v.post("/payroll/paycheck/sendMail_employeePayslip",{user_code:p,month:t,year:d}).then(y=>{console.log(" Response [sendMail_employeePayslip] : "+y.data.data)}).catch(y=>{console.log(y)})}function i(){r.value=!0}function h(){r.value=!1}return{array_employees_list:_,paySlipHTMLView:o,canShowPayslipView:l,getAllEmployeesPayslipDetails:s,getEmployeePayslipDetailsAsHTML:P,sendMail_employeePayslip:m,show_dialogconfirmation:r,canShowConfirmation:i,HideShowConfirmation:h}});const W={class:"d-flex justify-content-end"},Q=c("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),X={class:"my-4"},Z=["onClick"],ee=c("div",{class:"confirmation-content"},[c("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}}),c("span",null,"Are you sure you want to send Mail ?")],-1),te={class:"d-flex mt-11",style:{position:"relative",right:"-180px",width:"140px"}},ae={__name:"ManagePayslips",setup(_){const o=K(),l=b({selectmonth:"",selectDate:"",selectyear:""});return D(async()=>{console.log(o.array_employees_list)}),(r,s)=>{const P=u("Calendar"),m=u("Button"),i=u("Column"),h=u("Dialog"),p=u("DataTable");return k(),w(M,null,[c("div",W,[Q,a(P,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:l.selectDate,"onUpdate:modelValue":s[0]||(s[0]=t=>l.selectDate=t),style:{border:"1px solid orange","border-radius":"7px",height:"38px"}},null,8,["modelValue"]),a(m,{class:"mb-2 h-10 btn btn-orange",label:"Generate",onClick:s[1]||(s[1]=t=>n(o).getAllEmployeesPayslipDetails(l.selectDate.getMonth()+1,l.selectDate.getFullYear()))})]),c("div",X,[a(p,{value:n(o).array_employees_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],selection:l.selectedProduct,"onUpdate:selection":s[4]||(s[4]=t=>l.selectedProduct=t),currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:r.filters,"onUpdate:filters":s[5]||(s[5]=t=>r.filters=t),filterDisplay:"menu",loading:r.loading2,globalFilterFields:["name","status"]},{default:f(()=>[a(i,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(i,{field:"user_code",header:"Employee Code",headerStyle:"width: 3rem"}),a(i,{field:"name",header:"Employee Name"}),a(i,{field:"email",header:"Personal Mail"}),a(i,{field:"is_released",header:"Released Payslip?"}),a(i,{field:"is_",header:"Payslip mail sent?"}),a(i,{header:"View Payslip"},{body:f(t=>[a(m,{class:"btn-primary",label:"View",onClick:d=>n(o).getEmployeePayslipDetailsAsHTML(t.data.user_code,l.selectDate.getMonth()+1,l.selectDate.getFullYear())},null,8,["onClick"])]),_:1}),a(i,{header:"Action"},{body:f(t=>[c("button",{class:"btn-success rounded",onClick:d=>n(o).canShowConfirmation(t.data)},"Send Mail",8,Z)]),_:1}),a(h,{header:"Confirmation",visible:n(o).show_dialogconfirmation,"onUpdate:visible":s[3]||(s[3]=t=>n(o).show_dialogconfirmation=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{default:f(()=>[ee,c("div",te,[a(m,{class:"btn-success mr-3",label:"Yes",icon:"pi pi-check",onClick:s[2]||(s[2]=t=>n(o).sendMail_employeePayslip(JSON.stringify(n(o).array_employees_list.user_code),l.selectDate.getMonth()+1,l.selectDate.getFullYear())),autofocus:""}),a(m,{label:"No",icon:"pi pi-times",onClick:n(o).HideShowConfirmation,class:"p-button-text",autofocus:""},null,8,["onClick"])])]),_:1},8,["visible"])]),_:1},8,["value","selection","filters","loading"]),C(" "+S(n(o).array_employees_list),1)])],64)}}},e=x(ae),oe=I();e.use(T,{ripple:!0});e.use(H);e.use($);e.use(oe);e.directive("tooltip",E);e.directive("badge",F);e.directive("ripple",L);e.directive("styleclass",R);e.directive("focustrap",N);e.component("Button",V);e.component("DataTable",A);e.component("Column",B);e.component("ConfirmDialog",O);e.component("Toast",G);e.component("Dialog",U);e.component("Dropdown",Y);e.component("ProgressSpinner",J);e.component("InputText",j);e.component("Calendar",q);e.mount("#vjs_manage_payslips");
