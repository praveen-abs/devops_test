/* empty css              *//* empty css                     *//* empty css                   */import{H as k,a9 as j,Y as re,I as se,o as b,c as L,J as H,b as I,a as J,d as f,h as s,w as u,t as h,l as V,_ as Y,n as B,F as ie,g as A,K as le,P as ue,R as ce,u as de,x as me,L as pe,N as ye,S as fe,M as ve}from"./inputnumber.esm-2ef94937.js";import{u as ge,a as _e,T as he,B as Te,S as De,b as we,s as Me}from"./toastservice.esm-a2aa885f.js";import"./blockui.esm-1772f2aa.js";import{a as be}from"./datatable.esm-9e333783.js";import{D as Se,s as Ne}from"./dialogservice.esm-4374de6d.js";import{u as Ce,C as xe}from"./confirmationservice.esm-d19112e7.js";import{s as ke}from"./progressspinner.esm-311b8ec7.js";import{s as Ae}from"./row.esm-6ebc942e.js";import{s as Le}from"./tag.esm-6b8c150f.js";import{s as He}from"./overlaypanel.esm-b1faaa2c.js";import{a as Z}from"./index-362795f3.js";import{S as Re}from"./Service-344253a0.js";import{L as Fe}from"./LoadingSpinner-9dbead47.js";import"./pinia-0d96afee.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-c27b6911.js";var Oe=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,Ve=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,$e=/[^-+\dA-Z]/g;function G(a,n,r,c){if(arguments.length===1&&typeof a=="string"&&!/\d/.test(a)&&(n=a,a=void 0),a=a||a===0?a:new Date,a instanceof Date||(a=new Date(a)),isNaN(a))throw TypeError("Invalid date");n=String(q[n]||n||q.default);var p=n.slice(0,4);(p==="UTC:"||p==="GMT:")&&(n=n.slice(4),r=!0,p==="GMT:"&&(c=!0));var o=function(){return r?"getUTC":"get"},d=function(){return a[o()+"Date"]()},w=function(){return a[o()+"Day"]()},g=function(){return a[o()+"Month"]()},S=function(){return a[o()+"FullYear"]()},m=function(){return a[o()+"Hours"]()},N=function(){return a[o()+"Minutes"]()},D=function(){return a[o()+"Seconds"]()},R=function(){return a[o()+"Milliseconds"]()},M=function(){return r?0:a.getTimezoneOffset()},F=function(){return Pe(a)},$=function(){return Ue(a)},O={d:function(){return d()},dd:function(){return T(d())},ddd:function(){return v.dayNames[w()]},DDD:function(){return K({y:S(),m:g(),d:d(),_:o(),dayName:v.dayNames[w()],short:!0})},dddd:function(){return v.dayNames[w()+7]},DDDD:function(){return K({y:S(),m:g(),d:d(),_:o(),dayName:v.dayNames[w()+7]})},m:function(){return g()+1},mm:function(){return T(g()+1)},mmm:function(){return v.monthNames[g()]},mmmm:function(){return v.monthNames[g()+12]},yy:function(){return String(S()).slice(2)},yyyy:function(){return T(S(),4)},h:function(){return m()%12||12},hh:function(){return T(m()%12||12)},H:function(){return m()},HH:function(){return T(m())},M:function(){return N()},MM:function(){return T(N())},s:function(){return D()},ss:function(){return T(D())},l:function(){return T(R(),3)},L:function(){return T(Math.floor(R()/10))},t:function(){return m()<12?v.timeNames[0]:v.timeNames[1]},tt:function(){return m()<12?v.timeNames[2]:v.timeNames[3]},T:function(){return m()<12?v.timeNames[4]:v.timeNames[5]},TT:function(){return m()<12?v.timeNames[6]:v.timeNames[7]},Z:function(){return c?"GMT":r?"UTC":We(a)},o:function(){return(M()>0?"-":"+")+T(Math.floor(Math.abs(M())/60)*100+Math.abs(M())%60,4)},p:function(){return(M()>0?"-":"+")+T(Math.floor(Math.abs(M())/60),2)+":"+T(Math.floor(Math.abs(M())%60),2)},S:function(){return["th","st","nd","rd"][d()%10>3?0:(d()%100-d()%10!=10)*d()%10]},W:function(){return F()},WW:function(){return T(F())},N:function(){return $()}};return n.replace(Oe,function(e){return e in O?O[e]():e.slice(1,e.length-1)})}var q={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},v={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},T=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(n).padStart(r,"0")},K=function(n){var r=n.y,c=n.m,p=n.d,o=n._,d=n.dayName,w=n.short,g=w===void 0?!1:w,S=new Date,m=new Date;m.setDate(m[o+"Date"]()-1);var N=new Date;N.setDate(N[o+"Date"]()+1);var D=function(){return S[o+"Date"]()},R=function(){return S[o+"Month"]()},M=function(){return S[o+"FullYear"]()},F=function(){return m[o+"Date"]()},$=function(){return m[o+"Month"]()},O=function(){return m[o+"FullYear"]()},e=function(){return N[o+"Date"]()},P=function(){return N[o+"Month"]()},z=function(){return N[o+"FullYear"]()};return M()===r&&R()===c&&D()===p?g?"Tdy":"Today":O()===r&&$()===c&&F()===p?g?"Ysd":"Yesterday":z()===r&&P()===c&&e()===p?g?"Tmw":"Tomorrow":d},Pe=function(n){var r=new Date(n.getFullYear(),n.getMonth(),n.getDate());r.setDate(r.getDate()-(r.getDay()+6)%7+3);var c=new Date(r.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);var p=r.getTimezoneOffset()-c.getTimezoneOffset();r.setHours(r.getHours()-p);var o=(r-c)/(864e5*7);return 1+Math.floor(o)},Ue=function(n){var r=n.getDay();return r===0&&(r=7),r},We=function(n){return(String(n).match(Ve)||[""]).pop().replace($e,"").replace(/GMT\+0000/g,"UTC")};const je={class:"w-full bg-white p-2 rounded-lg"},Je=f("div",{class:"col-sm-12 col-xxl-6 col-md-6 col-xl-6 col-lg-6"},[f("h6",{class:"my-2 text-lg font-semibold"},"Leave Approvals")],-1),ze={class:"confirmation-content d-flex justify-content-start align-items-center mt-3 ml-3"},Be=f("i",{class:"mr-3 pi pi-exclamation-triangle text-red-600",style:{"font-size":"2rem"}},null,-1),Ee={class:"w-full d-flex justify-content-start align-items-center mt-4 pl-3",style:{"margin-bottom":"-12px"}},Ie={class:"confirmation-content"},Ye=f("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),Ze={class:"mt-3"},Ge={class:"flex justify-center items-center"},qe=["src"],Ke={class:"text-left pl-2 font-semibold fs-6"},Qe={key:0},Xe=f("div",null,null,-1),et={key:0},tt={key:1},at={key:1},nt={key:0},ot={__name:"LeaveApproval",setup(a){const n=Re();let r=k(),c=k(!1),p=k(!1),o=k(),d=k(!1);Ce(),ge();const w=k(),g=k({global:{value:null,matchMode:j.CONTAINS},employee_name:{value:null,matchMode:j.STARTS_WITH,matchMode:j.EQUALS,matchMode:j.CONTAINS},status:{value:"Pending",matchMode:j.EQUALS}});k(!1);const S=k(["Pending","Approved","Rejected"]),m=k(),N=l=>{m.value.toggle(l)};let D=null,R=null;const M=re({review_comment:""});se(()=>{F()});function F(){d.value=!0;let l=window.location.origin+"/fetch-leaverequests-based-on-currentrole";Z.get(l).then(y=>{r.value=y.data.data}).finally(()=>{d.value=!1})}function $(l){return isNaN(Date.parse(l))?"Invalid date":G(l,"dd-mm-yyyy, h:MM TT")}function O(l,y){p.value=!1,c.value=!0,D=y,R=l,console.log("Selected Row Data : "+JSON.stringify(l))}function e(l){c.value=!1,l&&P()}function P(){D="",R=null}function z(){console.log(M.review_comment),e(!1),d.value=!0,Z.post(window.location.origin+"/attendance-approve-rejectleave",{record_id:R.id,status:D=="Approve"?"Approved":D=="Reject"?"Rejected":D,review_comment:M.review_comment}).then(l=>{if(console.log(l),P(),l.data.status=="success")F();else if(l.data.status=="failure"){p.value=!0,o.value=l.data.message;return}}).catch(l=>{d.value=!1,P(),console.log(l.toJSON())}).finally(()=>{d.value=!1})}const C=l=>{switch(l){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};return(l,y)=>{const Q=A("Toast"),X=A("Textarea"),U=A("Button"),E=A("Dialog"),ee=A("InputText"),x=A("Column"),te=A("OverlayPanel"),ae=A("Tag"),ne=A("Dropdown"),oe=A("DataTable");return b(),L(ie,null,[H(d)?(b(),I(Fe,{key:0,class:"absolute z-50 bg-white"})):J("",!0),f("div",je,[Je,s(Q),s(E,{header:"Confirmation",visible:H(c),"onUpdate:visible":y[3]||(y[3]=t=>Y(c)?c.value=t:c=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"450px"},modal:!0},{footer:u(()=>[s(U,{label:"Yes",icon:"pi pi-check",onClick:y[1]||(y[1]=t=>z()),class:"p-button-text",autofocus:""}),s(U,{label:"No",icon:"pi pi-times",onClick:y[2]||(y[2]=t=>e(!0)),class:"p-button-text"})]),default:u(()=>[f("div",ze,[Be,f("span",null,"Are you sure you want to "+h(H(D))+"?",1)]),f("div",Ee,[H(D)=="Reject"?(b(),I(X,{key:0,name:"",id:"",modelValue:w.value,"onUpdate:modelValue":y[0]||(y[0]=t=>w.value=t),class:"border p-2 rounded",cols:"45",rows:"4",autoResize:"",placeholder:"Add Comment"},null,8,["modelValue"])):J("",!0),V(" "+h(w.value),1)])]),_:1},8,["visible"]),s(E,{header:"Error",visible:H(p),"onUpdate:visible":y[4]||(y[4]=t=>Y(p)?p.value=t:p=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:u(()=>[s(U,{label:"Ok",icon:"pi pi-check",autofocus:""})]),default:u(()=>[f("div",Ie,[Ye,f("span",null,"Error while processing the request : "+h(H(o)),1)])]),_:1},8,["visible"]),f("div",Ze,[s(oe,{value:H(r),paginator:!0,rows:10,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",sortField:"leaverequest_date",sortOrder:-1,filters:g.value,"onUpdate:filters":y[5]||(y[5]=t=>g.value=t),filterDisplay:"menu",globalFilterFields:["name","status"],style:{"white-space":"nowrap"}},{empty:u(()=>[V(" No Employee found ")]),loading:u(()=>[V(" Loading customers data. Please wait. ")]),default:u(()=>[s(x,{class:"font-bold",field:"employee_name",header:"Employee Name",style:{"min-width":"18em"}},{body:u(t=>[f("div",Ge,[JSON.parse(t.data.employee_avatar).type=="shortname"?(b(),L("p",{key:0,class:B(["p-2 w-11 fs-6 font-semibold rounded-full text-white",H(n).getBackgroundColor(t.index)])},h(JSON.parse(t.data.employee_avatar).data),3)):(b(),L("img",{key:1,class:"rounded-circle img-md w-10 userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(t.data.employee_avatar).data}`,srcset:"",alt:""},null,8,qe)),f("p",Ke,h(t.data.employee_name),1)])]),filter:u(({filterModel:t,filterCallback:W})=>[s(ee,{modelValue:t.value,"onUpdate:modelValue":_=>t.value=_,onInput:_=>W(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),s(x,{field:"leaverequest_date",header:"Date",sortable:!0},{body:u(t=>[V(h(H(G)(t.data.leaverequest_date,"dd-mm-yyyy, h:MM TT")),1)]),_:1}),s(x,{field:"leave_type",header:"Leave Type"},{body:u(t=>[t.data.leave_type=="Casual/Sick Leave"?(b(),L("h1",Qe," SL/CL ")):J("",!0),Xe]),_:1}),s(x,{field:"start_date",header:"Start Time"},{body:u(t=>[V(h($(t.data.start_date)),1)]),_:1}),s(x,{field:"end_date",header:"End Time"},{body:u(t=>[V(h($(t.data.end_date))+" ",1)]),_:1}),s(x,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"25em","white-space":"pre-wrap"}},{body:u(t=>[t.data.leave_reason.length>80?(b(),L("div",et,[f("p",{onClick:N,class:"font-medium text-orange-400 underline cursor-pointer"},"explore more... "),s(te,{ref_key:"overlayPanel",ref:m,style:{height:"80px"}},{default:u(()=>[V(h(t.data.leave_reason),1)]),_:2},1536)])):(b(),L("div",tt,h(t.data.leave_reason),1))]),_:1}),s(x,{field:"reviewer_name",header:"Approver Name"}),s(x,{field:"reviewer_comments",header:"Approver Comments"}),s(x,{field:"status",header:"Status",icon:"pi pi-check"},{body:u(({data:t})=>[s(ae,{value:t.status,severity:C(t.status)},null,8,["value","severity"])]),filter:u(({filterModel:t,filterCallback:W})=>[s(ne,{modelValue:t.value,"onUpdate:modelValue":_=>t.value=_,onChange:_=>W(),options:S.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:u(_=>[_.value?(b(),L("span",{key:0,class:B("customer-badge status-"+_.value)},h(_.value),3)):(b(),L("span",at,h(_.placeholder),1))]),option:u(_=>[f("span",{class:B("customer-badge status-"+_.option)},h(_.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),s(x,{style:{width:"300px"},field:"",header:"Action"},{body:u(t=>[t.data.status=="Pending"?(b(),L("span",nt,[s(U,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve",onClick:W=>O(t.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),s(U,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2em"},onClick:W=>O(t.data,"Reject")},null,8,["onClick"])])):J("",!0)]),_:1})]),_:1},8,["value","filters"])])])],64)}}},i=le(ot);i.use(ue,{ripple:!0});i.use(xe);i.use(_e);i.use(Se);i.directive("tooltip",he);i.directive("badge",Te);i.directive("ripple",ce);i.directive("styleclass",De);i.directive("focustrap",de);i.component("Button",me);i.component("DataTable",be);i.component("Column",pe);i.component("ColumnGroup",Ne);i.component("Row",Ae);i.component("Toast",we);i.component("ConfirmDialog",Me);i.component("Dropdown",ye);i.component("InputText",fe);i.component("Dialog",ve);i.component("ProgressSpinner",ke);i.component("Tag",Le);i.component("OverlayPanel",He);i.mount("#VJS_LeaveApproval");
