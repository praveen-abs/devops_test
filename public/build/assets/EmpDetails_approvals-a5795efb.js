import{H as d,I as U,c as j,h as l,w as a,ag as R,Y as v,g as f,o as M,e as i,t as C,k as P,J as I,P as O,K as V,L as F,R as H,u as J,v as Q,S as Y,M as z,Q as K,A as W,N as G}from"./toastservice.esm-a7a48f69.js";import{T as q,B as X,S as Z,b as ee,a as te}from"./styleclass.esm-b2d3ce47.js";import"./blockui.esm-ab651e3a.js";import{D as oe}from"./dialogservice.esm-a11f10be.js";import{s as le}from"./progressspinner.esm-1323149e.js";import{s as ne}from"./row.esm-6ebc942e.js";import{s as ae}from"./columngroup.esm-9dd1458e.js";import{s as se}from"./calendar.esm-93bf4bed.js";import{h as ie}from"./moment-fbc5633a.js";import{s as re}from"./checkbox.esm-a601f128.js";import{s as pe}from"./tag.esm-002d909b.js";import{d as ce}from"./pinia-1cb26f5c.js";import{a as k}from"./index-362795f3.js";import{m as ue}from"./map-c58f9075.js";const de=ce("EmpDetailApprovalsStore",()=>{const g=d();async function h(){await k.get("http://localhost:3000/employeeDetails_approvals").then(m=>{console.log(m.data),g.value=m.data,console.log(g.value)}).finally(()=>{})}return{array_EmpDetails_list:g,getEmpDetails_list:h}}),me=i("h5",{style:{"text-align":"center"}},"Please wait...",-1),ve={class:"confirmation-content"},fe=i("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),ge={class:"confirmation-content"},he=i("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),we={__name:"EmpDetails_approvals",setup(g){const h=de(),m=d([]),w=d(),b=d(!1),S=d(!1);let s=null,c=null;U(async()=>{await h.getEmpDetails_list()}),d({global:{value:null,matchMode:v.CONTAINS},name:{value:null,matchMode:v.STARTS_WITH,matchMode:v.EQUALS,matchMode:v.CONTAINS},status:{value:"Pending",matchMode:v.EQUALS}});function D(o,e){S.value=!0,s=e,c=o,console.log("Selected Bulk Row Data : "+JSON.stringify(o))}function y(){s="",c=null}function _(o){S.value=!1,o&&y()}function x(o){b.value=!1,o&&y()}const E=(o,e)=>{b.value=!0,s=e,c=o},T=()=>{x();let o=ue(c,"record_id");console.log("Processing Rowdata : "+JSON.stringify(c.documents)),console.log("currentlySelectedStatus : "+s),console.log("Processed doc record ids : "+o),k.post("http://localhost:3000/saveEmpDetails",{record_id:o,status:s=="Approve"?"Approved":s=="Reject"?"Rejected":s,reviewer_comments:""}).then(e=>{console.log("testing data",e.data)}).finally(()=>{y()})};function B(){_(),k.post("http://localhost:3000/saveEmpDetails",{record_id:c.record_id,status:s=="Approve"?"Approved":s=="Reject"?"Rejected":s,reviewer_comments:""}).then(o=>{console.log("testing data",o.data)}).finally(()=>{y()})}return(o,e)=>{const N=f("ProgressSpinner"),A=f("Dialog"),p=f("Button"),r=f("Column"),$=f("DataTable");return M(),j("div",null,[l(A,{header:"Header",visible:o.canShowLoadingScreen,"onUpdate:visible":e[0]||(e[0]=n=>o.canShowLoadingScreen=n),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:a(()=>[l(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:a(()=>[me]),_:1},8,["visible"]),l(A,{header:"Confirmation",visible:b.value,"onUpdate:visible":e[3]||(e[3]=n=>b.value=n),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"580px"},modal:!0},{footer:a(()=>[l(p,{label:"Yes",icon:"pi pi-check",onClick:e[1]||(e[1]=n=>T()),class:"p-button-text",autofocus:""}),l(p,{label:"No",icon:"pi pi-times",onClick:e[2]||(e[2]=n=>x(!0)),class:"p-button-text"})]),default:a(()=>[i("div",ve,[fe,i("span",null,"Are you sure you want to "+C(R(s))+" all the documents of this employee?",1)])]),_:1},8,["visible"]),l(A,{header:"Confirmation",visible:S.value,"onUpdate:visible":e[6]||(e[6]=n=>S.value=n),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:a(()=>[l(p,{label:"Yes",icon:"pi pi-check",onClick:e[4]||(e[4]=n=>B()),class:"p-button-text",autofocus:""}),l(p,{label:"No",icon:"pi pi-times",onClick:e[5]||(e[5]=n=>_(!0)),class:"p-button-text"})]),default:a(()=>[i("div",ge,[he,i("span",null,"Are you sure you want to "+C(R(s))+"?",1)])]),_:1},8,["visible"]),l($,{value:R(h).array_EmpDetails_list,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:o.onRowExpand,onRowCollapse:o.onRowCollapse,expandedRows:m.value,"onUpdate:expandedRows":e[8]||(e[8]=n=>m.value=n),selection:w.value,"onUpdate:selection":e[9]||(e[9]=n=>w.value=n),selectAll:o.selectAll,onSelectAllChange:o.onSelectAllChange,onRowSelect:o.onRowSelect,onRowUnselect:o.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:a(n=>[i("div",null,[l($,{value:n.data.documents,responsiveLayout:"scroll",selection:w.value,"onUpdate:selection":e[7]||(e[7]=u=>w.value=u),selectAll:o.selectAll,onSelectAllChange:o.onSelectAllChange},{default:a(()=>[l(r,{field:"doc_name",header:"Document Name"},{default:a(()=>[P(C(n.data.doc_name),1)]),_:2},1024),l(r,{field:"doc_status",header:"Status"}),l(r,{field:"",header:"Action"},{body:a(u=>[i("span",null,[l(p,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve",onClick:L=>D(u.data,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),l(p,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2.5em"},onClick:L=>D(u.data,"Reject")},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:a(()=>[l(r,{expander:!0}),l(r,{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),l(r,{field:"user_code",header:"Employee Id",sortable:""}),l(r,{field:"name",header:"Employee Name"}),l(r,{field:"doc_status",header:"Approval Status",sortable:!1},{body:a(({data:n})=>[P(C(n.doc_status),1)]),_:1}),l(r,{field:"",header:"Action"},{body:a(n=>[i("span",null,[l(p,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve All",onClick:u=>E(n.data.documents,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),l(p,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject All",style:{"margin-left":"8px",height:"2.5em"},onClick:u=>E(n.data.documents,"Reject")},null,8,["onClick"])])]),_:1})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])}}},t=I(we);t.use(O,{ripple:!0});t.use(V);t.use(F);t.use(oe);t.directive("tooltip",q);t.directive("badge",X);t.directive("ripple",H);t.directive("styleclass",Z);t.directive("focustrap",J);t.component("Button",Q);t.component("DataTable",ee);t.component("Column",te);t.component("ColumnGroup",ae);t.component("Row",ne);t.component("Toast",Y);t.component("ConfirmDialog",z);t.component("Dropdown",K);t.component("InputText",W);t.component("Dialog",G);t.component("ProgressSpinner",le);t.component("Calendar",se);t.component("moment",ie);t.component("Checkbox",re);t.component("Tag",pe);t.mount("#EmpDetails_approvals");
