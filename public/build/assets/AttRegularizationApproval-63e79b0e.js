import{a as B}from"./index-362795f3.js";import{Q as p,$ as q,at as H,a7 as g,ae as K,h as i,o as d,c as m,g as t,w as o,X as J,d as n,t as s,aa as k,l as z,n as I,a as M,b as X,F as Z}from"./inputnumber.esm-a7c5b1f0.js";import{u as ee}from"./confirmationservice.esm-c87db23e.js";import{u as W}from"./toastservice.esm-c9da6ad1.js";import{h as te}from"./moment-fbc5633a.js";import{S as G}from"./Service-27f748d6.js";/* empty css                                                                       */import{d as ae}from"./pinia-4be28dc8.js";import{d as oe}from"./dayjs.min-2f06af28.js";import{L as ne}from"./LoadingSpinner-bbcf6d6b.js";import"./_plugin-vue_export-helper-c27b6911.js";const Q=ae("UseAttendance",()=>({canShowLoadingScreen:p(!1)}));const le={class:"confirmation-content"},se=n("i",{class:"mr-2 text-red-600 pi pi-exclamation-triangle",style:{"font-size":"1.3rem"}},null,-1),ie={class:"my-auto"},re={class:"flex w-full p-2 justify-left"},de={class:"pl-2 text-left"},ce={class:"text-right"},ue={class:"p-2 text-center"},pe={key:0},me={key:1},_e={class:"text-bold"},ve={class:"text-bold"},fe={class:"text-bold"},he={key:1},ge={key:0,style:{width:"250px",display:"block"}},be={__name:"attendance_regularization",setup(F){const r=Q();let $=p(),c=p(!1);p(!1),ee();const A=W(),C=p(""),y=p(),S=G();q("$swal"),H(()=>{c&&(y.value=null)});const w=p({global:{value:null,matchMode:g.CONTAINS},employee_name:{value:null,matchMode:g.STARTS_WITH,matchMode:g.EQUALS,matchMode:g.CONTAINS},status:{value:"Pending",matchMode:g.EQUALS}}),N=p(["Pending","Approved","Rejected"]);let b=null,R=null;K(async()=>{await U()});async function U(){r.canShowLoadingScreen=!0;let u=window.location.origin+"/fetch-att-regularization-data";await B.get(u).then(l=>{$.value=Object.values(l.data)}).finally(()=>{r.canShowLoadingScreen=!1})}function D(u,l){c.value=!0,b=l,C.value=l,R=u}function O(u){c.value=!1,u&&V()}function V(){b="",R=null}const _=u=>{switch(u){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function v(){O(!1),r.canShowLoadingScreen=!0,B.post(window.location.origin+"/attendance-regularization-approvals",{record_id:R.id,approver_user_code:S.current_user_code,status:b=="Approve"?"Approved":b=="Reject"?"Rejected":b,status_text:y.value}).then(u=>{u.data.status=="success"?A.add({severity:"success",summary:"Success",detail:"Your request has been recorded successfully",life:3e3}):Swal.fire("Failure",`${u.data.message}`,"error"),V()}).catch(u=>{r.canShowLoadingScreen=!1,V()}).finally(()=>{y.value=null,r.canShowLoadingScreen=!1,U()})}return(u,l)=>{const Y=i("Textarea"),T=i("Button"),L=i("Dialog"),P=i("InputText"),f=i("Column"),E=i("Tag"),a=i("Dropdown"),x=i("DataTable");return d(),m("div",null,[t(L,{header:"Confirmation",visible:k(c),"onUpdate:visible":l[2]||(l[2]=e=>J(c)?c.value=e:c=e),breakpoints:{"960px":"80vw","640px":"90vw"},style:{width:"380px"},modal:!0},{footer:o(()=>[t(T,{label:"Yes",icon:"pi pi-check",onClick:v,class:"p-button-text",autofocus:""}),t(T,{label:"No",icon:"pi pi-times",onClick:l[1]||(l[1]=e=>J(c)?c.value=!1:c=!1),class:"p-button-text"})]),default:o(()=>[n("div",le,[se,n("span",ie,"Are you sure you want to "+s(k(b))+"?",1)]),n("div",re,[t(Y,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])])]),_:1},8,["visible"]),n("div",null,[t(x,{value:k($),paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"attendance_date",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:w.value,"onUpdate:filters":l[3]||(l[3]=e=>w.value=e),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[z(" No Employeee found. ")]),loading:o(()=>[z(" Loading customers data. Please wait. ")]),default:o(()=>[t(f,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(e=>[n("p",de,s(e.data.employee_name),1)]),filter:o(({filterModel:e,filterCallback:j})=>[t(P,{modelValue:e.value,"onUpdate:modelValue":h=>e.value=h,onInput:h=>j(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(f,{field:"attendance_date",header:"Date",sortable:!0,style:{"min-width":"10rem"}},{body:o(e=>[n("h1",ce,s(k(te)(e.data.attendance_date).format("DD-MM-YYYY")),1)]),_:1}),t(f,{field:"regularization_type",header:"Type",style:{"min-width":"10rem"}},{body:o(e=>[n("div",ue,s(e.data.regularization_type),1)]),_:1}),t(f,{field:"user_time",header:"Actual Time",style:{"min-width":"10rem"}}),t(f,{field:"regularize_time",header:"Regularize Time",style:{"min-width":"10rem"}}),t(f,{field:"reason_type",header:"Reason",style:{"min-width":"18rem"}},{body:o(e=>[e.data.reason_type=="Others"?(d(),m("span",pe,s(e.data.custom_reason),1)):(d(),m("span",me,s(e.data.reason_type),1))]),_:1}),t(f,{field:"reviewer_name",header:"Approve Name"},{body:o(e=>[n("p",_e,s(e.data.reviewer_name?e.data.reviewer_name:"---"),1)]),_:1}),t(f,{field:"reviewer_comments",header:"Approve Comments"},{body:o(e=>[n("p",ve,s(e.data.reviewer_comments?e.data.reviewer_comments:"---"),1)]),_:1}),t(f,{field:"reviewer_reviewed_date",header:"Reviewed Date"},{body:o(e=>[n("p",fe,s(e.data.reviewer_reviewed_date?e.data.reviewer_reviewed_date:"---"),1)]),_:1}),t(f,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:e})=>[t(E,{value:e.status,severity:_(e.status)},null,8,["value","severity"])]),filter:o(({filterModel:e,filterCallback:j})=>[t(a,{modelValue:e.value,"onUpdate:modelValue":h=>e.value=h,onChange:h=>j(),options:N.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(h=>[h.value?(d(),m("span",{key:0,class:I("customer-badge status-"+h.value)},s(h.value),3)):(d(),m("span",he,s(h.placeholder),1))]),option:o(h=>[n("span",{class:I("customer-badge status-"+h.option)},s(h.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),t(f,{field:"",header:"Action"},{body:o(e=>[e.data.status=="Pending"?(d(),m("span",ge,[t(T,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:j=>D(e.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(T,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:j=>D(e.data,"Reject")},null,8,["onClick"])])):M("",!0)]),_:1})]),_:1},8,["value","filters"])])])}}},ye={class:"flex justify-content-center align-items-center"},we={key:0,if:"",class:"w-3 p-2 text-white bg-blue-900 rounded-full h-18 text-semibold"},Se=["src"],xe={class:"pl-2 text-left"},ke={class:"text-bold"},Ae={class:"text-bold"},Ce={class:"text-bold"},Re={key:1},Te={key:0,style:{width:"250px",display:"block"}},Le={class:"confirmation-content"},$e=n("i",{class:"mr-2 text-red-600 pi pi-exclamation-triangle",style:{"font-size":"1.3rem"}},null,-1),De={class:"my-auto"},Ve={key:0,class:"flex w-full p-2 justify-left"},je={__name:"absent_Regularization",setup(F){const r=Q(),$=W(),c=p(),A=G();q("$swal");const C=p(!1);p(!1);const y=p(""),S=p();let w=null,N=null;const b=p({global:{value:null,matchMode:g.CONTAINS},employee_name:{value:null,matchMode:g.STARTS_WITH,matchMode:g.EQUALS,matchMode:g.CONTAINS},status:{value:"Pending",matchMode:g.EQUALS}});H(()=>{C&&(S.value=null)}),K(async()=>{await R()});async function R(){r.canShowLoadingScreen=!0,await B.get("/fetch-absent-regularization-data").then(_=>{c.value=_.data}).finally(()=>{r.canShowLoadingScreen=!1})}const U=_=>{switch(_){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function D(_,v){r.canShowLoadingScreen=!0,w=v,y.value=v,N=_}function O(){r.canShowLoadingScreen=!1}function V(){O(),r.canShowLoadingScreen=!0,B.post("/approveRejectAbsentRegularization",{record_id:N.id,approver_user_code:A.current_user_code,status:w=="Approve"?"Approved":w=="Reject"?"Rejected":w,status_text:S.value,user_code:A.current_user_code}).then(_=>{_.data.status=="success"?$.add({severity:"success",summary:"Success",detail:"Your request has been recorded successfully",life:3e3}):Swal.fire("Failure",`${_.data.message}`,"error"),R()}).catch(_=>{r.canShowLoadingScreen=!1}).finally(()=>{r.canShowLoadingScreen=!1,S.value=null})}return(_,v)=>{const u=i("InputText"),l=i("Column"),Y=i("Tag"),T=i("Dropdown"),L=i("Button"),P=i("DataTable"),f=i("Textarea"),E=i("Dialog");return d(),m("div",null,[t(P,{value:c.value,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"attendance_date",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:b.value,"onUpdate:filters":v[0]||(v[0]=a=>b.value=a),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[z(" No Employeee found. ")]),loading:o(()=>[z(" Loading customers data. Please wait. ")]),default:o(()=>[t(l,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(a=>[n("div",ye,[JSON.parse(a.data.employee_avatar).type=="shortname"?(d(),m("p",we,s(JSON.parse(a.data.employee_avatar).data),1)):(d(),m("img",{key:1,class:"w-3 rounded-circle img-md userActive-status profile-img",style:{height:"30px !important"},src:`data:image/png;base64,${JSON.parse(a.data.employee_avatar).data}`,srcset:"",alt:""},null,8,Se)),n("p",xe,s(a.data.employee_name),1)])]),filter:o(({filterModel:a,filterCallback:x})=>[t(u,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onInput:e=>x(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(l,{class:"font-bold",field:"attendance_date",sortable:!0,header:"Attendance Date"},{body:o(a=>[z(s(k(oe)(a.data.attendance_date).format("DD-MMM-YYYY")),1)]),_:1}),t(l,{class:"font-bold",field:"regularization_type",header:"Regularization Type"}),t(l,{class:"font-bold",field:"checkin_time",header:"Checkin Time"}),t(l,{class:"font-bold",field:"checkout_time",header:"Checkout Time"}),t(l,{class:"font-bold",field:"reason",header:"Reason"}),t(l,{class:"font-bold",field:"custom_reason",header:"Custom Reason"}),t(l,{field:"reviewer_name",header:"Approve Name"},{body:o(a=>[n("p",ke,s(a.data.reviewer_name?a.data.reviewer_name:"---"),1)]),_:1}),t(l,{field:"reviewer_comments",header:"Approve Comments"},{body:o(a=>[n("p",Ae,s(a.data.reviewer_comments?a.data.reviewer_comments:"---"),1)]),_:1}),t(l,{field:"reviewer_reviewed_date",header:"Reviewed Date"},{body:o(a=>[n("p",Ce,s(a.data.reviewer_reviewed_date?a.data.reviewer_reviewed_date:"---"),1)]),_:1}),t(l,{class:"font-bold",field:"status",header:"Status"},{body:o(({data:a})=>[t(Y,{value:a.status,severity:U(a.status)},null,8,["value","severity"])]),filter:o(({filterModel:a,filterCallback:x})=>[t(T,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onChange:e=>x(),options:_.statuses,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(e=>[e.value?(d(),m("span",{key:0,class:I("customer-badge status-"+e.value)},s(e.value),3)):(d(),m("span",Re,s(e.placeholder),1))]),option:o(e=>[n("span",{class:I("customer-badge status-"+e.option)},s(e.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),t(l,{class:"font-bold",field:"",header:"Action"},{body:o(a=>[a.data.status=="Pending"?(d(),m("span",Te,[t(L,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:x=>D(a.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(L,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:x=>D(a.data,"Reject")},null,8,["onClick"])])):M("",!0)]),_:1})]),_:1},8,["value","filters"]),t(E,{header:"Confirmation",visible:C.value,"onUpdate:visible":v[3]||(v[3]=a=>C.value=a),breakpoints:{"960px":"80vw","640px":"90vw"},style:{width:"380px"},modal:!0},{footer:o(()=>[t(L,{label:"Yes",icon:"pi pi-check",onClick:V,class:"p-button-text",autofocus:""}),t(L,{label:"No",icon:"pi pi-times",onClick:v[2]||(v[2]=a=>C.value=!1),class:"p-button-text"})]),default:o(()=>[n("div",Le,[$e,n("span",De,"Are you sure you want to "+s(k(w))+"?",1)]),y.value=="Reject"?(d(),m("div",Ve,[t(f,{modelValue:S.value,"onUpdate:modelValue":v[1]||(v[1]=a=>S.value=a),rows:"3",cols:"30",class:"border rounded-md"},null,8,["modelValue"])])):M("",!0)]),_:1},8,["visible"])])}}},ze={class:"w-full"},Ne=n("h6",{class:"mb-0 text-lg font-semibold"},"Attendance Regularization Approvals",-1),Ue=n("div",{class:"p-2 pb-0 my-2 mb-3 rounded-lg shadow tw-card left-line"},[n("div",{class:"flex justify-between"},[n("ul",{class:"bg-white divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},[n("li",{class:"nav-item text-muted",role:"presentation"},[n("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Attendance Regularization")]),n("li",{class:"nav-item text-muted",role:"presentation"},[n("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Absent Regularization")])])])],-1),Be={class:"tab-content h-[100vh]",id:"pills-tabContent"},Ie={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Me={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ge={__name:"AttRegularizationApproval",setup(F){const r=Q();return($,c)=>{const A=i("Toast");return d(),m(Z,null,[t(A),k(r).canShowLoadingScreen?(d(),X(ne,{key:0,class:"absolute z-50 bg-white w-[100%] h-[100%]"})):M("",!0),n("div",ze,[Ne,Ue,n("div",Be,[n("div",Ie,[t(be)]),n("div",Me,[t(je)])])])],64)}}};export{Ge as default};
