import{d as g}from"./dayjs.min-2f06af28.js";import{a as D}from"./index-362795f3.js";import{G as _,af as S,a9 as b,o as A,c as N,d as e,h as l,w as d,l as L,t as M,ae as c,F as R,g as v}from"./toastservice.esm-23c43048.js";import{d as O}from"./pinia-32a239a1.js";import{U as k}from"./EmployeeDocumentsManagerService-28c959a7.js";const H="/build/assets/logo_avatar_live-377e7460.png",F=O("employeePayslipStore",()=>{const w=k(),o=_(),m=_(),u=_(!1),P=new URLSearchParams(window.location.search);function a(){return P.has("uid")?P.get("uid"):""}async function n(){D.post("/payroll/paycheck/getEmployeeAllPayslipList",{uid:a()}).then(i=>{o.value=i.data.data})}async function f(i,t){let p=parseInt(g(t).month())+1,y=g(t).year();await D.post("/payroll/paycheck/getEmployeePayslipDetailsAsHTML",{uid:a(),user_code:i,month:p,year:y}).then(s=>{m.value=s.data,u.value=!0})}function x(i,t,p){const y=i,s=document.createElement("a"),r=`${t}-${p}.pdf`;s.href=y,s.download=r,s.click()}async function h(i,t){w.loading=!0,console.log("Downloading payslip PDF.....");let p=parseInt(g(t).month())+1,y=g(t).year();await D.post("/payroll/paycheck/getEmployeePayslipDetailsAsPDF",{uid:a(),user_code:i,month:p,year:y}).then(s=>{if(console.log(" Response [downloadPayslipReleaseStatus] : "+JSON.stringify(s.data.data)),s.data.data){let r=s.data.data,T=s.data.emp_name,E=s.data.emp_month;r.startsWith("JVB")?(r="data:application/pdf;base64,"+r,x(r,T,E)):r.startsWith("data:application/pdf;base64")&&x(r)}else console.log("Response Url Not Found")}).finally(()=>{w.loading=!1})}return{array_employeePayslips_list:o,paySlipHTMLView:m,canShowPayslipView:u,getEmployeeAllPayslipList:n,getEmployeePayslipDetailsAsHTML:f,getEmployeePayslipDetailsAsPDF:h}});const C={class:"my-4"},U={class:"flex inline-flex card justify-content-center"},Y=["innerHTML"],V=e("div",{class:"w-[100%] h-[100]%"},[e("div",{class:"w-[100%] flex justify-between"},[e("div",{class:"flex flex-col"},[e("h1",{class:"text-[25px]"},[L("PAYSLIP "),e("span",{class:"text-gray-500 text-[25px]"},"MAR 2023")]),e("h2",{class:"text-[16px] mt-[10px] text-[#000]"},"Lorem ipsum dolor sit."),e("p",{class:"w-[300px] mt-[10px]"},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Dicta doloribus magni ad corrupti iusto, et corporis laborum error?")]),e("div",null,[e("img",{src:H,width:"100",alt:""})])]),e("div",{class:"mt-[30px]"},[e("h1",{class:"font-semibold text-[16px] my-[16px]"},"Employee Name : PRADEESH"),e("div",{class:"border-[1.5px] border-[#000] my-[12px]"}),e("div",{class:"px-2 row"},[e("div",{class:"col-3"},[e("p",null,"Employee Number"),e("p",{class:"text-[#000]"},"12312")]),e("div",{class:"col-3"},[e("p",null,"Date Joined"),e("p",{class:"text-[#000]"},"Date Joined")]),e("div",{class:"col-3"},[e("p",null,"Department"),e("p",{class:"text-[#000]"},"Marteting")]),e("div",{class:"col-3"},[e("p",null,"Department"),e("p",{class:"text-[#000]"},"Marteting")])]),e("div",{class:"px-2 row"},[e("div",{class:"col-3"},[e("p",null,"Employee Number"),e("p",{class:"text-[#000]"},"12312")]),e("div",{class:"col-3"},[e("p",null,"Date Joined"),e("p",{class:"text-[#000]"},"Date Joined")]),e("div",{class:"col-3"},[e("p",null,"Department"),e("p",{class:"text-[#000]"},"Marteting")]),e("div",{class:"col-3"},[e("p",null,"Department"),e("p",{class:"text-[#000]"},"Marteting")])]),e("div",{class:"px-2 row"},[e("div",{class:"col-3"},[e("p",null,"Employee Number"),e("p",{class:"text-[#000]"},"12312")]),e("div",{class:"col-3"},[e("p",null,"Date Joined"),e("p",{class:"text-[#000]"},"Date Joined")]),e("div",{class:"col-3"},[e("p",null,"Department"),e("p",{class:"text-[#000]"},"Marteting")]),e("div",{class:"col-3"},[e("p",null,"Department"),e("p",{class:"text-[#000]"},"Marteting")])]),e("div",{class:"border-[1.5px] border-[#000] my-[12px]"})]),e("div",{class:""})],-1),G={__name:"EmployeePayslips",setup(w){const o=F(),m=_(!0);S(async()=>{console.log("EmployeePayslips,vue loaded"),await o.getEmployeeAllPayslipList()});const u=_({PAYROLL_MONTH:{value:null,matchMode:b.STARTS_WITH,matchMode:b.EQUALS,matchMode:b.CONTAINS}});return(P,a)=>{const n=v("Column"),f=v("Button"),x=v("column"),h=v("DataTable"),i=v("Dialog");return A(),N(R,null,[e("div",C,[l(h,{value:c(o).array_employeePayslips_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"PAYROLL_MONTH",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:u.value,"onUpdate:filters":a[0]||(a[0]=t=>u.value=t),filterDisplay:"menu",loading:P.loading2,globalFilterFields:["name"]},{default:d(()=>[l(n,{field:"PAYROLL_MONTH",header:"Month",sortable:!0},{body:d(t=>[L(M(c(g)(t.data.PAYROLL_MONTH).format("DD-MMM-YYYY")),1)]),_:1}),l(n,{field:"TOTAL_EARNED_GROSS",header:"Gross Pay"}),l(n,{field:"Reimbursements",header:"Reimbursements"},{body:d(t=>[L(M(0))]),_:1}),l(n,{field:"TOTAL_DEDUCTIONS",header:"Deductions"}),l(n,{field:"NET_TAKE_HOME",header:"Take Home"}),l(n,{header:"Action"},{body:d(t=>[l(f,{class:"z-0 btn-primary",label:"View ",onClick:p=>c(o).getEmployeePayslipDetailsAsHTML("",t.data.PAYROLL_MONTH)},null,8,["onClick"])]),_:1}),l(x,{header:"Download"},{body:d(t=>[l(f,{class:"z-0 btn-primary",label:"Download ",onClick:p=>c(o).getEmployeePayslipDetailsAsPDF("",t.data.PAYROLL_MONTH)},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","loading"]),e("button",{class:"p-2 bg-black text-[12px] text-white mt-10",onClick:a[1]||(a[1]=t=>m.value=!0)},"view")]),e("div",U,[l(i,{visible:c(o).canShowPayslipView,"onUpdate:visible":a[2]||(a[2]=t=>c(o).canShowPayslipView=t),modal:"",header:"Payslip",style:{width:"58vw"}},{default:d(()=>[e("div",{innerHTML:c(o).paySlipHTMLView},null,8,Y)]),_:1},8,["visible"])]),l(i,{visible:m.value,"onUpdate:visible":a[3]||(a[3]=t=>m.value=t),modal:"",header:"Payslip",style:{width:"58vw"}},{default:d(()=>[V]),_:1},8,["visible"])],64)}}};export{G as _};
