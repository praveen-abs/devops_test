import{H as n,I as N,a2 as R,c as p,e as a,h as c,w as d,a1 as _,b as V,a as y,g,o as u,k as S,t as M,J as U,P as A,K as O,L as j,R as I,u as H,v as K,N as G,A as J,M as W}from"./toastservice.esm-55c6bc57.js";import{d as q,c as z}from"./pinia-7d464185.js";import{T as Q,B as X,S as Y,b as Z,a as ee}from"./styleclass.esm-d0955109.js";import"./blockui.esm-dfd3470d.js";import{a as te,s as oe}from"./toast.esm-ed5ea1ae.js";import{D as ae}from"./dialogservice.esm-b0ef9e19.js";import{s as se}from"./progressspinner.esm-3e903105.js";import{s as ne}from"./progressbar.esm-b0556340.js";import{s as le}from"./row.esm-6ebc942e.js";import{s as ie}from"./columngroup.esm-9dd1458e.js";import{s as re}from"./calendar.esm-bc739ce3.js";import{s as ce}from"./textarea.esm-6a3ca6d3.js";import{s as de}from"./chips.esm-4e8c1244.js";import{s as ue}from"./multiselect.esm-77e30b91.js";import{a as C}from"./index-f7a317fc.js";import{S as me}from"./Service-c89a36de.js";const pe=q("EmployeeDocumentManagerService",()=>{const b=me(),t=n(!1),r=n([]);n();const w=n();return{EmployeeDocs_upload:n({AadharCardFront:null,AadharCardBack:null,PanCardDoc:null,DrivingLicenseDoc:null,EductionDoc:null,VoterIdDoc:null,RelievingLetterDoc:null,PassportDoc:null,save_draft_messege:null}),getEmployeeDetails:b,getEmployeeDoc:r,getEmpdocPhoto:w,fetch_EmployeeDocument:async()=>{let m="";await b.getCurrentUserCode().then(i=>{m=i.data}),t.value=!0,await C.post("/employee-documents-details",{user_code:m}).then(i=>{r.value=i.data.data,console.log("employee document : ",r.value)}).finally(()=>{t.value=!1,console.log("completed")})},loading:t}}),fe={class:"card p-3",style:{"margin-top":"-25px"}},_e=a("h2",{class:"font-semibold text-2xl my-4 mx-3"},"Upload Documents",-1),ge={class:"w-full"},ve={key:0},he=a("p",{class:"text-red-600 font-semibold fs-5"},"Pending",-1),ye=[he],be={key:1},we=a("p",{class:"text-red-600 font-semibold fs-5"},"Approved",-1),De=[we],xe={key:2},Ce=a("p",{class:"text-green-600 font-semibold"},"-",-1),Pe=[Ce],Se={key:0},ke={key:1},Ee=["onClick"],$e=a("label",{for:"file",class:"cursor-pointer"},[a("i",{class:"pi pi-upload"}),S(" Upload file")],-1),Be=[$e],Te=["disabled"],Fe={class:"w-full h-full d-flex justify-content-center"},Le=["src"],Ne=a("h5",{style:{"text-align":"center"}},"Please wait...",-1),Re={__name:"EmployeeDocumentsManager",setup(b){N(()=>{t.fetch_EmployeeDocument(),console.log(" ",w.value)});const t=pe();R();const r=n(!1),w=n({}),v=n();n();const D=n(),m=n(),i=new FormData,h=n(),k=s=>{r.value=!0,t.loading=!0,C.post("/view-profile-private-file",{user_code:t.getEmployeeDetails.current_user_code,document_name:s.document_name}).then(o=>{v.value=o.data.data,console.log("data sent",v.value)}).finally(()=>{t.loading=!1})},E=s=>{m.value=s},$=s=>{console.log(m),s.target.files&&s.target.files[0]&&(D.value=s.target.files[0],i.append(`${m.value}`,D.value),console.log(i),Object.keys(i)[0])};async function B(){if(h.value=="Failure")Swal.fire({title:h.value="Failure",text:"Please upload all mandatory documents",icon:"error",showCancelButton:!1}).then(s=>{});else{t.loading=!0;let s="/vmt-documents-route/";C.post(s,i).then(o=>{h.value=o.data.status,console.log(h.value),console.log("Photo not send"),o.data.status=="Success"?Swal.fire({title:o.data.status="Success",text:o.data.message,icon:"success",showCancelButton:!1}).then(f=>{window.location.reload()}):o.data.status=="Failure"&&Swal.fire({title:o.data.status="Failure",text:o.data.message,icon:"error",showCancelButton:!1}).then(f=>{window.location.reload()})}).finally(()=>{t.fetch_EmployeeDocument(),t.loading=!1})}}return(s,o)=>{const f=g("Column"),T=g("Button"),F=g("DataTable"),P=g("Dialog"),L=g("ProgressSpinner");return u(),p("div",fe,[_e,a("div",ge,[c(F,{ref:"dt",value:_(t).getEmployeeDoc,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:d(()=>[c(f,{header:"File Name",field:"document_name",style:{"min-width":"8rem"}},{default:d(()=>[S(M(_(t).getEmployeeDoc.document_name),1)]),_:1}),c(f,{field:"status",header:"status",style:{"min-width":"12rem"}},{body:d(l=>[l.data.status==="Pending"?(u(),p("div",ve,ye)):y("",!0),l.data.status==="Approved"?(u(),p("div",be,De)):y("",!0),l.data.status===null?(u(),p("div",xe,Pe)):y("",!0)]),_:1}),c(f,{field:"",header:"View ",style:{"min-width":"12rem"}},{body:d(l=>[l.data.doc_id?(u(),p("div",Se,[c(T,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:x=>k(l.data),style:{height:"2em"}},null,8,["onClick"])])):(u(),p("div",ke,[a("input",{type:"file",name:"",id:"file",hidden:"",onChange:o[0]||(o[0]=x=>$(x))},null,32),a("button",{class:"btn btn-success",onClick:x=>E(l.data.document_name)},Be,8,Ee)]))]),_:1})]),_:1},8,["value"]),a("button",{severity:"warn",type:"submit",data:"row-6",next:"row-6",name:"submit_form",id:"msform",class:"text-center btn btn-orange processOnboardForm float-end text-light mr-5 mt-5",value:"Submit",disabled:s.fileUploadValidation,onClick:B}," Submit ",8,Te),_(t).loading==!1?(u(),V(P,{key:0,visible:r.value,"onUpdate:visible":o[1]||(o[1]=l=>r.value=l),modal:"",header:"Documents",style:{width:"40vw"}},{default:d(()=>[a("div",Fe,[a("img",{src:`data:image/png;base64,${v.value}`,class:"",alt:"File not found",style:{"object-fit":"cover","max-width":"400px",", min-height":"350px",height:"300px"}},null,8,Le)])]),_:1},8,["visible"])):y("",!0),c(P,{header:"Header",visible:_(t).loading,"onUpdate:visible":o[2]||(o[2]=l=>_(t).loading=l),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:d(()=>[c(L,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:d(()=>[Ne]),_:1},8,["visible"])])])}}},e=U(Re),Ve=z();e.use(A,{ripple:!0});e.use(O);e.use(j);e.use(ae);e.use(Ve);e.directive("tooltip",Q);e.directive("badge",X);e.directive("ripple",I);e.directive("styleclass",Y);e.directive("focustrap",H);e.component("Button",K);e.component("DataTable",Z);e.component("Column",ee);e.component("ColumnGroup",ie);e.component("Row",le);e.component("Toast",te);e.component("ConfirmDialog",oe);e.component("Dropdown",G);e.component("InputText",J);e.component("Dialog",W);e.component("ProgressSpinner",se);e.component("Calendar",re);e.component("Textarea",ce);e.component("Chips",de);e.component("MultiSelect",ue);e.component("ProgressBar",ne);e.mount("#EmployeeDocumentManager");
