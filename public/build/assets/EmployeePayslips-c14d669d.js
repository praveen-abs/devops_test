import{d as g}from"./dayjs.min-2f06af28.js";import{a as H}from"./index-362795f3.js";import{a0 as v,ak as O,ag as V,o as t,c as a,I as n,b as N,a as T,d as e,h,w as f,l as M,t as o,F as d,f as r,g as k,n as P}from"./toastservice.esm-484a3f44.js";import{d as R}from"./pinia-ef13c18a.js";import{U as Y}from"./EmployeeDocumentsManagerService-7c8e53cc.js";/* empty css                                                                       */const C=R("employeePayslipStore",()=>{const A=Y(),l=v(),S=v(),w=v(!1),L=new URLSearchParams(window.location.search),p=v(!1);function b(){return L.has("uid")?L.get("uid"):""}async function m(){p.value=!0,H.post("/payroll/paycheck/getEmployeeAllPayslipList",{uid:b()}).then(_=>{l.value=_.data.data}).finally(()=>{p.value=!1})}async function D(_,y){p.value=!0;let s=parseInt(g(y).month())+1,c=g(y).year();await H.post("/empViewPayslipdetails",{uid:b(),user_code:_,month:s,year:c}).then(i=>{S.value=i.data,w.value=!0}).finally(()=>{p.value=!1})}function u(_,y,s){const c=_,i=document.createElement("a"),x=`${y}-${s}.pdf`;i.href=c,i.download=x,i.click()}async function E(_,y){p.value=!0,A.loading=!0,console.log("Downloading payslip PDF.....");let s=parseInt(g(y).month())+1,c=g(y).year();await H.post("/empGeneratePayslipPdfMail",{uid:b(),user_code:_,month:s,year:c,type:"pdf"}).then(i=>{if(console.log(" Response [downloadPayslipReleaseStatus] : "+JSON.stringify(i.data.data)),i.data){let x=i.data;x.startsWith("JVB")?(x="data:application/pdf;base64,"+x,u(x,_,s)):x.startsWith("data:application/pdf;base64")&&u(x)}else console.log("Response Url Not Found")}).finally(()=>{A.loading=!1,p.value=!1})}return{array_employeePayslips_list:l,paySlipHTMLView:S,canShowPayslipView:w,loading:p,getEmployeeAllPayslipList:m,getEmployeePayslipDetailsAsHTML:D,getEmployeePayslipDetailsAsPDF:E}});const F={class:"w-full"},I=e("h2",{class:"font-semibold text-lg my-2"},"Salary Details",-1),B=e("i",{class:"pi pi-ellipsis-v"},null,-1),U=[B],$={class:"d-flex flex-column p-0 m-0"},j=["onClick"],G=["onClick"],J={class:"flex justify-center w-[100%] my-3 rounded-lg"},W={class:"w-[95%] h-[90%] shadow-lg p-4"},z={class:"w-[100%] flex justify-between"},K={class:"flex flex-col"},q=e("h1",{class:"text-[25px]"},[M("PAYSLIP "),e("span",{class:"text-gray-500 text-[25px]"},"MAR 2023")],-1),Q=["src"],X={class:"mt-[30px]"},Z=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),ee={class:"col-3"},se=e("p",{class:""},"Employee Code",-1),te={class:"text-[#000] text-[12px]"},ae={class:"col-3"},le=e("p",null,"Date Joining",-1),oe={class:"text-[#000]"},ne={class:"col-3"},ie=e("p",null,"Department",-1),ce={class:"text-[#000]"},de={class:"col-3"},re=e("p",null,"Designation",-1),_e={class:"text-[#000]"},pe={class:"col-3"},ue=e("p",null,"Payment Mode",-1),ye={class:"text-[#000]"},he={class:"col-3"},me=e("p",null,"Bank Name",-1),xe={class:"text-[#000]"},be={class:"col-3"},ve=e("p",null,"Bank Account",-1),fe={class:"text-[#000]"},ge={class:"col-3"},we=e("p",null,"Bank ISFC",-1),Le={class:"text-[#000]"},ke={class:"col-3"},Se=e("p",null,"PAN",-1),Te={class:"text-[#000]"},Pe=e("div",{class:"col-3"},[e("p",null,"ESIC"),e("p",{class:"text-[#000]"},"Date Joined")],-1),Me={class:"col-3"},Ae=e("p",null,"UAN",-1),De={class:"text-[#000]"},Ee={class:"col-3"},He=e("p",null,"EPF Number",-1),Ve={class:"text-[#000]"},Oe=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),Ne={class:""},Re=e("h1",{class:"font-semibold text-[16px] my-[16px]"},"LEAVE DETAILS",-1),Ye=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),Ce={class:"py-2 mx-2 row"},Fe={class:"col-3"},Ie=e("p",null,"Leave Type",-1),Be={class:"col-3"},Ue=e("p",null,"Opening Balance",-1),$e={class:"col-3"},je=e("p",null,"Availed",-1),Ge={class:"col-3"},Je=e("p",null,"Closing Balance",-1),We={class:""},ze=e("h1",{class:"font-semibold text-[16px] my-[16px]"},"SALARY DETAILS",-1),Ke=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),qe={class:"col-3"},Qe=e("p",null,"ACTUAL PAYABLE DAYS",-1),Xe={class:"text-[#000]"},Ze={class:"col-3"},es=e("p",null,"TOTAL WORKING DAYS",-1),ss={class:"text-[#000]"},ts={class:"col-3"},as=e("p",null,"LOSS OF PAY DAYS",-1),ls={class:"text-[#000]"},os={class:"col-3"},ns=e("p",null,"ARREAR DAYS PAYABLE",-1),is={class:"text-[#000]"},cs={class:"row mt-2 py-2 border-y-[1px] border-[gray] mx-2"},ds={class:"col-7 border-r-[1.4px] border-[gray]"},rs={class:"w-[100%]"},_s={class:"w-[100%]"},ps=e("h1",{class:"font-semibold"},"Earnings",-1),us={class:"flex flex-col items-start pt-[2px]"},ys=e("h1",{class:"font-semibold"},"Fixed",-1),hs={key:0,class:"flex flex-col items-start pt-[2px]"},ms=e("h1",{class:"font-semibold"},"Arrears",-1),xs={key:1},bs=e("h1",{class:"font-semibold"},"Earned",-1),vs={class:"col"},fs={border:"2",class:"w-[100%]"},gs={class:"w-[100%]"},ws=e("h1",{class:"font-semibold"},"CONTRIBUTIONS",-1),Ls=e("h1",{class:"font-semibold"}," ",-1),ks={class:"w-[100%]"},Ss=e("h1",{class:"font-semibold"},"Tax Duductions",-1),Ts=e("h1",{class:"font-semibold"}," ",-1),Ps={class:"my-2 col-5"},Ms={class:""},As={class:"my-2 col-7"},Ds={class:"text-[16px]"},Es={key:0,class:"text-[16px]",style:{"font-family":"sans-serif !important"}},Hs=e("div",null,[e("p",{class:"mt-2"},"*** Note:All amounts displayed in this payslips are in INR"),e("p",{class:"mt-[50px]"},"**This is computer generated statement,does not require signature.")],-1),Vs={class:""},Os={class:"flex items-center float-right"},Ns=e("p",{class:"mx-2"},"Powered by ",-1),Rs=["src"],$s={__name:"EmployeePayslips",setup(A){const l=C(),S=v(!0),w=v();O(async()=>{console.log("EmployeePayslips,vue loaded"),await l.getEmployeeAllPayslipList()});const L=v({PAYROLL_MONTH:{value:null,matchMode:V.STARTS_WITH,matchMode:V.EQUALS,matchMode:V.CONTAINS}});function p(b){w.value.toggle(b)}return(b,m)=>{const D=k("LoadingSpinner"),u=k("Column"),E=k("OverlayPanel"),_=k("DataTable"),y=k("Sidebar");return t(),a(d,null,[n(l).loading?(t(),N(D,{key:0,class:"absolute z-50 bg-white"})):T("",!0),e("div",F,[I,h(_,{value:n(l).array_employeePayslips_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"PAYROLL_MONTH",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:L.value,"onUpdate:filters":m[0]||(m[0]=s=>L.value=s),filterDisplay:"menu",loading:b.loading2,globalFilterFields:["name"]},{default:f(()=>[h(u,{field:"PAYROLL_MONTH",header:"Month",sortable:!0},{body:f(s=>[M(o(n(g)(s.data.PAYROLL_MONTH).format("DD-MMM-YYYY")),1)]),_:1}),h(u,{field:"TOTAL_EARNED_GROSS",header:"Gross Pay"}),h(u,{field:"Reimbursements",header:"Reimbursements"},{body:f(s=>[M(o(0))]),_:1}),h(u,{field:"TOTAL_DEDUCTIONS",header:"Deductions"}),h(u,{field:"NET_TAKE_HOME",header:"Take Home"}),h(u,{header:"Action"},{body:f(s=>[e("button",{class:"",type:"button",onClick:p},U),h(E,{ref_key:"op",ref:w,style:{width:"160px","margin-top":"12px !important","margin-right":"20px !important"},class:"p-0 m-0 !z-0"},{default:f(()=>[e("div",$,[e("button",{class:"fw-semibold text-black hover:bg-gray-200 border-bottom-1 p-2",onClick:c=>n(l).getEmployeePayslipDetailsAsPDF("",s.data.PAYROLL_MONTH)},"Download",8,j),e("button",{class:"fw-semibold text-black hover:bg-gray-200 p-2",onClick:c=>n(l).getEmployeePayslipDetailsAsHTML("",s.data.PAYROLL_MONTH)},"View",8,G)])]),_:2},1536)]),_:1})]),_:1},8,["value","filters","loading"]),e("button",{class:"p-2 bg-black text-[12px] text-white mt-10",onClick:m[1]||(m[1]=s=>S.value=!0)},"view")]),h(y,{position:"right",visible:n(l).canShowPayslipView,"onUpdate:visible":m[2]||(m[2]=s=>n(l).canShowPayslipView=s),modal:"",header:"Payslip",style:{width:"58vw"}},{default:f(()=>[e("div",J,[e("div",W,[e("div",z,[e("div",K,[q,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.client_details,s=>(t(),a("h2",{class:"text-[16px] mt-[10px] text-[#000]",key:s},o(s.client_fullname),1))),128)),(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.client_details,s=>(t(),a("p",{class:"w-[300px] mt-[10px]",key:s},o(s.address),1))),128))]),(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.client_details,s=>(t(),a("div",{key:s},[e("img",{src:`${s.client_logo}`,alt:"testing",class:"w-[200px]"},null,8,Q)]))),128))]),e("div",X,[(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.personal_details,s=>(t(),a("h1",{class:"font-semibold text-[16px] my-[16px]",key:s}," Employee Name : "+o(s.name),1))),128)),Z,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.personal_details,s=>(t(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:s},[e("div",ee,[se,e("p",te,o(s.user_code?s.user_code:"-"),1)]),e("div",ae,[le,e("p",oe,o(s.doj?n(g)(s.doj).format("DD-MMM-YYYY"):"-"),1)]),e("div",ne,[ie,e("p",ce,o(s.department_name?s.department_name:"-"),1)]),e("div",de,[re,e("p",_e,o(s.designation?s.designation:"-"),1)])]))),128)),(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.personal_details,s=>(t(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:s},[e("div",pe,[ue,e("p",ye,o(s.bank_account_number?"Bank":"cheque"),1)]),e("div",he,[me,e("p",xe,o(s.bank_name?s.bank_name:"-"),1)]),e("div",be,[ve,e("p",fe,o(s.bank_account_number?s.bank_account_number:"-"),1)]),e("div",ge,[we,e("p",Le,o(s.bank_ifsc_code?s.bank_ifsc_code:"-"),1)])]))),128)),(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.personal_details,s=>(t(),a("div",{class:"py-2 mx-2 row",key:s},[e("div",ke,[Se,e("p",Te,o(s.pan_number?s.pan_number:"-"),1)]),Pe,e("div",Me,[Ae,e("p",De,o(s.uan_number?s.uan_number:"-"),1)]),e("div",Ee,[He,e("p",Ve,o(s.epf_number?s.epf_number:"-"),1)])]))),128)),Oe]),e("div",Ne,[Re,Ye,e("div",Ce,[e("div",Fe,[Ie,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},o(s.leave_type?s.leave_type:"-"),1))),128))]),e("div",Be,[Ue,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},o(s.opening_balance?s.opening_balance:"-"),1))),128))]),e("div",$e,[je,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},o(s.avalied?s.avalied:"-"),1))),128))]),e("div",Ge,[Je,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},o(s.closing_balance?s.closing_balance:"-"),1))),128))])])]),e("div",We,[ze,Ke,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.salary_details,s=>(t(),a("div",{class:"py-2 mx-2 row",key:s},[e("div",qe,[Qe,e("p",Xe,o(s.month_days?s.month_days:"-"),1)]),e("div",Ze,[es,e("p",ss,o(s.worked_Days?s.worked_Days:"-"),1)]),e("div",ts,[as,e("p",ls,o(s.lop?s.lop:"-"),1)]),e("div",os,[ns,e("p",is,o(s.arrears_Days?s.arrears_Days:"-"),1)])]))),128))]),e("div",cs,[e("div",ds,[e("table",rs,[e("tr",_s,[e("td",null,[ps,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.earnings[0],(s,c,i)=>(t(),a("h1",{class:P(["my-3",[c=="Total Earnings"?"text-black text-[16px]":"text-black"]]),key:i},o(c),3))),128))]),e("td",us,[ys,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.compensatory_data[0],(s,c,i)=>(t(),a("h1",{key:i,class:"mt-[12px] text-black"},o(s),1))),128))]),n(l).paySlipHTMLView.data.arrears[0]!=""?(t(),a("td",hs,[ms,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.arrears[0],(s,c,i)=>(t(),a("h1",{key:i,class:"mt-[12px]"},o(s),1))),128))])):T("",!0),n(l).paySlipHTMLView.data.earnings[0]?(t(),a("td",xs,[bs,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.earnings[0],(s,c,i)=>(t(),a("h1",{key:i,class:P(["my-3",[c=="Total Earnings"?"text-black text-[16px]":""]])},o(s),3))),128))])):T("",!0)])])]),e("div",vs,[e("table",fs,[e("tr",gs,[e("td",null,[ws,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.contribution[0],(s,c,i)=>(t(),a("p",{class:"my-2 text-[#000]",key:i},o(c),1))),128))]),e("td",null,[Ls,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.contribution[0],(s,c,i)=>(t(),a("p",{class:"my-2 text-[#000]",key:i},o(s),1))),128))])]),e("tr",ks,[e("td",null,[Ss,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.Tax_Deduction[0],(s,c,i)=>(t(),a("p",{class:P(["my-2 text-[#000]",[c=="Total Deduction"?"text-[18px] ":" text-black"]]),key:i},o(c),3))),128))]),e("td",null,[Ts,(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.Tax_Deduction[0],(s,c,i)=>(t(),a("p",{class:P(["my-2 text-[#000]",[c=="Total Deduction"?"text-[18px] ":" text-black"]]),key:i},o(s),3))),128))])])])])]),(t(!0),a(d,null,r(n(l).paySlipHTMLView.data.over_all[0],(s,c,i)=>(t(),a("div",{class:"my-2 row w-[100%]",key:i},[e("div",Ps,[e("p",Ms,o(c),1)]),e("div",As,[e("p",Ds,[c=="Net Salary Payable"?(t(),a("span",Es,"₹ ")):T("",!0),M(" "+o(s),1)])])]))),128)),Hs,e("div",Vs,[e("div",Os,[Ns,e("img",{src:`${n(l).paySlipHTMLView.data.date_month.abs_logo}`,alt:"",class:"w-[140px] h-[50px]"},null,8,Rs)])])])])]),_:1},8,["visible"])],64)}}};export{$s as _};
