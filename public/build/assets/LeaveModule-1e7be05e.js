/* empty css              *//* empty css                     *//* empty css                   */import{H as r,o as c,c as m,d as e,h as a,F as N,f as Q,t as i,J as o,a9 as R,I as W,g as y,w as n,l as L,n as B,p as K,a as j,b as G,K as J,P as X,R as Z,u as ee,x as te,L as ae,N as oe,S as le,M as se}from"./inputnumber.esm-2ef94937.js";import{d as ne,c as de}from"./pinia-0d96afee.js";import{a as ie,T as re,B as ce,S as pe,b as me,s as ue}from"./toastservice.esm-a2aa885f.js";import"./blockui.esm-1772f2aa.js";import{a as ve}from"./datatable.esm-9e333783.js";import{D as _e,s as he}from"./dialogservice.esm-4374de6d.js";import{C as ye}from"./confirmationservice.esm-d19112e7.js";import{s as fe}from"./progressspinner.esm-311b8ec7.js";import{s as ge}from"./row.esm-6ebc942e.js";import{s as be}from"./calendar.esm-11c715d3.js";import{s as xe}from"./checkbox.esm-3eaffbbf.js";import{s as we}from"./chips.esm-16e7fe1e.js";import{s as Le}from"./multiselect.esm-c2c2c2c7.js";import{s as De}from"./textarea.esm-e60302eb.js";import{s as $e}from"./overlaypanel.esm-b1faaa2c.js";import{s as Se}from"./sidebar.esm-5f9962e4.js";import{S as q}from"./Service-344253a0.js";import"./moment-fbc5633a.js";import{a as E}from"./index-362795f3.js";import{d as x}from"./dayjs.min-2f06af28.js";import{_ as Ce}from"./LeaveApply-cafbfc39.js";import"./LeaveApply.vue_vue_type_style_index_0_lang-a6f27cb1.js";import{L as ke}from"./LoadingSpinner-9dbead47.js";import"./index.esm-a9eec119.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-c27b6911.js";const F=ne("useLeaveModuleStore",()=>{q();const $=r(!0),l=r(),f=r(),D=r(),v=r(),C=r(),k=r(),_=r(),d=r(),T=r(),s=r(),M=r(),S=r(!1),V=r({}),O=b=>{S.value=!0,console.log(b),V.value={...b},V.emp_name=b.name};async function H(){$.value=!0;let b="/get-employee-leave-balance";await E.get(b).then(w=>{console.log(w.data),l.value=w.data,f.value=w.data["Avalied Leaves"]}).finally(()=>{$.value=!1})}async function t(b){await E.post("/leave/withdrawLeave",{leave_id:b}).then(w=>{console.log("performLeaveWithdraw() : "+w.data)}).finally(()=>{$.value=!1})}async function g(b,w,P){let U=0;await E.get(window.location.origin+"/currentUserCode ").then(Y=>{U=Y.data}),await E.post("/attendance/getEmployeeLeaveDetails",{user_code:U,filter_month:b,filter_year:w,filter_leave_status:P}).then(Y=>{D.value=Y.data.data,console.log("getEmployeeLeaveHistory() : "+Y.data)}).finally(()=>{$.value=!1})}async function p(b,w,P){let U=0;await E.get(window.location.origin+"/currentUserCode ").then(Y=>{U=Y.data}),E.post("/attendance/getTeamEmployeesLeaveDetails",{manager_code:U,filter_month:b,filter_year:w,filter_leave_status:P}).then(Y=>{v.value=Y.data.data,console.log("getTeamLeaveHistory() : "+Y.data)}).finally(()=>{$.value=!1})}async function h(b,w,P){E.post("/attendance/getAllEmployeesLeaveDetails",{filter_month:b,filter_year:w,filter_leave_status:P}).then(U=>{C.value=U.data.data,console.log("getOrgLeaveHistory() : "+U.data.data)}).finally(()=>{$.value=!1})}async function I(b){E.post("/attendance/getLeaveInformation",{record_id:b}).then(w=>{M.value=w.data.data,console.log("getLeaveInformation() : "+w.data)}).finally(()=>{$.value=!1})}async function A(b,w){await E.post("/fetch-org-leaves-balance",{start_date:b,end_date:w}).then(P=>{k.value=P.data}).finally(()=>{$.value=!1})}async function z(b,w){console.log(b,w),E.post("/fetch-team-leave-balance",{start_date:b,end_date:w}).then(P=>{s.value=P.data}).finally(()=>{$.value=!1})}return{canShowLoading:$,canShowLeaveDetails:S,setLeaveDetails:V,getLeaveDetails:O,array_employeeLeaveHistory:D,array_teamLeaveHistory:v,array_orgLeaveHistory:C,array_employeeLeaveBalance:l,array_employeeAvailedLeaveBalance:f,array_orgLeaveBalance:k,selectedStartDate:_,selectedEndDate:d,canshowloadingsrceen:T,arrayTermLeaveBalance:s,performLeaveWithdraw:t,getEmployeeLeaveHistory:g,getTeamLeaveHistory:p,getAllEmployeesLeaveHistory:h,getLeaveInformation:I,getEmployeeLeaveBalance:H,getOrgLeaveBalance:A,getTermLeaveBalance:z}}),Re={class:"mb-3 card"},Te={class:"card-body"},Ae={class:"mb-2 row"},Me=e("div",{class:"col-sm-6 col-xl-6 col-md-6 col-lg-6"},[e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Leave balance")],-1),Ee={class:"col-6 justify-content-end d-flex"},Ve={class:"grid gap-4 md:grid-cols-4 sm:grid-cols-1 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-5",style:{display:"grid"}},Pe={class:"my-1 lg:text-[12px] font-semibold text-center md:text-[10px] xl:text-[13px]"},Ye={class:"my-1 text-xl font-semibold text-center"},Be={key:0,class:"text-lg font-semibold"},Ue={key:1,class:"text-lg font-semibold"},Oe={class:"card"},He={class:"card-body"},Ne=e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Leave Availed",-1),je={class:"grid gap-4 md:grid-cols-4 sm:grid-cols-1 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-5",style:{display:"grid"}},Fe={class:"text-center"},Ie={class:"my-1 lg:text-[12px] font-semibold text-center md:text-[10px] xl:text-[13px]"},We={class:"my-1 text-xl font-semibold text-center"},Qe={key:0,class:"text-lg font-semibold"},qe={key:1,class:"text-lg font-semibold"},ze={__name:"EmployeeLeaveBalance",setup($){const l=F();return(f,D)=>(c(),m(N,null,[e("div",Re,[e("div",Te,[e("div",Ae,[Me,e("div",Ee,[a(Ce)])]),e("div",Ve,[(c(!0),m(N,null,Q(o(l).array_employeeLeaveBalance,v=>(c(),m("div",{key:v,class:"p-1 my-2 rounded-lg border bg-gray-100 hover:bg-slate-100 cursor-pointer"},[e("p",Pe,i(v.leave_type),1),e("p",Ye,[v.leave_balance==""?(c(),m("span",Be,"0")):(c(),m("span",Ue,i(v.leave_balance),1))])]))),128))])])]),e("div",Oe,[e("div",He,[Ne,e("div",je,[(c(!0),m(N,null,Q(o(l).array_employeeLeaveBalance,v=>(c(),m("div",{class:"bg-gray-100 border-l-4 border-indigo-300 p-1 rounded-lg border my-2 cursor-pointer hover:bg-slate-100",key:v},[e("div",Fe,[e("p",Ie,i(v.leave_type),1),e("p",We,[v.availed_leaves==""?(c(),m("span",Qe,"0")):(c(),m("span",qe,i(v.availed_leaves),1))])])]))),128))])])])],64))}},Ke={class:"mt-3 row"},Ge={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Je={class:"mb-0 card leave-history"},Xe={class:"card-body"},Ze={class:"flex justify-between"},et=e("div",null,[e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins] mb-4"}," Leave history ")],-1),tt={class:"d-flex justify-content-end mb-2"},at=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),ot={class:"table-responsive"},lt={key:0},st={key:1},nt={key:1},dt={class:"flex justify-center"},it={class:"w-full"},rt={class:"w-full"},ct={class:"border w-full rounded-lg"},pt={class:"p-3 pl-5 d-flex align-items-center border"},mt={class:"rounded-circle shadow-sm d-flex justify-content-center align-items-center bg-yellow-100",style:{width:"80px",height:"80px"}},ut={class:"text-3xl font-semibold"},vt={class:"ml-5"},_t={class:"text-lg font-semibold"},ht={class:"fs-6 text-neutral-400"},yt={class:"border w-full d-flex py-4 px-4"},ft={class:"mx-2 p-1 rounded-lg"},gt={class:"text-center py-1 px-2 text-light rounded-top fw-bold",style:{"background-color":"navy"}},bt={class:"text-center py-1 px-2 fs-5 fw-bold"},xt={class:"text-center py-1 px-2 fs-6 fw-bold"},wt={class:"py-3"},Lt={class:"text-lg font-semibold text-primary-800"},Dt={class:"font-semibold text-xs"},$t={class:"border w-full py-4 px-4"},St=e("h1",{class:"text-lg font-semibold"},"Notified To:",-1),Ct={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"250px","max-width":"300px",display:"flex"}},kt={class:"d-flex p-2 align-items-center"},Rt={class:"rounded-circle bg-blue-100 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},Tt={class:"flex-column px-3"},At={class:"fs-6 fw-bold"},Mt={class:"py-2 text-neutral-400"},Et={class:"border w-full py-4 px-4"},Vt=e("h1",{class:"text-lg font-semibold"},"Approved by",-1),Pt={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"180px","max-width":"300px",display:"flex"}},Yt={class:"d-flex p-2 align-items-center"},Bt=e("div",{class:"rounded-circle bg-green-400 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},[e("i",{class:"pi pi-check text-light"})],-1),Ut={class:"flex-column px-3"},Ot={class:"fs-6 fw-bold"},Ht={class:"py-2 text-neutral-400"},Nt={class:"my-4 mx-3"},jt={class:"text-end mx-4 my-4"},Ft={__name:"EmployeeLeaveDetails",setup($){const l=F(),f=r(!0),D=r(),v=r(),C=T=>{D.value.toggle(T)},k=r({global:{value:null,matchMode:R.CONTAINS},employee_name:{value:null,matchMode:R.STARTS_WITH,matchMode:R.EQUALS,matchMode:R.CONTAINS},status:{value:null,matchMode:R.EQUALS}}),_=r(["Pending","Approved","Rejected"]);W(async()=>{await l.getEmployeeLeaveHistory(x().month()+1,x().year(),["Approved","Pending","Rejected"]),f.value=!1});function d(){l.canShowLeaveDetails=!1}return(T,s)=>{const M=y("Calendar"),S=y("Column"),V=y("OverlayPanel"),O=y("Dropdown"),H=y("Button"),t=y("DataTable"),g=y("Textarea"),p=y("Dialog");return c(),m(N,null,[a(ze),e("div",Ke,[e("div",Ge,[e("div",Je,[e("div",Xe,[e("div",Ze,[et,e("div",tt,[at,a(M,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=h=>v.value=h),style:{"border-radius":"7px",height:"30px"},onDateSelect:s[1]||(s[1]=h=>(o(l).getEmployeeLeaveHistory(v.value.getMonth()+1,v.value.getFullYear(),_.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",ot,[a(t,{value:o(l).array_employeeLeaveHistory,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:k.value,"onUpdate:filters":s[2]||(s[2]=h=>k.value=h),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:n(()=>[L(" No Employee data..... ")]),default:n(()=>[a(S,{field:"leave_type",header:"Leave Type",style:{"min-width":"14rem"}}),a(S,{field:"start_date",header:"Start Date",style:{"min-width":"8rem"}},{body:n(h=>[L(i(o(x)(h.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(S,{field:"end_date",header:"End Date",dataType:"date",style:{"min-width":"8rem"}},{body:n(h=>[L(i(o(x)(h.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(S,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:n(h=>[h.data.leave_reason&&h.data.leave_reason.length>70?(c(),m("div",lt,[e("p",{onClick:C,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(V,{ref_key:"overlayPanel",ref:D,style:{height:"80px"}},{default:n(()=>[L(i(h.data.leave_reason),1)]),_:2},1536)])):(c(),m("div",st,i(h.data.leave_reason??""),1))]),_:1}),a(S,{field:"reviewer_name",header:"Approver Name"}),a(S,{field:"reviewer_comments",header:"Approver Comments"}),a(S,{field:"status",header:"Status",icon:"pi pi-check"},{body:n(({data:h})=>[e("span",{class:B("customer-badge status-"+h.status)},i(h.status),3)]),filter:n(({filterModel:h,filterCallback:I})=>[a(O,{modelValue:h.value,"onUpdate:modelValue":A=>h.value=A,onChange:A=>I(),options:_.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:n(A=>[A.value?(c(),m("span",{key:0,class:B("customer-badge status-"+A.value)},i(A.value),3)):(c(),m("span",nt,i(A.placeholder),1))]),option:n(A=>[e("span",{class:B("customer-badge status-"+A.option)},i(A.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(S,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:n(h=>[e("div",dt,[a(H,{type:"button",icon:"",class:"text-white bg-black Button py-2.5 mx-auto",label:"View",onClick:I=>o(l).getLeaveDetails(h.data),style:{height:"2em"}},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"])])])])])]),a(p,{header:"Header",visible:o(l).canShowLeaveDetails,"onUpdate:visible":s[4]||(s[4]=h=>o(l).canShowLeaveDetails=h),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw",borderTop:"5px solid #002f56"},modal:!0,closable:!0,closeOnEscape:!0},{header:n(()=>[e("div",it,[e("h5",{style:K({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"text-xl font-semibold"}," Leave Details Request",4)])]),default:n(()=>[e("div",rt,[e("div",ct,[e("div",pt,[e("div",mt,[e("h1",ut,i(o(l).setLeaveDetails.user_short_name),1)]),e("div",vt,[e("h1",_t,i(o(l).setLeaveDetails.name),1),e("div",null,[e("p",ht,"Requested on "+i(o(l).setLeaveDetails.leaverequest_date),1)])])]),e("div",yt,[e("div",ft,[e("h1",gt,i(o(x)(o(l).setLeaveDetails.end_date).format("MMM")),1),e("h1",bt,i(o(x)(o(l).setLeaveDetails.end_date).format("DD")),1),e("h1",xt,i(o(x)(o(l).setLeaveDetails.end_date).format("dddd")),1)]),e("div",wt,[e("h1",Lt,[L(i(o(l).setLeaveDetails.total_leave_datetime)+" Day of "+i(o(l).setLeaveDetails.leave_type)+" ",1),e("span",Dt," ("+i(o(l).setLeaveDetails.leave_reason)+") ",1)])])]),e("div",$t,[St,e("div",Ct,[e("div",kt,[e("div",Rt,i(o(l).setLeaveDetails.reviewer_short_name),1),e("div",Tt,[e("h1",At,i(o(l).setLeaveDetails.reviewer_name),1),e("h1",Mt,i(o(l).setLeaveDetails.reviewer_designation),1)])])])]),e("div",Et,[Vt,e("div",Pt,[e("div",Yt,[Bt,e("div",Ut,[e("h1",Ot,i(o(l).setLeaveDetails.reviewer_name),1),e("h1",Ht," on "+i(o(x)(o(l).setLeaveDetails.leaverequest_date).format("DD-MMM-YYYY hh: mm:ss A")),1)])])])]),e("div",Nt,[a(g,{name:"",id:"",cols:"70",rows:"3",autoResize:"",placeholder:"Add Comment"})])])]),e("div",jt,[o(l).setLeaveDetails.can_withdraw_leave!==null&&o(l).setLeaveDetails.can_withdraw_leave?(c(),m("button",{key:0,class:"btn btn-orange px-5 mx-2",onClick:s[3]||(s[3]=h=>o(l).performLeaveWithdraw(o(l).setLeaveDetails.id))},"Withdraw")):j("",!0),o(l).setLeaveDetails.can_revoke_leave!==null&&o(l).setLeaveDetails.can_revoke_leave?(c(),m("button",{key:1,class:"btn btn-orange px-5 mx-2",onClick:d},"Revoke")):j("",!0),e("button",{class:"btn btn-orange px-5",onClick:d},"Post")])]),_:1},8,["visible"])],64)}}},It={class:"card top-line"},Wt={class:"card-body"},Qt={class:"row"},qt={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-content-center"},zt=e("h6",{class:"h-7 mt-3 text-lg font-semibold text-gray-900 modal-title"},"Org Leave Balance",-1),Kt={class:"my-2 d-flex justify-content-between align-items-center"},Gt=e("div",null,null,-1),Jt={class:"d-flex"},Xt={class:""},Zt=e("label",{for:" ",class:"text-lg font-semibold"},"Start Date",-1),ea={class:""},ta=e("label",{for:" ",class:"text-lg font-semibold mx-2"},"End Date",-1),aa={class:"mt-3 row"},oa={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},la={class:"mb-0 card leave-history"},sa={class:"card-body"},na={class:"flex justify-between"},da=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave history")],-1),ia={class:"d-flex justify-content-end"},ra=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),ca={class:"table-responsive"},pa={key:0},ma={key:1},ua={key:1},va={__name:"OrgLeaveDetails",setup($){const l=F();r(),r(),r(!0);const f=r(),D=r([]),v=r();r();const C=r({employee_name:{value:null,matchMode:R.STARTS_WITH,matchMode:R.EQUALS,matchMode:R.CONTAINS},status:{value:null,matchMode:R.EQUALS}}),k=r(["Pending","Approved","Rejected"]);return W(async()=>{await l.getOrgLeaveBalance(),await l.getAllEmployeesLeaveHistory(x().month()+1,x().year(),["Approved","Pending","Rejected"]),console.log("Org Leave details : "+l.array_orgLeaveHistory)}),(_,d)=>{const T=y("Calendar"),s=y("Column"),M=y("DataTable"),S=y("InputText"),V=y("OverlayPanel"),O=y("Dropdown"),H=y("Button");return c(),m(N,null,[e("div",It,[e("div",Wt,[e("div",Qt,[e("div",qt,[zt,e("div",Kt,[Gt,e("div",Jt,[e("div",Xt,[Zt,a(T,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":d[0]||(d[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"pl-3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",ea,[ta,a(T,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":d[1]||(d[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",style:{height:"30px"},onClick:d[2]||(d[2]=t=>o(l).getOrgLeaveBalance(o(x)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(x)(o(l).selectedEndDate).format("YYYY-MM-DD")))},"submit")])])]),e("div",null,[a(M,{value:o(l).array_orgLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:_.onRowExpand,onRowCollapse:_.onRowCollapse,expandedRows:D.value,"onUpdate:expandedRows":d[4]||(d[4]=t=>D.value=t),selection:v.value,"onUpdate:selection":d[5]||(d[5]=t=>v.value=t),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange,onRowSelect:_.onRowSelect,onRowUnselect:_.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:n(t=>[e("div",null,[a(M,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:v.value,"onUpdate:selection":d[3]||(d[3]=g=>v.value=g),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange},{default:n(()=>[a(s,{field:"leave_type",header:"Leave Type"},{default:n(()=>[L(i(t.data.leave_type),1)]),_:2},1024),a(s,{field:"opening_balance",header:"Opening Balance"}),a(s,{field:"availed",header:"availed"}),a(s,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:n(()=>[a(s,{expander:!0}),a(s,{field:"user_code",header:"Employee Id",sortable:""}),a(s,{field:"name",header:"Employee Name"}),a(s,{field:"location",header:"Location",sortable:!1}),a(s,{field:"department",header:"Department"}),a(s,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",aa,[e("div",oa,[e("div",la,[e("div",sa,[e("div",na,[da,e("div",ia,[ra,a(T,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:f.value,"onUpdate:modelValue":d[6]||(d[6]=t=>f.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:d[7]||(d[7]=t=>o(l).getAllEmployeesLeaveHistory(f.value.getMonth()+1,f.value.getFullYear(),k.value))},null,8,["modelValue"])])]),e("div",ca,[a(M,{value:o(l).array_orgLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:C.value,"onUpdate:filters":d[9]||(d[9]=t=>C.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:n(()=>[L(" No Employee data..... ")]),default:n(()=>[a(s,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:n(t=>[L(i(t.data.employee_name),1)]),filter:n(({filterModel:t,filterCallback:g})=>[a(S,{modelValue:t.value,"onUpdate:modelValue":p=>t.value=p,onInput:p=>g(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(s,{field:"leave_type",header:"Leave Type"}),a(s,{field:"start_date",header:"Start Date"},{body:n(t=>[L(i(o(x)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"end_date",header:"End Date"},{body:n(t=>[L(i(o(x)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"total_leave_datetime",header:"Total Leave Days"}),a(s,{field:"leave_reason",header:"Leave Reason"},{body:n(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(c(),m("div",pa,[e("p",{onClick:d[8]||(d[8]=(...g)=>_.toggle&&_.toggle(...g)),class:"font-medium text-orange-400 underline cursor-pointer"}," More... "),a(V,{ref:"overlayPanel",style:{height:"80px"}},{default:n(()=>[L(i(t.data.leave_reason),1)]),_:2},1536)])):(c(),m("div",ma,i(t.data.leave_reason??""),1))]),_:1}),a(s,{field:"status",header:"Status"},{body:n(({data:t})=>[e("span",{class:B("customer-badge status-"+t.status)},i(t.status),3)]),filter:n(({filterModel:t,filterCallback:g})=>[a(O,{modelValue:t.value,"onUpdate:modelValue":p=>t.value=p,onChange:p=>g(),options:k.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:n(p=>[p.value?(c(),m("span",{key:0,class:B("customer-badge status-"+p.value)},i(p.value),3)):(c(),m("span",ua,i(p.placeholder),1))]),option:n(p=>[e("span",{class:B("customer-badge status-"+p.option)},i(p.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(s,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:n(t=>[a(H,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:g=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},_a={class:"card top-line"},ha={class:"card-body"},ya={class:"row"},fa={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-items-center"},ga=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave Balance",-1),ba={class:"my-2 d-flex justify-content-between align-items-center"},xa=e("div",null,null,-1),wa={class:"d-flex"},La={class:""},Da=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"Start Date",-1),$a={class:""},Sa=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"End Date",-1),Ca={class:"mt-3 row"},ka={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Ra={class:"mb-0 card leave-history"},Ta={class:"card-body"},Aa={class:"flex justify-between"},Ma=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave history")],-1),Ea={class:"d-flex justify-content-end"},Va=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),Pa={class:"table-responsive"},Ya={key:0},Ba={key:1},Ua={key:1},Oa={__name:"TeamLeaveDetails",setup($){const l=F();r(),r(),r(),r(),r(),r(!0),r();const f=r([]),D=r(),v=r(),C=r({employee_name:{value:null,matchMode:R.STARTS_WITH,matchMode:R.EQUALS,matchMode:R.CONTAINS},status:{value:null,matchMode:R.EQUALS}}),k=r(["Pending","Approved","Rejected"]);return W(async()=>{await l.getTermLeaveBalance(),await l.getTeamLeaveHistory(x().month()+1,x().year(),["Approved","Pending","Rejected"])}),(_,d)=>{const T=y("Calendar"),s=y("Column"),M=y("DataTable"),S=y("InputText"),V=y("OverlayPanel"),O=y("Dropdown"),H=y("Button");return c(),m(N,null,[e("div",_a,[e("div",ha,[e("div",ya,[e("div",fa,[ga,e("div",ba,[xa,e("div",wa,[e("div",La,[Da,a(T,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":d[0]||(d[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"p-l3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",$a,[Sa,a(T,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":d[1]||(d[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",onClick:d[2]||(d[2]=t=>(o(l).getTermLeaveBalance(o(x)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(x)(o(l).selectedEndDate).format("YYYY-MM-DD")),o(l).canShowLoading=!0))},"submit")])])]),e("div",null,[a(M,{value:o(l).arrayTermLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:_.onRowExpand,onRowCollapse:_.onRowCollapse,expandedRows:f.value,"onUpdate:expandedRows":d[4]||(d[4]=t=>f.value=t),selection:D.value,"onUpdate:selection":d[5]||(d[5]=t=>D.value=t),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange,onRowSelect:_.onRowSelect,onRowUnselect:_.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:n(t=>[e("div",null,[a(M,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:D.value,"onUpdate:selection":d[3]||(d[3]=g=>D.value=g),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange},{default:n(()=>[a(s,{field:"leave_type",header:"Leave Type"},{default:n(()=>[L(i(t.data.leave_type),1)]),_:2},1024),a(s,{field:"opening_balance",header:"Opening Balance"}),a(s,{field:"availed",header:"availed"}),a(s,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:n(()=>[a(s,{style:{width:"1rem !important"},expander:!0}),a(s,{field:"user_code",header:"Employee Id",sortable:""}),a(s,{field:"name",header:"Employee Name"}),a(s,{field:"location",header:"Location",sortable:!1}),a(s,{field:"department",header:"Department"}),a(s,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",Ca,[e("div",ka,[e("div",Ra,[e("div",Ta,[e("div",Aa,[Ma,e("div",Ea,[Va,a(T,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:v.value,"onUpdate:modelValue":d[6]||(d[6]=t=>v.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:d[7]||(d[7]=t=>(o(l).getTeamLeaveHistory(v.value.getMonth()+1,v.value.getFullYear(),k.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",Pa,[a(M,{value:o(l).array_teamLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:C.value,"onUpdate:filters":d[9]||(d[9]=t=>C.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:n(()=>[L(" No Employee data..... ")]),default:n(()=>[a(s,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:n(t=>[L(i(t.data.employee_name),1)]),filter:n(({filterModel:t,filterCallback:g})=>[a(S,{modelValue:t.value,"onUpdate:modelValue":p=>t.value=p,onInput:p=>g(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(s,{field:"leave_type",header:"Leave Type"}),a(s,{field:"start_date",header:"Start Date"},{body:n(t=>[L(i(o(x)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"end_date",header:"End Date"},{body:n(t=>[L(i(o(x)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"total_leave_datetime",header:"Total Leave Days"}),a(s,{field:"leave_reason",header:"Leave Reason"},{body:n(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(c(),m("div",Ya,[e("p",{onClick:d[8]||(d[8]=(...g)=>_.toggle&&_.toggle(...g)),class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(V,{ref:"overlayPanel",style:{height:"80px"}},{default:n(()=>[L(i(t.data.leave_reason),1)]),_:2},1536)])):(c(),m("div",Ba,i(t.data.leave_reason??""),1))]),_:1}),a(s,{field:"status",header:"Status"},{body:n(({data:t})=>[e("span",{class:B("customer-badge status-"+t.status)},i(t.status),3)]),filter:n(({filterModel:t,filterCallback:g})=>[a(O,{modelValue:t.value,"onUpdate:modelValue":p=>t.value=p,onChange:p=>g(),options:k.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:n(p=>[p.value?(c(),m("span",{key:0,class:B("customer-badge status-"+p.value)},i(p.value),3)):(c(),m("span",Ua,i(p.placeholder),1))]),option:n(p=>[e("span",{class:B("customer-badge status-"+p.option)},i(p.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(s,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:n(t=>[a(H,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:g=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},Ha={class:"w-full"},Na={key:0},ja=e("p",{class:"font-semibold text-2xl text-[#000] font-['Poppins]"},"Leave",-1),Fa=e("p",{class:"font-semibold text-sm"},[L("Here you can apply Leave,"),e("a",null,[e("span",{class:"underline cursor-pointer hover:text-indigo-500"}," Company's Leave Policy")]),L(".")],-1),Ia=[ja,Fa],Wa={key:1,class:"flex justify-between"},Qa={class:"divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},qa=e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Leave Balance")],-1),za={key:0,class:"nav-item text-muted",role:"presentation"},Ka=e("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Team Leave Balance",-1),Ga=[Ka],Ja={key:1,class:"nav-item text-muted",role:"presentation"},Xa=e("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#org_leave","aria-selected":"false",tabindex:"-1",role:"tab"}," Org Leave Balance",-1),Za=[Xa],eo=e("div",{class:"flex items-center"},[e("div",{class:"mr-3"}),e("a",{href:"/attendance-leave-policydocument",id:"",class:"text-md font-medium border-1 border-black rounded-lg text-center bg-black text-white my-auto p-1.5 dark:text-white",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")],-1),to=e("div",null,null,-1),ao={class:"tab-content py-2",id:"pills-tabContent"},oo={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},lo={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},so={class:"tab-pane show",id:"org_leave",role:"tabpanel","aria-labelledby":"pills-profile-tab"},no=e("h6",{class:"mb-4 modal-title fs-21"}," Leave Request",-1),io={__name:"LeaveModule",setup($){const l=F(),f=q(),D=r(!1);return W(()=>{l.getEmployeeLeaveBalance()}),(v,C)=>{const k=y("leaveapply2"),_=y("Dialog");return c(),m(N,null,[o(l).canShowLoading?(c(),G(ke,{key:0,class:"absolute z-50 bg-white"})):j("",!0),e("div",Ha,[e("div",null,[o(f).current_user_role==5?(c(),m("div",Na,Ia)):(c(),m("div",Wa,[e("ul",Qa,[qa,o(f).current_user_role==1||o(f).current_user_role==2||o(f).current_user_role==3||o(f).current_user_role==4?(c(),m("li",za,Ga)):j("",!0),o(f).current_user_role==1||o(f).current_user_role==2||o(f).current_user_role==3?(c(),m("li",Ja,Za)):j("",!0)]),eo])),to]),e("div",ao,[e("div",oo,[a(Ft)]),e("div",lo,[a(Oa)]),e("div",so,[a(va)])])]),a(_,{visible:D.value,"onUpdate:visible":C[0]||(C[0]=d=>D.value=d),style:{width:"80vw"},breakpoints:{"960px":"75vw","641px":"100vw"}},{header:n(()=>[no]),default:n(()=>[a(k)]),_:1},8,["visible"])],64)}}},u=J(io),ro=de();u.use(X,{ripple:!0});u.use(ye);u.use(ie);u.use(_e);u.use(ro);u.directive("tooltip",re);u.directive("badge",ce);u.directive("ripple",Z);u.directive("styleclass",pe);u.directive("focustrap",ee);u.component("Button",te);u.component("DataTable",ve);u.component("Column",ae);u.component("ColumnGroup",he);u.component("Row",ge);u.component("Toast",me);u.component("ConfirmDialog",ue);u.component("Dropdown",oe);u.component("InputText",le);u.component("Dialog",se);u.component("ProgressSpinner",fe);u.component("Calendar",be);u.component("Checkbox",xe);u.component("Chips",we);u.component("MultiSelect",Le);u.component("Textarea",De);u.component("OverlayPanel",$e);u.component("Sidebar",Se);u.mount("#LeaveModule");
