import{d as V}from"./dayjs.min-2f06af28.js";import{e as I}from"./exceljs.min-1f699027.js";import{a as W,c as D}from"./index-362795f3.js";import{p as H,r as f,g as i,d as b,e as g,f as t,t as h,i as O,_ as B,o as T,b as E,m as x,n as R,F as P,l as F,A as Y,j as G,h as z,k as L,D as X,E as q}from"./app-70c0ffc0.js";import{L as K}from"./LoadingSpinner-47fb1c26.js";/* empty css                                                                       */const A=H("useAttendanceDashboardMainStore",()=>{const r=f(!1);f();const n=f(),p=f(),d=f(!1),_=f([]),c=f(),o=f(),l=f([]);return{canShowLoading:r,attendanceDashboardWorkShiftSource:p,getAttendanceDashboardMainSource:async()=>{r.value=!0;let e="/get-attendance-dashboard";await W.get(e).then(s=>{n.value=s.data.attendance_overview,p.value=s.data.work_shift;let m=Object.entries(s.data.upcomings).map(a=>({title:a[0],value:a[1]}));o.value=m}).finally(()=>{r.value=!1})},attendanceOverview:n,canShowShiftDetails:d,currentlySelectedShiftDetails:_,currentlySelectedShiftName:c,downloadShiftDetails:l,attendanceDashboardUpcoming:o}}),J={key:0,class:"grid grid-cols-7 gap-4"},Q={class:"bg-white rounded-lg p-2 border"},Z={class:"px-auto flex justify-center"},tt={class:"text-2xl font-semibold text-center"},et=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Present",-1),ot={class:"bg-white rounded-lg p-2 border"},st={class:"px-auto flex justify-center"},nt={class:"text-2xl font-semibold text-center"},at=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Absent",-1),it={class:"bg-white rounded-lg p-2 border"},ct={class:"px-auto flex justify-center"},dt={class:"text-2xl font-semibold text-center"},lt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Leave",-1),rt={class:"bg-white rounded-lg p-2 border"},_t={class:"px-auto flex justify-center"},ut={class:"text-2xl font-semibold text-center"},pt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Late coming",-1),ht={class:"bg-white rounded-lg p-2 border"},ft={class:"px-auto flex justify-center"},mt={class:"text-2xl font-semibold text-center"},xt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Early going",-1),vt={class:"bg-white rounded-lg p-2 border"},bt={class:"px-auto flex justify-center"},gt={class:"text-2xl font-semibold text-center"},yt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Missed in punch",-1),wt={class:"bg-white rounded-lg p-2 border"},St={class:"px-auto flex justify-center"},$t={class:"text-2xl font-semibold text-center"},kt=t("p",{class:"text-sm underline font-semibold text-center text-gray-500"},"Missed out punch",-1),Dt={__name:"attendanceCount",setup(r){const n=A();return(p,d)=>i(n).attendanceOverview?(b(),g("div",J,[t("div",Q,[t("div",Z,[t("span",tt,h(i(n).attendanceOverview.present_count),1)]),et]),t("div",ot,[t("div",st,[t("span",nt,h(i(n).attendanceOverview.absent_count),1)]),at]),t("div",it,[t("div",ct,[t("span",dt,h(i(n).attendanceOverview.leave_emp_count),1)]),lt]),t("div",rt,[t("div",_t,[t("span",ut,h(i(n).attendanceOverview.lg_count),1)]),pt]),t("div",ht,[t("div",ft,[t("span",mt,h(i(n).attendanceOverview.eg_count),1)]),xt]),t("div",vt,[t("div",bt,[t("span",gt,h(i(n).attendanceOverview.mip_count),1)]),yt]),t("div",wt,[t("div",St,[t("span",$t,h(i(n).attendanceOverview.mop_count),1)]),kt])])):O("",!0)}},Ct={},Et={class:"p-2 overflow-hidden bg-white rounded-lg border",style:{height:"200px"}},At=t("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Exception Analytics",-1),Mt=t("div",{class:"h-full overflow-x-scroll bg-white rounded-lg"},[t("p",{class:"font-medium text-sm text-center"},"No data to display")],-1),jt=[At,Mt];function Lt(r,n){return b(),g("div",Et,jt)}const Rt=B(Ct,[["render",Lt]]);const Ot={class:"bg-white rounded-lg p-2 border"},Pt=t("p",{class:"font-semibold text-[14px] text-[#000] font-['Poppins] text-center"},"Attendance Analytics",-1),Ut={class:"grid grid-cols-2 gap-4 my-2.5"},Bt={class:"h-full"},Tt={class:"flex items-center"},Ft={class:"my-auto"},Nt=t("div",null,null,-1),Vt={__name:"attendanceAnalytics",setup(r){T(()=>{n.value=_(),p.value=c()});const n=f(),p=f(),d=f(0),_=()=>{const o=getComputedStyle(document.body);return{labels:["Bio-Metric","Mobile","Web"],datasets:[{data:[1,1,1],backgroundColor:["rgba(122, 94, 162, 1)","rgba(255, 177, 184, 1)","rgba(107, 183, 192, 1)"],hoverBackgroundColor:[o.getPropertyValue("--blue-400"),o.getPropertyValue("--yellow-400"),o.getPropertyValue("--green-400")]}]}},c=()=>{const o=getComputedStyle(document.documentElement),l=o.getPropertyValue("--text-color");return o.getPropertyValue("--text-color-secondary"),o.getPropertyValue("--surface-border"),{maintainAspectRatio:!1,aspectRatio:1,plugins:{labels:{usePointStyle:!0},title:{display:!1,text:"Custom Chart Title"},legend:{display:!1,labels:{fontColor:l}}}}};return(o,l)=>{const v=E("Chart");return b(),g("div",Ot,[Pt,t("div",Ut,[t("div",Bt,[x(v,{type:"pie",data:n.value,options:p.value},null,8,["data","options"])]),t("div",Tt,[t("div",Ft,[t("div",null,[t("button",{class:R(["orange_btn font-semibold text-sm",[d.value===1?"bg-white text-slate-600 border border-black":"text-slate-600"]]),onClick:l[0]||(l[0]=e=>d.value=0)},"Check In ",2),t("button",{class:R(["Enable_btn font-semibold text-sm",[d.value===1?"bg-[#d4d4d4] text-slate-600":"text-slate-600"]]),onClick:l[1]||(l[1]=e=>d.value=1)},"Check Out ",2)]),Nt])])])])}}},It={class:"p-2 overflow-hidden bg-white rounded-lg border",style:{height:"200px"}},Wt=t("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Upcomings",-1),Ht={class:"h-full overflow-x-scroll bg-white rounded-lg"},Yt={class:"px-auto"},Gt={class:"p-2 my-2 transition duration-700 ease-in-out bg-[#E4ECFF] rounded-lg cursor-pointer hover:-translate-y-1 hover:scale-100"},zt={class:"flex px-2 justify-between items-center"},Xt={class:"text-[14px] font-semibold"},qt={class:"flex items-center gap-6"},Kt={class:"text-xl font-semibold text-black"},Jt=t("span",null,[t("i",{class:"fa fa-chevron-right","aria-hidden":"true"})],-1),Qt={key:1,class:"font-medium text-sm text-center"},Zt={__name:"Upcomings",setup(r){const n=A();return(p,d)=>(b(),g("div",It,[Wt,t("div",Ht,[i(n).attendanceDashboardUpcoming?(b(!0),g(P,{key:0},F(i(n).attendanceDashboardUpcoming,_=>(b(),g("div",Yt,[t("div",Gt,[t("div",zt,[t("div",null,[t("span",Xt,h(_.title),1)]),t("div",qt,[t("span",Kt,h(_.value),1),Jt])])])]))),256)):(b(),g("p",Qt,"No data to display"))])]))}},te={key:0,class:"bg-white p-2 rounded-lg border"},ee=t("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Shift",-1),oe={class:"grid grid-cols-6 gap-2 my-2"},se=["onClick"],ne={class:"w-full bg-gray-200 p-2 rounded-lg"},ae={class:"font-semibold text-[12px] text-[#000] font-['Poppins]"},ie={class:"p-2"},ce=t("p",{class:"font-semibold text-sm text-[#000] font-['Poppins]"},"Shift Timing",-1),de={class:"font-medium text-[12px] text-gray-600 font-['Poppins]"},le={class:"my-3"},re=t("p",{class:"font-semibold text-sm text-[#000] font-['Poppins]"},"Total Employees",-1),_e={class:"font-medium text-[12px] text-gray-600 font-['Poppins]"},ue=Y('<div class="flex justify-between"><div><p class="font-semibold text-sm text-[#000] font-[&#39;Poppins]">Present</p><p class="font-medium text-[12px] text-gray-600 font-[&#39;Poppins]">-</p></div><div class="mx-3"><p class="font-semibold text-sm text-[#000] font-[&#39;Poppins]">Absent</p><p class="font-medium text-[12px] text-gray-600 font-[&#39;Poppins]">-</p></div></div>',1),pe={__name:"Shifts",setup(r){const n=A();function p(d){const[_,c]=d.split(":").map(Number),o=_>=12?"PM":"AM";return`${_%12===0?12:_%12}:${String(c).padStart(2,"0")} ${o}`}return(d,_)=>i(n).attendanceDashboardWorkShiftSource?(b(),g("div",te,[ee,t("div",oe,[(b(!0),g(P,null,F(i(n).attendanceDashboardWorkShiftSource,(c,o)=>(b(),g("div",{class:"bg-gray-100 w-[180px] h-[200px] rounded-lg cursor-pointer",onClick:l=>(i(n).canShowShiftDetails=!0,i(n).currentlySelectedShiftDetails={...c.work_shift_employee_data},i(n).downloadShiftDetails.push({...c.work_shift_employee_data})),key:o},[t("div",ne,[t("span",ae,h(c.work_shift_employee_data[0].shift_name),1)]),t("div",ie,[t("div",null,[ce,t("p",de,h(p(c.work_shift_employee_data[0].shift_start_time))+" - "+h(p(c.work_shift_employee_data[0].shift_end_time)),1)]),t("div",le,[re,t("p",_e,h(c.work_shift_assigned_employees?c.work_shift_assigned_employees:"-"),1)]),ue])],8,se))),128))])])):O("",!0)}};var U={},he={get exports(){return U},set exports(r){U=r}};(function(r,n){(function(p,d){d()})(D,function(){function p(e,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function d(e,s,m){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){v(a.response,s,m)},a.onerror=function(){console.error("could not download file")},a.send()}function _(e){var s=new XMLHttpRequest;s.open("HEAD",e,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(s)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof D=="object"&&D.global===D?D:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,s,m){var a=o.URL||o.webkitURL,u=document.createElement("a");s=s||e.name||"download",u.download=s,u.rel="noopener",typeof e=="string"?(u.href=e,u.origin===location.origin?c(u):_(u.href)?d(e,s,m):c(u,u.target="_blank")):(u.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){c(u)},0))}:"msSaveOrOpenBlob"in navigator?function(e,s,m){if(s=s||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(p(e,m),s);else if(_(e))d(e,s,m);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){c(a)})}}:function(e,s,m,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return d(e,s,m);var u=e.type==="application/octet-stream",k=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||u&&k||l)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var $=w.result;$=y?$:$.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=$:location=$,a=null},w.readAsDataURL(e)}else{var S=o.URL||o.webkitURL,C=S.createObjectURL(e);a?a.location=C:location.href=C,a=null,setTimeout(function(){S.revokeObjectURL(C)},4e4)}});o.saveAs=v.saveAs=v,r.exports=v})})(he);const M=r=>(X("data-v-01c57856"),r=r(),q(),r),fe={class:"w-full"},me=M(()=>t("p",{class:"mb-2 text-2xl text-black font-semibold"}," Attendance dashboard ",-1)),xe={class:"bg-white p-2 rounded-lg border flex justify-between"},ve={class:"mx-2"},be={class:"font-[14px] font-['Poppins'] text-gray-500"},ge={class:"mb-2 text-sm font-semibold"},ye=M(()=>t("div",{class:"flex justify-end gap-5 mx-4"},null,-1)),we={class:"my-3"},Se={class:"grid grid-cols-3 gap-6"},$e={class:"my-3"},ke={class:"absolute left-0 mx-4 font-semibold fs-5"},De={class:"relative right-0 mx-4 font-semibold fs-5"},Ce=M(()=>t("p",{class:"relative left-2 font-['poppins']"},"Download",-1)),Ee=M(()=>t("svg",{width:"22px",height:"16px",viewBox:"0 0 22 16"},[t("path",{d:"M2,10 L6,13 L12.8760559,4.5959317 C14.1180021,3.0779974 16.2457925,2.62289624 18,3.5 L18,3.5 C19.8385982,4.4192991 21,6.29848669 21,8.35410197 L21,10 C21,12.7614237 18.7614237,15 16,15 L1,15",id:"check"}),t("polyline",{points:"4.5 8.5 8 11 11.5 8.5",class:"svg-out"}),t("path",{d:"M8,1 L8,11",class:"svg-out"})],-1)),Ae=[Ee],Me={class:"mt-6"},je={__name:"attendanceDashboard",setup(r){const n=A();T(async()=>{await n.getAttendanceDashboardMainSource()});const p=async()=>{const c=new I.Workbook,o=c.addWorksheet("Sheet1"),l=["user_code","user_code","shift_start_time","shift_end_time","shift_end_time"],v="this report generated by ABShrms payroll software ",e=l;o.addRow(e).eachCell((y,w)=>{y.fill={type:"pattern",pattern:"solid",fgColor:{argb:"252f70"}},y.font={bold:!0,color:{argb:"ffffff"}},o.getColumn(w).width=20}),Object.values(n.currentlySelectedShiftDetails).forEach((y,w)=>{console.log(y);const S=[];e.forEach(j=>{S.push(y[j])}),o.addRow(S);const N={fill:{type:"pattern",pattern:"solid",fgColor:(w+2)%2===1?{argb:"cad1fa"}:{argb:"cad1fa"}}};o.addRow(S).eachCell(j=>{j.style=N})}),[["","",""],["","",""],[v,"",""]].forEach(y=>{o.addRow(y)});const a=await c.xlsx.writeBuffer(),u=window.URL.createObjectURL(new Blob([a])),k=document.createElement("a");k.href=u,k.download="shift.xlsx",k.click(),window.URL.revokeObjectURL(u)},d=f(!1),_=f("downloaded");return(c,o)=>{const l=E("Column"),v=E("DataTable"),e=E("Sidebar");return b(),g(P,null,[i(n).canShowLoading?(b(),G(K,{key:0,class:"absolute z-50 bg-white"})):O("",!0),t("div",fe,[me,t("div",xe,[t("div",ve,[t("p",be,[z(" Daily Analytics - "),t("span",ge,h(i(V)(new Date).format("MMMM DD,YYYY")),1)])]),ye]),t("div",we,[x(Dt)]),t("div",Se,[t("div",null,[x(Rt)]),t("div",null,[x(Vt)]),t("div",null,[x(Zt)])]),t("div",$e,[x(pe)])]),x(e,{visible:i(n).canShowShiftDetails,"onUpdate:visible":o[1]||(o[1]=s=>i(n).canShowShiftDetails=s),position:"right",class:"w-full"},{header:L(()=>[t("p",ke,h(i(n).currentlySelectedShiftDetails?i(n).currentlySelectedShiftDetails[0].shift_name:null)+" Reports",1),t("div",De,[t("button",{class:"bg-[#E6E6E6] p-2 mx-2 rounded-md w-[120px]",onClick:o[0]||(o[0]=s=>(d.value=!d.value,p()))},[Ce,t("div",{id:"btn-download",style:{position:"absolute",right:"0"},class:R([d.value==!0?_.value:" "])},Ae,2)])])]),default:L(()=>[t("div",Me,[x(v,{value:i(n).currentlySelectedShiftDetails?i(n).currentlySelectedShiftDetails:[]},{default:L(()=>[x(l,{field:"user_code",header:"User code"}),x(l,{field:"name",header:"Name"}),x(l,{field:"shift_start_time",header:"Shift start time"}),x(l,{field:"shift_end_time",header:"Shift end time"}),x(l,{field:"grace_time",header:"Grace time"})]),_:1},8,["value"])])]),_:1},8,["visible"])],64)}}},Te=B(je,[["__scopeId","data-v-01c57856"]]);export{Te as default};
