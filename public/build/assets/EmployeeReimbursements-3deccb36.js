import{Q as J,V as _,S as N,W as D,X as K,c as x,h as n,e as l,Y as t,j as c,a as O,w as s,F as X,g as f,o as P,t as u,E as G,P as W,G as q,R as H,q as Q}from"./index-39918fa6.js";import{d as Y,c as Z}from"./pinia-68c883fa.js";import{C as ee,T as oe,B as le,S as te,F as ae,d as ne,c as se,f as ie,b as re,e as ce,g as de}from"./styleclass.esm-f772d017.js";import{s as me}from"./confirmdialog.esm-9db873da.js";import{D as _e}from"./dialogservice.esm-20532b1b.js";import{s as ue}from"./toast.esm-daf18d83.js";import{s as pe}from"./progressspinner.esm-2f2847cf.js";import{s as ve}from"./row.esm-6ebc942e.js";import{s as be}from"./columngroup.esm-9dd1458e.js";import"./fileupload.esm-b066e26e.js";import{s as fe}from"./calendar.esm-d70260b0.js";import{s as ye}from"./textarea.esm-39efa0eb.js";import{s as ge}from"./chips.esm-7020dae6.js";const he=Y("employee_reimbursment_service",()=>{const R=J(),o=_([]),g=_(!0),a=_(!1),k=_({claim_type:"",claim_amount:Number,eligible_amount:Number,date_of_dispatch:"",proof_of_delivery:"",reimbursment_remarks:""}),w=()=>{b.value=!1,a.value=!0},y=()=>{g.value=!0,r.value=!1},r=_(!1),h=_(!1),m=N({travelled_date:"",mode_of_transport:"",travel_from:"",travel_to:"",total_distance_travelled:"",Amt_km:"",local_convenyance_total_amount:"",local_conveyance_remarks:""}),T=()=>{b.value=!1,h.value=!0,b.value=!1},V=()=>{a.value=!1,h.value=!1,b.value=!1},C=()=>{g.value=!1,r.value=!0},S=d=>d.toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"}),b=_(!1),e=_([{label:"Mobile Bills",value:"Mobile Bills"},{label:"Accommodation",value:"Accommodation"},{label:"Travel Expenses",value:"Travel Expenses"},{label:"Miscellaneous",value:"Miscellaneous"},{label:"Medical Expenses",value:"Medical Expenses"},{label:"Others",value:"Others"}]),A=_([{label:"public Transport",value:"public Transport"},{label:"Car",value:"Car"},{label:"Bike",value:"Bike"}]),p=_(),$=_(),F=d=>{d.target.files&&d.target.files[0]&&(p.file=d.target.files[0],p.fileSize=Math.round($.size/1024/1024*100)/100,p.fileExtention=p.file.name.split(".").pop(),p.fileName=p.file.name.split(".").shift(),p.isImage=["jpg","jpeg","png","gif"].includes(p.fileExtention),console.log(p.file))},B=_(),L=_(!0);_();const j=()=>{let d=window.location.origin+"/fetch_all_reimbursements";console.log("AJAX URL : "+d),D.get(d).then(v=>{B.value=v.data,console.log(v.data),L.value=!1})},E=N(k.value),U=N(p),z=()=>{b.value=!0,o.value.push(k.value),a.value=!1,console.log(k.value),console.log("post reiburmentt"),console.log(p.value);const d=JSON.stringify({reimbursement_data:E,reimbursement_attachment:U});console.log(d);let v=window.location.origin+"/saveReimbursementsData";D.post(v,{reimbursement_data:E,reimbursement_attachment:U}).then(M=>{}).catch(M=>{console.log(M)}),R.add({severity:"success",summary:"Saved",detail:"Reimbursement drafted",life:3e3})},I=_([]);return{hideDialog:V,localconvergance_dailog:h,employee_reimbursement:k,employee_local_conveyance:m,onclickOpenLocalConverganceDailog:T,reimbursements_dailog:a,reimbursementsScreen:g,localconverganceScreen:r,fetch_data_from_reimbursment:j,data_reimbursements:B,loading_spinner:L,formatDate:S,amount_calculation:()=>{console.log(m.mode_of_transport),m.mode_of_transport=="Car"?(console.log("Car"),m.local_convenyance_total_amount=m.total_distance_travelled*6,console.log(m.local_convenyance_total_amount)):m.mode_of_transport=="Bike"?(m.local_convenyance_total_amount=m.total_distance_travelled*3.5,console.log("Bike")):m.local_convenyance_total_amount=null},employee_reimbursement_attachment_upload:F,employee_reimbursement_attachment:p,onclickSwitchToReimbursmentTab:y,file:$,reimbursement_data:E,reimbursement_attachment:U,post_reimbursment_data:z,reimbursement_datas:o,reimbursment_claim_types:e,onclickOpenReimbursmentDailog:w,post_data_for_local_convergance:()=>{let d=window.location.origin+"/testCreateLocalCovergance";console.log("AJAX URL : "+d),D.post(d).then(v=>{console.log(v)}).catch(v=>console.log(v)).finally(v=>{console.log(v)}),h.value=!1,console.log(m.value),I.value.push(m),R.add({severity:"success",summary:"Draft",detail:"Draft Saved",life:3e3})},fetch_data_for_local_convergance:()=>{let d=window.location.origin+"/fetch_all_reimbursements";console.log("AJAX URL : "+d),D.get(d).then(v=>{console.log(v.data),L.value=!1})},onclickSwitchToLocalCoverganceTab:C,data_local_convergance:I,local_Conveyance_Mode_of_transport:A}});const ke={class:"reimbursement-wrapper mt-30"},Ce={class:"card left-line mb-2"},we={class:"card-body pb-1 pt-1"},Te={class:"row"},Ve={class:"col-sm-12 col-md-7 col-lg-7 col-xl-7 col-xxl-7"},De={class:"nav nav-pills nav-tabs-dashed",role:"tablist"},xe={class:"nav-item text-muted",role:"presentation"},Pe={class:"nav-item text-muted ms-5",role:"presentation"},Re={class:"col-sm-12 col-md-5 col-lg-5 col-xl-5 col-xxl-5 d-flex justify-content-end"},Se=l("i",{class:"fa fa-plus-circle me-1"},null,-1),Ae=l("i",{class:"fa fa-plus-circle me-1"},null,-1),Le={class:"card"},Ee={class:"card-body"},Ue={class:"tab-content",id:"pills-tabContent"},Ne={class:"tab-pane show fade active",id:"reimbursement",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Oe={id:"table"},$e={class:"card"},Be={class:"field"},Ie=l("label",{for:"name"},"Claim Type",-1),Me={class:"formgrid grid"},Fe={class:"field col"},je=l("label",{for:"Claim Amount"},"Claim Amount",-1),ze={class:"field col"},Je=l("label",{for:"Eligible Amount"},"Eligible Amount",-1),Ke={class:"field"},Xe=l("label",{class:"mb-3"},"Remarks",-1),Ge={class:"formgrid"},We={class:"field"},qe=l("label",{class:"mb-3"},"file Upload",-1),He={class:"formgrid"},Qe=l("label",{id:"file_upload",for:"upload"},"Choose file",-1),Ye={class:"tab-pane fade",id:"localConveyance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ze={class:"card"},eo=l("h5",{style:{"text-align":"center"}},"Please wait...",-1),oo={key:0,class:"text-center"},lo={class:"field"},to=l("label",{for:"name"},"Date",-1),ao={class:"field col"},no=l("label",{for:"Claim Amount"},"Mode of transport",-1),so={class:"formgrid grid"},io={class:"field col"},ro=l("label",{for:"Eligible Amount"},"From",-1),co={class:"field col"},mo=l("label",{for:"Claim Amount"},"To",-1),_o={class:"formgrid grid"},uo={class:"field col"},po=l("label",{for:"Eligible Amount"},"Total Distance",-1),vo={class:"field col"},bo=l("label",{for:"Eligible Amount"},"Amt/Km",-1),fo={class:"field col"},yo=l("label",{for:"Eligible Amount"},"Amount",-1),go={class:"field col"},ho=l("label",{for:"Eligible Amount"},"Remarks",-1),ko={__name:"EmployeeReimbursements",setup(R){const o=he();return K(()=>{o.fetch_data_for_local_convergance()}),(g,a)=>{const k=f("Toast"),w=f("Calendar"),y=f("Button"),r=f("Column"),h=f("DataTable"),m=f("Dropdown"),T=f("InputNumber"),V=f("Textarea"),C=f("Dialog"),S=f("ProgressSpinner"),b=f("InputText");return P(),x(X,null,[n(k),l("div",ke,[l("div",Ce,[l("div",we,[l("div",Te,[l("div",Ve,[l("ul",De,[l("li",xe,[l("a",{class:"nav-link active pb-2","data-bs-toggle":"tab",href:"#reimbursement","aria-selected":"true",role:"tab",onClick:a[0]||(a[0]=(...e)=>t(o).onclickSwitchToReimbursmentTab&&t(o).onclickSwitchToReimbursmentTab(...e))}," Reimbursement ")]),l("li",Pe,[l("a",{class:"nav-link pb-2","data-bs-toggle":"tab",href:"#localConveyance","aria-selected":"true",role:"tab",onClick:a[1]||(a[1]=(...e)=>t(o).onclickSwitchToLocalCoverganceTab&&t(o).onclickSwitchToLocalCoverganceTab(...e))}," Local Conveyance ")])])]),l("div",Re,[n(w,{modelValue:g.date,"onUpdate:modelValue":a[2]||(a[2]=e=>g.date=e),view:"month",dateFormat:"mm/yy",class:"mr-4",placeholder:"Select Month"},null,8,["modelValue"]),t(o).reimbursementsScreen?(P(),x("button",{key:0,onClick:a[3]||(a[3]=(...e)=>t(o).onclickOpenReimbursmentDailog&&t(o).onclickOpenReimbursmentDailog(...e)),class:"btn btn-orange"},[Se,c("Add Claim ")])):O("",!0),t(o).localconverganceScreen?(P(),x("button",{key:1,onClick:a[4]||(a[4]=(...e)=>t(o).onclickOpenLocalConverganceDailog&&t(o).onclickOpenLocalConverganceDailog(...e)),class:"btn btn-orange"},[Ae,c("Add Claim ")])):O("",!0)])])])]),l("div",Le,[l("div",Ee,[l("div",Ue,[l("div",Ne,[l("div",Oe,[l("div",null,[l("div",$e,[n(h,{ref:"dt",value:t(o).reimbursement_datas,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:s(()=>[n(r,{exportable:!1,style:{"min-width":"8rem"}},{body:s(e=>[n(y,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:A=>g.confirmDeleteProduct(e.data)},null,8,["onClick"])]),_:1}),n(r,{header:"Claim Type",style:{"min-width":"8rem"}},{body:s(e=>[c(u(e.data.claim_type),1)]),_:1}),n(r,{field:"",header:"Claim Amount",style:{"min-width":"12rem"}},{body:s(e=>[c(u("₹"+e.data.claim_amount),1)]),_:1}),n(r,{field:"",header:"Eligible Amount",style:{"min-width":"12rem"}},{body:s(e=>[c(u("₹"+e.data.eligible_amount),1)]),_:1}),n(r,{field:"",header:"Remarks",style:{"min-width":"12rem"}},{body:s(e=>[c(u(e.data.reimbursment_remarks),1)]),_:1}),n(r,{field:"",header:"Status",style:{"min-width":"12rem"}},{body:s(e=>[c(u(e.data.eligible_amount),1)]),_:1}),n(r,{field:"",header:"Date Of Dispatch",style:{"min-width":"12rem"}},{body:s(e=>[c(u("₹"+e.data.eligible_amount),1)]),_:1}),n(r,{field:"",header:"Proof Of Delivery",style:{"min-width":"12rem"}},{body:s(e=>[c(u("₹"+e.data.eligible_amount),1)]),_:1})]),_:1},8,["value"])]),n(C,{visible:t(o).reimbursements_dailog,"onUpdate:visible":a[10]||(a[10]=e=>t(o).reimbursements_dailog=e),style:{width:"450px"},header:"Reimbursement Detials",modal:!0,class:"p-fluid"},{footer:s(()=>[n(y,{label:"Cancel",icon:"pi pi-times",style:{height:"30px",color:"black"},class:"p-button-text",onClick:t(o).hideDialog},null,8,["onClick"]),n(y,{label:"Save",disabled:!(!t(o).employee_reimbursement.claim_type==""&&!t(o).employee_reimbursement.claim_amount==""),icon:"pi pi-check",style:{height:"30px",background:"rgb(255 135 38)",color:"white"},onClick:t(o).post_reimbursment_data},null,8,["disabled","onClick"])]),default:s(()=>[l("div",Be,[Ie,n(m,{modelValue:t(o).employee_reimbursement.claim_type,"onUpdate:modelValue":a[5]||(a[5]=e=>t(o).employee_reimbursement.claim_type=e),options:t(o).reimbursment_claim_types,optionLabel:"label",optionValue:"value",placeholder:"Select Claim Type"},null,8,["modelValue","options"])]),l("div",Me,[l("div",Fe,[je,n(T,{modelValue:t(o).employee_reimbursement.claim_amount,"onUpdate:modelValue":a[6]||(a[6]=e=>t(o).employee_reimbursement.claim_amount=e),mode:"currency",currency:"INR",locale:"en-IN"},null,8,["modelValue"])]),l("div",ze,[Je,n(T,{modelValue:t(o).employee_reimbursement.eligible_amount,"onUpdate:modelValue":a[7]||(a[7]=e=>t(o).employee_reimbursement.eligible_amount=e),mode:"currency",currency:"INR",locale:"en-IN",integeronly:""},null,8,["modelValue"])])]),l("div",Ke,[Xe,l("div",Ge,[n(V,{modelValue:t(o).employee_reimbursement.reimbursment_remarks,"onUpdate:modelValue":a[8]||(a[8]=e=>t(o).employee_reimbursement.reimbursment_remarks=e),autoResize:"",rows:"2",cols:"30"},null,8,["modelValue"])])]),l("div",We,[qe,l("div",He,[l("input",{onChange:a[9]||(a[9]=e=>t(o).employee_reimbursement_attachment_upload(e)),ref:"employee_service.employee_reimbursement_attachment",type:"file",id:"upload",hidden:""},null,544),Qe])])]),_:1},8,["visible"])])])])]),l("div",Ye,[l("div",null,[l("div",Ze,[n(C,{header:"Header",visible:t(o).loading_spinner,"onUpdate:visible":a[11]||(a[11]=e=>t(o).loading_spinner=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:s(()=>[n(S,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:s(()=>[eo]),_:1},8,["visible"]),n(h,{ref:"dt",value:t(o).data_local_convergance,dataKey:"id",paginator:!0,rows:8,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{footer:s(()=>[!t(o).data_local_convergance.length==0?(P(),x("div",oo,[n(y,{label:"Submit",icon:"pi pi-check",class:"px-6",style:{background:"#003056"}})])):O("",!0)]),default:s(()=>[n(r,{exportable:!1,style:{"min-width":"8rem"}},{body:s(e=>[n(y,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:A=>g.confirmDeleteProduct(e.data)},null,8,["onClick"])]),_:1}),n(r,{field:"reimbursement_date",header:"Date",style:{"min-width":"12rem"},dataType:"date"},{body:s(e=>[c(u(t(o).formatDate(e.data.travelled_date)),1)]),_:1}),n(r,{header:"Mode Of Transport",style:{"min-width":"12rem"}},{body:s(e=>[c(u(e.data.mode_of_transport),1)]),_:1}),n(r,{field:"travel_from",header:"From ",style:{"min-width":"8rem"}},{body:s(e=>[c(u(e.data.travel_from),1)]),_:1}),n(r,{field:"travel_to",header:"To",style:{"min-width":"8rem"}},{body:s(e=>[c(u(e.data.travel_to),1)]),_:1}),n(r,{field:"total_distance_travelled",header:"Total Distance",style:{"min-width":"12rem"}},{body:s(e=>[c(u(e.data.total_distance_travelled),1)]),_:1}),n(r,{field:"Amt_km",header:"Amt/Km",style:{"min-width":"12rem"}},{body:s(e=>[c(u(e.data.Amt_km),1)]),_:1}),n(r,{field:"local_convenyance_total_amount",header:"Amount",style:{"min-width":"12rem"}},{body:s(e=>[c(u(e.data.local_convenyance_total_amount),1)]),_:1}),n(r,{field:"local_conveyance_remarks",header:"Remarks",style:{"min-width":"12rem"}},{body:s(e=>[c(u(e.data.local_conveyance_remarks),1)]),_:1})]),_:1},8,["value"])]),n(C,{visible:t(o).localconvergance_dailog,"onUpdate:visible":a[20]||(a[20]=e=>t(o).localconvergance_dailog=e),style:{width:"450px"},header:"Local Conveyance",modal:!0,class:"p-fluid"},{footer:s(()=>[n(y,{label:"Cancel",icon:"pi pi-times",style:{height:"30px",color:"black"},class:"p-button-text",onClick:t(o).hideDialog},null,8,["onClick"]),n(y,{label:"Save",icon:"pi pi-check",style:{height:"30px",background:"rgb(255 135 38)",color:"white"},onClick:t(o).post_data_for_local_convergance},null,8,["onClick"])]),default:s(()=>[l("div",lo,[to,n(w,{inputId:"dateformat",modelValue:t(o).employee_local_conveyance.travelled_date,"onUpdate:modelValue":a[12]||(a[12]=e=>t(o).employee_local_conveyance.travelled_date=e),dateFormat:"dd/mm/yy"},null,8,["modelValue"])]),l("div",ao,[no,n(m,{modelValue:t(o).employee_local_conveyance.mode_of_transport,"onUpdate:modelValue":a[13]||(a[13]=e=>t(o).employee_local_conveyance.mode_of_transport=e),options:t(o).local_Conveyance_Mode_of_transport,optionLabel:"label",optionValue:"value",placeholder:"Select Mode Of Transport",class:"w-full"},null,8,["modelValue","options"])]),l("div",so,[l("div",io,[ro,n(b,{modelValue:t(o).employee_local_conveyance.travel_from,"onUpdate:modelValue":a[14]||(a[14]=e=>t(o).employee_local_conveyance.travel_from=e)},null,8,["modelValue"])]),l("div",co,[mo,n(b,{modelValue:t(o).employee_local_conveyance.travel_to,"onUpdate:modelValue":a[15]||(a[15]=e=>t(o).employee_local_conveyance.travel_to=e)},null,8,["modelValue"])])]),l("div",_o,[l("div",uo,[po,n(b,{modelValue:t(o).employee_local_conveyance.total_distance_travelled,"onUpdate:modelValue":a[16]||(a[16]=e=>t(o).employee_local_conveyance.total_distance_travelled=e),onInput:t(o).amount_calculation},null,8,["modelValue","onInput"])]),l("div",vo,[bo,n(b,{modelValue:t(o).employee_local_conveyance.total_distance_travelled,"onUpdate:modelValue":a[17]||(a[17]=e=>t(o).employee_local_conveyance.total_distance_travelled=e)},null,8,["modelValue"])])]),l("div",fo,[yo,n(b,{modelValue:t(o).employee_local_conveyance.local_convenyance_total_amount,"onUpdate:modelValue":a[18]||(a[18]=e=>t(o).employee_local_conveyance.local_convenyance_total_amount=e)},null,8,["modelValue"])]),l("div",go,[ho,n(V,{modelValue:t(o).employee_local_conveyance.local_conveyance_remarks,"onUpdate:modelValue":a[19]||(a[19]=e=>t(o).employee_local_conveyance.local_conveyance_remarks=e),autoResize:"",rows:"2",cols:"30"},null,8,["modelValue"])])]),_:1},8,["visible"])])])])])])],64)}}},i=G(ko),Co=Z();i.use(W,{ripple:!0});i.use(ee);i.use(q);i.use(_e);i.use(Co);i.directive("tooltip",oe);i.directive("badge",le);i.directive("ripple",H);i.directive("styleclass",te);i.directive("focustrap",ae);i.component("Button",Q);i.component("DataTable",ne);i.component("Column",se);i.component("ColumnGroup",be);i.component("Row",ve);i.component("Toast",ue);i.component("ConfirmDialog",me);i.component("Dropdown",ie);i.component("InputText",re);i.component("Dialog",ce);i.component("ProgressSpinner",pe);i.component("Calendar",fe);i.component("Textarea",ye);i.component("Chips",ge);i.component("InputNumber",de);i.mount("#vjs_employee_reimbursement");
