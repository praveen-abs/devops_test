import{B as _,V as v,E as b,c as D,e as d,h as t,W as c,w as u,F as M,g as y,o as w,G as S,P as C,H as T,R as L,q as k}from"./toastservice.esm-c4f6de4c.js";import{T as V,B as x,S as $,b as E,a as F}from"./styleclass.esm-ea560a03.js";import"./blockui.esm-85692cd0.js";import{C as R,F as H,a as A,b as B,s as N}from"./inputtext.esm-5faf66bf.js";import{s as j}from"./confirmdialog.esm-51539a4d.js";import{s as U}from"./toast.esm-8d255b70.js";import{s as Y}from"./progressspinner.esm-455f2fd3.js";import{s as G}from"./calendar.esm-7c3ebc21.js";import{d as O,c as q}from"./pinia-0f325ab3.js";import{a as P}from"./index-f7a317fc.js";const I=O("managePayslipStore",()=>{const g=_(),i=_(),s=_(!1);async function m(n,a){P.post("getAllEmployeesPayslipDetails",{month:n,year:a}).then(p=>{g.value=p.data.data})}async function o(n,a,p){P.post("/payroll/paycheck/getEmployeePayslipDetailsAsHTML",{user_code:n,month:a,year:p}).then(r=>{console.log("Response [getEmployeePayslipDetailsAsHTML] : "+JSON.stringify(r.data.data)),i.value=r.data,s.value=!0})}async function f(n,a,p){console.log("sendMail_employeePayslip() : Sending mail to user : "+n),P.post("/payroll/paycheck/sendMail_employeePayslip",{user_code:n,month:a,year:p}).then(r=>{console.log(" Response [sendMail_employeePayslip] : "+r.data)}).catch(r=>{console.log(r)})}return{array_employees_list:g,paySlipHTMLView:i,canShowPayslipView:s,getAllEmployeesPayslipDetails:m,getEmployeePayslipDetailsAsHTML:o,sendMail_employeePayslip:f}});const J={class:"d-flex justify-content-end"},K=d("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),W={class:"my-4"},z={class:"d-flex justify-content-end"},Q={class:"card flex justify-content-center inline-flex"},X=["innerHTML"],Z={__name:"ManagePayslips",setup(g){const i=I(),s=v({selectmonth:"",selectDate:"",selectyear:""});return b(async()=>{}),(m,o)=>{const f=y("Calendar"),n=y("Button"),a=y("Column"),p=y("DataTable"),r=y("Dialog");return w(),D(M,null,[d("div",J,[K,t(f,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:s.selectDate,"onUpdate:modelValue":o[0]||(o[0]=l=>s.selectDate=l),style:{border:"1px solid orange","border-radius":"7px",height:"38px"}},null,8,["modelValue"]),t(n,{class:"mb-2 h-10 btn btn-orange",label:"Generate",onClick:o[1]||(o[1]=l=>c(i).getAllEmployeesPayslipDetails(s.selectDate.getMonth()+1,s.selectDate.getFullYear()))})]),d("div",W,[t(p,{value:c(i).array_employees_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],selection:s.selectedProduct,"onUpdate:selection":o[2]||(o[2]=l=>s.selectedProduct=l),currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:m.filters,"onUpdate:filters":o[3]||(o[3]=l=>m.filters=l),filterDisplay:"menu",loading:m.loading2,globalFilterFields:["name","status"]},{default:u(()=>[t(a,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(a,{field:"user_code",header:"Employee Code",headerStyle:"width: 3rem"}),t(a,{field:"name",header:"Employee Name"}),t(a,{field:"email",header:"Personal Mail"}),t(a,{field:"is_released",header:"Released Payslip?"}),t(a,{field:"is_",header:"Payslip mail sent?"}),t(a,{header:"View Payslip"},{body:u(l=>[t(n,{class:"btn-primary",label:"View ",onClick:h=>c(i).getEmployeePayslipDetailsAsHTML(l.data.user_code,s.selectDate.getMonth()+1,s.selectDate.getFullYear())},null,8,["onClick"])]),_:1}),t(a,{header:"Action"},{body:u(l=>[t(n,{class:"btn-success",label:"Send Mail",onClick:h=>c(i).sendMail_employeePayslip(l.data.user_code,s.selectDate.getMonth()+1,s.selectDate.getFullYear())},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters","loading"])]),d("div",z,[t(n,{class:"mb-2 btn btn-primary",label:"Submit"})]),d("div",Q,[t(r,{visible:c(i).canShowPayslipView,"onUpdate:visible":o[4]||(o[4]=l=>c(i).canShowPayslipView=l),modal:"",header:"Header",style:{width:"50vw"}},{default:u(()=>[d("div",{innerHTML:c(i).paySlipHTMLView},null,8,X)]),_:1},8,["visible"])])],64)}}},e=S(Z),ee=q();e.use(C,{ripple:!0});e.use(R);e.use(T);e.use(ee);e.directive("tooltip",V);e.directive("badge",x);e.directive("ripple",L);e.directive("styleclass",$);e.directive("focustrap",H);e.component("Button",k);e.component("DataTable",E);e.component("Column",F);e.component("ConfirmDialog",j);e.component("Toast",U);e.component("Dialog",A);e.component("Dropdown",B);e.component("ProgressSpinner",Y);e.component("InputText",N);e.component("Calendar",G);e.mount("#vjs_manage_payslips");
