import{Q as H,S as R,V as _,W as $,X as z,c as f,h as n,w as x,Y as s,F as M,g as h,o as v,e,i as k,_ as W,f as j,t as G,$ as C,a as b,b as J,j as g,E as K,P as Q,G as X,R as Z,q as ee}from"./index-39918fa6.js";import{d as te,c as ae}from"./pinia-68c883fa.js";import{C as se,T as oe,B as le,S as de,F as ie,d as ne,c as _e,f as re,b as me,e as ce}from"./styleclass.esm-f772d017.js";import"./blockui.esm-a7a43aa2.js";import{s as ue}from"./confirmdialog.esm-9db873da.js";import{D as ve}from"./dialogservice.esm-20532b1b.js";import{s as fe}from"./toast.esm-daf18d83.js";import{s as pe}from"./progressspinner.esm-2f2847cf.js";import{s as ye}from"./row.esm-6ebc942e.js";import{s as be}from"./columngroup.esm-9dd1458e.js";import{s as he}from"./calendar.esm-d70260b0.js";import{s as ge}from"./textarea.esm-39efa0eb.js";import{s as De}from"./chips.esm-7020dae6.js";import{h as I}from"./moment-fbc5633a.js";const we=te("Service",()=>{const V=H(),l=R({selected_leave:"",full_day_leave_date:"",half_day_leave_date:"",half_day_leave_session:"",radiobtn_full_day:"",radiobtn_half_day:"",radiobtn_custom:"",custom_start_date:"",custom_end_date:"",custom_total_days:"",permission_start_time:"",permission_total_time:"",permission_end_time:"",notifyTo:"",leave_reason:""}),t=_(!0),y=_(!0),a=_(!1),r=_(!1),m=_(!1),p=_(!1),D=_(),c=_();let w=new Date;const F=_(!1),S=_(!1),o=_(!1);let U=new Date;U.setDate(w.getDate()-1),D.value=[w,U];const P=()=>{l.radiobtn_full_day=="full_day"?y.value=!0:y.value=!1,y.value=!0,r.value=!1,m.value=!1,a.value=!1,p.value=!1},q=()=>{l.radiobtn_half_day=="half_day"?a.value=!0:a.value=!1,r.value=!1,m.value=!1,y.value=!1,p.value=!1,a.value=!0},E=()=>{l.radiobtn_custom=="custom"?r.value=!0:r.value=!1,r.value=!0,m.value=!1,a.value=!1,y.value=!1,p.value=!1},L=()=>{r.value==!0&&(l.custom_start_date.length<0||l.custom_start_date=="")&&V.add({severity:"info",summary:"Info Message",detail:"Select Start date",life:3e3}),m.value==!0&&(l.permission_start_time<0||l.permission_start_time=="")&&V.add({severity:"info",summary:"Info Message",detail:"Select Start Time",life:3e3}),!l.custom_total_days<0&&alert(""),console.log(l.custom_start_date),console.log(l.custom_end_date);var u=new Date(l.custom_start_date),Y=new Date(l.custom_end_date),T=Y.getTime()-u.getTime();console.log("Differnece"+T);var A=(T/(1e3*60*60*24)).toFixed(0);l.custom_total_days=A,console.log(l.custom_total_days)},N=()=>{console.log(l.permission_start_time),console.log(l.permission_end_time);let u=new Date(l.permission_start_time).getTime(),Y=new Date(l.permission_end_time).getTime();console.log("start"+u,"end"+Y);var T=((Y-u)/1e3/60/60).toFixed(0);l.permission_total_time=T,console.log(T)},B=()=>{l.selected_leave=="Permission"?(m.value=!0,t.value=!1,a.value=!1,r.value=!1,p.value=!1):l.selected_leave=="Compensatory Leave"?(p.value=!0,m.value=!1,y.value=!1,a.value=!1,r.value=!1,t.value=!1):l.selected_leave=="Select"?(p.value=!1,m.value=!1,y.value=!0,a.value=!1,r.value=!1,t.value=!0):(m.value=!1,p.value=!1)},O=()=>{$.get("/fetch-leave-policy-details").then(u=>{console.log(u.data),c.value=u.data})},d=R({leave_type_id:1,leave_Request_date:I().format("YYYY-MM-DD  HH:mm:ss"),leave_type_name:"",leave_session:"",start_date:"",end_date:"",no_of_days:"",hours_diff:"",notify_to:"",leave_reason:""});return{leave_data:l,invalidDate:U,today:w,invalidDates:D,toast:V,leave_Request_data:d,leave_types:c,data_checking:S,Email_Service:o,half_day:q,full_day:P,custom_day:E,Permission:B,Submit:()=>{d.leave_type_name=l.selected_leave,l.radiobtn_full_day=="full_day"?(console.log("Full day leave : "+l.full_day_leave_date),d.no_of_days=1,d.start_date=I(l.full_day_leave_date).format("YYYY-MM-DD"),d.end_date=d.start_date,d.leave_session=""):l.radiobtn_half_day=="half_day"?(console.log("Applying half-day leave..."),d.no_of_days=.5,d.start_date=I(l.half_day_leave_date).format("YYYY-MM-DD"),d.end_date=d.start_date,l.half_day_leave_session=="forenoon"?d.leave_session="FN":d.leave_session="AN"):l.radiobtn_custom=="custom"?(d.start_date=I(l.custom_start_date).format("YYYY-MM-DD"),d.end_date=I(l.custom_end_date).format("YYYY-MM-DD"),d.no_of_days=l.custom_total_days,d.leave_session=""):V.add({severity:"info",summary:"Info Message",detail:"Select Leave",life:3e3}),d.notify_to=l.notifyTo,d.leave_reason=l.leave_reason,F.value=!0,S.value=!0,console.log(d),$.post("/applyLeaveRequest",{leave_request_date:d.leave_Request_date,leave_type_name:d.leave_type_name,leave_session:d.leave_session,start_date:d.start_date,end_date:d.end_date,no_of_days:d.no_of_days,hours_diff:d.hours_diff,notify_to:d.notify_to,leave_reason:d.leave_reason}).then(u=>{u.data.status=="success"&&(o.value=!0),console.log(u.data.status),S.value=!1}).catch(u=>{console.log(u)}),console.log("Leave"+l.selected_leave)},dayCalculation:L,time_difference:N,get_leave_types:O,full_day_format:y,half_day_format:a,custom_format:r,Permission_format:m,compensatory_format:p,TotalNoOfDays:t,RequiredField:F}});const xe=e("h5",{style:{"text-align":"center"}},"Please wait...",-1),ke=e("h5",{class:"m-auto"}," Email sent Successfully",-1),Ve={class:"text-center"},Se=e("h6",{class:"modal-title mb-6 fs-21"}," Leave Request",-1),Te={class:"row"},Ce={class:"col-md-7 col-sm-12"},Ie={class:"row mb-3"},Fe=e("div",{class:"col-md-4 col-sm-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("Choose Leave Type "),e("span",{class:"text-danger"},"*")])])],-1),Ye={class:"col-md-7 col-sm-12 mb-md-0 mb-3"},Ue={class:"form-group"},Re={key:0,class:"row mb-3"},$e=e("div",{class:"col-md-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("No of Days"),e("span",{class:"text-danger"},"*")])])],-1),Me={class:"col-md-12 col-lg-6 mb-md-0 mb-3"},Pe={class:"form-group"},qe={class:"form-check form-check-inline"},Ee=e("label",{class:"form-check-label leave_type ms-3",for:""},"Full Day",-1),Le={class:"form-check form-check-inline"},Ne=e("label",{class:"form-check-label leave_type ms-3",for:""},"Half Day",-1),Be={class:"form-check form-check-inline"},Oe=e("label",{class:"form-check-label leave_type ms-3",for:""},"Custom",-1),Ae={key:1,class:"row mb-4"},He=e("div",{class:"col-md-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("Date"),e("span",{class:"text-danger"},"*")])])],-1),ze={class:"col-md-7 mb-md-0 mb-3"},We={class:"form-group"},je={key:2,class:"row mb-4"},Ge=e("div",{class:"col-md-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("Date"),e("span",{class:"text-danger"},"*")])])],-1),Je={class:"col-md-7 mb-md-0 mb-3"},Ke={class:"form-group"},Qe={key:3,class:"row mb-3"},Xe=e("div",{class:"col-md-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("Session"),e("span",{class:"text-danger"},"*")])])],-1),Ze={class:"col-md-8 mb-md-0 mb-3"},et={class:"form-group"},tt={class:"form-check form-check-inline"},at=e("label",{class:"form-check-label leave_type ms-3",for:""},"Forenoon",-1),st={class:"form-check form-check-inline"},ot=e("label",{class:"form-check-label leave_type ms-3",for:""},"Afternoon",-1),lt={key:4,class:"row mb-3"},dt={class:"col-md-6 col-lg-5 col-sm-4 mb-md-0 mb-3"},it={class:"form-group"},nt={class:"floating"},_t=e("label",{for:"",class:"float-label"},"Start Date",-1),rt=e("br",null,null,-1),mt={class:"col-md-2 col-lg-3 mb-md-0 mb-3"},ct={class:"form-group"},ut={class:"floating"},vt=e("label",{for:"",class:"float-label"},"Total Days",-1),ft={class:"col-md-6 col-lg-4 mb-md-0 mb-3"},pt={class:"form-group"},yt={class:"floating"},bt=e("label",{for:"",class:"float-label"},"End Day",-1),ht=e("br",null,null,-1),gt={key:5,class:"row mb-3"},Dt={class:"col-md-4 mb-md-0 mb-3"},wt={class:"form-group"},xt={class:"floating"},kt=e("label",{for:"",class:"float-label"},"Start time",-1),Vt={class:"p-input-icon-right"},St=e("i",{class:"pi pi-clock"},null,-1),Tt={class:"col-md-3 mb-md-0 mb-3 ms-5"},Ct={class:"form-group"},It={class:"floating"},Ft=e("label",{for:"",class:"float-label"},"Total Hour",-1),Yt={class:"col-md-4 mb-md-0 mb-3"},Ut={class:"form-group"},Rt={class:"floating"},$t=e("label",{for:"",class:"float-label"},"End time",-1),Mt={class:"p-input-icon-right"},Pt=e("i",{class:"pi pi-clock"},null,-1),qt={key:6,class:"row mb-3"},Et=e("div",{class:"col-md-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("Worked Date "),e("span",{class:"text-danger"},"*")])])],-1),Lt=e("div",{class:"col-md-7 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("select",{style:{height:"38px","font-weight":"500"},name:"",id:"leave_type_id",class:"form-select outline-none"}),e("p",{style:{opacity:"50%"}},"(note:Worked dates will get expired after 60 days)")])],-1),Nt={class:"row mb-3"},Bt={class:"col-md-4 mb-md-0 mb-3"},Ot={class:"form-group"},At={class:"floating"},Ht=e("label",{for:"",class:"float-label"},"Start Date",-1),zt={class:"col-md-3 mb-md-0 mb-3 ms-5"},Wt={class:"form-group"},jt={class:"floating"},Gt=e("label",{for:"",class:"float-label ms-10"},"Total Days",-1),Jt={class:"col-md-4 mb-md-0 mb-3"},Kt={class:"form-group"},Qt={class:"floating"},Xt=e("label",{for:"",class:"float-label"},"End Day",-1),Zt={class:"row mb-3"},ea=e("div",{class:"col-md-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("Notify to "),e("span",{class:"text-danger"},"*")])])],-1),ta={class:"col-md-8 mb-md-0 mb-3"},aa={class:"form-group"},sa={class:"row mb-3"},oa=e("div",{class:"col-md-4 mb-md-0 mb-3"},[e("div",{class:"form-group"},[e("label",{for:""},[g("Reason "),e("span",{class:"text-danger"},"*")])])],-1),la={class:"col-md-10 col-lg-6 col-sm-10 mb-md-0 mb-3"},da={class:"form-group"},ia={class:"col-md-5 col-sm-12"},na={class:"col-12"},_a={class:"text-center mt-6"},ra=["disabled"],ma={key:0},ca={__name:"LeaveApply",setup(V){const l=_(!1);_();const t=we();return z(()=>{t.get_leave_types(),t.leave_data.custom_start_date=new Date().toJSON().slice(0,10),t.leave_data.permission_start_time=new Date}),(y,a)=>{const r=h("Toast"),m=h("Button"),p=h("ProgressSpinner"),D=h("Dialog"),c=h("Calendar"),w=h("InputText"),F=h("Chips"),S=h("Textarea");return v(),f(M,null,[n(r),n(m,{label:"Apply Leave",class:"bg-orange-500 border-none h-3rem",onClick:a[0]||(a[0]=o=>l.value=!0)}),n(D,{header:"Header",visible:s(t).data_checking,"onUpdate:visible":a[1]||(a[1]=o=>s(t).data_checking=o),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:x(()=>[n(p,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:x(()=>[xe]),_:1},8,["visible"]),n(D,{header:"Header",visible:s(t).Email_Service,"onUpdate:visible":a[3]||(a[3]=o=>s(t).Email_Service=o),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:x(()=>[ke]),footer:x(()=>[e("div",Ve,[n(m,{label:"OK",style:{"justify-content":"center"},severity:"help",onClick:a[2]||(a[2]=o=>s(t).Email_Service=!1),raised:"",class:"justify-content-center"})])]),_:1},8,["visible"]),n(D,{visible:l.value,"onUpdate:visible":a[27]||(a[27]=o=>l.value=o),style:{width:"80vw"},breakpoints:{"960px":"75vw","641px":"100vw"}},{default:x(()=>[Se,e("div",Te,[e("div",Ce,[e("div",Ie,[Fe,e("div",Ye,[e("div",Ue,[k(e("select",{style:{height:"38px","font-weight":"500"},name:"",id:"leave_type_id","aria-label":"Default select example",class:"form-select outline-none","onUpdate:modelValue":a[4]||(a[4]=o=>s(t).leave_data.selected_leave=o),onChange:a[5]||(a[5]=(...o)=>s(t).Permission&&s(t).Permission(...o))},[(v(!0),f(M,null,j(s(t).leave_types,o=>(v(),f("option",{key:o.id},G(o.leave_type),1))),128))],544),[[W,s(t).leave_data.selected_leave]])])])]),s(t).TotalNoOfDays?(v(),f("div",Re,[$e,e("div",Me,[e("div",Pe,[e("div",qe,[k(e("input",{style:{height:"20px",width:"20px"},class:"form-check-input",type:"radio",name:"leave",id:"",value:"full_day","onUpdate:modelValue":a[6]||(a[6]=o=>s(t).leave_data.radiobtn_full_day=o),onClick:a[7]||(a[7]=(...o)=>s(t).full_day&&s(t).full_day(...o))},null,512),[[C,s(t).leave_data.radiobtn_full_day]]),Ee]),e("div",Le,[k(e("input",{style:{height:"20px",width:"20px"},class:"form-check-input",type:"radio",name:"leave",id:"",value:"half_day","onUpdate:modelValue":a[8]||(a[8]=o=>s(t).leave_data.radiobtn_half_day=o),onClick:a[9]||(a[9]=(...o)=>s(t).half_day&&s(t).half_day(...o))},null,512),[[C,s(t).leave_data.radiobtn_half_day]]),Ne]),e("div",Be,[k(e("input",{style:{height:"20px",width:"20px"},class:"form-check-input",type:"radio",name:"leave",id:"",value:"custom","onUpdate:modelValue":a[10]||(a[10]=o=>s(t).leave_data.radiobtn_custom=o),onClick:a[11]||(a[11]=(...o)=>s(t).custom_day&&s(t).custom_day(...o))},null,512),[[C,s(t).leave_data.radiobtn_custom]]),Oe])])])])):b("",!0),s(t).full_day_format?(v(),f("div",Ae,[He,e("div",ze,[e("div",We,[n(c,{inputId:"icon",modelValue:s(t).leave_data.full_day_leave_date,"onUpdate:modelValue":a[12]||(a[12]=o=>s(t).leave_data.full_day_leave_date=o),dateFormat:"dd-mm-yy",showIcon:!0,style:{width:"350px"},minDate:new Date},null,8,["modelValue","minDate"])])])])):b("",!0),s(t).half_day_format?(v(),f("div",je,[Ge,e("div",Je,[e("div",Ke,[n(c,{inputId:"icon",modelValue:s(t).leave_data.half_day_leave_date,"onUpdate:modelValue":a[13]||(a[13]=o=>s(t).leave_data.half_day_leave_date=o),dateFormat:"dd-mm-yy",showIcon:!0,style:{width:"350px"},minDate:new Date},null,8,["modelValue","minDate"])])])])):b("",!0),s(t).half_day_format?(v(),f("div",Qe,[Xe,e("div",Ze,[e("div",et,[e("div",tt,[k(e("input",{style:{height:"20px",width:"20px"},class:"form-check-input",type:"radio",name:"session",id:"",value:"forenoon","onUpdate:modelValue":a[14]||(a[14]=o=>s(t).leave_data.half_day_leave_session=o)},null,512),[[C,s(t).leave_data.half_day_leave_session]]),at]),e("div",st,[k(e("input",{style:{height:"20px",width:"20px"},class:"form-check-input",type:"radio",name:"session",id:"",value:"afternoon","onUpdate:modelValue":a[15]||(a[15]=o=>s(t).leave_data.half_day_leave_session=o)},null,512),[[C,s(t).leave_data.half_day_leave_session]]),ot])])])])):b("",!0),s(t).custom_format?(v(),f("div",lt,[e("div",dt,[e("div",it,[e("div",nt,[_t,rt,n(c,{inputId:"icon",dateFormat:"dd-mm-yy",showIcon:!0,modelValue:s(t).leave_data.custom_start_date,"onUpdate:modelValue":a[16]||(a[16]=o=>s(t).leave_data.custom_start_date=o),disabledDates:s(t).invalidDates,disabledDays:[0,6],manualInput:!0},null,8,["modelValue","disabledDates"])])])]),e("div",mt,[e("div",ct,[e("div",ut,[vt,n(w,{style:{width:"60px","text-align":"center"},class:"form-onboard-form form-control textbox capitalize",type:"text",modelValue:s(t).leave_data.custom_total_days,"onUpdate:modelValue":a[17]||(a[17]=o=>s(t).leave_data.custom_total_days=o)},null,8,["modelValue"])])])]),e("div",ft,[e("div",pt,[e("div",yt,[bt,ht,n(c,{inputId:"icon",onDateSelect:s(t).dayCalculation,dateFormat:"dd-mm-yy",showIcon:!0,modelValue:s(t).leave_data.custom_end_date,"onUpdate:modelValue":a[18]||(a[18]=o=>s(t).leave_data.custom_end_date=o),minDate:new Date},null,8,["onDateSelect","modelValue","minDate"])])])])])):b("",!0),s(t).Permission_format?(v(),f("div",gt,[e("div",Dt,[e("div",wt,[e("div",xt,[kt,e("span",Vt,[n(c,{inputId:"time12",modelValue:s(t).leave_data.permission_start_time,"onUpdate:modelValue":a[19]||(a[19]=o=>s(t).leave_data.permission_start_time=o),timeOnly:!0,hourFormat:"12",icon:"your-icon"},null,8,["modelValue"]),St])])])]),e("div",Tt,[e("div",Ct,[e("div",It,[Ft,n(w,{class:"form-onboard-form form-control textbox capitalize",type:"text",style:{width:"67px","text-align":"center"},modelValue:s(t).leave_data.permission_total_time,"onUpdate:modelValue":a[20]||(a[20]=o=>s(t).leave_data.permission_total_time=o)},null,8,["modelValue"])])])]),e("div",Yt,[e("div",Ut,[e("div",Rt,[$t,e("span",Mt,[n(c,{inputId:"time12",modelValue:s(t).leave_data.permission_end_time,"onUpdate:modelValue":a[21]||(a[21]=o=>s(t).leave_data.permission_end_time=o),timeOnly:!0,hourFormat:"12",icon:"your-icon",onDateSelect:s(t).time_difference},null,8,["modelValue","onDateSelect"]),Pt])])])])])):b("",!0),s(t).compensatory_format?(v(),f("div",qt,[Et,Lt,e("div",Nt,[e("div",Bt,[e("div",Ot,[e("div",At,[Ht,n(c,{inputId:"icon",dateFormat:"dd-mm-yy",showIcon:!0,style:{"z-index":"1300"}})])])]),e("div",zt,[e("div",Wt,[e("div",jt,[Gt,n(w,{style:{width:"60px"},class:"form-onboard-form form-control textbox capitalize",type:"text"})])])]),e("div",Jt,[e("div",Kt,[e("div",Qt,[Xt,n(c,{inputId:"icon",dateFormat:"dd-mm-yy",showIcon:!0})])])])])])):b("",!0),e("div",Zt,[ea,e("div",ta,[e("div",aa,[n(F,{class:"",modelValue:s(t).leave_data.notifyTo,"onUpdate:modelValue":a[22]||(a[22]=o=>s(t).leave_data.notifyTo=o),separator:","},null,8,["modelValue"])])])]),e("div",sa,[oa,e("div",la,[e("div",da,[n(S,{autoResize:!0,rows:"3",cols:"60",placeholder:"Enter the Reason",modelValue:s(t).leave_data.leave_reason,"onUpdate:modelValue":a[23]||(a[23]=o=>s(t).leave_data.leave_reason=o)},null,8,["modelValue"])])])])]),e("div",ia,[e("div",na,[n(c,{inline:!0,showWeek:!0,style:{"min-width":"100%"}})]),e("div",_a,[e("button",{type:"button",class:"btn btn-border-primary",onClick:a[24]||(a[24]=o=>l.value=!1)},"Cancel"),e("button",{type:"button",id:"btn_request_leave",class:"btn btn-primary ms-4",disabled:!(s(t).leave_data.selected_leave.length>0),onClick:a[25]||(a[25]=(...o)=>s(t).Submit&&s(t).Submit(...o))}," Request Leave",8,ra)])])]),s(t).leave_data.leave_reason==""?(v(),J(D,{key:0,style:{width:"450px"},header:"Required",modal:!0,visible:s(t).RequiredField,"onUpdate:visible":a[26]||(a[26]=o=>s(t).RequiredField=o)},{default:x(()=>[s(t).leave_data.leave_reason==""?(v(),f("li",ma,"Leave Reason")):b("",!0)]),_:1},8,["visible"])):b("",!0)]),_:1},8,["visible"])],64)}}},i=K(ca),ua=ae();i.use(Q,{ripple:!0});i.use(se);i.use(X);i.use(ve);i.use(ua);i.directive("tooltip",oe);i.directive("badge",le);i.directive("ripple",Z);i.directive("styleclass",de);i.directive("focustrap",ie);i.component("Button",ee);i.component("DataTable",ne);i.component("Column",_e);i.component("ColumnGroup",be);i.component("Row",ye);i.component("Toast",fe);i.component("ConfirmDialog",ue);i.component("Dropdown",re);i.component("InputText",me);i.component("Dialog",ce);i.component("ProgressSpinner",pe);i.component("Calendar",he);i.component("Textarea",ge);i.component("Chips",De);i.mount("#vjs_leaveapply");
