import{H as c,I as z,c as F,h as t,w as n,af as x,b as H,a as J,X as f,g,o as L,e as i,t as A,k as U,J as Q,P as K,K as W,R as Y,u as G,v as X,Q as q,L as Z,N as ee,A as oe,M as te}from"./toastservice.esm-b0df8430.js";import{T as le,B as ae,S as ne,b as se,a as ie}from"./styleclass.esm-c88657ea.js";import"./blockui.esm-7963e732.js";import{D as re}from"./dialogservice.esm-dfc08b41.js";import{C as ce}from"./confirmationservice.esm-6f4a46b4.js";import{s as pe}from"./progressspinner.esm-6cc3039f.js";import{s as ue}from"./row.esm-6ebc942e.js";import{s as de}from"./columngroup.esm-9dd1458e.js";import{s as me}from"./calendar.esm-d1eec60d.js";import{h as ve}from"./moment-fbc5633a.js";import{s as fe}from"./checkbox.esm-c0a707f1.js";import{s as ge}from"./tag.esm-2cc9a548.js";import{d as be}from"./pinia-38500c14.js";import{a as k}from"./index-362795f3.js";import{m as we}from"./map-c58f9075.js";const he=be("EmpDetailApprovalsStore",()=>{const b=c();async function w(){await k.get("/fetch-proof-doc").then(m=>{console.log(m.data),b.value=m.data,console.log(b.value)}).finally(()=>{})}return{array_EmpDetails_list:b,getEmpDetails_list:w}}),ye=i("h5",{style:{"text-align":"center"}},"Please wait...",-1),Ce={class:"confirmation-content"},Se=i("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),_e={class:"confirmation-content"},Ae=i("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),ke=["src","alt"],Re={__name:"EmpDetails_approvals",setup(b){const w=he(),m=c([]),h=c(),y=c(!1),C=c(!1);let s=null,d=null;const v=c(!1),R=c(!1),D=c(),j=c({});z(async()=>{await w.getEmpDetails_list()}),c({global:{value:null,matchMode:f.CONTAINS},name:{value:null,matchMode:f.STARTS_WITH,matchMode:f.EQUALS,matchMode:f.CONTAINS},status:{value:"Pending",matchMode:f.EQUALS}});const M=o=>{j.value={...document},v.value=!0,R.value=!0,k.post("/view-profile-private-file",{emp_doc_record_id:o}).then(e=>{console.log(e.data.data),D.value=e.data.data,console.log("data sent",D.value)}).finally(()=>{v.value=!1})};function $(o,e){C.value=!0,s=e,d=o,console.log("Selected Bulk Row Data : "+JSON.stringify(o))}function S(){s="",d=null}function P(o){C.value=!1,o&&S()}function E(o){y.value=!1,o&&S()}const B=(o,e)=>{y.value=!0,s=e,d=o},V=()=>{E();let o=we(d,"record_id");console.log("Processing Rowdata : "+JSON.stringify(d.documents)),console.log("currentlySelectedStatus : "+s),console.log("Processed doc record ids : "+o),k.post("/approvals/EmployeeProof-bulkdocs-approve-reject",{record_id:o,status:s=="Approve"?"Approved":s=="Reject"?"Rejected":s,reviewer_comments:""}).then(e=>{console.log("testing data",e.data)}).finally(()=>{S()})};function I(){P(),k.post("/approvals/EmployeeProof-docs-approve-reject",{record_id:d.record_id,status:s=="Approve"?"Approved":s=="Reject"?"Rejected":s,reviewer_comments:""}).then(o=>{console.log("testing data",o.data)}).finally(()=>{S()})}return(o,e)=>{const O=g("ProgressSpinner"),_=g("Dialog"),p=g("Button"),r=g("Column"),T=g("DataTable");return L(),F("div",null,[t(_,{header:"Header",visible:v.value,"onUpdate:visible":e[0]||(e[0]=a=>v.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:n(()=>[t(O,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:n(()=>[ye]),_:1},8,["visible"]),t(_,{header:"Confirmation",visible:y.value,"onUpdate:visible":e[3]||(e[3]=a=>y.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"580px"},modal:!0},{footer:n(()=>[t(p,{label:"Yes",icon:"pi pi-check",onClick:e[1]||(e[1]=a=>V()),class:"p-button-text",autofocus:""}),t(p,{label:"No",icon:"pi pi-times",onClick:e[2]||(e[2]=a=>E(!0)),class:"p-button-text"})]),default:n(()=>[i("div",Ce,[Se,i("span",null,"Are you sure you want to "+A(x(s))+" all the documents of this employee?",1)])]),_:1},8,["visible"]),t(_,{header:"Confirmation",visible:C.value,"onUpdate:visible":e[6]||(e[6]=a=>C.value=a),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:n(()=>[t(p,{label:"Yes",icon:"pi pi-check",onClick:e[4]||(e[4]=a=>I()),class:"p-button-text",autofocus:""}),t(p,{label:"No",icon:"pi pi-times",onClick:e[5]||(e[5]=a=>P(!0)),class:"p-button-text"})]),default:n(()=>[i("div",_e,[Ae,i("span",null,"Are you sure you want to "+A(x(s))+"?",1)])]),_:1},8,["visible"]),t(T,{value:x(w).array_EmpDetails_list,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:o.onRowExpand,onRowCollapse:o.onRowCollapse,expandedRows:m.value,"onUpdate:expandedRows":e[8]||(e[8]=a=>m.value=a),selection:h.value,"onUpdate:selection":e[9]||(e[9]=a=>h.value=a),selectAll:o.selectAll,onSelectAllChange:o.onSelectAllChange,onRowSelect:o.onRowSelect,onRowUnselect:o.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:n(a=>[i("div",null,[t(T,{value:a.data.documents,responsiveLayout:"scroll",selection:h.value,"onUpdate:selection":e[7]||(e[7]=u=>h.value=u),selectAll:o.selectAll,onSelectAllChange:o.onSelectAllChange},{default:n(()=>[t(r,{field:"doc_name",header:"Document Name"},{default:n(()=>[U(A(a.data.doc_name),1)]),_:2},1024),t(r,{field:"doc_status",header:"Status"}),t(r,{field:"",header:"View"},{body:n(u=>[t(p,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:N=>M(u.data.record_id),style:{height:"2em"}},null,8,["onClick"])]),_:2},1024),t(r,{field:"",header:"Action"},{body:n(u=>[i("span",null,[t(p,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve",onClick:N=>$(u.data,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),t(p,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2.5em"},onClick:N=>$(u.data,"Reject")},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:n(()=>[t(r,{expander:!0}),t(r,{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),t(r,{field:"user_code",header:"Employee Id",sortable:""}),t(r,{field:"name",header:"Employee Name"}),t(r,{field:"doc_status",header:"Approval Status",sortable:!1},{body:n(({data:a})=>[U(A(a.doc_status),1)]),_:1}),t(r,{field:"",header:"Action"},{body:n(a=>[i("span",null,[t(p,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve All",onClick:u=>B(a.data.documents,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),t(p,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject All",style:{"margin-left":"8px",height:"2.5em"},onClick:u=>B(a.data.documents,"Reject")},null,8,["onClick"])])]),_:1})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"]),v.value==!1?(L(),H(_,{key:0,visible:R.value,"onUpdate:visible":e[10]||(e[10]=a=>R.value=a),class:"z-0",modal:"",header:"Documents",style:{width:"40vw"}},{default:n(()=>[i("img",{src:`data:image/png;base64,${D.value}`,alt:o.doc_url,class:"block pb-3 m-auto"},null,8,ke)]),_:1},8,["visible"])):J("",!0)])}}},l=Q(Re);l.use(K,{ripple:!0});l.use(ce);l.use(W);l.use(re);l.directive("tooltip",le);l.directive("badge",ae);l.directive("ripple",Y);l.directive("styleclass",ne);l.directive("focustrap",G);l.component("Button",X);l.component("DataTable",se);l.component("Column",ie);l.component("ColumnGroup",de);l.component("Row",ue);l.component("Toast",q);l.component("ConfirmDialog",Z);l.component("Dropdown",ee);l.component("InputText",oe);l.component("Dialog",te);l.component("ProgressSpinner",pe);l.component("Calendar",me);l.component("moment",ve);l.component("Checkbox",fe);l.component("Tag",ge);l.mount("#EmpDetails_approvals");
