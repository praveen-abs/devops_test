import{B as h,M as A,W as c,X as j,V as O,E as Q,c as ee,h as b,e,j as D,w,t as f,F as oe,g as C,o as le,l as k,i as M,z as S,a8 as te,a9 as se}from"./toastservice.esm-c4f6de4c.js";import{d as T}from"./dayjs.min-ed58423a.js";import"./moment-fbc5633a.js";import{u as ae}from"./inputtext.esm-5faf66bf.js";import{a as P}from"./index-f7a317fc.js";import{S as ie}from"./Service-eef5851a.js";import{d as ne}from"./pinia-0f325ab3.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";const re=ne("employeeService",()=>{const l=h([]),n=h(!0),o=new URLSearchParams(window.location.search);let p="/profile-pages-getEmpDetails";o.has("uid")&&(p=p+"?uid="+o.get("uid"));async function g(){console.log("Getting employee details"),await P.get(p).then(_=>{console.log("fetchEmployeeDetails() : "+_.data),n.value=!1,l.value=_.data}).catch(_=>console.log(_)).finally(()=>console.log("completed"))}return{fetchEmployeeDetails:g,employeeDetails:l,loading_screen:n}});var F;const ce=typeof window<"u";ce&&((F=window==null?void 0:window.navigator)!=null&&F.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function H(l){return typeof l=="function"?l():c(l)}const _e=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,me=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g,pe=(l,n,o,p)=>{let g=l<12?"AM":"PM";return p&&(g=g.split("").reduce((_,y)=>_+=`${y}.`,"")),o?g.toLowerCase():g},ue=(l,n,o={})=>{var p;const g=l.getFullYear(),_=l.getMonth(),y=l.getDate(),m=l.getHours(),s=l.getMinutes(),V=l.getSeconds(),E=l.getMilliseconds(),G=l.getDay(),x=(p=o.customMeridiem)!=null?p:pe,U={YY:()=>String(g).slice(-2),YYYY:()=>g,M:()=>_+1,MM:()=>`${_+1}`.padStart(2,"0"),MMM:()=>l.toLocaleDateString(o.locales,{month:"short"}),MMMM:()=>l.toLocaleDateString(o.locales,{month:"long"}),D:()=>String(y),DD:()=>`${y}`.padStart(2,"0"),H:()=>String(m),HH:()=>`${m}`.padStart(2,"0"),h:()=>`${m%12||12}`.padStart(1,"0"),hh:()=>`${m%12||12}`.padStart(2,"0"),m:()=>String(s),mm:()=>`${s}`.padStart(2,"0"),s:()=>String(V),ss:()=>`${V}`.padStart(2,"0"),SSS:()=>`${E}`.padStart(3,"0"),d:()=>G,dd:()=>l.toLocaleDateString(o.locales,{weekday:"narrow"}),ddd:()=>l.toLocaleDateString(o.locales,{weekday:"short"}),dddd:()=>l.toLocaleDateString(o.locales,{weekday:"long"}),A:()=>x(m,s),AA:()=>x(m,s,!1,!0),a:()=>x(m,s,!0),aa:()=>x(m,s,!0,!0)};return n.replace(me,(L,Y)=>Y||U[L]())},fe=l=>{if(l===null)return new Date(NaN);if(l===void 0)return new Date;if(l instanceof Date)return new Date(l);if(typeof l=="string"&&!/Z$/i.test(l)){const n=l.match(_e);if(n){const o=n[2]-1||0,p=(n[7]||"0").substring(0,3);return new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,p)}}return new Date(l)};function ge(l,n="HH:mm:ss",o={}){return A(()=>ue(fe(H(l)),H(n),o))}const i=l=>(te("data-v-11fa91ea"),l=l(),se(),l),be={class:"mb-2 card"},he={class:"card-body"},ye={class:""},ve=i(()=>e("i",{class:"ri-pencil-fill"},null,-1)),De=[ve],xe={class:"row"},we={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Me={class:"mb-3 form-group"},Se=i(()=>e("label",{style:{marginLeft:"10px"}},[D("Birth Date"),e("span",{class:"text-danger"},"*")],-1)),Ae={class:"cal-icon"},Ve={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Ye={class:"mb-3 form-group"},Ie=i(()=>e("label",null,[D("Gender"),e("span",{class:"text-danger"},"*")],-1)),Ce={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Pe={class:"mb-3 form-group"},Ee=i(()=>e("label",{style:{marginLeft:"10px"}},[D("Date Of Joining(DOJ)"),e("span",{class:"text-danger"},"*")],-1)),Ge={class:"cal-icon"},Ue={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Le={class:"mb-3 form-group"},Be=i(()=>e("label",null,[D("Blood Group"),e("span",{class:"text-danger"},"*")],-1)),Oe={class:"cal-icon"},ke={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Ne={class:"mb-3 form-group",style:{marginLeft:"10px"}},$e=i(()=>e("label",null,[D("Marital status "),e("span",{class:"text-danger"},"*")],-1)),je={class:"col-sm-12 col-xl-6 col-lg-6 col-md-6 col-xxl-6"},Te={class:"mb-3 form-group"},Fe=i(()=>e("label",null,"Physically Handicapped",-1)),He={class:"text-right col-12"},ze={class:"personal-info"},Re={class:"pb-1 border-bottom-liteAsh"},Je=i(()=>e("div",{class:"title"},"Birthday",-1)),qe={class:"ml-4 text"},We={class:"pb-1 border-bottom-liteAsh"},Xe=i(()=>e("div",{class:"title"},"Gender ",-1)),Ze={class:"text"},Ke={class:"pb-1 border-bottom-liteAsh"},Qe=i(()=>e("div",{class:"title"},"Date Of Joining (DOJ)",-1)),eo={class:"text"},oo={class:"pb-1 border-bottom-liteAsh"},lo=i(()=>e("div",{class:"title"},"Marital Status ",-1)),to={class:"text text-capitalize"},so={class:"pb-1 border-bottom-liteAsh"},ao=i(()=>e("div",{class:"title"}," Blood Group",-1)),io={class:"text"},no={class:"pb-1"},ro=i(()=>e("div",{class:"title"},"Physically Handicapped",-1)),co={class:"text"},_o={class:"mb-2 card"},mo={class:"card-body"},po={class:""},uo=i(()=>e("i",{class:"ri-pencil-fill"},null,-1)),fo=[uo],go={class:"modal-body"},bo={class:"row"},ho={class:"col-md-6"},yo={class:"mb-3 form-group"},vo=i(()=>e("label",null,"Personal Email",-1)),Do={class:"col-md-6"},xo={class:"mb-3 form-group"},wo=i(()=>e("label",null," Office Email",-1)),Mo={class:"col-md-6"},So={class:"mb-3 form-group"},Ao=i(()=>e("label",null,"Mobile Number",-1)),Vo={class:"col-md-6"},Yo={class:"mb-3 form-group"},Io=i(()=>e("label",null,"Official Mobile Number",-1)),Co={class:"personal-info"},Po={class:"pb-1 border-bottom-liteAsh"},Eo=i(()=>e("div",{class:"title"},"Personal Email",-1)),Go={class:"ml-4 text"},Uo={class:"pb-1 border-bottom-liteAsh"},Lo=i(()=>e("div",{class:"title"},"Official Email",-1)),Bo={class:"text"},Oo={class:"pb-1"},ko=i(()=>e("div",{class:"title"},"Mobile Number",-1)),No={class:"text"},$o={class:"pb-1"},jo=i(()=>e("div",{class:"title"},"Official Mobile Number",-1)),To={class:"text"},Fo={class:"mb-2 card"},Ho={class:"card-body"},zo={class:""},Ro=i(()=>e("i",{class:"ri-pencil-fill"},null,-1)),Jo=[Ro],qo={class:"modal-body"},Wo={class:"col-md-12"},Xo={class:"mb-3 form-group"},Zo=i(()=>e("label",null,"Current Address",-1)),Ko={class:"mb-3 form-group"},Qo=i(()=>e("label",null,"Permanent Address ",-1)),el={class:"col-12"},ol={class:"text-right"},ll={class:"row"},tl={class:"col-6"},sl={class:"personal-info"},al={class:"pb-1 border-bottom-liteAsh flex-column"},il=i(()=>e("div",{class:"title"},"Current Address ",-1)),nl={class:"text"},dl={class:"col-6"},rl={class:"personal-info"},cl={class:"pb-1 border-bottom-liteAsh flex-column"},_l=i(()=>e("div",{class:"title"},"Permanent Address ",-1)),ml={class:"text"},pl={__name:"EmployeeDetails",setup(l){const n=ie(),o=re(),p=j(),g=j(),_=h(!1),y=h(!1),m=h(!1),s=O({dob:"",gender:"",doj:"",blood_group_id:"",marital_status_id:"",physically_challenged:""}),V=h([{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Others",value:"others"}]),E=A(()=>o.employeeDetails.get_employee_details.gender=="male"?"Male":o.employeeDetails.get_employee_details.gender=="female"?"Female":o.employeeDetails.get_employee_details.gender=="others"?"Others":"-"),G=A(()=>{if(o.employeeDetails.get_employee_details.marital_status_id==1)return"Unmarried";if(o.employeeDetails.get_employee_details.marital_status_id==2)return"Married";if(o.employeeDetails.get_employee_details.marital_status_id==3)return"Separated";if(o.employeeDetails.get_employee_details.marital_status_id==4)return"Widowed";if(o.employeeDetails.get_employee_details.marital_status_id==5)return"Divorced"}),x=A(()=>{if(o.employeeDetails.get_employee_details.blood_group_id==1)return"A Positive";if(o.employeeDetails.get_employee_details.blood_group_id==2)return"A Negative";if(o.employeeDetails.get_employee_details.blood_group_id==3)return"B Positive";if(o.employeeDetails.get_employee_details.blood_group_id==4)return"B Negative";if(o.employeeDetails.get_employee_details.blood_group_id==5)return"AB Positive";if(o.employeeDetails.get_employee_details.blood_group_id==6)return"AB Negative";if(o.employeeDetails.get_employee_details.blood_group_id==7)return"O Positive";if(o.employeeDetails.get_employee_details.blood_group_id==8)return"O Negative"}),U=A(()=>{if(o.employeeDetails.get_employee_details.physically_challenged=="no")return"No";if(o.employeeDetails.get_employee_details.physically_challenged=="yes")return"Yes"}),L=h([{name:"Yes",value:"yes"},{name:"No",value:"no"}]),Y=h(),N=h();ae(),Q(()=>{n.getBloodGroups().then(v=>{console.log(v.data),Y.value=v.data}),n.getMaritalStatus().then(v=>{console.log(v),N.value=v.data})});function z(){console.log("Opening General Info Dialog"),s.dob=o.employeeDetails.get_employee_details.dob,s.doj=o.employeeDetails.get_employee_details.doj,s.marital_status_id=parseInt(o.employeeDetails.get_employee_details.marital_status_id),s.gender=o.employeeDetails.get_employee_details.gender,s.blood_group_id=parseInt(o.employeeDetails.get_employee_details.blood_group_id),s.physically_challenged=o.employeeDetails.get_employee_details.physically_challenged,_.value=!0}function R(){console.log("Called saveGeneralInformationDetails.... ");let t=`/profile-pages-update-generalinfo/${n.current_user_id}`;P.post(t,{user_code:o.employeeDetails.user_code,dob:s.dob,gender:s.gender,marital_status_id:s.marital_status_id,doj:s.doj,blood_group_id:s.blood_group_id,physically_challenged:s.physically_challenged}).then(r=>{r.data.status=="success"?(window.location.reload(),p.add({severity:"success",summary:"Updated",detail:"General information updated",life:3e3}),o.employeeDetails.get_employee_details.dob=ge(s.dob,"YYYY-MM-DD"),o.employeeDetails.gender=s.gender,o.employeeDetails.marital_status_id=s.marital_status_id,o.employeeDetails.get_employee_details.doj=s.doj,o.employeeDetails.blood_group_id=s.blood_group_id,o.employeeDetails.physically_challenged=s.physically_challenged):r.data.status=="failure"&&(leave_data.leave_request_error_messege=r.data.message)}).catch(r=>{console.log(r)}),_.value=!1,window.location.reload()}const J=h(),d=O({email:"",official_email:"",mobile_number:"",official_mobile_number:""});function q(){console.log("Opening General Info Dialog : "),d.email=o.employeeDetails.email,d.official_email=o.employeeDetails.get_employee_office_details.officical_mail,console.log("Mobile number : "+o.employeeDetails.mobile_number),d.mobile_number=parseInt(o.employeeDetails.get_employee_details.mobile_number),d.official_mobile_number=parseInt(o.employeeDetails.get_employee_office_details.official_mobile),console.log("testing"),y.value=!0}function W(){console.log("testing contact");let t=`/profile-pages-update-contactinfo/${n.current_user_id}`;P.post(t,{user_code:o.employeeDetails.user_code,email:d.email,officical_mail:d.official_email,mobile_number:d.mobile_number,official_mobile_number:d.official_mobile_number}).then(r=>{r.data.status=="success"?(console.log("Updating mobile number : "+d.mobile_number),o.employeeDetails.email=d.email,o.employeeDetails.get_employee_office_details.officical_mail=d.official_email,o.employeeDetails.get_employee_details.mobile_number=d.mobile_number,o.employeeDetails.get_employee_office_details.official_mobile=d.official_mobile_number):r.data.status=="failure"&&(J.leave_request_error_messege=r.data.message)}).catch(r=>{console.log(r)}),y.value=!1,window.location.reload()}const X=h(),u=O({current_address:"",Permanent_Address:""});function Z(){console.log("Opening General Info Dialog"),u.current_address=o.employeeDetails.get_employee_details.current_address_line_1,u.Permanent_Address=o.employeeDetails.get_employee_details.permanent_address_line_1,m.value=!0}const K=()=>{if(u.current_address==" "||u.Permanent_Address==" ")g.add({severity:"warn",summary:"Warn Message",detail:"Message Content",life:3e3}),console.log(Addressinfo);else{let t=`/profile-pages-update-address_info/${n.current_user_id}`;P.post(t,{user_code:o.employeeDetails.user_code,current_address_line_1:u.current_address,permanent_address_line_1:u.Permanent_Address}).then(r=>{data_checking.value=!1,r.data.status=="success"?(o.employeeDetails.current_address_line_1=u.current_address,o.employeeDetails.get_employee_office_details.permanent_address_line_1=u.Permanent_Address):r.data.status=="failure"&&(X.leave_request_error_messege=r.data.message)}).catch(r=>{console.log(r)}),m.value=!1,window.location.reload()}};return(v,t)=>{const r=C("Toast"),$=C("Calendar"),I=C("Dropdown"),B=C("Dialog");return le(),ee(oe,null,[b(r),e("div",be,[e("div",he,[e("h6",ye,[D("General Information "),e("a",{type:"button",class:"edit-icon",onClick:z},De),b(B,{visible:_.value,"onUpdate:visible":t[7]||(t[7]=a=>_.value=a),modal:"",header:"General Information",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:w(()=>[e("div",null,[e("h5",{style:k({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," General Information",4)])]),default:w(()=>[e("div",xe,[e("div",we,[e("div",Me,[Se,e("div",Ae,[b($,{showIcon:"",class:"mb-3 form-selects",modelValue:s.dob,"onUpdate:modelValue":t[0]||(t[0]=a=>s.dob=a),placeholder:"DD-MM-YYYY",dateFormat:"dd-mm-yy"},null,8,["modelValue"])])])]),e("div",Ve,[e("div",Ye,[Ie,b(I,{modelValue:s.gender,"onUpdate:modelValue":t[1]||(t[1]=a=>s.gender=a),options:V.value,optionLabel:"name",optionValue:"value",placeholder:"Choose Gender",class:"form-selects"},null,8,["modelValue","options"])])]),e("div",Ce,[e("div",Pe,[Ee,e("div",Ge,[b($,{showIcon:"",class:"mb-3 form-selects",modelValue:s.doj,"onUpdate:modelValue":t[2]||(t[2]=a=>s.doj=a),placeholder:"DD-MM-YYYY",dateFormat:"dd-mm-yy"},null,8,["modelValue"])])])]),e("div",Ue,[e("div",Le,[Be,e("div",Oe,[b(I,{modelValue:s.blood_group_id,"onUpdate:modelValue":t[3]||(t[3]=a=>s.blood_group_id=a),options:Y.value,optionLabel:"name",optionValue:"id",placeholder:"Select Bloodgroup",class:"form-selects"},null,8,["modelValue","options"])])])]),e("div",ke,[e("div",Ne,[$e,b(I,{modelValue:s.marital_status_id,"onUpdate:modelValue":t[4]||(t[4]=a=>s.marital_status_id=a),options:N.value,optionLabel:"name",optionValue:"id",placeholder:"Select Marital Status",class:"form-selects"},null,8,["modelValue","options"])])]),e("div",je,[e("div",Te,[Fe,b(I,{modelValue:s.physically_challenged,"onUpdate:modelValue":t[5]||(t[5]=a=>s.physically_challenged=a),options:L.value,optionLabel:"name",optionValue:"value",placeholder:"Select",class:"form-selects"},null,8,["modelValue","options"])])])]),e("div",He,[e("button",{id:"btn_submit_generalInfo",class:"btn btn-border-orange submit-btn",onClick:t[6]||(t[6]=a=>R())},"Save")])]),_:1},8,["visible"])]),e("div",null,[e("ul",ze,[e("li",Re,[Je,e("div",qe,f(c(T)(c(o).employeeDetails.get_employee_details.dob).format("DD-MMM-YYYY")),1)]),e("li",We,[Xe,e("div",Ze,f(c(E)),1)]),e("li",Ke,[Qe,e("div",eo,f(c(T)(c(o).employeeDetails.get_employee_details.doj).format("DD-MMM-YYYY")),1)]),e("li",oo,[lo,e("div",to,f(c(G)),1)]),e("li",so,[ao,e("div",io,f(c(x))+" ",1)]),e("li",no,[ro,e("div",co,f(c(U)),1)])])])])]),e("div",_o,[e("div",mo,[e("h6",po,[D("Contact Information "),e("span",{class:"personal-edit"},[e("a",{href:"#",class:"edit-icon",onClick:q},fo)]),b(B,{visible:y.value,"onUpdate:visible":t[12]||(t[12]=a=>y.value=a),modal:"",header:"Contact Information",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:w(()=>[e("div",null,[e("h5",{style:k({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Contact Information",4)])]),default:w(()=>[e("div",go,[e("div",bo,[e("div",ho,[e("div",yo,[vo,M(e("input",{type:"email",name:"present_email",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=a=>d.email=a)},null,512),[[S,d.email]])])]),e("div",Do,[e("div",xo,[wo,M(e("input",{type:"email",class:"form-control",name:"officical_mail","onUpdate:modelValue":t[9]||(t[9]=a=>d.official_email=a)},null,512),[[S,d.official_email]])])]),e("div",Mo,[e("div",So,[Ao,M(e("input",{type:"text",size:"20",maxlength:"10",name:"mobile_number",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=a=>d.mobile_number=a)},null,512),[[S,d.mobile_number]])])]),e("div",Vo,[e("div",Yo,[Io,M(e("input",{type:"text",size:"20",maxlength:"10",name:"official_mobile_number",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=a=>d.official_mobile_number=a)},null,512),[[S,d.official_mobile_number]])])]),e("div",{class:"col-12"},[e("div",{class:"text-right"},[e("button",{class:"btn btn-border-orange submit-btn",onClick:W},"Save")])])])])]),_:1},8,["visible"])]),e("div",null,[e("ul",Co,[e("li",Po,[Eo,e("div",Go,f(c(o).employeeDetails.email),1)]),e("li",Uo,[Lo,e("div",Bo,f(c(o).employeeDetails.get_employee_office_details.officical_mail),1)]),e("li",Oo,[ko,e("div",No,f(c(o).employeeDetails.get_employee_details.mobile_number),1)]),e("li",$o,[jo,e("div",To,f(c(o).employeeDetails.get_employee_office_details.official_mobile),1)])])])])]),e("div",Fo,[e("div",Ho,[e("h6",zo,[D("Address "),e("span",{class:"personal-edit"},[e("a",{href:"#",class:"edit-icon",onClick:Z},Jo)]),b(B,{visible:m.value,"onUpdate:visible":t[15]||(t[15]=a=>m.value=a),modal:"",header:"",style:{width:"50vw",borderTop:"5px solid #002f56"}},{header:w(()=>[e("div",null,[e("h5",{style:k({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"})}," Address Information",4)])]),default:w(()=>[e("div",qo,[e("div",Wo,[e("div",Xo,[Zo,M(e("textarea",{name:"current_address_line_1",id:"current_address_line_1",cols:"30",rows:"3",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=a=>u.current_address=a)},null,512),[[S,u.current_address]])]),e("div",Ko,[Qo,M(e("textarea",{name:"permanent_address_line_1",id:"permanent_address_line_1",cols:"30",rows:"3",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=a=>u.Permanent_Address=a)},null,512),[[S,u.Permanent_Address]])])]),e("div",el,[e("div",ol,[b(r),e("button",{id:"btn_submit_address",class:"btn btn-border-orange submit-btn warn",onClick:K,severity:"warn"},"Save")])])])]),_:1},8,["visible"])]),e("div",null,[e("div",ll,[e("div",tl,[e("ul",sl,[e("li",al,[il,e("div",nl,f(c(o).employeeDetails.get_employee_details.current_address_line_1),1)])])]),e("div",dl,[e("ul",rl,[e("li",cl,[_l,e("div",ml,f(c(o).employeeDetails.get_employee_details.permanent_address_line_1),1)])])])])])])])],64)}}},xl=de(pl,[["__scopeId","data-v-11fa91ea"]]);export{xl as E,re as p};
