import{a as y}from"./index-362795f3.js";import{d as ue}from"./pinia-503c53ce.js";import{G as n,ag as Ke,a1 as E}from"./toastservice.esm-ed3188be.js";import{u as ze}from"./confirmationservice.esm-890ba1ea.js";import{S as Ge}from"./Service-4fe2d4a2.js";import{a as Je}from"./autoprefixer-6d6f7a0f.js";import{d as H}from"./dayjs.min-2f06af28.js";const Ve=ue("investmentFormulaStore",()=>{const M=n(),i=(t,r,b)=>{if(console.log("total income :"+t),console.log("employee age:"+b),r=="old"){if(b<60)if(t<=25e4){console.log("taxable income is zero");let l=0;return console.log("taxable_amount :"+Math.floor(l)),l}else if(t>25e4&&t<=5e5){let s=(t-25e4)*5/100;console.log("Tax On Income"+s);let _=Math.round(s+12500),d=_*4/100;return console.log("child Eduction :"+d),console.log("taxable_amount :"+_+d),_+d}else if(t>5e5&&t<=1e6){let s=(t-5e5)*20/100;console.log("Tax On Income"+s);let _=Math.round(s+12500),d=s*4/100;return console.log("child Eduction :"+d),console.log("taxable_amount :"+Math.round(_+d)),_+d}else if(t>1e6){let l="",s=0,d=(t-1e6)*30/100;console.log("Tax On Income"+d);let g=Math.round(d+112500);if(l=f(t),l){s=(d+l)*4/100,console.log("child Eduction :"+Math.round(s));let x=parseInt(g)+parseInt(l)+parseInt(s);return console.log("taxable_amount :"+Math.round(x)),x}else return s=g*4/100,console.log("child Eduction :"+Math.round(s)),g+s}else return console.log("Salary Is Less Than 250000"),t;else if(b>=60&&b<=80)if(t>3e5&&t<=5e5){let s=(t-3e5)*5/100;console.log("Tax On Income"+s);let _=s*4/100;console.log("child Eduction :"+_);let d=Math.round(s+_);return console.log("taxable_amount :"+d),d}else if(t>5e5&&t<1e6){let s=(t-5e5)*20/100;console.log("Tax On Income"+s);let _=s*4/100;console.log("child Eduction :"+_);let d=Math.round(s+1e4+_);return console.log("taxable_amount :"+d),d}else if(t>1e6){console.log("working");let s=(t-1e6)*30/100;console.log("Tax On Income"+s);let _=Math.floor(s+11e4),d=f(t),g=(s+d)*4/100;console.log("child Eduction :"+g);let x=_+d+g;return console.log("taxable_amount :"+x),x}else return console.log("Salary Is Less Than 300000"),t;else if(b>80)if(t>5e5&&t<=1e6){let s=(t-5e5)*20/100;console.log("taxable_amount :"+Math.round(s))}else if(t>1e6){let s=(t-1e6)*30/100;console.log("Tax On Income"+s);let _=Math.floor(s+112500),d=f(t),g=(s+d)*4/100;console.log("child Eduction :"+g);let x=_+d+g;return console.log("taxable_amount :"+x),x}else return console.log("Salary Is Less Than 500000"),t}else if(r=="new")if(t>3e5&&t<=6e5){let l=t*5/100;return console.log("taxable_amount :"+Math.floor(l)),console.log("new regime total income greater than 300001"),Math.floor(l)}else if(t>6e5&&t<=9e5){let l=t*10/100;return console.log("taxable_amount :"+Math.floor(15e3+l)),console.log("new regime total income greater than 600001"),M.value=Math.floor(l),Math.floor(15e3+l)}else if(t>9e5&&t<=12e5){let l=t*15/100;return console.log("taxable_amount :"+Math.floor(45e3+l)),console.log("new regime total income greater than 900001 "),Math.floor(45e3+l)}else if(t>12e5&&t<15e5){let l=t*20/100;return console.log("taxable_amount :"+Math.floor(9e4+l)),console.log("new regime total income greater than 1200001"),M.value=Math.floor(l),Math.floor(9e4+l)}else if(t>15e5){let l=t*30/100,s=Math.floor(l+15e4),_=f(t),d=(s+_)*4/100,g=s+_+d;return console.log("taxable_amount :"+g),g}else{let l=0;return console.log("less than 300000 "),l}else console.log("No More Regime")},K=t=>{const r=t*4/100;return console.log("Child Education:"+r),r},f=t=>{if(t>=5e6&&t<1e7){let r=t*10/100;return console.log("Subcharge:"+r),r}else if(t>=1e7&&t<2e7){let r=t*15/100;return console.log("Subcharge:"+r),r}else if(t>=2e7&&t<5e7){let r=t*25/100;return console.log("Subcharge:"+r),r}else if(t>5e7){let r=t*37/100;return console.log("Subcharge:"+r),r}else console.log("Total Income is Less than 5000000")};return{taxCalculation:i,maintenance_cal:(t,r,b)=>(r-b)*30/100,net_value_cal:(t,r,b)=>t-r-b,income_loss_cal:(t,r)=>r-t,tax_amt:M,subChargeCalculation:f,calChildEducation:K}}),tt=ue("investmentMainStore",()=>{const M=Ve(),i=Ge(),K=n(),f=Ke(),z=n(!1),L=ze(),V=n(1),t=n(!1),r=E({max_limit:0,declared_amt:0,status:"Not Submited",Date_of_submission:""}),b=n(),l=E([]),s=n(),_=n(),d=n(),g=n(),x=n(),W=n(),Q=n(),X=n(),Z=n(),w=n(),R=n(),ee=n(),T=E([]),C=E([]),N=E([]),G=n(!1),te=n(),le=n(!0),ne=n(),S=async()=>{let e="/investments/investments-form-details-template";t.value=!0,await y.post(e,{form_name:"investment 1"}).then(u=>{b.value=u.data.data.form_details,x.value=u.data.data.form_details.HRA,W.value=u.data.data.form_details["Section 80C & 80CC "],Q.value=u.data.data.form_details["Other Excemptions "],Z.value=u.data.data.form_details["House Properties "],w.value=u.data.data.form_details["Reimbersument "],R.value=u.data.data.form_details["Other Source Of  Income"],ee.value=u.data.data.form_details["Previous Employer Income"];let j=u.data.data.is_submitted==0;le.value=j,console.log(j),te.value=u.data.data.doj,console.log("employee DOJ"+u.data.data.doj),u.data.data.form_details["House Properties "].forEach(I=>{T.push(I.fs_id)}),u.data.data.form_details.HRA.forEach(I=>{N.push(I.fs_id),console.log(N[0])});let Y=u.data.data.form_details["Other Excemptions "].filter(function(I){return I.section=="80EE"}),ke=u.data.data.form_details["Other Excemptions "].filter(function(I){return I.section=="80EEA"}),qe=u.data.data.form_details["Other Excemptions "].filter(function(I){return I.section=="80EEB"});C.push(Y[0].fs_id),C.push(ke[0].fs_id),C.push(qe[0].fs_id)}).catch(u=>console.log(u)).finally(()=>{t.value=!1,O(),P(),F(),setTimeout(()=>{T.splice(0,T.length)},1e3),setTimeout(()=>{C.splice(0,C.length)},1e3)})},re=e=>{console.log(e),_.value=1;var u={fs_id:e.fs_id,declaration_amount:e.dec_amt,select_option:e.select_option};e.dec_amt?l.push(u):console.log("Declaration Amount Null");var j=new FormData;for(var Y in u)j.append(Y,u[Y]);console.log(j),e.dec_amt>e.max_amount?f.add({severity:"error",summary:"Waring",detail:"Declaration amount is greater than Maximum Limit",life:3e3}):console.log("working")},de=()=>{console.log(l),t.value=!0,console.log("code:"+i.current_user_code),console.log("Form Id:"+_.value);let e="/investments/saveEmpdetails";y.post(e,{user_code:i.current_user_code,form_id:_.value,is_submitted:0,formDataSource:l}).finally(()=>{t.value=!1,f.add({severity:"success",summary:"Saved",detail:"Data Saved Successfull",life:3e3}),S(),l.splice(0,l.length),r.status="Drafed",A(),se()})},_e=()=>{let e="/investments/saveEmpdetails";y.post(e,{user_code:i.current_user_code,is_submitted:1}).then(u=>{console.log(u.data)}).finally(()=>{z.value=!0,setTimeout(()=>{window.location.reload()},2e3)})},ie=e=>{let u=new Intl.NumberFormat("en-US",{style:"currency",currency:"INR"}).format(e);return`${u.charAt(0)} ${u.substring(1,u.length)}`},oe=n(),ce=n(),m=E({id:"",user_code:"",fs_id:"",from_month:"",to_month:"",city:"",total_rent_paid:"",landlord_name:"",landlord_PAN:"",address:""}),J=n(!1),pe=n(!1),F=async()=>{console.log(Object.values(N[0])),await y.post("/investments/fetchEmpRentalDetails",{user_code:i.current_user_code,fs_id:N[0]}).then(e=>{console.log(Object.values(e.data)),oe.value=Object.values(e.data.rent_details),ne.value=e.data.dec_amt[0].sumofRentPaid,Object.values(e.data).length==0?G.value=!1:G.value=!0}).catch(e=>console.log(e)).finally(()=>{t.value=!1})},me=e=>{console.log(e),J.value=!0,m.id=e.id,m.from_month=H(e.json_popups_value.from_month).format("DD-MM-YYYY"),m.to_month=H(e.json_popups_value.to_month).format("DD-MM-YYYY"),m.address=e.json_popups_value.address,m.city=e.json_popups_value.city,m.landlord_PAN=e.json_popups_value.landlord_PAN,m.landlord_name=e.json_popups_value.landlord_name,m.total_rent_paid=e.json_popups_value.total_rent_paid},ve=n(!1),fe=()=>{m.user_code=i.current_user_code,m.fs_id=N[0],t.value=!0,J.value=!1,y.post("/investments/saveSectionPopups",m).then(e=>{f.add({severity:"success",summary:"Drafted",detail:"New Rental Added",life:3e3})}).catch(e=>console.log(e)).finally(()=>{t.value=!1,F(),S(),r.status="Drafed",A()})},he=e=>{L.require({message:"Do you want to delete this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{t.value=!0,y.post("/investments/deleteHousePropertyDetails",{current_table_id:e.id}).finally(()=>{t.value=!1,f.add({severity:"error",summary:"Deleted",detail:"House Rented Allowance Deleted",life:3e3}),F(),S()})},reject:()=>{}})};n(),E({EPF:"",VPF:"",PPF:"",LIP:"",SD_RCD:"",MD:"",NSC:"",ULIP:"",YTSFDR:"",DAP:"",SAP:"",SSY:"",STBIBNAR:"",SPF:""});const ye=E({loan_sanction_date:"",lender_type:"",property_value:"",loan_amount:"",interest_amount_paid:"",vechicle_brand:"",vechicle_model:"",interest_amount_paid:""}),c=E({id:"",user_code:"",fs_id:"",loan_sanction_date:"",lender_type:"",property_value:"",loan_amount:"",interest_amount_paid:"",section:"80EE"}),p=E({id:"",user_code:"",fs_id:"",loan_sanction_date:"",lender_type:"",property_value:"",loan_amount:"",interest_amount_paid:"",section:"80EEA"}),v=E({id:"",user_code:"",fs_id:"",loan_sanction_date:"",lender_type:"",property_value:"",loan_amount:"",interest_amount_paid:"",vechicle_brand:"",vechicle_model:"",interest_amount_paid:"",section:"80EEB"}),B=n(!1),D=n(!1),$=n(!1),ge=e=>{c.id=e.id,B.value=!0,c.user_code=i.current_user_code,c.fs_id=e.fs_id,P()},Ee=e=>{p.id=e.id,D.value=!0,p.user_code=i.current_user_code,p.fs_id=e.fs_id,P()},be=e=>{v.id=e.id,$.value=!0,v.user_code=i.current_user_code,v.fs_id=e.fs_id,P()},xe=n(),Se=n(),je=n(),P=()=>{y.post("/investments/fetchOtherExemption",{user_code:i.current_user_code,otherExe:C}).then(e=>{console.log(e.data),X.value=Object.values(e.data)})},Me=e=>{console.log(e),e.json_popups_value.section=="80EE"?(B.value=!0,c.fs_id=e.json_popups_value.fs_id,c.user_code=i.current_user_code,c.loan_sanction_date=H(e.json_popups_value.loan_sanction_date).format("YYYY-MM-DD"),c.lender_type=e.json_popups_value.lender_type,c.loan_amount=e.json_popups_value.loan_amount,c.property_value=e.json_popups_value.property_value,c.interest_amount_paid=e.json_popups_value.interest_amount_paid):e.json_popups_value.section=="80EEA"?(D.value=!0,p.fs_id=e.json_popups_value.fs_id,p.user_code=i.current_user_code,p.loan_sanction_date=H(e.json_popups_value.loan_sanction_date).format("YYYY-MM-DD"),p.lender_type=e.json_popups_value.lender_type,p.loan_amount=e.json_popups_value.loan_amount,p.property_value=e.json_popups_value.property_value,p.interest_amount_paid=e.json_popups_value.interest_amount_paid):e.json_popups_value.section=="80EEB"?(v.fs_id=e.json_popups_value.fs_id,v.user_code=i.current_user_code,$.value=!0,v.loan_sanction_date=H(e.json_popups_value.loan_sanction_date).format("YYYY-MM-DD"),v.vechicle_brand=e.json_popups_value.vechicle_brand,v.vechicle_model=e.json_popups_value.vechicle_model,v.interest_amount_paid=e.json_popups_value.interest_amount_paid):console.log("completed")},Pe=e=>{L.require({message:"Do you want to delete this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{t.value=!0,y.post("/investments/deleteHousePropertyDetails",{current_table_id:e.id}).finally(()=>{t.value=!1,f.add({severity:"error",summary:"Deleted",detail:`${e.json_popups_value.section} is Deleted`,life:3e3}),P(),S()})},reject:()=>{}})},Oe=()=>{B.value=!1,t.value=!0,console.log(Je.data),y.post("/investments/saveSection80",c).then(e=>{f.add({severity:"success",summary:"Drafted",detail:"80EE Added",life:3e3})}).catch(e=>console.log(e)).finally(()=>{t.value=!1,S(),A(),P()})},Ie=()=>{D.value=!1,t.value=!0,y.post("/investments/saveSection80",p).then(e=>{t.value=!1,f.add({severity:"success",summary:"Drafted",detail:"80EEA Added",life:3e3})}).catch(e=>console.log(e)).finally(()=>{t.value=!1,S(),A(),P()})},Ae=()=>{$.value=!1,t.value=!0,y.post("/investments/saveSection80",v).then(e=>{f.add({severity:"success",summary:"Drafted",detail:"80EEB Added",life:3e3})}).catch(e=>console.log(e)).finally(()=>{t.value=!1,S(),A(),P()})},ae=n(),U=n(!1),k=n(!1),q=n(!1),h=E({id:"",user_code:"",fs_id:"",lender_name:"",lender_pan:"",lender_type:"",income_loss:"",address:"",property_type:"Self Occupied Property"}),o=E({id:"",user_code:"",fs_id:"",lender_name:"",lender_pan:"",lender_type:"",loss_from_housing_property:"",address:"",rent_received:"",municipal_tax:"",maintenance:"",net_value:"",interest:"",income_loss:"",property_type:"Let Out Property"}),a=E({id:"",user_code:"",fs_id:"",lender_name:"",lender_pan:"",lender_type:"",loss_from_housing_property:"",address:"",rent_received:"",municipal_tax:"",maintenance:"",net_value:"",interest:"",income_loss:"",property_type:"Deemed Let Out Property"}),Ce=()=>{const e=M.maintenance_cal(o.lender_type,o.rent_received,o.municipal_tax),u=M.maintenance_cal(a.lender_type,a.rent_received,a.municipal_tax);o.maintenance=e,a.maintenance=u;const j=M.net_value_cal(o.rent_received,o.municipal_tax,o.maintenance);o.net_value=j;const Y=M.net_value_cal(a.rent_received,a.municipal_tax,a.maintenance);a.net_value=Y,o.income_loss=M.income_loss_cal(o.interest,o.net_value),a.income_loss=M.income_loss_cal(a.interest,a.net_value)},O=()=>{y.post("/investments/fetchHousePropertyDetails",{user_code:i.current_user_code,hop:T}).then(e=>{ae.value=Object.values(e.data)})},Ye=e=>{U.value=!0,console.log(e),h.user_code=i.current_user_code,h.fs_id=e.fs_id,O()},Te=e=>{k.value=!0,o.user_code=i.current_user_code,o.fs_id=e.fs_id,O()},Ne=e=>{q.value=!0,a.user_code=i.current_user_code,a.fs_id=e.fs_id,O()},He=e=>{e.json_popups_value.property_type=="Self Occupied Property"?(h.user_code=i.current_user_code,h.fs_id=e.fs_id,h.id=e.id,U.value=!0,h.lender_name=e.json_popups_value.lender_name,h.lender_pan=e.json_popups_value.lender_pan,h.lender_type=e.json_popups_value.lender_type,h.loss_from_housing_property=e.json_popups_value.loss_from_housing_property,h.property_type=e.json_popups_value.property_type,h.address=e.json_popups_value.address):e.json_popups_value.property_type=="Let Out Property"?(k.value=!0,o.user_code=i.current_user_code,o.id=e.id,o.fs_id=e.fs_id,o.lender_name=e.json_popups_value.lender_name,o.lender_pan=e.json_popups_value.lender_pan,o.lender_type=e.json_popups_value.lender_type,o.rent_received=e.json_popups_value.rent_received,o.municipal_tax=e.json_popups_value.municipal_tax,o.maintenance=e.json_popups_value.maintenance,o.net_value=e.json_popups_value.net_value,o.interest=e.json_popups_value.interest,o.income_loss=e.json_popups_value.income_loss):e.json_popups_value.property_type=="Deemed Let Out Property"?(q.value=!0,a.user_code=i.current_user_code,a.fs_id=e.fs_id,a.id=e.id,a.lender_name=e.json_popups_value.lender_name,a.lender_pan=e.json_popups_value.lender_pan,a.lender_type=e.json_popups_value.lender_type,a.rent_received=e.json_popups_value.rent_received,a.municipal_tax=e.json_popups_value.municipal_tax,a.maintenance=e.json_popups_value.maintenance,a.net_value=e.json_popups_value.net_value,a.interest=e.json_popups_value.interest,a.income_loss=e.json_popups_value.income_loss):console.log("No more Property Type")},Le=e=>{L.require({message:"Do you want to delete this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{t.value=!0,y.post("/investments/deleteHousePropertyDetails",{current_table_id:e.id}).finally(()=>{t.value=!1,f.add({severity:"error",summary:"Deleted",detail:`${e.json_popups_value.property_type} is Deleted`,life:3e3}),O(),S()})},reject:()=>{console.log("House property Delete Action Rejected")}})},Fe=()=>{t.value=!0,U.value=!1,y.post("/investments/saveSectionPopups",h).then(e=>{}).finally(()=>{O(),S(),t.value=!1,f.add({severity:"success",summary:"Saved",detail:`new ${h.property_type} is Drafted `,life:3e3}),A()})},Be=()=>{t.value=!0,k.value=!1,y.post("/investments/saveSectionPopups",o).then(e=>{}).finally(()=>{O(),S(),t.value=!1,f.add({severity:"success",summary:"Saved",detail:`new ${o.property_type} is Drafted `,life:3e3}),A()})},De=()=>{t.value=!0,q.value=!1,y.post("/investments/saveSectionPopups",a).then(e=>{}).finally(()=>{O(),S(),t.value=!1,f.add({severity:"success",summary:"Saved",detail:`new ${a.property_type} is Drafted `,life:3e3}),A()})},se=()=>{y.get("/investments/investment-summary").then(e=>{s.value=e.data}).finally(()=>{t.value=!1;var e=0,u=0;s.value.forEach(j=>{e+=j.dec_amount,u+=j.amount_rejected}),console.log("declaration amount :"+e),r.declared_amt=e,r.max_limit=parseInt(u)+parseInt(e)})},$e=n([{id:1,name:"Chennai",value:"Chennai"},{id:2,name:"Mumbai",value:"Mumbai"},{id:3,name:"Hyderabad",value:"Hyderabad"},{id:4,name:"Kolkatta",value:"Kolkatta"},{id:5,name:"Other Non Metro",value:"Other Non Metro"}]),Ue=n([{name:"Financial Institution",code:"Financial Institution"},{name:"Others",code:"Others"}]),A=()=>{m.from_month=null,m.to_month=null,m.total_rent_paid=null,m.address=null,m.city=null,m.landlord_name=null,m.landlord_PAN=null,c.loan_sanction_date=null,c.lender_type=null,c.property_value=null,c.loan_amount=null,c.interest_amount_paid=null,c.vechicle_brand=null,c.vechicle_model=null,c.interest_amount_paid=null,p.loan_sanction_date=null,p.lender_type=null,p.property_value=null,p.loan_amount=null,p.interest_amount_paid=null,p.vechicle_brand=null,p.vechicle_model=null,p.interest_amount_paid=null,v.loan_sanction_date=null,v.lender_type=null,v.property_value=null,v.loan_amount=null,v.interest_amount_paid=null,v.vechicle_brand=null,v.vechicle_model=null,v.interest_amount_paid=null,h.lender_name=null,h.lender_pan=null,h.lender_type=null,h.address=null,o.lender_name=null,o.lender_pan=null,o.lender_type=null,o.loss_from_housing_property=null,o.address=null,o.rent_received=null,o.municipal_tax=null,o.maintenance=null,o.net_value=null,o.interest=null,o.income_loss=null,a.lender_name=null,a.lender_pan=null,a.lender_type=null,a.loss_from_housing_property=null,a.address=null,a.rent_received=null,a.municipal_tax=null,a.maintenance=null,a.net_value=null,a.interest=null,a.income_loss=null};return{fetchotherExe:P,Dec80EE:xe,Dec80EEA:Se,Dec80EEB:je,investment_exemption_steps:V,currentUSerCode:K,canShowLoading:t,getInvestmentSource:S,saveFormData:de,getFormId:_,formatCurrency:ie,editingRowSource:d,updatedRowSource:g,canShowSubmissionStatus:z,submitFormData:_e,investmentMainSource:b,formDataSource:l,hraSource:x,section80ccSource:W,otherExemptionSource:Q,housePropertySource:Z,reimbursmentSource:w,previousEmployeerIncomeSource:ee,otherIncomeSource:R,isSubmitted:le,taxSavingInvestments:r,fetchInvestmentSummary:se,investmentSummarySource:s,hra_data:oe,disableSaveHra:ve,hra:m,current_data:ce,dailogAddNewRental:J,dailogEditNewRental:pe,editHraNewRental:me,fetchHraNewRental:F,saveHraNewRental:fe,deleteRentalDetails:he,AddHraButtonDisabled:G,getDeclarationAmount:re,otherExe:C,other_Exe:ye,dailog_80EE:B,dailog_80EEA:D,dailog_80EEB:$,other_exe_80EE:c,other_exe_80EEA:p,other_exe_80EEB:v,save80EE:Oe,save80EEA:Ie,save80EEB:Ae,get80EESlotData:ge,get80EEASlotData:Ee,get80EEBSlotData:be,otherExeSectionData:X,editOtherExe:Me,deleteOtherExeDetails:Pe,house_props_data:ae,dailog_SelfOccupiedProperty:U,dailog_DeemedLetOutProperty:q,dailog_LetOutProperty:k,income_loss_calculation:Ce,fetchPropertyType:O,saveSelfOccupiedProperty:Fe,saveLetOutProperty:Be,saveDeemedLetOutProperty:De,hop:T,lop:o,sop:h,dlop:a,getDlopSlotData:Ne,getLopSlotData:Te,getSopSlotData:Ye,editHouseProps:He,deleteHouseProps:Le,metrocitiesOption:$e,lenderTypeOption:Ue,employeDoj:te,sumOfTotalRentPaid:ne}});export{Ve as a,tt as i};
