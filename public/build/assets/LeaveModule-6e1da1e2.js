import{H as s,o as m,c as p,e,h as t,F as A,f as R,t as d,a3 as T,_ as w,I,g as y,w as o,k as f,n as B,b as U,a as F,al as H,J as Y,P as j,K as Q,L as W,R as G,u as J,v as K,V as z,M as q,Q as X,A as Z,N as ee,S as ae}from"./toastservice.esm-1e19bead.js";import{d as te,c as oe}from"./pinia-8c47295b.js";import{T as le,B as se,S as ne,b as ie,a as re}from"./styleclass.esm-fce48f9f.js";import"./blockui.esm-2f48c23f.js";import{D as de}from"./dialogservice.esm-341570db.js";import{s as ce}from"./row.esm-6ebc942e.js";import{s as me}from"./columngroup.esm-9dd1458e.js";import{s as pe}from"./calendar.esm-d56ef9a8.js";import{s as ue}from"./checkbox.esm-c15bef39.js";import{s as ve}from"./chips.esm-910adea3.js";import{s as _e}from"./multiselect.esm-43969b6f.js";import{s as ge}from"./textarea.esm-7d78d5bc.js";import{h as O}from"./moment-fbc5633a.js";import{a as M}from"./index-362795f3.js";import{d as E}from"./dayjs.min-2f06af28.js";import{S as ye}from"./Service-bd475bf0.js";import{_ as he}from"./LeaveApply-18518a7b.js";/* empty css                                                            */const N=te("useLeaveModuleStore",()=>{ye();const V=s(!0),g=s(),x=s(),b=s(),c=s(),C=s(),h=s();async function $(){V.value=!0;let v="/get-employee-leave-balance";await M.get(v).then(r=>{console.log(r.data),g.value=r.data,x.value=r.data["Avalied Leaves"]}).finally(()=>{V.value=!1})}async function k(v,r,P){let S=0;await M.get(window.location.origin+"/currentUserCode ").then(a=>{S=a.data}),await M.post("/attendance/getEmployeeLeaveDetails",{user_code:S,filter_month:v,filter_year:r,filter_leave_status:P}).then(a=>{b.value=a.data.data,console.log("getEmployeeLeaveHistory() : "+a.data)})}async function u(v,r,P,S){M.post("/attendance/getTeamLeaveDetails",{manager_code:v,filter_month:r,filter_year:P,filter_leave_status:S}).then(a=>{c.value=a.data,console.log("getTeamLeaveHistory() : "+a.data)})}async function L(v,r,P){M.post("/attendance/getAllEmployeesLeaveDetails",{filter_month:v,filter_year:r,filter_leave_status:P}).then(S=>{C.value=S.data,console.log("getOrgLeaveHistory() : "+S.data)})}async function i(v){M.post("/attendance/getLeaveInformation",{record_id:v}).then(r=>{h.value=r.data.data,console.log("getLeaveInformation() : "+r.data)})}return{canShowLoading:V,array_employeeLeaveHistory:b,array_teamLeaveHistory:c,array_orgLeaveHistory:C,array_employeeLeaveBalance:g,array_employeeAvailedLeaveBalance:x,getEmployeeLeaveHistory:k,getTeamLeaveHistory:u,getAllEmployeesLeaveDetails:L,getLeaveInformation:i,getEmployeeLeaveBalance:$}}),fe={class:"mb-3 tw-card"},be={class:"mb-2 row"},Le=e("div",{class:"col-sm-6 col-xl-6 col-md-6 col-lg-6"},[e("h6",{class:"text-lg font-semibold text-gray-900 modal-title"},"Leave Balance")],-1),we={class:"col-6 justify-content-end d-flex"},xe={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4",style:{display:"grid"}},$e={class:"text-lg font-semibold text-center"},ke={class:"my-3 text-xl font-bold text-center"},Se={key:0},Ce={key:1},De={class:"tw-card"},Te=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Leave Availed",-1),Pe={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4",style:{display:"grid"}},Ae={class:"text-center"},Ve={class:"mb-2 text-base font-semibold"},Me={class:"mb-0 text-base font-semibold"},Be={__name:"EmployeeLeaveBalance",setup(V){const g=N();return s([{id:1,leave_type:"sick",leave_balance:2},{id:2,leave_type:"causal",leave_balance:4},{id:3,leave_type:"earn",leave_balance:6},{id:4,leave_type:"sick",leave_balance:2},{id:6,leave_type:"causal",leave_balance:4},{id:7,leave_type:"earn",leave_balance:6}]),(x,b)=>(m(),p(A,null,[e("div",fe,[e("div",be,[Le,e("div",we,[t(he)])]),e("div",xe,[(m(!0),p(A,null,R(T(g).array_employeeLeaveBalance,c=>(m(),p("div",{key:c,class:"p-1 my-4 rounded-lg shadow-md tw-card dynamic-card hover:bg-slate-100"},[e("p",$e,d(c.leave_type),1),e("p",ke,[c.leave_balance==""?(m(),p("span",Se,"0")):(m(),p("span",Ce,d(c.leave_balance),1))])]))),128))])]),e("div",De,[Te,e("div",Pe,[(m(!0),p(A,null,R(T(g).array_employeeLeaveBalance,c=>(m(),p("div",{class:"bg-indigo-100 border-l-4 border-indigo-300 tw-card",key:c},[e("div",Ae,[e("p",Ve,d(c.leave_type),1),e("h6",Me,d(c.avalied_leaves),1)])]))),128))])])],64))}},Ee={class:"mt-3 row"},Re={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Ie={class:"mb-0 card leave-history"},Ne={class:"card-body"},Oe=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"}," Leave history ",-1),Ue={class:"d-flex justify-content-end"},Fe=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),He={class:"table-responsive"},Ye={key:0},je={key:1},Qe={key:1},We={__name:"EmployeeLeaveDetails",setup(V){const g=N(),x=s(!0),b=s(),c=s(),C=u=>{b.value.toggle(u)},h=s({global:{value:null,matchMode:w.CONTAINS},employee_name:{value:null,matchMode:w.STARTS_WITH,matchMode:w.EQUALS,matchMode:w.CONTAINS},status:{value:null,matchMode:w.EQUALS}}),$=s(["Pending","Approved","Rejected"]);I(async()=>{console.log(c.v),await g.getEmployeeLeaveHistory(E().month()+1,E().year(),["Approved","Pending","Rejected"]),x.value=!1});async function k(u){console.log("Showing leave details for record_id : "+u),await g.getLeaveInformation(u)}return(u,L)=>{const i=y("Calendar"),v=y("Button"),r=y("Column"),P=y("OverlayPanel"),S=y("Dropdown"),a=y("DataTable");return m(),p(A,null,[t(Be),e("div",Ee,[e("div",Re,[e("div",Ie,[e("div",Ne,[Oe,e("div",Ue,[Fe,t(i,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:c.value,"onUpdate:modelValue":L[0]||(L[0]=l=>c.value=l),style:{border:"1px solid orange","border-radius":"7px",height:"38px"}},null,8,["modelValue"]),t(v,{class:"h-10 mb-2 btn btn-orange",label:"Submit",onClick:L[1]||(L[1]=l=>T(g).getEmployeeLeaveHistory(c.value.getMonth()+1,c.value.getFullYear(),$.value))})]),e("div",He,[t(a,{value:T(g).array_employeeLeaveHistory,loading:x.value,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:h.value,"onUpdate:filters":L[2]||(L[2]=l=>h.value=l),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[f(" No Employee data..... ")]),loading:o(()=>[f(" Loading customers data. Please wait. ")]),default:o(()=>[t(r,{field:"leave_type",header:"Leave Type",style:{"min-width":"8rem"}}),t(r,{field:"start_date",header:"Start Date"},{body:o(l=>[f(d(T(E)(l.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),t(r,{field:"end_date",header:"End Date",dataType:"date"},{body:o(l=>[f(d(T(E)(l.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),t(r,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:o(l=>[l.data.leave_reason&&l.data.leave_reason.length>70?(m(),p("div",Ye,[e("p",{onClick:C,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),t(P,{ref_key:"overlayPanel",ref:b,style:{height:"80px"}},{default:o(()=>[f(d(l.data.leave_reason),1)]),_:2},1536)])):(m(),p("div",je,d(l.data.leave_reason??""),1))]),_:1}),t(r,{field:"reviewer_name",header:"Approver Name"}),t(r,{field:"reviewer_comments",header:"Approver Comments"}),t(r,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:l})=>[e("span",{class:B("customer-badge status-"+l.status)},d(l.status),3)]),filter:o(({filterModel:l,filterCallback:_})=>[t(S,{modelValue:l.value,"onUpdate:modelValue":D=>l.value=D,onClick:D=>_(),options:$.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(D=>[D.value?(m(),p("span",{key:0,class:B("customer-badge status-"+D.value)},d(D.value),3)):(m(),p("span",Qe,d(D.placeholder),1))]),option:o(D=>[e("span",{class:B("customer-badge status-"+D.option)},d(D.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick","options"])]),_:1}),t(r,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:o(l=>[t(v,{type:"button",icon:"pi pi-check-circle",class:"text-white Button py-2.5",label:"View",onClick:_=>k(l.data.id),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","loading","filters"])])])])])])],64)}}},Ge={class:"mt-3 row"},Je={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Ke={class:"mb-0 card leave-history"},ze={class:"card-body"},qe=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave Balance",-1),Xe={class:"mt-3 row"},Ze={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},ea={class:"mb-0 card leave-history"},aa={class:"card-body"},ta=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave history",-1),oa=e("div",null,null,-1),la={key:0},sa={key:1},na={key:1},ia={key:0},ra={__name:"OrgLeaveDetails",setup(V){s();const g=s(),x=s(),b=s();s(),s(),s(!0);const c=s(),C=k=>{c.value.toggle(k)},h=s({global:{value:null,matchMode:w.CONTAINS},employee_name:{value:null,matchMode:w.STARTS_WITH,matchMode:w.EQUALS,matchMode:w.CONTAINS},status:{value:null,matchMode:w.EQUALS}}),$=s(["Pending","Approved","Rejected"]);return I(()=>{}),(k,u)=>{const L=y("InputText"),i=y("Column"),v=y("DataTable"),r=y("OverlayPanel"),P=y("Dropdown"),S=y("Button");return m(),p(A,null,[e("div",Ge,[e("div",Je,[e("div",Ke,[e("div",ze,[qe,e("div",null,[t(v,{value:x.value,rows:5,rowsPerPageOptions:[5,10,25],paginator:!0,responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",filters:h.value,"onUpdate:filters":u[0]||(u[0]=a=>h.value=a),filterDisplay:"menu",globalFilterFields:["name","status"]},{default:o(()=>[t(i,{field:"employee_name",header:"Employee Name",style:{"min-width":"15rem"}},{body:o(a=>[f(d(a.data.employee_name),1)]),filter:o(({filterModel:a,filterCallback:l})=>[t(L,{modelValue:a.value,"onUpdate:modelValue":_=>a.value=_,onInput:_=>l(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),(m(!0),p(A,null,R(g.value,a=>(m(),U(i,{key:a.id,header:a,field:"array_leave_details"},{body:o(({data:l})=>[f(d(l.array_leave_details[a]),1)]),_:2},1032,["header"]))),128))]),_:1},8,["value","filters"])])])])])]),e("div",Xe,[e("div",Ze,[e("div",ea,[e("div",aa,[ta,e("div",null,[t(v,{value:b.value,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:h.value,"onUpdate:filters":u[1]||(u[1]=a=>h.value=a),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:o(()=>[f(" No Employee data..... ")]),loading:o(()=>[f(" Loading customers data. Please wait. ")]),default:o(()=>[t(i,{field:"employee_name",header:"Employee Name"},{body:o(a=>[oa,f(" "+d(a.data.employee_name),1)]),filter:o(({filterModel:a,filterCallback:l})=>[t(L,{modelValue:a.value,"onUpdate:modelValue":_=>a.value=_,onInput:_=>l(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(i,{field:"leave_type",header:"Leave Type",style:{"min-width":"8rem"}}),t(i,{field:"start_date",header:"Start Date"},{body:o(a=>[f(d(T(O)(a.data.start_date).format("DD-MM-YYYY")),1)]),_:1}),t(i,{field:"end_date",header:"End Date",dataType:"date"},{body:o(a=>[f(d(T(O)(a.data.end_date).format("DD-MM-YYYY")),1)]),_:1}),t(i,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:o(a=>[a.data.leave_reason&&a.data.leave_reason.length>70?(m(),p("div",la,[e("p",{onClick:C,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),t(r,{ref_key:"overlayPanel",ref:c,style:{height:"80px"}},{default:o(()=>[f(d(a.data.leave_reason),1)]),_:2},1536)])):(m(),p("div",sa,d(a.data.leave_reason??""),1))]),_:1}),t(i,{field:"reviewer_name",header:"Approver Name"}),t(i,{field:"reviewer_comments",header:"Approver Comments"}),t(i,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:a})=>[e("span",{class:B("customer-badge status-"+a.status)},d(a.status),3)]),filter:o(({filterModel:a,filterCallback:l})=>[t(P,{modelValue:a.value,"onUpdate:modelValue":_=>a.value=_,onClick:_=>l(),options:$.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(_=>[_.value?(m(),p("span",{key:0,class:B("customer-badge status-"+_.value)},d(_.value),3)):(m(),p("span",na,d(_.placeholder),1))]),option:o(_=>[e("span",{class:B("customer-badge status-"+_.option)},d(_.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick","options"])]),_:1}),t(i,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:o(a=>[a.data.status=="Pending"?(m(),p("span",ia,[t(S,{type:"button",icon:"pi pi-check-circle",class:"p-button-success text-white Button py-2.5",label:"Approve",onClick:l=>k.showConfirmDialog(a.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(S,{type:"button",icon:"pi pi-times-circle",class:"text-white p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2em"},onClick:l=>k.showConfirmDialog(a.data,"Reject")},null,8,["onClick"])])):F("",!0)]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},da={class:"card top-line"},ca={class:"card-body"},ma={class:"row"},pa=e("div",{class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave Balance")],-1),ua=H('<div class="mt-3 row"><div class="col-sm-12 col-xl-12 col-md-12 col-lg-12"><div class="mb-0 card leave-history"><div class="card-body"><h6 class="mb-4 text-lg font-semibold text-gray-900 modal-title">Team Leave history</h6><div class="table-responsive"><div id="team_leaveHistory" class="custom_gridJs"></div></div></div></div></div></div>',1),va={__name:"TeamLeaveDetails",setup(V){const g=s(),x=s(),b=s();s(),s();const c=s(!0),C=s({employee_name:{value:null,matchMode:w.STARTS_WITH,matchMode:w.EQUALS,matchMode:w.CONTAINS}});return I(()=>{let h=null;M.get(window.location.origin+"/currentUser").then(k=>{h=k.data,M.post($,{user_id:h}).then(u=>{g.value=Object.values(u.data),x.value=Object.values(u.data.leave_types),b.value=Object.values(u.data.employees),c.value=!1,console.log("Response Data Team Leave: "+JSON.stringify(Object.values(u.data)))})});let $=window.location.origin+"/fetch-team-leaves-balance/";console.log("Fetching Team LEAVE from url : "+$)}),(h,$)=>{const k=y("InputText"),u=y("Column"),L=y("DataTable");return m(),p(A,null,[e("div",da,[e("div",ca,[e("div",ma,[pa,e("div",null,[t(L,{value:b.value,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:C.value,"onUpdate:filters":$[0]||($[0]=i=>C.value=i),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{default:o(()=>[t(u,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(i=>[f(d(i.data.employee_name),1)]),filter:o(({filterModel:i,filterCallback:v})=>[t(k,{modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,onInput:r=>v(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),(m(!0),p(A,null,R(x.value,i=>(m(),U(u,{header:i,key:i.id,field:"array_leave_details"},{body:o(({data:v})=>[f(d(v.array_leave_details[i]),1)]),_:2},1032,["header"]))),128))]),_:1},8,["value","filters"])])])])]),ua],64)}}};const _a={class:"Leave_dashboard mt-30"},ga=e("div",{class:"pt-1 pb-0 mb-3 tw-card left-line"},[e("div",{class:"flex justify-between"},[e("ul",{class:"nav nav-pills nav-tabs-dashed",role:"tablist"},[e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Leave Balance")]),e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Team Leave Balance")]),e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#org_leave","aria-selected":"false",tabindex:"-1",role:"tab"}," Org Leave Balance")])]),e("div",{class:"flex items-center"},[e("div",{class:"mr-3"},[e("div",{class:"input-group me-2"},[e("label",{class:"input-group-text",for:"inputGroupSelect01"},[e("i",{class:"fa fa-calendar text-primary","aria-hidden":"true"})]),e("select",{class:"form-select btn-line-primary",id:"inputGroupSelect01"})])]),e("div",{class:""},[e("a",{href:"/attendance-leave-policydocument",id:"",class:"btn btn-orange",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")])])])],-1),ya={class:"tab-content",id:"pills-tabContent"},ha={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},fa={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},ba={class:"tab-pane show",id:"org_leave",role:"tabpanel","aria-labelledby":"pills-profile-tab"},La=e("h5",{style:{"text-align":"center"}},"Please wait...",-1),wa={__name:"LeaveModule",setup(V){const g=N();return I(()=>{g.getEmployeeLeaveBalance()}),(x,b)=>{const c=y("ProgressSpinner"),C=y("Dialog");return m(),p(A,null,[e("div",_a,[ga,e("div",ya,[e("div",ha,[t(We)]),e("div",fa,[t(va)]),e("div",ba,[t(ra)])])]),t(C,{header:"Header",visible:T(g).canShowLoading,"onUpdate:visible":b[0]||(b[0]=h=>T(g).canShowLoading=h),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[t(c,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[La]),_:1},8,["visible"])],64)}}},n=Y(wa),xa=oe();n.use(j,{ripple:!0});n.use(Q);n.use(W);n.use(de);n.use(xa);n.directive("tooltip",le);n.directive("badge",se);n.directive("ripple",G);n.directive("styleclass",ne);n.directive("focustrap",J);n.component("Button",K);n.component("DataTable",ie);n.component("Column",re);n.component("ColumnGroup",me);n.component("Row",ce);n.component("Toast",z);n.component("ConfirmDialog",q);n.component("Dropdown",X);n.component("InputText",Z);n.component("Dialog",ee);n.component("ProgressSpinner",ae);n.component("Calendar",pe);n.component("Checkbox",ue);n.component("Chips",ve);n.component("MultiSelect",_e);n.component("Textarea",ge);n.mount("#LeaveModule");
