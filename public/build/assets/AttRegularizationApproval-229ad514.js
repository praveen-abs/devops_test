import{B as v,W as Y,E as H,c as g,h as t,w as o,V as h,a0 as V,e as u,K as y,g as r,o as f,t as p,j as C,n as $,a as J,G as W,P as G,H as K,R as Q,q}from"./toastservice.esm-5c81c910.js";import{T as X,B as Z,S as ee,b as te,a as ae}from"./styleclass.esm-53d2a361.js";import"./blockui.esm-1fe6d364.js";import{u as oe,C as ne,F as se,a as le,b as ie,s as re}from"./inputtext.esm-41ef66e5.js";import{s as pe}from"./confirmdialog.esm-9fa1521f.js";import{s as ce}from"./toast.esm-8df40d88.js";import{s as ue}from"./progressspinner.esm-eb943c57.js";import{s as de}from"./tag.esm-ec435496.js";import{a as z}from"./index-f7a317fc.js";import{h as me}from"./moment-fbc5633a.js";const ve=u("h5",{style:{"text-align":"center"}},"Please wait...",-1),ge=u("h5",{style:{"text-align":"center"}},"Please wait...",-1),fe={class:"confirmation-content"},_e=u("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),he={key:0},ye={key:1},we={key:1},be={key:0,style:{width:"250px",display:"block"}},Ce={__name:"AttRegularizationApproval",setup(Se){let k=v(),d=v(!1),c=v(!1);oe();const L=Y(),S=v(!0),R=v({global:{value:null,matchMode:y.CONTAINS},employee_name:{value:null,matchMode:y.STARTS_WITH,matchMode:y.EQUALS,matchMode:y.CONTAINS},status:{value:null,matchMode:y.EQUALS}}),B=v(["Pending","Approved","Rejected"]);let m=null,w=null;H(()=>{A()});function A(){let s=window.location.origin+"/fetch-att-regularization-data";console.log("AJAX URL : "+s),z.get(s).then(n=>{console.log("Axios : "+n.data),k.value=n.data,S.value=!1})}function D(s,n){d.value=!0,m=n,w=s,console.log("Selected Row Data : "+JSON.stringify(s))}function P(s){d.value=!1,s&&x()}function x(){m="",w=null}const U=s=>{switch(s){case"Rejected":return"danger";case"Approved":return"success";case"Pending":return"warning"}};function j(){P(!1),c.value=!0,console.log("Processing Rowdata : "+JSON.stringify(w)),z.post(window.location.origin+"/attendance-regularization-approvals",{id:w.id,status:m=="Approve"?"Approved":m=="Reject"?"Rejected":m,status_text:""}).then(s=>{console.log("Response : "+s),c.value=!1,L.add({severity:"success",summary:"Info",detail:"Success",life:3e3}),A(),x()}).catch(s=>{c.value=!1,x(),console.log(s.toJSON())})}return(s,n)=>{const I=r("Toast"),N=r("ProgressSpinner"),T=r("Dialog"),b=r("Button"),O=r("InputText"),i=r("Column"),E=r("Tag"),M=r("Dropdown"),F=r("DataTable");return f(),g("div",null,[t(I),t(T,{header:"Header",visible:S.value,"onUpdate:visible":n[0]||(n[0]=e=>S.value=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[t(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[ve]),_:1},8,["visible"]),t(T,{header:"Header",visible:h(c),"onUpdate:visible":n[1]||(n[1]=e=>V(c)?c.value=e:c=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:o(()=>[t(N,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:o(()=>[ge]),_:1},8,["visible"]),t(T,{header:"Confirmation",visible:h(d),"onUpdate:visible":n[4]||(n[4]=e=>V(d)?d.value=e:d=e),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:o(()=>[t(b,{label:"Yes",icon:"pi pi-check",onClick:n[2]||(n[2]=e=>j()),class:"p-button-text",autofocus:""}),t(b,{label:"No",icon:"pi pi-times",onClick:n[3]||(n[3]=e=>P(!0)),class:"p-button-text"})]),default:o(()=>[u("div",fe,[_e,u("span",null,"Are you sure you want to "+p(h(m))+"?",1)])]),_:1},8,["visible"]),u("div",null,[t(F,{value:h(k),paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:R.value,"onUpdate:filters":n[5]||(n[5]=e=>R.value=e),filterDisplay:"menu",loading:s.loading2,globalFilterFields:["name","status"]},{empty:o(()=>[C(" No Employeee found. ")]),loading:o(()=>[C(" Loading customers data. Please wait. ")]),default:o(()=>[t(i,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:o(e=>[C(p(e.data.employee_name),1)]),filter:o(({filterModel:e,filterCallback:_})=>[t(O,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onInput:l=>_(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),t(i,{field:"attendance_date",header:"Date",sortable:!0},{body:o(e=>[C(p(h(me)(e.data.attendance_date).format("DD-MM-YYYY")),1)]),_:1}),t(i,{field:"regularization_type",header:"Type"}),t(i,{field:"user_time",header:"Actual Time"}),t(i,{field:"regularize_time",header:"Regularize Time"}),t(i,{field:"reason_type",header:"Reason",style:{"min-width":"18rem"}},{body:o(e=>[e.data.reason_type=="Others"?(f(),g("span",he,p(e.data.custom_reason),1)):(f(),g("span",ye,p(e.data.reason_type),1))]),_:1}),t(i,{field:"reviewer_comments",header:"Approve Comments"}),t(i,{field:"reviewer_reviewed_date",header:"Reviewed Date"}),t(i,{field:"status",header:"Status",icon:"pi pi-check"},{body:o(({data:e})=>[t(E,{value:e.status,severity:U(e.status)},null,8,["value","severity"])]),filter:o(({filterModel:e,filterCallback:_})=>[t(M,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onChange:l=>_(),options:B.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:o(l=>[l.value?(f(),g("span",{key:0,class:$("customer-badge status-"+l.value)},p(l.value),3)):(f(),g("span",we,p(l.placeholder),1))]),option:o(l=>[u("span",{class:$("customer-badge status-"+l.option)},p(l.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),t(i,{field:"",header:"Action"},{body:o(e=>[e.data.status=="Pending"?(f(),g("span",be,[t(b,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approval",onClick:_=>D(e.data,"Approve"),style:{height:"2em"}},null,8,["onClick"]),t(b,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Rejected",style:{"margin-left":"8px",height:"2em"},onClick:_=>D(e.data,"Reject")},null,8,["onClick"])])):J("",!0)]),_:1})]),_:1},8,["value","filters","loading"])])])}}},a=W(Ce);a.use(G,{ripple:!0});a.use(ne);a.use(K);a.directive("tooltip",X);a.directive("badge",Z);a.directive("ripple",Q);a.directive("styleclass",ee);a.directive("focustrap",se);a.component("Button",q);a.component("DataTable",te);a.component("Column",ae);a.component("ConfirmDialog",pe);a.component("Toast",ce);a.component("Dialog",le);a.component("Dropdown",ie);a.component("ProgressSpinner",ue);a.component("InputText",re);a.component("Tag",de);a.mount("#vjs_regularizationTable");
