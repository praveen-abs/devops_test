import{d as f}from"./dayjs.min-2f06af28.js";import{a as H}from"./index-362795f3.js";import{a0 as b,ak as N,ag as V,o as t,c as a,I as n,b as O,a as T,d as e,h,w as L,l as M,t as l,F as d,f as r,g as k,n as P}from"./toastservice.esm-484a3f44.js";import{d as R}from"./pinia-ef13c18a.js";import{U as Y}from"./EmployeeDocumentsManagerService-7c8e53cc.js";/* empty css                                                                       */const C=R("employeePayslipStore",()=>{const A=Y(),o=b(),w=b(),S=b(!1),x=new URLSearchParams(window.location.search),p=b(!1);function _(){return x.has("uid")?x.get("uid"):""}async function D(){p.value=!0,H.post("/payroll/paycheck/getEmployeeAllPayslipList",{uid:_()}).then(i=>{o.value=i.data.data}).finally(()=>{p.value=!1})}async function E(i,m){p.value=!0;let v=parseInt(f(m).month())+1,g=f(m).year();await H.post("/empViewPayslipdetails",{uid:_(),user_code:i,month:v,year:g}).then(u=>{w.value=u.data,S.value=!0}).finally(()=>{p.value=!1})}function s(i,m,v){const g=i,u=document.createElement("a"),y=`${m}-${v}.pdf`;u.href=g,u.download=y,u.click()}async function c(i,m){p.value=!0,A.loading=!0,console.log("Downloading payslip PDF.....");let v=parseInt(f(m).month())+1,g=f(m).year();await H.post("/empGeneratePayslipPdfMail",{uid:_(),user_code:i,month:v,year:g,type:"pdf"}).then(u=>{if(console.log(" Response [downloadPayslipReleaseStatus] : "+JSON.stringify(u.data.data)),u.data){let y=u.data;y.startsWith("JVB")?(y="data:application/pdf;base64,"+y,s(y,i,v)):y.startsWith("data:application/pdf;base64")&&s(y)}else console.log("Response Url Not Found")}).finally(()=>{A.loading=!1,p.value=!1})}return{array_employeePayslips_list:o,paySlipHTMLView:w,canShowPayslipView:S,loading:p,getEmployeeAllPayslipList:D,getEmployeePayslipDetailsAsHTML:E,getEmployeePayslipDetailsAsPDF:c}});const F={class:"w-full"},I=e("h2",{class:"font-semibold text-lg my-2"},"Salary Details",-1),B=["onClick"],U=["onClick"],j={class:"flex justify-center w-[100%] my-3 rounded-lg"},$={class:"w-[95%] h-[90%] shadow-lg p-4"},G={class:"w-[100%] flex justify-between"},J={class:"flex flex-col"},W=e("h1",{class:"text-[25px]"},[M("PAYSLIP "),e("span",{class:"text-gray-500 text-[25px]"},"MAR 2023")],-1),K=["src"],q={class:"mt-[30px]"},z=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),Q={class:"col-3"},X=e("p",{class:""},"Employee Code",-1),Z={class:"text-[#000] text-[12px]"},ee={class:"col-3"},se=e("p",null,"Date Joining",-1),te={class:"text-[#000]"},ae={class:"col-3"},oe=e("p",null,"Department",-1),le={class:"text-[#000]"},ne={class:"col-3"},ie=e("p",null,"Designation",-1),de={class:"text-[#000]"},ce={class:"col-3"},re=e("p",null,"Payment Mode",-1),_e={class:"text-[#000]"},pe={class:"col-3"},ue=e("p",null,"Bank Name",-1),ye={class:"text-[#000]"},he={class:"col-3"},xe=e("p",null,"Bank Account",-1),me={class:"text-[#000]"},be={class:"col-3"},ve=e("p",null,"Bank ISFC",-1),fe={class:"text-[#000]"},we={class:"col-3"},ge=e("p",null,"PAN",-1),Le={class:"text-[#000]"},Se=e("div",{class:"col-3"},[e("p",null,"ESIC"),e("p",{class:"text-[#000]"},"Date Joined")],-1),Te={class:"col-3"},ke=e("p",null,"UAN",-1),Pe={class:"text-[#000]"},Me={class:"col-3"},Ae=e("p",null,"EPF Number",-1),De={class:"text-[#000]"},Ee=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),He={class:""},Ve=e("h1",{class:"font-semibold text-[16px] my-[16px]"},"LEAVE DETAILS",-1),Ne=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),Oe={class:"py-2 mx-2 row"},Re={class:"col-3"},Ye=e("p",null,"Leave Type",-1),Ce={class:"col-3"},Fe=e("p",null,"Opening Balance",-1),Ie={class:"col-3"},Be=e("p",null,"Availed",-1),Ue={class:"col-3"},je=e("p",null,"Closing Balance",-1),$e={class:""},Ge=e("h1",{class:"font-semibold text-[16px] my-[16px]"},"SALARY DETAILS",-1),Je=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),We={class:"col-3"},Ke=e("p",null,"ACTUAL PAYABLE DAYS",-1),qe={class:"text-[#000]"},ze={class:"col-3"},Qe=e("p",null,"TOTAL WORKING DAYS",-1),Xe={class:"text-[#000]"},Ze={class:"col-3"},es=e("p",null,"LOSS OF PAY DAYS",-1),ss={class:"text-[#000]"},ts={class:"col-3"},as=e("p",null,"ARREAR DAYS PAYABLE",-1),os={class:"text-[#000]"},ls={class:"row mt-2 py-2 border-y-[1px] border-[gray] mx-2"},ns={class:"col-7 border-r-[1.4px] border-[gray]"},is={class:"w-[100%]"},ds={class:"w-[100%]"},cs=e("h1",{class:"font-semibold"},"Earnings",-1),rs={class:"flex flex-col items-start pt-[2px]"},_s=e("h1",{class:"font-semibold"},"Fixed",-1),ps={key:0,class:"flex flex-col items-start pt-[2px]"},us=e("h1",{class:"font-semibold"},"Arrears",-1),ys={key:1},hs=e("h1",{class:"font-semibold"},"Earned",-1),xs={class:"col"},ms={border:"2",class:"w-[100%]"},bs={class:"w-[100%]"},vs=e("h1",{class:"font-semibold"},"CONTRIBUTIONS",-1),fs=e("h1",{class:"font-semibold"}," ",-1),ws={class:"w-[100%]"},gs=e("h1",{class:"font-semibold"},"Tax Duductions",-1),Ls=e("h1",{class:"font-semibold"}," ",-1),Ss={class:"my-2 col-5"},Ts={class:""},ks={class:"my-2 col-7"},Ps={class:"text-[16px]"},Ms={key:0,class:"text-[16px]",style:{"font-family":"sans-serif !important"}},As=e("div",null,[e("p",{class:"mt-2"},"*** Note:All amounts displayed in this payslips are in INR"),e("p",{class:"mt-[50px]"},"**This is computer generated statement,does not require signature.")],-1),Ds={class:""},Es={class:"flex items-center float-right"},Hs=e("p",{class:"mx-2"},"Powered by ",-1),Vs=["src"],Is={__name:"EmployeePayslips",setup(A){const o=C();b(!0),b(),N(async()=>{console.log("EmployeePayslips,vue loaded"),await o.getEmployeeAllPayslipList()});const w=b({PAYROLL_MONTH:{value:null,matchMode:V.STARTS_WITH,matchMode:V.EQUALS,matchMode:V.CONTAINS}});return(S,x)=>{const p=k("LoadingSpinner"),_=k("Column"),D=k("DataTable"),E=k("Sidebar");return t(),a(d,null,[n(o).loading?(t(),O(p,{key:0,class:"absolute z-50 bg-white"})):T("",!0),e("div",F,[I,h(D,{value:n(o).array_employeePayslips_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"PAYROLL_MONTH",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:w.value,"onUpdate:filters":x[0]||(x[0]=s=>w.value=s),filterDisplay:"menu",loading:S.loading2,globalFilterFields:["name"]},{default:L(()=>[h(_,{field:"PAYROLL_MONTH",header:"Month",sortable:!0},{body:L(s=>[M(l(n(f)(s.data.PAYROLL_MONTH).format("DD-MMM-YYYY")),1)]),_:1}),h(_,{field:"TOTAL_EARNED_GROSS",header:"Gross Pay"}),h(_,{field:"Reimbursements",header:"Reimbursements"},{body:L(s=>[M(l(0))]),_:1}),h(_,{field:"TOTAL_DEDUCTIONS",header:"Deductions"}),h(_,{field:"NET_TAKE_HOME",header:"Take Home"}),h(_,{header:"Action"},{body:L(s=>[e("button",{class:"bg-black text-white rounded-md p-2 mx-2",onClick:c=>n(o).getEmployeePayslipDetailsAsPDF("",s.data.PAYROLL_MONTH)},"Download",8,B),e("button",{class:"border-[2px] border-[#000] py-2 px-3 rounded-md",onClick:c=>n(o).getEmployeePayslipDetailsAsHTML("",s.data.PAYROLL_MONTH)},"View",8,U)]),_:1})]),_:1},8,["value","filters","loading"])]),h(E,{position:"right",visible:n(o).canShowPayslipView,"onUpdate:visible":x[1]||(x[1]=s=>n(o).canShowPayslipView=s),modal:"",header:"Payslip",style:{width:"58vw"}},{default:L(()=>[e("div",j,[e("div",$,[e("div",G,[e("div",J,[W,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.client_details,s=>(t(),a("h2",{class:"text-[16px] mt-[10px] text-[#000]",key:s},l(s.client_fullname),1))),128)),(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.client_details,s=>(t(),a("p",{class:"w-[300px] mt-[10px]",key:s},l(s.address),1))),128))]),(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.client_details,s=>(t(),a("div",{key:s},[e("img",{src:`${s.client_logo}`,alt:"testing",class:"w-[200px]"},null,8,K)]))),128))]),e("div",q,[(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.personal_details,s=>(t(),a("h1",{class:"font-semibold text-[16px] my-[16px]",key:s}," Employee Name : "+l(s.name),1))),128)),z,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.personal_details,s=>(t(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:s},[e("div",Q,[X,e("p",Z,l(s.user_code?s.user_code:"-"),1)]),e("div",ee,[se,e("p",te,l(s.doj?n(f)(s.doj).format("DD-MMM-YYYY"):"-"),1)]),e("div",ae,[oe,e("p",le,l(s.department_name?s.department_name:"-"),1)]),e("div",ne,[ie,e("p",de,l(s.designation?s.designation:"-"),1)])]))),128)),(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.personal_details,s=>(t(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:s},[e("div",ce,[re,e("p",_e,l(s.bank_account_number?"Bank":"cheque"),1)]),e("div",pe,[ue,e("p",ye,l(s.bank_name?s.bank_name:"-"),1)]),e("div",he,[xe,e("p",me,l(s.bank_account_number?s.bank_account_number:"-"),1)]),e("div",be,[ve,e("p",fe,l(s.bank_ifsc_code?s.bank_ifsc_code:"-"),1)])]))),128)),(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.personal_details,s=>(t(),a("div",{class:"py-2 mx-2 row",key:s},[e("div",we,[ge,e("p",Le,l(s.pan_number?s.pan_number:"-"),1)]),Se,e("div",Te,[ke,e("p",Pe,l(s.uan_number?s.uan_number:"-"),1)]),e("div",Me,[Ae,e("p",De,l(s.epf_number?s.epf_number:"-"),1)])]))),128)),Ee]),e("div",He,[Ve,Ne,e("div",Oe,[e("div",Re,[Ye,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},l(s.leave_type?s.leave_type:"-"),1))),128))]),e("div",Ce,[Fe,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},l(s.opening_balance?s.opening_balance:"-"),1))),128))]),e("div",Ie,[Be,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},l(s.avalied?s.avalied:"-"),1))),128))]),e("div",Ue,[je,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.leave_data,s=>(t(),a("p",{class:"text-[#000]",key:s},l(s.closing_balance?s.closing_balance:"-"),1))),128))])])]),e("div",$e,[Ge,Je,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.salary_details,s=>(t(),a("div",{class:"py-2 mx-2 row",key:s},[e("div",We,[Ke,e("p",qe,l(s.month_days?s.month_days:"-"),1)]),e("div",ze,[Qe,e("p",Xe,l(s.worked_Days?s.worked_Days:"-"),1)]),e("div",Ze,[es,e("p",ss,l(s.lop?s.lop:"-"),1)]),e("div",ts,[as,e("p",os,l(s.arrears_Days?s.arrears_Days:"-"),1)])]))),128))]),e("div",ls,[e("div",ns,[e("table",is,[e("tr",ds,[e("td",null,[cs,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.earnings[0],(s,c,i)=>(t(),a("h1",{class:P(["my-3",[c=="Total Earnings"?"text-black text-[16px]":"text-black"]]),key:i},l(c),3))),128))]),e("td",rs,[_s,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.compensatory_data[0],(s,c,i)=>(t(),a("h1",{key:i,class:"mt-[12px] text-black"},l(s),1))),128))]),n(o).paySlipHTMLView.data.arrears[0]!=""?(t(),a("td",ps,[us,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.arrears[0],(s,c,i)=>(t(),a("h1",{key:i,class:"mt-[12px]"},l(s),1))),128))])):T("",!0),n(o).paySlipHTMLView.data.earnings[0]?(t(),a("td",ys,[hs,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.earnings[0],(s,c,i)=>(t(),a("h1",{key:i,class:P(["my-3",[c=="Total Earnings"?"text-black text-[16px]":""]])},l(s),3))),128))])):T("",!0)])])]),e("div",xs,[e("table",ms,[e("tr",bs,[e("td",null,[vs,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.contribution[0],(s,c,i)=>(t(),a("p",{class:"my-2 text-[#000]",key:i},l(c),1))),128))]),e("td",null,[fs,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.contribution[0],(s,c,i)=>(t(),a("p",{class:"my-2 text-[#000]",key:i},l(s),1))),128))])]),e("tr",ws,[e("td",null,[gs,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.Tax_Deduction[0],(s,c,i)=>(t(),a("p",{class:P(["my-2 text-[#000]",[c=="Total Deduction"?"text-[18px] ":" text-black"]]),key:i},l(c),3))),128))]),e("td",null,[Ls,(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.Tax_Deduction[0],(s,c,i)=>(t(),a("p",{class:P(["my-2 text-[#000]",[c=="Total Deduction"?"text-[18px] ":" text-black"]]),key:i},l(s),3))),128))])])])])]),(t(!0),a(d,null,r(n(o).paySlipHTMLView.data.over_all[0],(s,c,i)=>(t(),a("div",{class:"my-2 row w-[100%]",key:i},[e("div",Ss,[e("p",Ts,l(c),1)]),e("div",ks,[e("p",Ps,[c=="Net Salary Payable"?(t(),a("span",Ms,"₹ ")):T("",!0),M(" "+l(s),1)])])]))),128)),As,e("div",Ds,[e("div",Es,[Hs,e("img",{src:`${n(o).paySlipHTMLView.data.date_month.abs_logo}`,alt:"",class:"w-[140px] h-[50px]"},null,8,Vs)])])])])]),_:1},8,["visible"])],64)}}};export{Is as _};
