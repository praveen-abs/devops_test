/* empty css              *//* empty css                     *//* empty css                   */import{Q as c,o as p,c as m,d as e,h as a,F as H,f as Q,t as r,aa as o,a7 as k,ab as I,g as h,w as d,l as w,n as Y,p as K,a as N,b as G,H as J,P as X,R as Z,u as ee,x as te,I as ae,K as oe,M as le,J as se}from"./inputnumber.esm-e362c3ab.js";import{d as ne,c as de}from"./pinia-641035e3.js";import{a as ie,T as re,B as ce,S as pe,b as me,s as ue}from"./toastservice.esm-8d63d505.js";import"./blockui.esm-da95937b.js";import{a as ve}from"./datatable.esm-5f85e77a.js";import{D as _e,s as he}from"./dialogservice.esm-acafdb8a.js";import{C as ye}from"./confirmationservice.esm-62abe3ae.js";import{s as fe}from"./progressspinner.esm-dd1a9f95.js";import{s as ge}from"./row.esm-6ebc942e.js";import{s as be}from"./calendar.esm-871de032.js";import{s as xe}from"./checkbox.esm-71be7f27.js";import{s as we}from"./chips.esm-94e18b40.js";import{s as Le}from"./multiselect.esm-774f4ea4.js";import{s as De}from"./textarea.esm-36dc9b1f.js";import{s as $e}from"./overlaypanel.esm-e07df2f8.js";import{s as Se}from"./sidebar.esm-24c26f31.js";import{S as W}from"./Service-4ef425c0.js";import"./moment-fbc5633a.js";import{a as M}from"./index-362795f3.js";import{d as b}from"./dayjs.min-2f06af28.js";import{_ as Ce}from"./LeaveApply-070e093b.js";import"./LeaveApply.vue_vue_type_style_index_0_lang-959a7e28.js";import{L as ke}from"./LoadingSpinner-235e9bb4.js";import"./index.esm-016f75ea.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-c27b6911.js";const j=ne("useLeaveModuleStore",()=>{W();const D=c(!0),l=c(),y=c(),L=c(),v=c(),S=c(),C=c(),_=c(),i=c(),R=c(),n=c(),A=c(),$=c(!1),E=c({}),U=g=>{$.value=!0,console.log(g),E.value={...g},E.emp_name=g.name};async function O(){D.value=!0;let g="/get-employee-leave-balance";await M.get(g).then(x=>{console.log(x.data),l.value=x.data,y.value=x.data["Avalied Leaves"]}).finally(()=>{D.value=!1})}async function t(g){await M.post("/leave/withdrawLeave",{leave_id:g}).then(x=>{console.log("performLeaveWithdraw() : "+x.data)}).finally(()=>{D.value=!1})}async function f(g,x,V){let B=0;await M.get(window.location.origin+"/currentUserCode ").then(P=>{B=P.data}),await M.post("/attendance/getEmployeeLeaveDetails",{user_code:B,filter_month:g,filter_year:x,filter_leave_status:V}).then(P=>{L.value=P.data.data,console.log("getEmployeeLeaveHistory() : "+P.data)}).finally(()=>{D.value=!1})}async function s(g,x,V){let B=0;await M.get(window.location.origin+"/currentUserCode ").then(P=>{B=P.data}),M.post("/attendance/getTeamEmployeesLeaveDetails",{manager_code:B,filter_month:g,filter_year:x,filter_leave_status:V}).then(P=>{v.value=P.data.data,console.log("getTeamLeaveHistory() : "+P.data)}).finally(()=>{D.value=!1})}async function F(g,x,V){M.post("/attendance/getAllEmployeesLeaveDetails",{filter_month:g,filter_year:x,filter_leave_status:V}).then(B=>{S.value=B.data.data,console.log("getOrgLeaveHistory() : "+B.data.data)}).finally(()=>{D.value=!1})}async function T(g){M.post("/attendance/getLeaveInformation",{record_id:g}).then(x=>{A.value=x.data.data,console.log("getLeaveInformation() : "+x.data)}).finally(()=>{D.value=!1})}async function q(g,x){await M.post("/fetch-org-leaves-balance",{start_date:g,end_date:x}).then(V=>{C.value=V.data}).finally(()=>{D.value=!1})}async function z(g,x){console.log(g,x),M.post("/fetch-team-leave-balance",{start_date:g,end_date:x}).then(V=>{n.value=V.data}).finally(()=>{D.value=!1})}return{canShowLoading:D,canShowLeaveDetails:$,setLeaveDetails:E,getLeaveDetails:U,array_employeeLeaveHistory:L,array_teamLeaveHistory:v,array_orgLeaveHistory:S,array_employeeLeaveBalance:l,array_employeeAvailedLeaveBalance:y,array_orgLeaveBalance:C,selectedStartDate:_,selectedEndDate:i,canshowloadingsrceen:R,arrayTermLeaveBalance:n,performLeaveWithdraw:t,getEmployeeLeaveHistory:f,getTeamLeaveHistory:s,getAllEmployeesLeaveHistory:F,getLeaveInformation:T,getEmployeeLeaveBalance:O,getOrgLeaveBalance:q,getTermLeaveBalance:z}}),Re={class:"mb-3 card"},Te={class:"card-body"},Ae={class:"mb-2 row"},Me=e("div",{class:"col-sm-6 col-xl-6 col-md-6 col-lg-6"},[e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Leave balance")],-1),Ee={class:"col-6 justify-content-end d-flex"},Ve={class:"grid gap-4 md:grid-cols-4 sm:grid-cols-1 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-5",style:{display:"grid"}},Pe={class:"my-1 lg:text-[12px] font-semibold text-center md:text-[10px] xl:text-[13px]"},Ye={class:"my-1 text-xl font-semibold text-center"},Be={key:0,class:"text-lg font-semibold"},Ue={key:1,class:"text-lg font-semibold"},Oe={class:"card"},He={class:"card-body"},Ne=e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins]"},"Leave Availed",-1),je={class:"grid gap-4 md:grid-cols-4 sm:grid-cols-1 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-5",style:{display:"grid"}},Fe={class:"text-center"},Ie={class:"my-1 lg:text-[12px] font-semibold text-center md:text-[10px] xl:text-[13px]"},Qe={class:"my-1 text-xl font-semibold text-center"},We={key:0,class:"text-lg font-semibold"},qe={key:1,class:"text-lg font-semibold"},ze={__name:"EmployeeLeaveBalance",setup(D){const l=j();return(y,L)=>(p(),m(H,null,[e("div",Re,[e("div",Te,[e("div",Ae,[Me,e("div",Ee,[a(Ce)])]),e("div",Ve,[(p(!0),m(H,null,Q(o(l).array_employeeLeaveBalance,v=>(p(),m("div",{key:v,class:"p-1 my-2 rounded-lg border bg-gray-100 hover:bg-slate-100 cursor-pointer"},[e("p",Pe,r(v.leave_type),1),e("p",Ye,[v.leave_balance==""?(p(),m("span",Be,"0")):(p(),m("span",Ue,r(v.leave_balance),1))])]))),128))])])]),e("div",Oe,[e("div",He,[Ne,e("div",je,[(p(!0),m(H,null,Q(o(l).array_employeeLeaveBalance,v=>(p(),m("div",{class:"bg-gray-100 border-l-4 border-indigo-300 p-1 rounded-lg border my-2 cursor-pointer hover:bg-slate-100",key:v},[e("div",Fe,[e("p",Ie,r(v.leave_type),1),e("p",Qe,[v.availed_leaves==""?(p(),m("span",We,"0")):(p(),m("span",qe,r(v.availed_leaves),1))])])]))),128))])])])],64))}},Ke={class:"mt-3 row"},Ge={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Je={class:"mb-0 card leave-history"},Xe={class:"card-body"},Ze={class:"flex justify-between"},et=e("div",null,[e("span",{class:"font-semibold text-[14px] text-[#000] font-['Poppins] mb-4"}," Leave history ")],-1),tt={class:"d-flex justify-content-end mb-2"},at=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),ot={class:"table-responsive"},lt={key:0},st={key:1},nt={key:1},dt={class:"flex justify-center"},it=["onClick"],rt={class:"w-full"},ct={class:"w-full"},pt={class:"border w-full rounded-lg"},mt={class:"p-3 pl-5 d-flex align-items-center border"},ut={class:"rounded-circle shadow-sm d-flex justify-content-center align-items-center bg-yellow-100",style:{width:"80px",height:"80px"}},vt={class:"text-3xl font-semibold"},_t={class:"ml-5"},ht={class:"text-lg font-semibold"},yt={class:"fs-6 text-neutral-400"},ft={class:"border w-full d-flex py-4 px-4"},gt={class:"mx-2 p-1 rounded-lg"},bt={class:"text-center py-1 px-2 text-light rounded-top fw-bold",style:{"background-color":"navy"}},xt={class:"text-center py-1 px-2 fs-5 fw-bold"},wt={class:"text-center py-1 px-2 fs-6 fw-bold"},Lt={class:"py-3"},Dt={class:"text-lg font-semibold text-primary-800"},$t={class:"font-semibold text-xs"},St={class:"border w-full py-4 px-4"},Ct=e("h1",{class:"text-lg font-semibold"},"Notified To:",-1),kt={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"250px","max-width":"300px",display:"flex"}},Rt={class:"d-flex p-2 align-items-center"},Tt={class:"rounded-circle bg-blue-100 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},At={class:"flex-column px-3"},Mt={class:"fs-6 fw-bold"},Et={class:"py-2 text-neutral-400"},Vt={class:"border w-full py-4 px-4"},Pt=e("h1",{class:"text-lg font-semibold"},"Approved by",-1),Yt={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"180px","max-width":"300px",display:"flex"}},Bt={class:"d-flex p-2 align-items-center"},Ut=e("div",{class:"rounded-circle bg-green-400 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},[e("i",{class:"pi pi-check text-light"})],-1),Ot={class:"flex-column px-3"},Ht={class:"fs-6 fw-bold"},Nt={class:"py-2 text-neutral-400"},jt={class:"my-4 mx-3"},Ft={class:"text-end mx-4 my-4"},It={__name:"EmployeeLeaveDetails",setup(D){const l=j(),y=c(!0),L=c(),v=c(),S=R=>{L.value.toggle(R)},C=c({global:{value:null,matchMode:k.CONTAINS},employee_name:{value:null,matchMode:k.STARTS_WITH,matchMode:k.EQUALS,matchMode:k.CONTAINS},status:{value:null,matchMode:k.EQUALS}}),_=c(["Pending","Approved","Rejected"]);I(async()=>{await l.getEmployeeLeaveHistory(b().month()+1,b().year(),["Approved","Pending","Rejected"]),y.value=!1});function i(){l.canShowLeaveDetails=!1}return(R,n)=>{const A=h("Calendar"),$=h("Column"),E=h("OverlayPanel"),U=h("Dropdown"),O=h("DataTable"),t=h("Textarea"),f=h("Dialog");return p(),m(H,null,[a(ze),e("div",Ke,[e("div",Ge,[e("div",Je,[e("div",Xe,[e("div",Ze,[et,e("div",tt,[at,a(A,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=s=>v.value=s),style:{"border-radius":"7px",height:"30px"},onDateSelect:n[1]||(n[1]=s=>(o(l).getEmployeeLeaveHistory(v.value.getMonth()+1,v.value.getFullYear(),_.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",ot,[a(O,{value:o(l).array_employeeLeaveHistory,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:C.value,"onUpdate:filters":n[2]||(n[2]=s=>C.value=s),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:d(()=>[w(" No Employee data..... ")]),default:d(()=>[a($,{field:"leave_type",header:"Leave Type",style:{"min-width":"14rem"}}),a($,{field:"start_date",header:"Start Date",style:{"min-width":"8rem"}},{body:d(s=>[w(r(o(b)(s.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a($,{field:"end_date",header:"End Date",dataType:"date",style:{"min-width":"8rem"}},{body:d(s=>[w(r(o(b)(s.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a($,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:d(s=>[s.data.leave_reason&&s.data.leave_reason.length>70?(p(),m("div",lt,[e("p",{onClick:S,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(E,{ref_key:"overlayPanel",ref:L,style:{height:"80px"}},{default:d(()=>[w(r(s.data.leave_reason),1)]),_:2},1536)])):(p(),m("div",st,r(s.data.leave_reason??""),1))]),_:1}),a($,{field:"reviewer_name",header:"Approver Name"}),a($,{field:"reviewer_comments",header:"Approver Comments"}),a($,{field:"status",header:"Status",icon:"pi pi-check"},{body:d(({data:s})=>[e("span",{class:Y("customer-badge status-"+s.status)},r(s.status),3)]),filter:d(({filterModel:s,filterCallback:F})=>[a(U,{modelValue:s.value,"onUpdate:modelValue":T=>s.value=T,onChange:T=>F(),options:_.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(T=>[T.value?(p(),m("span",{key:0,class:Y("customer-badge status-"+T.value)},r(T.value),3)):(p(),m("span",nt,r(T.placeholder),1))]),option:d(T=>[e("span",{class:Y("customer-badge status-"+T.option)},r(T.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a($,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(s=>[e("div",dt,[e("button",{class:"!text-[#000] !bg-black p-2 rounded-xl",onClick:F=>o(l).getLeaveDetails(s.data),style:{}},"View",8,it)])]),_:1})]),_:1},8,["value","filters"])])])])])]),a(f,{header:"Header",visible:o(l).canShowLeaveDetails,"onUpdate:visible":n[4]||(n[4]=s=>o(l).canShowLeaveDetails=s),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw",borderTop:"5px solid #002f56"},modal:!0,closable:!0,closeOnEscape:!0},{header:d(()=>[e("div",rt,[e("h5",{style:K({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"text-xl font-semibold"}," Leave Details Request",4)])]),default:d(()=>[e("div",ct,[e("div",pt,[e("div",mt,[e("div",ut,[e("h1",vt,r(o(l).setLeaveDetails.user_short_name),1)]),e("div",_t,[e("h1",ht,r(o(l).setLeaveDetails.name),1),e("div",null,[e("p",yt,"Requested on "+r(o(l).setLeaveDetails.leaverequest_date),1)])])]),e("div",ft,[e("div",gt,[e("h1",bt,r(o(b)(o(l).setLeaveDetails.end_date).format("MMM")),1),e("h1",xt,r(o(b)(o(l).setLeaveDetails.end_date).format("DD")),1),e("h1",wt,r(o(b)(o(l).setLeaveDetails.end_date).format("dddd")),1)]),e("div",Lt,[e("h1",Dt,[w(r(o(l).setLeaveDetails.total_leave_datetime)+" Day of "+r(o(l).setLeaveDetails.leave_type)+" ",1),e("span",$t," ("+r(o(l).setLeaveDetails.leave_reason)+") ",1)])])]),e("div",St,[Ct,e("div",kt,[e("div",Rt,[e("div",Tt,r(o(l).setLeaveDetails.reviewer_short_name),1),e("div",At,[e("h1",Mt,r(o(l).setLeaveDetails.reviewer_name),1),e("h1",Et,r(o(l).setLeaveDetails.reviewer_designation),1)])])])]),e("div",Vt,[Pt,e("div",Yt,[e("div",Bt,[Ut,e("div",Ot,[e("h1",Ht,r(o(l).setLeaveDetails.reviewer_name),1),e("h1",Nt," on "+r(o(b)(o(l).setLeaveDetails.leaverequest_date).format("DD-MMM-YYYY hh: mm:ss A")),1)])])])]),e("div",jt,[a(t,{name:"",id:"",cols:"70",rows:"3",autoResize:"",placeholder:"Add Comment"})])])]),e("div",Ft,[o(l).setLeaveDetails.can_withdraw_leave!==null&&o(l).setLeaveDetails.can_withdraw_leave?(p(),m("button",{key:0,class:"btn btn-orange px-5 mx-2",onClick:n[3]||(n[3]=s=>o(l).performLeaveWithdraw(o(l).setLeaveDetails.id))},"Withdraw")):N("",!0),o(l).setLeaveDetails.can_revoke_leave!==null&&o(l).setLeaveDetails.can_revoke_leave?(p(),m("button",{key:1,class:"btn btn-orange px-5 mx-2",onClick:i},"Revoke")):N("",!0),e("button",{class:"btn btn-orange px-5",onClick:i},"Post")])]),_:1},8,["visible"])],64)}}},Qt={class:"card top-line"},Wt={class:"card-body"},qt={class:"row"},zt={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-content-center"},Kt=e("h6",{class:"h-7 mt-3 text-lg font-semibold text-gray-900 modal-title"},"Org Leave Balance",-1),Gt={class:"my-2 d-flex justify-content-between align-items-center"},Jt=e("div",null,null,-1),Xt={class:"d-flex"},Zt={class:""},ea=e("label",{for:" ",class:"text-lg font-semibold"},"Start Date",-1),ta={class:""},aa=e("label",{for:" ",class:"text-lg font-semibold mx-2"},"End Date",-1),oa={class:"mt-3 row"},la={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},sa={class:"mb-0 card leave-history"},na={class:"card-body"},da={class:"flex justify-between"},ia=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave history")],-1),ra={class:"d-flex justify-content-end"},ca=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),pa={class:"table-responsive"},ma={key:0},ua={key:1},va={key:1},_a={__name:"OrgLeaveDetails",setup(D){const l=j();c(),c(),c(!0);const y=c(),L=c([]),v=c();c();const S=c({employee_name:{value:null,matchMode:k.STARTS_WITH,matchMode:k.EQUALS,matchMode:k.CONTAINS},status:{value:null,matchMode:k.EQUALS}}),C=c(["Pending","Approved","Rejected"]);return I(async()=>{await l.getOrgLeaveBalance(),await l.getAllEmployeesLeaveHistory(b().month()+1,b().year(),["Approved","Pending","Rejected"]),console.log("Org Leave details : "+l.array_orgLeaveHistory)}),(_,i)=>{const R=h("Calendar"),n=h("Column"),A=h("DataTable"),$=h("InputText"),E=h("OverlayPanel"),U=h("Dropdown"),O=h("Button");return p(),m(H,null,[e("div",Qt,[e("div",Wt,[e("div",qt,[e("div",zt,[Kt,e("div",Gt,[Jt,e("div",Xt,[e("div",Zt,[ea,a(R,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":i[0]||(i[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"pl-3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",ta,[aa,a(R,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":i[1]||(i[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",style:{height:"30px"},onClick:i[2]||(i[2]=t=>o(l).getOrgLeaveBalance(o(b)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(b)(o(l).selectedEndDate).format("YYYY-MM-DD")))},"submit")])])]),e("div",null,[a(A,{value:o(l).array_orgLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:_.onRowExpand,onRowCollapse:_.onRowCollapse,expandedRows:L.value,"onUpdate:expandedRows":i[4]||(i[4]=t=>L.value=t),selection:v.value,"onUpdate:selection":i[5]||(i[5]=t=>v.value=t),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange,onRowSelect:_.onRowSelect,onRowUnselect:_.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:d(t=>[e("div",null,[a(A,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:v.value,"onUpdate:selection":i[3]||(i[3]=f=>v.value=f),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange},{default:d(()=>[a(n,{field:"leave_type",header:"Leave Type"},{default:d(()=>[w(r(t.data.leave_type),1)]),_:2},1024),a(n,{field:"opening_balance",header:"Opening Balance"}),a(n,{field:"availed",header:"availed"}),a(n,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:d(()=>[a(n,{expander:!0}),a(n,{field:"user_code",header:"Employee Id",sortable:""}),a(n,{field:"name",header:"Employee Name"}),a(n,{field:"location",header:"Location",sortable:!1}),a(n,{field:"department",header:"Department"}),a(n,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",oa,[e("div",la,[e("div",sa,[e("div",na,[e("div",da,[ia,e("div",ra,[ca,a(R,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:y.value,"onUpdate:modelValue":i[6]||(i[6]=t=>y.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:i[7]||(i[7]=t=>o(l).getAllEmployeesLeaveHistory(y.value.getMonth()+1,y.value.getFullYear(),C.value))},null,8,["modelValue"])])]),e("div",pa,[a(A,{value:o(l).array_orgLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:S.value,"onUpdate:filters":i[9]||(i[9]=t=>S.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:d(()=>[w(" No Employee data..... ")]),default:d(()=>[a(n,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:d(t=>[w(r(t.data.employee_name),1)]),filter:d(({filterModel:t,filterCallback:f})=>[a($,{modelValue:t.value,"onUpdate:modelValue":s=>t.value=s,onInput:s=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(n,{field:"leave_type",header:"Leave Type"}),a(n,{field:"start_date",header:"Start Date"},{body:d(t=>[w(r(o(b)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"end_date",header:"End Date"},{body:d(t=>[w(r(o(b)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"total_leave_datetime",header:"Total Leave Days"}),a(n,{field:"leave_reason",header:"Leave Reason"},{body:d(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(p(),m("div",ma,[e("p",{onClick:i[8]||(i[8]=(...f)=>_.toggle&&_.toggle(...f)),class:"font-medium text-orange-400 underline cursor-pointer"}," More... "),a(E,{ref:"overlayPanel",style:{height:"80px"}},{default:d(()=>[w(r(t.data.leave_reason),1)]),_:2},1536)])):(p(),m("div",ua,r(t.data.leave_reason??""),1))]),_:1}),a(n,{field:"status",header:"Status"},{body:d(({data:t})=>[e("span",{class:Y("customer-badge status-"+t.status)},r(t.status),3)]),filter:d(({filterModel:t,filterCallback:f})=>[a(U,{modelValue:t.value,"onUpdate:modelValue":s=>t.value=s,onChange:s=>f(),options:C.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(s=>[s.value?(p(),m("span",{key:0,class:Y("customer-badge status-"+s.value)},r(s.value),3)):(p(),m("span",va,r(s.placeholder),1))]),option:d(s=>[e("span",{class:Y("customer-badge status-"+s.option)},r(s.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(n,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(t=>[a(O,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:f=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},ha={class:"card top-line"},ya={class:"card-body"},fa={class:"row"},ga={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-items-center"},ba=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave Balance",-1),xa={class:"my-2 d-flex justify-content-between align-items-center"},wa=e("div",null,null,-1),La={class:"d-flex"},Da={class:""},$a=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"Start Date",-1),Sa={class:""},Ca=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"End Date",-1),ka={class:"mt-3 row"},Ra={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Ta={class:"mb-0 card leave-history"},Aa={class:"card-body"},Ma={class:"flex justify-between"},Ea=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave history")],-1),Va={class:"d-flex justify-content-end"},Pa=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),Ya={class:"table-responsive"},Ba={key:0},Ua={key:1},Oa={key:1},Ha={__name:"TeamLeaveDetails",setup(D){const l=j();c(),c(),c(),c(),c(),c(!0),c();const y=c([]),L=c(),v=c(),S=c({employee_name:{value:null,matchMode:k.STARTS_WITH,matchMode:k.EQUALS,matchMode:k.CONTAINS},status:{value:null,matchMode:k.EQUALS}}),C=c(["Pending","Approved","Rejected"]);return I(async()=>{await l.getTermLeaveBalance(),await l.getTeamLeaveHistory(b().month()+1,b().year(),["Approved","Pending","Rejected"])}),(_,i)=>{const R=h("Calendar"),n=h("Column"),A=h("DataTable"),$=h("InputText"),E=h("OverlayPanel"),U=h("Dropdown"),O=h("Button");return p(),m(H,null,[e("div",ha,[e("div",ya,[e("div",fa,[e("div",ga,[ba,e("div",xa,[wa,e("div",La,[e("div",Da,[$a,a(R,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":i[0]||(i[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"p-l3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",Sa,[Ca,a(R,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":i[1]||(i[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",onClick:i[2]||(i[2]=t=>(o(l).getTermLeaveBalance(o(b)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(b)(o(l).selectedEndDate).format("YYYY-MM-DD")),o(l).canShowLoading=!0))},"submit")])])]),e("div",null,[a(A,{value:o(l).arrayTermLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:_.onRowExpand,onRowCollapse:_.onRowCollapse,expandedRows:y.value,"onUpdate:expandedRows":i[4]||(i[4]=t=>y.value=t),selection:L.value,"onUpdate:selection":i[5]||(i[5]=t=>L.value=t),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange,onRowSelect:_.onRowSelect,onRowUnselect:_.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:d(t=>[e("div",null,[a(A,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:L.value,"onUpdate:selection":i[3]||(i[3]=f=>L.value=f),selectAll:_.selectAll,onSelectAllChange:_.onSelectAllChange},{default:d(()=>[a(n,{field:"leave_type",header:"Leave Type"},{default:d(()=>[w(r(t.data.leave_type),1)]),_:2},1024),a(n,{field:"opening_balance",header:"Opening Balance"}),a(n,{field:"availed",header:"availed"}),a(n,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:d(()=>[a(n,{style:{width:"1rem !important"},expander:!0}),a(n,{field:"user_code",header:"Employee Id",sortable:""}),a(n,{field:"name",header:"Employee Name"}),a(n,{field:"location",header:"Location",sortable:!1}),a(n,{field:"department",header:"Department"}),a(n,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",ka,[e("div",Ra,[e("div",Ta,[e("div",Aa,[e("div",Ma,[Ea,e("div",Va,[Pa,a(R,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:v.value,"onUpdate:modelValue":i[6]||(i[6]=t=>v.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:i[7]||(i[7]=t=>(o(l).getTeamLeaveHistory(v.value.getMonth()+1,v.value.getFullYear(),C.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",Ya,[a(A,{value:o(l).array_teamLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:S.value,"onUpdate:filters":i[9]||(i[9]=t=>S.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:d(()=>[w(" No Employee data..... ")]),default:d(()=>[a(n,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:d(t=>[w(r(t.data.employee_name),1)]),filter:d(({filterModel:t,filterCallback:f})=>[a($,{modelValue:t.value,"onUpdate:modelValue":s=>t.value=s,onInput:s=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(n,{field:"leave_type",header:"Leave Type"}),a(n,{field:"start_date",header:"Start Date"},{body:d(t=>[w(r(o(b)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"end_date",header:"End Date"},{body:d(t=>[w(r(o(b)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"total_leave_datetime",header:"Total Leave Days"}),a(n,{field:"leave_reason",header:"Leave Reason"},{body:d(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(p(),m("div",Ba,[e("p",{onClick:i[8]||(i[8]=(...f)=>_.toggle&&_.toggle(...f)),class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(E,{ref:"overlayPanel",style:{height:"80px"}},{default:d(()=>[w(r(t.data.leave_reason),1)]),_:2},1536)])):(p(),m("div",Ua,r(t.data.leave_reason??""),1))]),_:1}),a(n,{field:"status",header:"Status"},{body:d(({data:t})=>[e("span",{class:Y("customer-badge status-"+t.status)},r(t.status),3)]),filter:d(({filterModel:t,filterCallback:f})=>[a(U,{modelValue:t.value,"onUpdate:modelValue":s=>t.value=s,onChange:s=>f(),options:C.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(s=>[s.value?(p(),m("span",{key:0,class:Y("customer-badge status-"+s.value)},r(s.value),3)):(p(),m("span",Oa,r(s.placeholder),1))]),option:d(s=>[e("span",{class:Y("customer-badge status-"+s.option)},r(s.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(n,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(t=>[a(O,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:f=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},Na={class:"w-full"},ja={key:0},Fa=e("p",{class:"font-semibold text-2xl text-[#000] font-['Poppins]"},"Leave",-1),Ia=e("p",{class:"font-semibold text-sm"},[w("Here you can apply Leave,"),e("a",null,[e("span",{class:"underline cursor-pointer hover:text-indigo-500"}," Company's Leave Policy")]),w(".")],-1),Qa=[Fa,Ia],Wa={key:1,class:"flex justify-between"},qa={class:"divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},za=e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Leave Balance")],-1),Ka={key:0,class:"nav-item text-muted",role:"presentation"},Ga=e("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Team Leave Balance",-1),Ja=[Ga],Xa={key:1,class:"nav-item text-muted",role:"presentation"},Za=e("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#org_leave","aria-selected":"false",tabindex:"-1",role:"tab"}," Org Leave Balance",-1),eo=[Za],to=e("div",{class:"flex items-center"},[e("div",{class:"mr-3"}),e("a",{href:"/attendance-leave-policydocument",id:"",class:"text-md font-medium border-1 border-black rounded-lg text-center bg-black text-white my-auto p-1.5 dark:text-white",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")],-1),ao=e("div",null,null,-1),oo={class:"tab-content py-2",id:"pills-tabContent"},lo={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},so={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},no={class:"tab-pane show",id:"org_leave",role:"tabpanel","aria-labelledby":"pills-profile-tab"},io=e("h6",{class:"mb-4 modal-title fs-21"}," Leave Request",-1),ro={__name:"LeaveModule",setup(D){const l=j(),y=W(),L=c(!1);return I(()=>{l.getEmployeeLeaveBalance()}),(v,S)=>{const C=h("leaveapply2"),_=h("Dialog");return p(),m(H,null,[o(l).canShowLoading?(p(),G(ke,{key:0,class:"absolute z-50 bg-white"})):N("",!0),e("div",Na,[e("div",null,[o(y).current_user_role==5?(p(),m("div",ja,Qa)):(p(),m("div",Wa,[e("ul",qa,[za,o(y).current_user_role==1||o(y).current_user_role==2||o(y).current_user_role==3||o(y).current_user_role==4?(p(),m("li",Ka,Ja)):N("",!0),o(y).current_user_role==1||o(y).current_user_role==2||o(y).current_user_role==3?(p(),m("li",Xa,eo)):N("",!0)]),to])),ao]),e("div",oo,[e("div",lo,[a(It)]),e("div",so,[a(Ha)]),e("div",no,[a(_a)])])]),a(_,{visible:L.value,"onUpdate:visible":S[0]||(S[0]=i=>L.value=i),style:{width:"80vw"},breakpoints:{"960px":"75vw","641px":"100vw"}},{header:d(()=>[io]),default:d(()=>[a(C)]),_:1},8,["visible"])],64)}}},u=J(ro),co=de();u.use(X,{ripple:!0});u.use(ye);u.use(ie);u.use(_e);u.use(co);u.directive("tooltip",re);u.directive("badge",ce);u.directive("ripple",Z);u.directive("styleclass",pe);u.directive("focustrap",ee);u.component("Button",te);u.component("DataTable",ve);u.component("Column",ae);u.component("ColumnGroup",he);u.component("Row",ge);u.component("Toast",me);u.component("ConfirmDialog",ue);u.component("Dropdown",oe);u.component("InputText",le);u.component("Dialog",se);u.component("ProgressSpinner",fe);u.component("Calendar",be);u.component("Checkbox",xe);u.component("Chips",we);u.component("MultiSelect",Le);u.component("Textarea",De);u.component("OverlayPanel",$e);u.component("Sidebar",Se);u.mount("#LeaveModule");
