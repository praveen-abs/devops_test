/* empty css              *//* empty css                     *//* empty css                   */import{Q as p,ab as z,a7 as h,o as b,c as L,aa as w,b as M,a as O,d as n,h as l,w as s,l as k,t as f,n as Q,F as H,g as D,H as K,P as Y,R as G,u as W,x as q,I as X,K as Z,M as ee,J as te}from"./inputnumber.esm-e362c3ab.js";import{d as oe,c as ae}from"./pinia-641035e3.js";import{a as le,T as se,B as ne,S as ie,b as re,s as ce}from"./toastservice.esm-8d63d505.js";import"./blockui.esm-da95937b.js";import{a as pe}from"./datatable.esm-5f85e77a.js";import{D as de,s as ue}from"./dialogservice.esm-acafdb8a.js";import{C as me}from"./confirmationservice.esm-62abe3ae.js";import{s as ve}from"./progressspinner.esm-dd1a9f95.js";import{s as fe}from"./row.esm-6ebc942e.js";import{s as ge}from"./calendar.esm-871de032.js";import{h as he}from"./moment-fbc5633a.js";import{s as be}from"./checkbox.esm-71be7f27.js";import{s as we}from"./tag.esm-97cd34b7.js";import{a as R}from"./index-362795f3.js";import{m as ye}from"./map-a1368670.js";import{S as Se}from"./Service-4ef425c0.js";import{L as _e}from"./LoadingSpinner-235e9bb4.js";import"./_baseToString-68774409.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-c27b6911.js";const Ce=oe("EmpDetailApprovalsStore",()=>{const y=p(),m=p();async function r(){m.value=!0,await R.get("/fetch-proof-doc").then(g=>{console.log(g.data),y.value=g.data,console.log(y.value)}).finally(()=>{m.value=!1})}return{array_EmpDetails_list:y,canShowLoadingScreen:m,getEmpDetails_list:r}}),Ae={class:"w-full p-2"},ke=n("h1",{class:"font-semibold text-lg mb-2"},"Employee Details ",-1),De={class:"confirmation-content"},Re={class:"confirmation-content"},xe=n("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),Ee={class:"flex items-center !justify-center"},$e=["src"],Le={class:"pl-2 font-semibold"},Be=["src","alt"],Ne={__name:"EmpDetails_approvals",setup(y){const m=Se(),r=Ce(),g=p([]),S=p(),_=p(!1),C=p(!1);let i=null,v=null;const V=p(!1),x=p(!1),E=p();z(async()=>{await r.getEmpDetails_list()}),p({global:{value:null,matchMode:h.CONTAINS},name:{value:null,matchMode:h.STARTS_WITH,matchMode:h.EQUALS,matchMode:h.CONTAINS},status:{value:"Pending",matchMode:h.EQUALS}});const I=a=>{x.value=!0,R.post("view/getEmpProfileProofPrivateDoc",{emp_doc_record_id:a}).then(e=>{console.log(e.data.data),E.value=e.data.data,console.log("data sent",E.value)}).finally(()=>{})};function B(a,e){C.value=!0,i=e,v=a,console.log("Selected Bulk Row Data : "+JSON.stringify(a))}function A(){i="",v=null}function N(a){C.value=!1,a&&A()}function P(a){_.value=!1,a&&A()}const T=(a,e)=>{_.value=!0,i=e,v=a},J=()=>{r.canShowLoadingScreen=!0,P();let a=ye(v,"record_id");console.log("Processing Rowdata : "+JSON.stringify(v.documents)),console.log("currentlySelectedStatus : "+i),console.log("Processed doc record ids : "+a),R.post("/approvals/EmployeeProof-bulkdocs-approve-reject",{approver_user_id:m.current_user_id,record_id:a,status:i=="Approve"?"Approved":i=="Reject"?"Rejected":i,reviewer_comments:""}).then(e=>{console.log("testing data",e.data)}).finally(()=>{r.canShowLoadingScreen=!1,r.getEmpDetails_list(),A()})};function F(){r.canShowLoadingScreen=!0,N(),R.post("/approvals/EmployeeProof-docs-approve-reject",{approver_user_id:m.current_user_id,record_id:v.record_id,status:i=="Approve"?"Approved":i=="Reject"?"Rejected":i,reviewer_comments:""}).then(a=>{console.log("testing data",a.data)}).finally(()=>{r.canShowLoadingScreen=!1,A(),r.getEmpDetails_list()})}return(a,e)=>{const d=D("Button"),$=D("Dialog"),c=D("Column"),j=D("DataTable");return b(),L(H,null,[w(r).canShowLoadingScreen?(b(),M(_e,{key:0,class:"absolute z-50 bg-white"})):O("",!0),n("div",Ae,[ke,l($,{header:"Confirmation",visible:_.value,"onUpdate:visible":e[2]||(e[2]=t=>_.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"580px"},modal:!0},{footer:s(()=>[l(d,{label:"Yes",icon:"pi pi-check",onClick:e[0]||(e[0]=t=>J()),class:"p-button-text",autofocus:""}),l(d,{label:"No",icon:"pi pi-times",onClick:e[1]||(e[1]=t=>P(!0)),class:"p-button-text"})]),default:s(()=>[n("div",De,[k(" Documents Approvals "),n("span",null,"Are you sure you want to "+f(w(i))+" all the documents of this employee?",1)])]),_:1},8,["visible"]),l($,{header:"Confirmation",visible:C.value,"onUpdate:visible":e[5]||(e[5]=t=>C.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:s(()=>[l(d,{label:"Yes",icon:"pi pi-check",onClick:e[3]||(e[3]=t=>F()),class:"p-button-text",autofocus:""}),l(d,{label:"No",icon:"pi pi-times",onClick:e[4]||(e[4]=t=>N(!0)),class:"p-button-text"})]),default:s(()=>[n("div",Re,[xe,n("span",null,"Are you sure you want to "+f(w(i))+"?",1)])]),_:1},8,["visible"]),l(j,{value:w(r).array_EmpDetails_list,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:a.onRowExpand,onRowCollapse:a.onRowCollapse,expandedRows:g.value,"onUpdate:expandedRows":e[7]||(e[7]=t=>g.value=t),selection:S.value,"onUpdate:selection":e[8]||(e[8]=t=>S.value=t),selectAll:a.selectAll,onSelectAllChange:a.onSelectAllChange,onRowSelect:a.onRowSelect,onRowUnselect:a.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{empty:s(()=>[k(" No Employee Details documents for the selected status filter ")]),expansion:s(t=>[n("div",null,[l(j,{value:t.data.documents,responsiveLayout:"scroll",selection:S.value,"onUpdate:selection":e[6]||(e[6]=u=>S.value=u),selectAll:a.selectAll,onSelectAllChange:a.onSelectAllChange},{default:s(()=>[l(c,{field:"doc_name",header:"Document Name"},{default:s(()=>[k(f(t.data.doc_name),1)]),_:2},1024),l(c,{field:"doc_status",header:"Status"}),l(c,{field:"",header:"View"},{body:s(u=>[l(d,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:U=>I(u.data.record_id),style:{height:"2em"}},null,8,["onClick"])]),_:2},1024),l(c,{field:"",header:"Action"},{body:s(u=>[n("span",null,[l(d,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve",onClick:U=>B(u.data,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),l(d,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject",style:{"margin-left":"8px",height:"2.5em"},onClick:U=>B(u.data,"Reject")},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:s(()=>[l(c,{expander:!0}),l(c,{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),l(c,{field:"name",header:"Employee Name"},{body:s(t=>[n("div",Ee,[n("div",null,[JSON.parse(t.data.avatar).type=="shortname"?(b(),L("p",{key:0,class:Q(["p-2 font-semibold text-white rounded-full w-[30px] text-[14px]",w(m).getBackgroundColor(t.index)])},f(JSON.parse(t.data.avatar).data),3)):(b(),L("img",{key:1,class:"rounded-circle userActive-status profile-img",style:{height:"30px !important",width:"30px !important"},src:`data:image/png;base64,${JSON.parse(t.data.avatar).data}`,srcset:"",alt:""},null,8,$e))]),n("div",null,[n("p",Le,f(t.data.name),1)])])]),_:1}),l(c,{field:"user_code",header:"Employee Id",sortable:""}),l(c,{field:"doc_status",header:"Approval Status",sortable:!1},{body:s(({data:t})=>[k(f(t.doc_status),1)]),_:1}),l(c,{field:"",header:"Action"},{body:s(t=>[n("span",null,[l(d,{type:"button",icon:"pi pi-check-circle",class:"p-button-success Button",label:"Approve All",onClick:u=>T(t.data.documents,"Approve"),style:{height:"2.5em"}},null,8,["onClick"]),l(d,{type:"button",icon:"pi pi-times-circle",class:"p-button-danger Button",label:"Reject All",style:{"margin-left":"8px",height:"2.5em"},onClick:u=>T(t.data.documents,"Reject")},null,8,["onClick"])])]),_:1})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"]),V.value==!1?(b(),M($,{key:0,visible:x.value,"onUpdate:visible":e[9]||(e[9]=t=>x.value=t),class:"z-0",modal:"",header:"Documents",style:{width:"40vw"}},{default:s(()=>[n("img",{src:`data:image/png;base64,${E.value}`,alt:a.doc_url,class:"block pb-3 m-auto"},null,8,Be)]),_:1},8,["visible"])):O("",!0)])],64)}}},o=K(Ne),Pe=ae();o.use(Y,{ripple:!0});o.use(me);o.use(le);o.use(de);o.use(Pe);o.directive("tooltip",se);o.directive("badge",ne);o.directive("ripple",G);o.directive("styleclass",ie);o.directive("focustrap",W);o.component("Button",q);o.component("DataTable",pe);o.component("Column",X);o.component("ColumnGroup",ue);o.component("Row",fe);o.component("Toast",re);o.component("ConfirmDialog",ce);o.component("Dropdown",Z);o.component("InputText",ee);o.component("Dialog",te);o.component("ProgressSpinner",ve);o.component("Calendar",ge);o.component("moment",he);o.component("Checkbox",be);o.component("Tag",we);o.mount("#EmpDetails_approvals");
