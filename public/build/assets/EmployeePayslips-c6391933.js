import{d as w}from"./dayjs.min-2f06af28.js";import{a as N}from"./index-362795f3.js";import{Q as f,ab as F,a7 as O,o as s,c as a,aa as l,b as R,a as x,d as t,h as g,w as P,l as y,t as n,F as d,f as c,g as D,n as b}from"./inputnumber.esm-e362c3ab.js";import{d as B}from"./pinia-641035e3.js";import{U as I}from"./EmployeeDocumentsManagerService-7f96ff24.js";/* empty css                                                                       */const U=B("employeePayslipStore",()=>{const V=I(),o=f(),S=f(),M=f(""),h=f(!1),A=new URLSearchParams(window.location.search),_=f(!1);function T(){return A.has("uid")?A.get("uid"):""}async function E(){_.value=!0,N.post("/payroll/paycheck/getEmployeeAllPayslipList",{uid:T()}).then(v=>{o.value=v.data.data}).finally(()=>{_.value=!1})}async function e(v,m){_.value=!0,M.value=m;let L=parseInt(w(m).month())+1,k=w(m).year();await N.post("/empViewPayslipdetails",{uid:T(),user_code:v,month:L,year:k}).then(u=>{S.value=u.data,h.value=!0}).finally(()=>{_.value=!1})}function i(v,m,L,k){const u=v,p=document.createElement("a"),H=`${m}-${L}-${k}.pdf`;p.href=u,p.download=H,p.click()}async function r(v,m){_.value=!0,V.loading=!0,console.log("Downloading payslip PDF.....");let L=parseInt(w(m).month())+1,k=w(m).year();await N.post("/empGeneratePayslipPdfMail",{uid:T(),user_code:v,month:L,year:k,type:"pdf"}).then(u=>{if(console.log(" Response [downloadPayslipReleaseStatus] : "+JSON.stringify(u.data.data.payslip)),u.data){let p=u.data.data.payslip,H=u.data.data.emp_name,C=u.data.data.month,Y=u.data.data.year;console.log(p),p&&(p.startsWith("JVB")?(p="data:application/pdf;base64,"+p,i(p,H,C,Y)):p.startsWith("data:application/pdf;base64")&&i(p))}else console.log("Response Url Not Found")}).finally(()=>{V.loading=!1,_.value=!1})}return{Payroll_month:M,array_employeePayslips_list:o,paySlipHTMLView:S,canShowPayslipView:h,loading:_,getEmployeeAllPayslipList:E,getEmployeePayslipDetailsAsHTML:e,getEmployeePayslipDetailsAsPDF:r}});const $={class:"w-full"},j=t("h2",{class:"my-2 text-lg font-semibold"},"Salary Details",-1),G=["onClick"],W=["onClick"],J=t("i",{class:"pi pi-download"},null,-1),K=[J],q={class:"flex justify-center w-[100%] my-3 rounded-lg"},z={class:"w-[95%] h-[90%] shadow-lg p-4"},Q={class:"w-[100%] flex justify-between"},X={class:"flex flex-col"},Z={class:"text-[25px] flex items-center"},tt={class:"text-gray-500 text-[25px]"},et=["src"],st={class:"mt-[30px]"},at=t("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),ot={class:"col-3"},lt=t("p",{class:""},"Employee Code",-1),nt={class:"text-[#000] text-[12px]"},it={class:"col-3"},dt=t("p",null,"Date Joining",-1),ct={class:"text-[#000]"},rt={class:"col-3"},_t=t("p",null,"Department",-1),pt={class:"text-[#000]"},ut={class:"col-3"},yt=t("p",null,"Designation",-1),ht={class:"text-[#000]"},xt={class:"col-3"},mt=t("p",null,"Payment Mode",-1),bt={class:"text-[#000]"},ft={class:"col-3"},vt=t("p",null,"Bank Name",-1),gt={class:"text-[#000]"},wt={class:"col-3"},St=t("p",null,"Bank Account",-1),Tt={class:"text-[#000]"},Lt={class:"col-3"},kt=t("p",null,"Bank ISFC",-1),Pt={class:"text-[#000]"},Mt={class:"col-3"},At=t("p",null,"PAN",-1),Dt={class:"text-[#000]"},Vt=t("div",{class:"col-3"},[t("p",null,"ESIC"),t("p",{class:"text-[#000]"},n("-"))],-1),Et={class:"col-3"},Ht=t("p",null,"UAN",-1),Nt={class:"text-[#000]"},Ot={class:"col-3"},Rt=t("p",null,"EPF Number",-1),Ct={class:"text-[#000]"},Yt=t("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),Ft={class:""},Bt=t("h1",{class:"font-semibold text-[16px] my-[16px]"},"LEAVE DETAILS",-1),It=t("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),Ut={class:"py-2 mx-2 row"},$t={class:"col-3"},jt=t("p",null,"Leave Type",-1),Gt={class:"col-3"},Wt=t("p",null,"Opening Balance",-1),Jt={class:"col-3"},Kt=t("p",null,"Availed",-1),qt={class:"col-3"},zt=t("p",null,"Closing Balance",-1),Qt={class:""},Xt=t("h1",{class:"font-semibold text-[16px] my-[16px]"},"SALARY DETAILS",-1),Zt=t("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),te={class:"col-3"},ee=t("p",null,"ACTUAL PAYABLE DAYS",-1),se={class:"text-[#000]"},ae={class:"col-3"},oe=t("p",null,"TOTAL WORKING DAYS",-1),le={class:"text-[#000]"},ne={class:"col-3"},ie=t("p",null,"LOSS OF PAY DAYS",-1),de={class:"text-[#000]"},ce={class:"col-3"},re=t("p",null,"ARREAR DAYS PAYABLE",-1),_e={class:"text-[#000]"},pe={class:"row mt-2 py-2 border-y-[1px] border-[gray] mx-2"},ue={class:"col-7 border-r-[1.4px] border-[gray]"},ye={class:"row"},he={class:"col-6"},xe=t("h1",{class:"font-semibold"},"Earnings",-1),me={key:0,class:"font-semibold text-black"},be={class:"col-2"},fe={key:0,class:"font-semibold text-right"},ve={class:"col-2"},ge={key:0,class:"font-semibold text-right"},we={class:"col-2"},Se=t("h1",{class:"font-semibold text-right"},"Earned",-1),Te={class:"col"},Le={border:"2",class:"w-[100%]"},ke={class:"w-[100%]"},Pe=t("h1",{class:"font-semibold"},"CONTRIBUTIONS",-1),Me={key:0,class:"text-black font-semibold text-[14px]"},Ae=t("h1",{class:"font-semibold"}," ",-1),De={class:"w-[100%]"},Ve=t("h1",{class:"font-semibold"},"Tax Deduction",-1),Ee={key:0,class:"text-[14px] text-[#000] font-semibold"},He=t("h1",{class:"font-semibold"}," ",-1),Ne={class:"my-2 col-6"},Oe={key:0,class:"font-semibold text-black"},Re={class:"my-2 col-6"},Ce={class:"text-[16px] text-[#000]"},Ye=t("div",null,[t("p",{class:"mt-2 font-semibold flex text-[#000]"},[y("*** Note:All "),t("span",{class:"text-[16px] text-[#000]"},"amounts displayed in this payslips are in"),y(" INR")]),t("p",{class:"mt-[50px] font-semibold text-[#000]"},"**This is computer generated statement,does not require signature.")],-1),Fe={class:""},Be={class:"flex items-center float-right"},Ie=t("p",{class:"mx-2"},"Powered by ",-1),Ue=["src"],qe={__name:"EmployeePayslips",setup(V){const o=U();f(!0),f(),F(()=>{console.log("EmployeePayslips,vue loaded"),o.getEmployeeAllPayslipList()});const S=f({PAYROLL_MONTH:{value:null,matchMode:O.STARTS_WITH,matchMode:O.EQUALS,matchMode:O.CONTAINS}});return(M,h)=>{const A=D("LoadingSpinner"),_=D("Column"),T=D("DataTable"),E=D("Sidebar");return s(),a(d,null,[l(o).loading?(s(),R(A,{key:0,class:"absolute z-50 bg-white"})):x("",!0),t("div",$,[j,g(T,{value:l(o).array_employeePayslips_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"PAYROLL_MONTH",sortOrder:-1,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:S.value,"onUpdate:filters":h[0]||(h[0]=e=>S.value=e),filterDisplay:"menu",loading:M.loading2,globalFilterFields:["name"]},{default:P(()=>[g(_,{field:"PAYROLL_MONTH",header:"Month",sortable:!0},{body:P(e=>[y(n(l(w)(e.data.PAYROLL_MONTH).format("DD-MMM-YYYY")),1)]),_:1}),g(_,{field:"TOTAL_EARNED_GROSS",header:"Gross Pay"}),g(_,{field:"Reimbursements",header:"Reimbursements"},{body:P(e=>[y(n(0))]),_:1}),g(_,{field:"TOTAL_DEDUCTIONS",header:"Deductions"}),g(_,{field:"NET_TAKE_HOME",header:"Take Home"}),g(_,{header:"Action"},{body:P(e=>[t("button",{class:"p-2 mx-2 text-white bg-black rounded-md",onClick:i=>l(o).getEmployeePayslipDetailsAsPDF("",e.data.PAYROLL_MONTH)},"Download",8,G),t("button",{class:"border-[2px] border-[#000] py-2 px-3 rounded-md",onClick:i=>l(o).getEmployeePayslipDetailsAsHTML("",e.data.PAYROLL_MONTH)},"View",8,W)]),_:1})]),_:1},8,["value","filters","loading"])]),l(o).canShowPayslipView?(s(),R(E,{key:1,position:"right",visible:l(o).canShowPayslipView,"onUpdate:visible":h[2]||(h[2]=e=>l(o).canShowPayslipView=e),modal:"",header:"Payslip",style:{width:"70vw"}},{default:P(()=>[t("button",{class:"flex items-center p-2 absolute top-5 border-[1px] mx-2 text-[#000] rounded-md h-[33px]",onClick:h[1]||(h[1]=e=>l(o).getEmployeePayslipDetailsAsPDF("",l(o).Payroll_month))},K),t("div",q,[t("div",z,[t("div",Q,[t("div",X,[t("h1",Z,[y("PAYSLIP "),t("span",tt,n(l(o).paySlipHTMLView.data.date_month.Month)+" "+n(l(o).paySlipHTMLView.data.date_month.Year),1)]),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.client_details,e=>(s(),a("h2",{class:"text-[16px] mt-[10px] text-[#000] font-semibold",key:e},n(e.client_fullname),1))),128)),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.client_details,e=>(s(),a("p",{class:"w-[300px] mt-[10px]",key:e},n(e.address),1))),128))]),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.client_details,e=>(s(),a("div",{key:e},[t("img",{src:`${e.client_logo}`,alt:"testing",class:"w-[200px]"},null,8,et)]))),128))]),t("div",st,[(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,e=>(s(),a("h1",{class:"font-semibold text-[16px] my-[16px]",key:e}," Employee Name : "+n(e.name),1))),128)),at,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,e=>(s(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:e},[t("div",ot,[lt,t("p",nt,n(e.user_code?e.user_code:"-"),1)]),t("div",it,[dt,t("p",ct,n(e.doj?l(w)(e.doj).format("DD-MMM-YYYY"):"-"),1)]),t("div",rt,[_t,t("p",pt,n(e.department_name?e.department_name:"-"),1)]),t("div",ut,[yt,t("p",ht,n(e.designation?e.designation:"-"),1)])]))),128)),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,e=>(s(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:e},[t("div",xt,[mt,t("p",bt,n(e.bank_account_number?"Bank":"cheque"),1)]),t("div",ft,[vt,t("p",gt,n(e.bank_name?e.bank_name:"-"),1)]),t("div",wt,[St,t("p",Tt,n(e.bank_account_number?e.bank_account_number:"-"),1)]),t("div",Lt,[kt,t("p",Pt,n(e.bank_ifsc_code?e.bank_ifsc_code:"-"),1)])]))),128)),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,e=>(s(),a("div",{class:"py-2 mx-2 row",key:e},[t("div",Mt,[At,t("p",Dt,n(e.pan_number?e.pan_number:"-"),1)]),Vt,t("div",Et,[Ht,t("p",Nt,n(e.uan_number?e.uan_number:"-"),1)]),t("div",Ot,[Rt,t("p",Ct,n(e.epf_number?e.epf_number:"-"),1)])]))),128)),Yt]),t("div",Ft,[Bt,It,t("div",Ut,[t("div",$t,[jt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,e=>(s(),a("p",{class:"text-[#000]",key:e},n(e.leave_type?e.leave_type:"-"),1))),128))]),t("div",Gt,[Wt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,e=>(s(),a("p",{class:"text-[#000]",key:e},n(e.opening_balance?e.opening_balance:"-"),1))),128))]),t("div",Jt,[Kt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,e=>(s(),a("p",{class:"text-[#000]",key:e},n(e.availed?e.availed:"-"),1))),128))]),t("div",qt,[zt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,e=>(s(),a("p",{class:"text-[#000]",key:e},n(e.closing_balance?e.closing_balance:"-"),1))),128))])])]),t("div",Qt,[Xt,Zt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.salary_details,e=>(s(),a("div",{class:"py-2 mx-2 row",key:e},[t("div",te,[ee,t("p",se,n(e.month_days?e.month_days:"-"),1)]),t("div",ae,[oe,t("p",le,n(e.worked_Days?e.worked_Days:"-"),1)]),t("div",ne,[ie,t("p",de,n(e.lop?e.lop:"-"),1)]),t("div",ce,[re,t("p",_e,n(e.arrears_Days?e.arrears_Days:"-"),1)])]))),128))]),t("div",pe,[t("div",ue,[t("div",ye,[t("div",he,[xe,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.earnings[0],(e,i,r)=>(s(),a("h1",{class:b(["flex items-center my-3",[i=="Total Earnings"?"text-black font-semibold":"text-black"]]),key:r},[y(n(i)+" ",1),i=="Total Earnings"?(s(),a("span",me,"(A)")):x("",!0)],2))),128))]),t("div",be,[l(o).paySlipHTMLView.data.compensatory_data[0]?(s(),a("h1",fe,"Fixed")):x("",!0),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.compensatory_data[0],(e,i,r)=>(s(),a("h1",{key:r,class:"mt-[12px] text-black text-right"},n(e),1))),128))]),t("div",ve,[l(o).paySlipHTMLView.data.arrears[0]!=""?(s(),a("h1",ge,"Arrears")):x("",!0),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.arrears[0],(e,i,r)=>(s(),a("h1",{key:r,class:"mt-[12px]"},n(e),1))),128))]),t("div",we,[Se,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.earnings[0],(e,i,r)=>(s(),a("h1",{key:r,class:b(["my-3 text-right",[i=="Total Earnings"?"text-black text-[14px] font-semibold":""]])},n(e),3))),128))])])]),t("div",Te,[t("table",Le,[t("tr",ke,[t("td",null,[Pe,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.contribution[0],(e,i,r)=>(s(),a("p",{class:b(["my-2 text-[#000] flex",[i=="Total Contribution"?"text-[14px] text-[#000] font-semibold":" text-black"]]),key:r},[y(n(i)+" ",1),i=="Total Contribution"?(s(),a("span",Me," (B)")):x("",!0)],2))),128))]),t("td",null,[Ae,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.contribution[0],(e,i,r)=>(s(),a("p",{class:b(["my-2 text-[#000] text-right",[i=="Total Contribution"?"text-[13px] text-[#000] font-semibold":" text-black"]]),key:r},n(e),3))),128))])]),t("tr",De,[t("td",null,[Ve,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.Tax_Deduction[0],(e,i,r)=>(s(),a("p",{class:b(["my-2 text-[#000] flex items-center",[i=="Total Deduction"?"text-[14px] text-[#000] font-semibold":" text-black"]]),key:r},[y(n(i)+" ",1),i=="Total Deduction"?(s(),a("span",Ee," (C)")):x("",!0)],2))),128))]),t("td",null,[He,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.Tax_Deduction[0],(e,i,r)=>(s(),a("p",{class:b(["my-2 text-[#000] text-right",[i=="Total Deduction"?"text-[14px] text-[#000] font-semibold":" text-black"]]),key:r},n(e),3))),128))])])])])]),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.over_all[0],(e,i,r)=>(s(),a("div",{class:"my-2 row w-[100%]",key:r},[t("div",Ne,[t("p",{class:b(["text-[#000]",[i=="Net Salary Payable"||i=="Net Salary in words"?"text-black text-[14px] font-semibold":""]])},[y(n(i)+" ",1),i=="Net Salary Payable"?(s(),a("span",Oe,"(A-B-C)")):x("",!0)],2)]),t("div",Re,[t("p",Ce,[i=="Net Salary Payable"?(s(),a("span",{key:0,class:b(["text-[16px] font-semibold text-right",[i=="Net Salary Payable"?"text-black text-[14px] font-semibold":""]]),style:{"font-family":"sans-serif !important"}},"₹ ",2)):x("",!0),y(n(e),1)])])]))),128)),Ye,t("div",Fe,[t("div",Be,[Ie,t("img",{src:`${l(o).paySlipHTMLView.data.date_month.abs_logo}`,alt:"",class:"w-[140px] h-[50px]"},null,8,Ue)])])])])]),_:1},8,["visible"])):x("",!0)],64)}}};export{qe as _};
