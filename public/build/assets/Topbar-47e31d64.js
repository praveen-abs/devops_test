import{I as d,ak as q,o as s,c as a,aj as r,d as t,t as l,a as m,h as f,w as _,F as y,f as L,T as b,k as w,E as K,l as D,g as U,j as Y,n as X}from"./toastservice.esm-3d6796bd.js";import{a as g}from"./index-362795f3.js";import{u as G}from"./dashboard_service-3cbb3975.js";import{S as H}from"./Service-bda4280b.js";const J="/build/assets/setting-7207a137.svg",E="/build/assets/notification-429a4257.svg",Q="/build/assets/exit-9e7ca153.svg";const W={class:"grid grid-cols-12 justify-between items-center"},Z={class:"text-black rounded focus:outline-none"},tt=t("p",{class:"text-md text-gray-600 text-left"},"Your organization",-1),et={key:0,class:"flex justify-between items-center gap-2 py-0.5"},ot=["src"],nt={key:0,class:"text-sm whitespace-nowrap font-semibold px-2"},st={key:1,class:"font-semibold text-[12px] font-['Poppins'] text-center text-black my-auto"},at={key:0,class:"absolute top-5 left-2 mt-14 w-11/12 bg-white shadow-lg rounded z-20"},rt={class:"cursor-pointer hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},it=["onClick"],lt={class:"cursor-pointer flex mx-2 align-center justify-between rounded-lg p-0.5"},ct={class:"mx-2 p-1 flex items-center justify-between rounded border gap-4",style:{height:"30px",width:"30px"}},dt=["src"],ut={class:"font-semibold whitespace-nowrap text-sm"},mt={key:0},gt=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-green-600 font-semibold"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"})],-1),ht=[gt],_t={class:"relative col-span-4"},ft={key:0,class:"z-40 absolute top-0 left-0 mt-16 w-3/4 bg-white shadow-lg rounded px-3 py-4 overflow-x-scroll"},vt=["onClick"],pt={class:"flex"},yt={class:"text-gray-900 font-bold text-sm"},bt={class:"text-gray-600 font-bold text-xs float-right"},wt={class:"text-xs text-gray-600"},xt={class:"flex col-span-4 justify-end"},kt=t("img",{src:J,alt:"",class:"h-6 w-6"},null,-1),Ct=[kt],St=t("a",{href:"config-master",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Master config",-1),Lt=t("a",{href:"clientOnboarding",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Client onboarding",-1),jt=t("a",{href:"document_preview",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Document template",-1),Nt=t("a",{href:"documents_settings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Document settings",-1),$t=t("a",{href:"attendance-leavesettings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Leave setting",-1),zt=t("a",{href:"attendance_settings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Attendance setting",-1),At=t("a",{href:"investment_settings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Investment setting",-1),Mt=t("a",{href:"showSAsettingsView",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Loan and salary advance setting ",-1),Tt=[St,Lt,jt,Nt,$t,zt,At,Mt],Dt=t("img",{src:E,alt:"",class:"h-6 w-6"},null,-1),Et=[Dt],Vt={class:"bg-gray-100 rounded-full p-2 hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Bt=t("img",{src:Q,alt:"",class:"h-6 w-6"},null,-1),Ot=[Bt],Pt={class:"py-2 px-3 flex text-white focus:outline-none hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Rt={class:"rounded-lg bg-blue-50 text-black font-semibold p-1.5 text-sm"},Ft={key:0,class:"text-sm whitespace-nowrap text-black font-semibold px-2 my-auto mx-2"},It={key:1,class:"font-semibold text-[12px] mx-2 whitespace-nowrap font-['Poppins'] text-center text-black my-auto"},qt={key:0,class:"absolute top-0 right-0 mt-14 w-48 bg-white shadow-lg rounded z-30"},Kt=t("a",{class:"p-2 rounded-lg cursor-pointer w-full hover:bg-gray-100 block transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",href:"pages-profile-new "},"View profile",-1),Ut=t("p",{class:"absolute left-0 mx-4 font-semibold fs-5"},[t("img",{src:E,alt:"",class:"h-6 w-6 animate-pulse"}),D(" Notification ")],-1),Yt={class:"flex justify-between"},Xt={class:"orange-median font-semibold fs-6"},Gt=["onClick"],Ht=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Jt=[Ht],Qt={class:"text-sm"},Wt={key:1,class:"w-full px-2 rounded-lg my-2 p-2 bg-red-50"},Zt=t("p",null,"Notification empty",-1),te=[Zt],ee={key:1,class:"relative z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},oe=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity"},null,-1),ne={class:"fixed inset-0 z-10 overflow-y-auto"},se={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ae={class:"rounded-lg bg-white p-8 shadow-2xl absolute z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},re=t("h2",{class:"text-lg font-bold"},"Are you sure you want to do that?",-1),ie=t("p",{class:"mt-2 text-sm text-gray-500"}," Doing that could have cause some issues elsewhere, are you 100% sure it's OK? ",-1),le={class:"mt-4 flex gap-2 justify-center"},_e={__name:"Topbar",setup(ce){const i=G(),c=H(),x=d(!1),v=d(""),k=d(),j=d(),N=d(!1),C=d(!1);d([{id:1,label:"Attendance",to:"attendance-timesheet"}]);const u=d(),V=()=>{g.get("/clients-fetchAll").then(e=>{j.value=e.data}).finally(()=>{})},$=()=>{g.get("session-sessionselectedclient").then(e=>{console.log(e.data),u.value=e.data})},B=e=>{let n="/session-update-globalClient";console.log({client_id:e}),g.post(n,{client_id:e}).finally(()=>{$(),z()})};function O(e,n){return n.filter(h=>h.emp_name.toLowerCase().includes(e.toLowerCase())||h.emp_code.toLowerCase().includes(e.toLowerCase()))}d();const z=()=>{g.get("/vmt-activeemployees-fetchall").then(e=>{k.value=e.data})},p=d(),A=()=>{g.get("/getNotifications").then(e=>{p.value=e.data.data})},P=e=>{g.post("/readNotification",{record_id:e}).finally(()=>{A()})};q(()=>{z(),V(),$(),setTimeout(()=>{N.value=!0},2e3),A()});async function R(){try{const e=document.head.querySelector('meta[name="csrf-token"]').content;await g.post("/logout",null,{headers:{"X-CSRF-TOKEN":e}}).finally(()=>{window.location.reload()})}catch(e){console.error("Logout error:",e)}}async function F(e){console.log(e),window.location.href="/pages-profile-new?uid="+e}const M=["bg-orange-50","bg-emerald-50","bg-yellow-50","bg-rose-50","bg-cyan-50","bg-amber-50","bg-red-50","bg-blue-50","bg-pink-50","bg-green-50","bg-fuchsia-50"],I=e=>(console.log(e),M[e%M.length]);return(e,n)=>{const T=U("Sidebar"),h=Y("tooltip");return s(),a(y,null,[N.value?(s(),a("div",{key:0,class:"bg-white h-[60px]",onMouseenter:n[7]||(n[7]=o=>(r(i).canShowConfiguration=!1,r(i).canShowClients=!1))},[t("div",W,[t("div",{class:"relative border-1 border-x-gray-300 py-2 mx-2 px-2 col-span-4",onClick:n[0]||(n[0]=o=>r(i).canShowClients=!r(i).canShowClients)},[t("button",Z,[tt,u.value?(s(),a("div",et,[t("img",{src:u.value.client_logo,alt:"",class:"h-6 w-12"},null,8,ot),u.value.client_fullname.length<=13?(s(),a("p",nt,l(u.value.client_fullname),1)):(s(),a("p",st,l(u.value.client_fullname?u.value.client_fullname.substring(0,13)+"..":""),1))])):m("",!0)]),f(b,{"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:_(()=>[r(i).canShowClients?(s(),a("div",at,[(s(!0),a(y,null,L(j.value,o=>(s(),a("div",rt,[t("div",{class:"justify-between flex p-2 hover:bg-gray-200 items-center",onClick:S=>B(o.id)},[t("div",lt,[t("div",ct,[t("img",{src:o.client_logo,alt:"",class:"mh-100 mw-100"},null,8,dt),t("p",ut,l(o.client_fullname)+" ("+l(o.abs_client_code)+")",1)])]),u.value&&u.value.id==o.id?(s(),a("div",mt,ht)):m("",!0)],8,it)]))),256))])):m("",!0)]),_:1})]),t("div",_t,[w(t("input",{type:"text",name:"",id:"",class:"border p-1.5 bg-gray-100 border-gray-300 rounded-lg w-full","onUpdate:modelValue":n[1]||(n[1]=o=>v.value=o),placeholder:"Search...."},null,512),[[K,v.value]]),f(b,{"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:_(()=>[v.value?(s(),a("div",ft,[(s(!0),a(y,null,L(O(v.value,k.value?k.value:[]),o=>(s(),a("div",{class:"p-2 rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",onClick:S=>F(o.enc_user_id)},[t("div",pt,[t("p",yt,[D(l(o.emp_name)+" ",1),t("span",bt,l(o.emp_code),1)])]),t("div",null,[t("p",wt,l(o.emp_designation),1)])],8,vt))),256))])):m("",!0)]),_:1})]),t("div",xt,[r(c).current_user_role==2||r(c).current_user_role==4?w((s(),a("button",{key:0,class:"rounded-full bg-gray-100 p-2 hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none mx-2",onClick:n[2]||(n[2]=o=>r(i).canShowConfiguration=!r(i).canShowConfiguration)},Ct)),[[h,"Settings"]]):m("",!0),f(b,{"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:_(()=>[r(i).canShowConfiguration?(s(),a("div",{key:0,onClick:n[3]||(n[3]=o=>r(i).canShowConfiguration=!r(i).canShowConfiguration),class:"absolute top-0 right-40 mt-16 w-60 bg-white shadow-lg rounded z-40 p-2"},Tt)):m("",!0)]),_:1}),w((s(),a("button",{class:"mx-2 animate-pulse bg-gray-100 rounded-full p-2 hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",onClick:n[4]||(n[4]=o=>x.value=!0)},Et)),[[h,"Notification"]]),w((s(),a("button",Vt,Ot)),[[h,"Exit"]]),t("div",{class:"mx-3 relative",onClick:n[6]||(n[6]=o=>r(i).canShowCurrentEmployee=!r(i).canShowCurrentEmployee)},[t("button",Pt,[t("p",Rt,l(r(c).current_user_name?r(c).current_user_name.substring(0,2):""),1),r(c).current_user_name&&r(c).current_user_name.length<=10?(s(),a("p",Ft,l(r(c).current_user_name?r(c).current_user_name:""),1)):(s(),a("p",It,l(r(c).current_user_name?r(c).current_user_name.substring(0,10)+"..":""),1))]),f(b,{"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:_(()=>[r(i).canShowCurrentEmployee?(s(),a("div",qt,[Kt,t("a",{onClick:n[5]||(n[5]=o=>C.value=!0),class:"p-2 rounded-lg cursor-pointer w-full hover:bg-gray-100 block transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},"Log out")])):m("",!0)]),_:1})])])])],32)):m("",!0),f(T,{visible:x.value,"onUpdate:visible":n[8]||(n[8]=o=>x.value=o),position:"right",class:"w-full"},{header:_(()=>[Ut]),default:_(()=>[p.value&&p.value.length>0?(s(!0),a(y,{key:0},L(p.value,(o,S)=>(s(),a("div",{class:X(["w-full px-2 rounded-lg my-2 p-2",`${I(S)}`])},[t("div",Yt,[t("div",null,[t("p",Xt,l(o.notification_title),1)]),t("div",null,[t("button",{onClick:de=>P(o.id)},Jt,8,Gt)])]),t("p",Qt,l(o.notification_body),1)],2))),256)):(s(),a("div",Wt,te))]),_:1},8,["visible"]),C.value?(s(),a("div",ee,[oe,t("div",ne,[t("div",se,[t("div",ae,[re,ie,t("div",le,[t("button",{onClick:R,type:"button",class:"rounded bg-green-50 px-4 py-2 text-sm font-medium text-green-600"}," Yes, I'm sure "),t("button",{onClick:n[9]||(n[9]=o=>C.value=!1),type:"button",class:"rounded bg-gray-50 px-4 py-2 text-sm font-medium text-gray-600"}," No, go back ")])])])])])):m("",!0)],64)}}};export{_e as _};
