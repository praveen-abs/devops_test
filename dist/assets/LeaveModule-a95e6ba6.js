/* empty css              *//* empty css                     *//* empty css                   */import{o as u,c as _,d as e,h as a,F as A,f as N,t as d,aj as o,I as m,af as D,ak as U,g,w as s,l as b,n as T,p as j,b as F,a as B,K as I,P as H,L as Q,u as q,M as z,R as K,S as W,x as G,y as J,N as X,_ as Z,Q as ee,W as te,Y as ae,V as oe}from"./toastservice.esm-bb367a00.js";import{c as le}from"./pinia-a51931df.js";import"./blockui.esm-889447d7.js";import{a as se}from"./datatable.esm-6901a098.js";import{D as ne,s as de}from"./dialogservice.esm-20444736.js";import{C as ie}from"./confirmationservice.esm-658147cb.js";import{s as re}from"./progressspinner.esm-11a8e733.js";import{s as ce}from"./row.esm-6ebc942e.js";import{s as me}from"./calendar.esm-78e9dbdd.js";import{s as pe}from"./checkbox.esm-a1f0af30.js";import{s as ue}from"./chips.esm-b5a7d7f1.js";import{s as _e}from"./multiselect.esm-1557a756.js";import{s as ve}from"./textarea.esm-6976d36a.js";import{s as he}from"./overlaypanel.esm-13bf223e.js";import{S as ge}from"./Service-46bedac1.js";import"./moment-fbc5633a.js";import{u as E,_ as ye}from"./leave_apply_v2-a37ce658.js";import{_ as fe}from"./LeaveApply-72ad0e2a.js";import{d as y}from"./dayjs.min-2f06af28.js";import"./index-362795f3.js";import{L as be}from"./LoadingSpinner-5f35547c.js";import"./leave_apply_service-daddfee5.js";/* empty css                                                   */import"./index.esm-06c03de9.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-c27b6911.js";const xe={class:"mb-3 card"},we={class:"card-body"},De={class:"mb-2 row"},Le=e("div",{class:"col-sm-6 col-xl-6 col-md-6 col-lg-6"},[e("h6",{class:"text-lg font-semibold text-gray-900 modal-title"},"Leave Balance")],-1),$e={class:"col-6 justify-content-end d-flex"},Se={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4",style:{display:"grid"}},Ce={class:"text-lg font-semibold text-center"},Re={class:"my-3 text-xl font-bold text-center"},ke={key:0},Te={key:1},Ae={class:"card"},Me={class:"card-body"},Ve=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Leave Availed",-1),Ye={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4",style:{display:"grid"}},Ee={class:"text-center"},Pe={class:"mb-2 text-base font-semibold"},Ue={class:"mb-0 text-base font-semibold"},Be={__name:"EmployeeLeaveBalance",setup(P){const l=E();return(x,w)=>(u(),_(A,null,[e("div",xe,[e("div",we,[e("div",De,[Le,e("div",$e,[a(fe)])]),e("div",Se,[(u(!0),_(A,null,N(o(l).array_employeeLeaveBalance,v=>(u(),_("div",{key:v,class:"p-1 my-4 rounded-lg shadow-md tw-card dynamic-card hover:bg-slate-100"},[e("p",Ce,d(v.leave_type),1),e("p",Re,[v.leave_balance==""?(u(),_("span",ke,"0")):(u(),_("span",Te,d(v.leave_balance),1))])]))),128))])])]),e("div",Ae,[e("div",Me,[Ve,e("div",Ye,[(u(!0),_(A,null,N(o(l).array_employeeLeaveBalance,v=>(u(),_("div",{class:"bg-indigo-100 border-l-4 border-indigo-300 p-3 rounded-lg tw-card dynamic-card",key:v},[e("div",Ee,[e("p",Pe,d(v.leave_type),1),e("h6",Ue,d(v.avalied_leaves),1)])]))),128))])])])],64))}},Oe={class:"mt-3 row"},Ne={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},je={class:"mb-0 card leave-history"},Fe={class:"card-body"},Ie={class:"flex justify-between"},He=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"}," Leave history ")],-1),Qe={class:"d-flex justify-content-end mb-2"},qe=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),ze={class:"table-responsive"},Ke={key:0},We={key:1},Ge={key:1},Je={class:"flex justify-center"},Xe={class:"w-full"},Ze={class:"w-full"},et={class:"border w-full rounded-lg"},tt={class:"p-3 pl-5 d-flex align-items-center border"},at={class:"rounded-circle shadow-sm d-flex justify-content-center align-items-center bg-yellow-100",style:{width:"80px",height:"80px"}},ot={class:"text-3xl font-semibold"},lt={class:"ml-5"},st={class:"text-lg font-semibold"},nt={class:"fs-6 text-neutral-400"},dt={class:"border w-full d-flex py-4 px-4"},it={class:"mx-2 p-1 rounded-lg"},rt={class:"text-center py-1 px-2 text-light rounded-top fw-bold",style:{"background-color":"navy"}},ct={class:"text-center py-1 px-2 fs-5 fw-bold"},mt={class:"text-center py-1 px-2 fs-6 fw-bold"},pt={class:"py-3"},ut={class:"text-lg font-semibold text-primary-800"},_t={class:"font-semibold text-xs"},vt={class:"border w-full py-4 px-4"},ht=e("h1",{class:"text-lg font-semibold"},"Notified To:",-1),gt={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"250px","max-width":"300px",display:"flex"}},yt={class:"d-flex p-2 align-items-center"},ft={class:"rounded-circle bg-blue-100 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},bt={class:"flex-column px-3"},xt={class:"fs-6 fw-bold"},wt={class:"py-2 text-neutral-400"},Dt={class:"border w-full py-4 px-4"},Lt=e("h1",{class:"text-lg font-semibold"},"Approved by",-1),$t={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"180px","max-width":"300px",display:"flex"}},St={class:"d-flex p-2 align-items-center"},Ct=e("div",{class:"rounded-circle bg-green-400 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},[e("i",{class:"pi pi-check text-light"})],-1),Rt={class:"flex-column px-3"},kt={class:"fs-6 fw-bold"},Tt={class:"py-2 text-neutral-400"},At={class:"my-4 mx-3"},Mt={__name:"EmployeeLeaveDetails",setup(P){const l=E(),x=m(!0),w=m(),v=m(),$=C=>{w.value.toggle(C)},S=m({global:{value:null,matchMode:D.CONTAINS},employee_name:{value:null,matchMode:D.STARTS_WITH,matchMode:D.EQUALS,matchMode:D.CONTAINS},status:{value:null,matchMode:D.EQUALS}}),p=m(["Pending","Approved","Rejected"]);U(async()=>{await l.getEmployeeLeaveHistory(y().month()+1,y().year(),["Approved","Pending","Rejected"]),x.value=!1});function i(){l.canShowLeaveDetails=!1}return(C,n)=>{const k=g("Calendar"),L=g("Column"),M=g("OverlayPanel"),V=g("Dropdown"),Y=g("Button"),t=g("DataTable"),f=g("Textarea"),r=g("Dialog");return u(),_(A,null,[a(Be),e("div",Oe,[e("div",Ne,[e("div",je,[e("div",Fe,[e("div",Ie,[He,e("div",Qe,[qe,a(k,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=h=>v.value=h),style:{"border-radius":"7px",height:"30px"},onDateSelect:n[1]||(n[1]=h=>(o(l).getEmployeeLeaveHistory(v.value.getMonth()+1,v.value.getFullYear(),p.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",ze,[a(t,{value:o(l).array_employeeLeaveHistory,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:S.value,"onUpdate:filters":n[2]||(n[2]=h=>S.value=h),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:s(()=>[b(" No Employee data..... ")]),default:s(()=>[a(L,{field:"leave_type",header:"Leave Type",style:{"min-width":"14rem"}}),a(L,{field:"start_date",header:"Start Date",style:{"min-width":"8rem"}},{body:s(h=>[b(d(o(y)(h.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(L,{field:"end_date",header:"End Date",dataType:"date",style:{"min-width":"8rem"}},{body:s(h=>[b(d(o(y)(h.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(L,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:s(h=>[h.data.leave_reason&&h.data.leave_reason.length>70?(u(),_("div",Ke,[e("p",{onClick:$,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(M,{ref_key:"overlayPanel",ref:w,style:{height:"80px"}},{default:s(()=>[b(d(h.data.leave_reason),1)]),_:2},1536)])):(u(),_("div",We,d(h.data.leave_reason??""),1))]),_:1}),a(L,{field:"reviewer_name",header:"Approver Name"}),a(L,{field:"reviewer_comments",header:"Approver Comments"}),a(L,{field:"status",header:"Status",icon:"pi pi-check"},{body:s(({data:h})=>[e("span",{class:T("customer-badge status-"+h.status)},d(h.status),3)]),filter:s(({filterModel:h,filterCallback:O})=>[a(V,{modelValue:h.value,"onUpdate:modelValue":R=>h.value=R,onChange:R=>O(),options:p.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:s(R=>[R.value?(u(),_("span",{key:0,class:T("customer-badge status-"+R.value)},d(R.value),3)):(u(),_("span",Ge,d(R.placeholder),1))]),option:s(R=>[e("span",{class:T("customer-badge status-"+R.option)},d(R.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(L,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:s(h=>[e("div",Je,[a(Y,{type:"button",icon:"",class:"text-white Button py-2.5 mx-auto",label:"View",onClick:O=>o(l).getLeaveDetails(h.data),style:{height:"2em"}},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"])])])])])]),a(r,{header:"Header",visible:o(l).canShowLeaveDetails,"onUpdate:visible":n[3]||(n[3]=h=>o(l).canShowLeaveDetails=h),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw",borderTop:"5px solid #002f56"},modal:!0,closable:!0,closeOnEscape:!0},{header:s(()=>[e("div",Xe,[e("h5",{style:j({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"text-xl font-semibold"}," Leave Details Request",4)])]),default:s(()=>[e("div",Ze,[e("div",et,[e("div",tt,[e("div",at,[e("h1",ot,d(o(l).setLeaveDetails.user_short_name),1)]),e("div",lt,[e("h1",st,d(o(l).setLeaveDetails.name),1),e("div",null,[e("p",nt,"Requested on "+d(o(l).setLeaveDetails.leaverequest_date),1)])])]),e("div",dt,[e("div",it,[e("h1",rt,d(o(y)(o(l).setLeaveDetails.end_date).format("MMM")),1),e("h1",ct,d(o(y)(o(l).setLeaveDetails.end_date).format("DD")),1),e("h1",mt,d(o(y)(o(l).setLeaveDetails.end_date).format("dddd")),1)]),e("div",pt,[e("h1",ut,[b(d(o(l).setLeaveDetails.total_leave_datetime)+" Day of "+d(o(l).setLeaveDetails.leave_type)+" ",1),e("span",_t," ("+d(o(l).setLeaveDetails.leave_reason)+") ",1)])])]),e("div",vt,[ht,e("div",gt,[e("div",yt,[e("div",ft,d(o(l).setLeaveDetails.reviewer_short_name),1),e("div",bt,[e("h1",xt,d(o(l).setLeaveDetails.reviewer_name),1),e("h1",wt,d(o(l).setLeaveDetails.reviewer_designation),1)])])])]),e("div",Dt,[Lt,e("div",$t,[e("div",St,[Ct,e("div",Rt,[e("h1",kt,d(o(l).setLeaveDetails.reviewer_name),1),e("h1",Tt," on "+d(o(y)(o(l).setLeaveDetails.leaverequest_date).format("DD-MMM-YYYY hh: mm:ss A")),1)])])])]),e("div",At,[a(f,{name:"",id:"",cols:"70",rows:"3",autoResize:"",placeholder:"Add Comment"})])])]),e("div",{class:"text-end mx-4 my-4"},[e("button",{class:"btn btn-orange px-5",onClick:i},"Post")])]),_:1},8,["visible"])],64)}}},Vt={class:"card top-line"},Yt={class:"card-body"},Et={class:"row"},Pt={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-content-center"},Ut=e("h6",{class:"h-7 mt-3 text-lg font-semibold text-gray-900 modal-title"},"Org Leave Balance",-1),Bt={class:"my-2 d-flex justify-content-between align-items-center"},Ot=e("div",null,null,-1),Nt={class:"d-flex"},jt={class:""},Ft=e("label",{for:" ",class:"text-lg font-semibold"},"Start Date",-1),It={class:""},Ht=e("label",{for:" ",class:"text-lg font-semibold mx-2"},"End Date",-1),Qt={class:"mt-3 row"},qt={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},zt={class:"mb-0 card leave-history"},Kt={class:"card-body"},Wt={class:"flex justify-between"},Gt=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave history")],-1),Jt={class:"d-flex justify-content-end"},Xt=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),Zt={class:"table-responsive"},ea={key:0},ta={key:1},aa={key:1},oa={__name:"OrgLeaveDetails",setup(P){const l=E();m(),m(),m(!0);const x=m(),w=m([]),v=m();m();const $=m({employee_name:{value:null,matchMode:D.STARTS_WITH,matchMode:D.EQUALS,matchMode:D.CONTAINS},status:{value:null,matchMode:D.EQUALS}}),S=m(["Pending","Approved","Rejected"]);return U(async()=>{await l.getOrgLeaveBalance(),await l.getAllEmployeesLeaveHistory(y().month()+1,y().year(),["Approved","Pending","Rejected"]),console.log("Org Leave details : "+l.array_orgLeaveHistory)}),(p,i)=>{const C=g("Calendar"),n=g("Column"),k=g("DataTable"),L=g("InputText"),M=g("OverlayPanel"),V=g("Dropdown"),Y=g("Button");return u(),_(A,null,[e("div",Vt,[e("div",Yt,[e("div",Et,[e("div",Pt,[Ut,e("div",Bt,[Ot,e("div",Nt,[e("div",jt,[Ft,a(C,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":i[0]||(i[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"pl-3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",It,[Ht,a(C,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":i[1]||(i[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",style:{height:"30px"},onClick:i[2]||(i[2]=t=>o(l).getOrgLeaveBalance(o(y)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(y)(o(l).selectedEndDate).format("YYYY-MM-DD")))},"submit")])])]),e("div",null,[a(k,{value:o(l).array_orgLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:p.onRowExpand,onRowCollapse:p.onRowCollapse,expandedRows:w.value,"onUpdate:expandedRows":i[4]||(i[4]=t=>w.value=t),selection:v.value,"onUpdate:selection":i[5]||(i[5]=t=>v.value=t),selectAll:p.selectAll,onSelectAllChange:p.onSelectAllChange,onRowSelect:p.onRowSelect,onRowUnselect:p.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:s(t=>[e("div",null,[a(k,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:v.value,"onUpdate:selection":i[3]||(i[3]=f=>v.value=f),selectAll:p.selectAll,onSelectAllChange:p.onSelectAllChange},{default:s(()=>[a(n,{field:"leave_type",header:"Leave Type"},{default:s(()=>[b(d(t.data.leave_type),1)]),_:2},1024),a(n,{field:"opening_balance",header:"Opening Balance"}),a(n,{field:"avalied",header:"Avalied"}),a(n,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:s(()=>[a(n,{expander:!0}),a(n,{field:"user_code",header:"Employee Id",sortable:""}),a(n,{field:"name",header:"Employee Name"}),a(n,{field:"location",header:"Location",sortable:!1}),a(n,{field:"department",header:"Department"}),a(n,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",Qt,[e("div",qt,[e("div",zt,[e("div",Kt,[e("div",Wt,[Gt,e("div",Jt,[Xt,a(C,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:x.value,"onUpdate:modelValue":i[6]||(i[6]=t=>x.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:i[7]||(i[7]=t=>o(l).getAllEmployeesLeaveHistory(x.value.getMonth()+1,x.value.getFullYear(),S.value))},null,8,["modelValue"])])]),e("div",Zt,[a(k,{value:o(l).array_orgLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:$.value,"onUpdate:filters":i[9]||(i[9]=t=>$.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:s(()=>[b(" No Employee data..... ")]),default:s(()=>[a(n,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:s(t=>[b(d(t.data.employee_name),1)]),filter:s(({filterModel:t,filterCallback:f})=>[a(L,{modelValue:t.value,"onUpdate:modelValue":r=>t.value=r,onInput:r=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(n,{field:"leave_type",header:"Leave Type"}),a(n,{field:"start_date",header:"Start Date"},{body:s(t=>[b(d(o(y)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"end_date",header:"End Date"},{body:s(t=>[b(d(o(y)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"total_leave_datetime",header:"Total Leave Days"}),a(n,{field:"leave_reason",header:"Leave Reason"},{body:s(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(u(),_("div",ea,[e("p",{onClick:i[8]||(i[8]=(...f)=>p.toggle&&p.toggle(...f)),class:"font-medium text-orange-400 underline cursor-pointer"}," More... "),a(M,{ref:"overlayPanel",style:{height:"80px"}},{default:s(()=>[b(d(t.data.leave_reason),1)]),_:2},1536)])):(u(),_("div",ta,d(t.data.leave_reason??""),1))]),_:1}),a(n,{field:"status",header:"Status"},{body:s(({data:t})=>[e("span",{class:T("customer-badge status-"+t.status)},d(t.status),3)]),filter:s(({filterModel:t,filterCallback:f})=>[a(V,{modelValue:t.value,"onUpdate:modelValue":r=>t.value=r,onChange:r=>f(),options:S.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:s(r=>[r.value?(u(),_("span",{key:0,class:T("customer-badge status-"+r.value)},d(r.value),3)):(u(),_("span",aa,d(r.placeholder),1))]),option:s(r=>[e("span",{class:T("customer-badge status-"+r.option)},d(r.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(n,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:s(t=>[a(Y,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:f=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},la={class:"card top-line"},sa={class:"card-body"},na={class:"row"},da={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-items-center"},ia=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave Balance",-1),ra={class:"my-2 d-flex justify-content-between align-items-center"},ca=e("div",null,null,-1),ma={class:"d-flex"},pa={class:""},ua=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"Start Date",-1),_a={class:""},va=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"End Date",-1),ha={class:"mt-3 row"},ga={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},ya={class:"mb-0 card leave-history"},fa={class:"card-body"},ba={class:"flex justify-between"},xa=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave history")],-1),wa={class:"d-flex justify-content-end"},Da=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),La={class:"table-responsive"},$a={key:0},Sa={key:1},Ca={key:1},Ra={__name:"TeamLeaveDetails",setup(P){const l=E();m(),m(),m(),m(),m(),m(!0),m();const x=m([]),w=m(),v=m(),$=m({employee_name:{value:null,matchMode:D.STARTS_WITH,matchMode:D.EQUALS,matchMode:D.CONTAINS},status:{value:null,matchMode:D.EQUALS}}),S=m(["Pending","Approved","Rejected"]);return U(async()=>{await l.getTermLeaveBalance(),await l.getTeamLeaveHistory(y().month()+1,y().year(),["Approved","Pending","Rejected"])}),(p,i)=>{const C=g("Calendar"),n=g("Column"),k=g("DataTable"),L=g("InputText"),M=g("OverlayPanel"),V=g("Dropdown"),Y=g("Button");return u(),_(A,null,[e("div",la,[e("div",sa,[e("div",na,[e("div",da,[ia,e("div",ra,[ca,e("div",ma,[e("div",pa,[ua,a(C,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":i[0]||(i[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"p-l3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",_a,[va,a(C,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":i[1]||(i[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",onClick:i[2]||(i[2]=t=>(o(l).getTermLeaveBalance(o(y)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(y)(o(l).selectedEndDate).format("YYYY-MM-DD")),o(l).canShowLoading=!0))},"submit")])])]),e("div",null,[a(k,{value:o(l).arrayTermLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:p.onRowExpand,onRowCollapse:p.onRowCollapse,expandedRows:x.value,"onUpdate:expandedRows":i[4]||(i[4]=t=>x.value=t),selection:w.value,"onUpdate:selection":i[5]||(i[5]=t=>w.value=t),selectAll:p.selectAll,onSelectAllChange:p.onSelectAllChange,onRowSelect:p.onRowSelect,onRowUnselect:p.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:s(t=>[e("div",null,[a(k,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:w.value,"onUpdate:selection":i[3]||(i[3]=f=>w.value=f),selectAll:p.selectAll,onSelectAllChange:p.onSelectAllChange},{default:s(()=>[a(n,{field:"leave_type",header:"Leave Type"},{default:s(()=>[b(d(t.data.leave_type),1)]),_:2},1024),a(n,{field:"opening_balance",header:"Opening Balance"}),a(n,{field:"avalied",header:"Avalied"}),a(n,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:s(()=>[a(n,{style:{width:"1rem !important"},expander:!0}),a(n,{field:"user_code",header:"Employee Id",sortable:""}),a(n,{field:"name",header:"Employee Name"}),a(n,{field:"location",header:"Location",sortable:!1}),a(n,{field:"department",header:"Department"}),a(n,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",ha,[e("div",ga,[e("div",ya,[e("div",fa,[e("div",ba,[xa,e("div",wa,[Da,a(C,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:v.value,"onUpdate:modelValue":i[6]||(i[6]=t=>v.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:i[7]||(i[7]=t=>(o(l).getTeamLeaveHistory(v.value.getMonth()+1,v.value.getFullYear(),S.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",La,[a(k,{value:o(l).array_teamLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:$.value,"onUpdate:filters":i[9]||(i[9]=t=>$.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:s(()=>[b(" No Employee data..... ")]),default:s(()=>[a(n,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:s(t=>[b(d(t.data.employee_name),1)]),filter:s(({filterModel:t,filterCallback:f})=>[a(L,{modelValue:t.value,"onUpdate:modelValue":r=>t.value=r,onInput:r=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(n,{field:"leave_type",header:"Leave Type"}),a(n,{field:"start_date",header:"Start Date"},{body:s(t=>[b(d(o(y)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"end_date",header:"End Date"},{body:s(t=>[b(d(o(y)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(n,{field:"total_leave_datetime",header:"Total Leave Days"}),a(n,{field:"leave_reason",header:"Leave Reason"},{body:s(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(u(),_("div",$a,[e("p",{onClick:i[8]||(i[8]=(...f)=>p.toggle&&p.toggle(...f)),class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(M,{ref:"overlayPanel",style:{height:"80px"}},{default:s(()=>[b(d(t.data.leave_reason),1)]),_:2},1536)])):(u(),_("div",Sa,d(t.data.leave_reason??""),1))]),_:1}),a(n,{field:"status",header:"Status"},{body:s(({data:t})=>[e("span",{class:T("customer-badge status-"+t.status)},d(t.status),3)]),filter:s(({filterModel:t,filterCallback:f})=>[a(V,{modelValue:t.value,"onUpdate:modelValue":r=>t.value=r,onChange:r=>f(),options:S.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:s(r=>[r.value?(u(),_("span",{key:0,class:T("customer-badge status-"+r.value)},d(r.value),3)):(u(),_("span",Ca,d(r.placeholder),1))]),option:s(r=>[e("span",{class:T("customer-badge status-"+r.option)},d(r.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(n,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:s(t=>[a(Y,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:f=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},ka={class:"w-full"},Ta={class:"p-2 bg-white rounded-lg shadow tw-card left-line",style:{"background-color":"white"}},Aa={class:"flex justify-between"},Ma={class:"bg-white divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},Va=e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Leave Balance")],-1),Ya={key:0,class:"nav-item text-muted",role:"presentation"},Ea=e("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Team Leave Balance",-1),Pa=[Ea],Ua={key:1,class:"nav-item text-muted",role:"presentation"},Ba=e("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#org_leave","aria-selected":"false",tabindex:"-1",role:"tab"}," Org Leave Balance",-1),Oa=[Ba],Na=e("div",{class:"flex items-center"},[e("div",{class:"mr-3"}),e("a",{href:"/attendance-leave-policydocument",id:"",class:"text-md font-medium border-1 border-orange-400 rounded-lg text-center bg-orange-400 text-white my-auto p-1.5 dark:text-white",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")],-1),ja={class:"tab-content py-2",id:"pills-tabContent"},Fa={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ia={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Ha={class:"tab-pane show",id:"org_leave",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Qa=e("h6",{class:"mb-4 modal-title fs-21"}," Leave Request",-1),qa={__name:"LeaveModule",setup(P){const l=E(),x=ge(),w=m(!1);return U(()=>{l.getEmployeeLeaveBalance()}),(v,$)=>{const S=g("Dialog");return u(),_(A,null,[o(l).canShowLoading?(u(),F(be,{key:0,class:"absolute z-50 bg-white"})):B("",!0),e("div",ka,[e("div",Ta,[e("div",Aa,[e("ul",Ma,[Va,o(x).current_user_role==2||o(x).current_user_role==4?(u(),_("li",Ya,Pa)):B("",!0),o(x).current_user_role==2?(u(),_("li",Ua,Oa)):B("",!0)]),Na])]),e("div",ja,[e("div",Fa,[a(Mt)]),e("div",Ia,[a(Ra)]),e("div",Ha,[a(oa)])])]),a(S,{visible:w.value,"onUpdate:visible":$[0]||($[0]=p=>w.value=p),style:{width:"80vw"},breakpoints:{"960px":"75vw","641px":"100vw"}},{header:s(()=>[Qa]),default:s(()=>[a(ye)]),_:1},8,["visible"])],64)}}},c=I(qa),za=le();c.use(H,{ripple:!0});c.use(ie);c.use(Q);c.use(ne);c.use(za);c.directive("tooltip",q);c.directive("badge",z);c.directive("ripple",K);c.directive("styleclass",W);c.directive("focustrap",G);c.component("Button",J);c.component("DataTable",se);c.component("Column",X);c.component("ColumnGroup",de);c.component("Row",ce);c.component("Toast",Z);c.component("ConfirmDialog",ee);c.component("Dropdown",te);c.component("InputText",ae);c.component("Dialog",oe);c.component("ProgressSpinner",re);c.component("Calendar",me);c.component("Checkbox",pe);c.component("Chips",ue);c.component("MultiSelect",_e);c.component("Textarea",ve);c.component("OverlayPanel",he);c.mount("#LeaveModule");
