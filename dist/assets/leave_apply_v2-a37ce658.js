import{u as R}from"./leave_apply_service-daddfee5.js";import{d as U}from"./pinia-a51931df.js";import{a as i}from"./index-362795f3.js";import"./dayjs.min-2f06af28.js";import{S as j}from"./Service-46bedac1.js";import{I as o,ak as q,o as _,c as y,d as e,F as E,f as C,aj as m,h as B,l as D,t as k,au as F,g as T}from"./toastservice.esm-bb367a00.js";const $=U("useLeaveModuleStore",()=>{j();const n=o(!0),g=o(),s=o(),f=o(),b=o(),p=o(),u=o(),r=o(),h=o(),x=o(),l=o(),w=o(),S=o(!1),L=o({}),H=a=>{S.value=!0,console.log(a),L.value={...a},L.emp_name=a.name};async function V(){n.value=!0;let a="/get-employee-leave-balance";await i.get(a).then(t=>{console.log(t.data),g.value=t.data,s.value=t.data["Avalied Leaves"]}).finally(()=>{n.value=!1})}async function A(a,t,c){let v=0;await i.get(window.location.origin+"/currentUserCode ").then(d=>{v=d.data}),await i.post("/attendance/getEmployeeLeaveDetails",{user_code:v,filter_month:a,filter_year:t,filter_leave_status:c}).then(d=>{f.value=d.data.data,console.log("getEmployeeLeaveHistory() : "+d.data)}).finally(()=>{n.value=!1})}async function I(a,t,c){let v=0;await i.get(window.location.origin+"/currentUserCode ").then(d=>{v=d.data}),i.post("/attendance/getTeamEmployeesLeaveDetails",{manager_code:v,filter_month:a,filter_year:t,filter_leave_status:c}).then(d=>{b.value=d.data.data,console.log("getTeamLeaveHistory() : "+d.data)}).finally(()=>{n.value=!1})}async function M(a,t,c){i.post("/attendance/getAllEmployeesLeaveDetails",{filter_month:a,filter_year:t,filter_leave_status:c}).then(v=>{p.value=v.data.data,console.log("getOrgLeaveHistory() : "+v.data.data)}).finally(()=>{n.value=!1})}async function N(a){i.post("/attendance/getLeaveInformation",{record_id:a}).then(t=>{w.value=t.data.data,console.log("getLeaveInformation() : "+t.data)}).finally(()=>{n.value=!1})}async function P(a,t){await i.post("/fetch-org-leaves-balance",{start_date:a,end_date:t}).then(c=>{u.value=c.data}).finally(()=>{n.value=!1})}async function O(a,t){console.log(a,t),i.post("/fetch-team-leave-balance",{start_date:a,end_date:t}).then(c=>{l.value=c.data}).finally(()=>{n.value=!1})}return{canShowLoading:n,canShowLeaveDetails:S,setLeaveDetails:L,getLeaveDetails:H,array_employeeLeaveHistory:f,array_teamLeaveHistory:b,array_orgLeaveHistory:p,array_employeeLeaveBalance:g,array_employeeAvailedLeaveBalance:s,array_orgLeaveBalance:u,selectedStartDate:r,selectedEndDate:h,canshowloadingsrceen:x,arrayTermLeaveBalance:l,getEmployeeLeaveHistory:A,getTeamLeaveHistory:I,getAllEmployeesLeaveHistory:M,getLeaveInformation:N,getEmployeeLeaveBalance:V,getOrgLeaveBalance:P,getTermLeaveBalance:O}}),z={class:"w-full"},W={class:"mx-auto card top-line"},G={class:"card-body"},J=e("div",{class:"flex justify-between"},[e("h3",{class:"mx-2 my-2 font-semibold"},"Leave Type"),e("a",{href:"/attendance-leave-policydocument",id:"",class:"text-md font-medium border-1 border-orange-400 rounded-lg text-center bg-orange-400 text-white my-auto p-2 dark:text-white",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")],-1),K={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-6 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-6 my-4",style:{display:"grid"}},Q=["onClick"],X={class:"card-body"},Y={class:"text-sm h-10 font-bold text-center text-black dark:text-white"},Z={class:"mx-auto"},ee={class:"text-2xl font-bold text-center dark:text-white"},ae=e("span",{class:"text-sm"},"days",-1),te={class:"mx-auto my-4 card top-line"},oe={class:"card-body row"},le={class:"col-6"},se=e("div",null,[e("h3",{class:"mx-2 my-4 font-semibold"},"Set Range")],-1),ne={class:"mx-1 my-2 mb-3 row"},re=F('<div class="mb-3 col-md-1 col-sm-1 col-lg-4 col-xl-4 col-xxl-4 mb-md-0"><div class="form-group"><div class="floating"><label for="start" class="text-lg font-bold text-center text-black dark:text-white">Start Date</label><br><input class="border-1 my-1 border-orange-300 rounded-lg" type="date" name="" id=""></div></div></div><div class="mb-3 col-md-1 col-sm-1 col-lg-6 col-xl-4 col-xxl-5 mb-md-0"><div class="form-group"><div class="floating" style="text-align:center;"><label for="total" class="text-lg font-bold text-center text-black dark:text-white">Total Days</label></div></div></div><div class="mb-3 col-md-1 col-sm-1 col-lg-3 col-xl-4 col-xxl-3 mb-md-0"><div class="form-group"><div class="floating"><label for="end" class="text-lg font-bold text-center text-black dark:text-white">End Day</label><br><input class="border-1 my-1 border-orange-300 rounded-lg" placeholder="select" type="date" name="" id=""></div></div></div>',3),ce={class:"my-4 row"},de={class:""},ie={class:"form-group"},ve=e("div",{class:"my-2"},[e("h3",{class:"mx-2 my-2 font-semibold"},"Notify To")],-1),me={class:"row"},ue={class:"mt-6 text-right"},_e=["disabled"],ye={class:"col-6"},Le={__name:"leave_apply_v2",setup(n){const g=$(),s=R();q(()=>{s.get_leave_types()});const f=o(!1),b=o(!1),p=u=>{switch(console.log(u),""){case"Sick Leave / Casual Leave":console.log("Sick"),f.value=!0;break;case"Earned Leave":console.log("Earned"),b.value=!0;break;case"Maternity Leave":console.log("Maternity"),active.value=!0;break;case"Paternity Leave":active.value=!0,console.log("Paternity");break;case"On Duty":active.value=!0,console.log("earn");break;case"Compensatory Off":active.value=!0,console.log("Compensatory"),active.value=!0;break;case"Permission":active.value=!0,console.log("Permission");break}};return(u,r)=>{const h=T("Textarea"),x=T("Calendar");return _(),y("div",z,[e("div",W,[e("div",G,[J,e("div",K,[(_(!0),y(E,null,C(m(g).array_employeeLeaveBalance,l=>(_(),y("button",{class:"card p-2 rounded-lg border-1 border-orange-300 cursor-pointer focus:bg-green-100",key:l,onClick:w=>p(l)},[e("div",X,[e("h6",Y,k(l.leave_type),1),e("div",Z,[e("h6",ee,[D(k(l.avalied_leaves)+" ",1),ae])])])],8,Q))),128))])])]),e("div",te,[e("div",oe,[e("div",le,[se,e("div",ne,[re,e("div",ce,[e("div",de,[e("div",ie,[B(h,{autoResize:!0,rows:"3",cols:"90",placeholder:"Enter the Reason",modelValue:m(s).leave_data.leave_reason,"onUpdate:modelValue":r[0]||(r[0]=l=>m(s).leave_data.leave_reason=l),class:"form-control"},null,8,["modelValue"])])])]),ve,e("div",me,[(_(!0),y(E,null,C(m(s).leave_types,l=>(_(),y("div",{class:"p-1 mx-3 my-4 border-2 rounded-lg shadow-md col-lg-3 left-line col-md-3 col-xl-2",key:l.id}))),128))])]),e("div",ue,[e("button",{type:"button",class:"btn btn-border-primary",onClick:r[1]||(r[1]=l=>u.visible=!1)},"Cancel"),e("button",{type:"button",id:"btn_request_leave",class:"mx-4 btn btn-primary",disabled:!(m(s).leave_data.selected_leave.length>0&&m(s).leave_data.leave_reason),onClick:r[2]||(r[2]=(...l)=>m(s).Submit&&m(s).Submit(...l))}," Request Leave",8,_e)])]),e("div",ye,[B(x,{inline:!0,showWeek:!0,style:{"min-width":"100%"}})])])]),D(" "+k(u.active),1)])}}};export{Le as _,$ as u};
