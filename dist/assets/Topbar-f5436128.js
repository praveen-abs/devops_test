import{I as d,aj as q,o as a,c as r,ai as n,d as t,t as c,k as f,l as j,a as m,b as U,w as h,F as y,f as L,T as b,E as Y,h as w,g as K,j as X,n as G}from"./toastservice.esm-918560db.js";import{a as _}from"./index-362795f3.js";import{u as H}from"./dashboard_service-d79e2407.js";import{S as J}from"./Service-ff2a1406.js";const Q="/build/assets/setting-7207a137.svg",B="/build/assets/notification-429a4257.svg",W="/build/assets/exit-9e7ca153.svg";const Z={class:"grid grid-cols-12 justify-between items-center"},tt={class:"text-black rounded focus:outline-none"},et=t("p",{class:"text-md text-gray-600 text-left"},"Your organization",-1),ot={key:0,class:"flex justify-between items-center gap-2 py-0.5"},nt=["src"],st={key:0,class:"text-sm whitespace-nowrap font-semibold px-2"},at={key:1,class:"font-semibold text-[12px] font-['Poppins'] text-center text-black my-auto"},rt={key:0,class:"absolute top-5 left-2 mt-14 w-11/12 bg-white shadow-lg rounded z-20"},it={class:"cursor-pointer hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},lt=["onClick"],ct={class:"cursor-pointer flex mx-2 align-center justify-between rounded-lg p-0.5"},ut={class:"mx-2 p-1 flex items-center justify-between rounded border gap-4",style:{height:"30px",width:"30px"}},dt=["src"],mt={class:"font-semibold whitespace-nowrap text-sm"},gt={key:0},_t=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-green-600 font-semibold"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"})],-1),ht=[_t],ft={class:"relative col-span-4"},vt={key:0,class:"z-40 absolute top-0 left-0 mt-16 w-3/4 bg-white shadow-lg rounded px-3 py-4 overflow-x-scroll"},pt=["onClick"],yt={class:"flex"},bt={class:"text-gray-900 font-bold text-sm"},wt={class:"text-gray-600 font-bold text-xs float-right"},xt={class:"text-xs text-gray-600"},kt={class:"flex col-span-4 justify-end"},Ct=t("img",{src:Q,alt:"",class:"h-6 w-6"},null,-1),St=[Ct],Lt=t("a",{href:"config-master",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Master config",-1),jt=t("a",{href:"clientOnboarding",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Client onboarding",-1),Nt=t("a",{href:"document_preview",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Document template",-1),$t=t("a",{href:"documents_settings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Document settings",-1),zt=t("a",{href:"attendance-leavesettings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Leave setting",-1),At=t("a",{href:"attendance_settings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Attendance setting",-1),Mt=t("a",{href:"investment_settings",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Investment setting",-1),Tt=t("a",{href:"showSAsettingsView",class:"p-2 block text-black rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"}," Loan and salary advance setting ",-1),Dt=[Lt,jt,Nt,$t,zt,At,Mt,Tt],Bt=t("img",{src:B,alt:"",class:"h-6 w-6"},null,-1),Et=[Bt],Vt={class:"bg-gray-100 rounded-full p-2 hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},Pt=t("img",{src:W,alt:"",class:"h-6 w-6"},null,-1),Rt=[Pt],Ft={class:"py-2 px-3 flex text-white focus:outline-none hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},It={class:"rounded-lg bg-blue-50 text-black font-semibold p-1.5 text-sm"},Ot={key:0,class:"text-sm whitespace-nowrap text-black font-semibold px-2 my-auto mx-2"},qt={key:1,class:"font-semibold text-[12px] mx-2 whitespace-nowrap font-['Poppins'] text-center text-black my-auto"},Ut={key:0,class:"absolute top-0 right-0 mt-14 w-48 bg-white shadow-lg rounded z-30"},Yt=t("a",{class:"p-2 rounded-lg cursor-pointer w-full hover:bg-gray-100 block transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",href:"pages-profile-new "},"View profile",-1),Kt=t("p",{class:"absolute left-0 mx-4 font-semibold fs-5"},[t("img",{src:B,alt:"",class:"h-6 w-6 animate-pulse"}),j(" Notification ")],-1),Xt={class:"flex justify-between"},Gt={class:"orange-median font-semibold fs-6"},Ht=["onClick"],Jt=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Qt=[Jt],Wt={class:"text-sm"},Zt={key:1,class:"w-full px-2 rounded-lg my-2 p-2 bg-red-50"},te=t("p",null,"No notifications to display",-1),ee=[te],oe={key:1,class:"relative z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ne=t("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity"},null,-1),se={class:"fixed inset-0 z-10 overflow-y-auto"},ae={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},re={class:"rounded-lg bg-white p-8 shadow-2xl absolute z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},ie=t("h2",{class:"text-lg font-bold"},"Are you sure you want to do that?",-1),le=t("p",{class:"mt-2 text-sm text-gray-500"}," Do you really wish to log out? Any unsaved modifications will not be retained. ",-1),ce={class:"mt-4 flex gap-2 justify-center"},fe={__name:"Topbar",setup(ue){const i=H(),l=J(),x=d(!1),v=d(""),k=d(),N=d(),$=d(!1),C=d(!1);d([{id:1,label:"Attendance",to:"attendance-timesheet"}]);const u=d(),E=()=>{_.get("/clients-fetchAll").then(e=>{N.value=e.data}).finally(()=>{})},z=()=>{_.get("session-sessionselectedclient").then(e=>{console.log(e.data),u.value=e.data})},V=e=>{let s="/session-update-globalClient";console.log({client_id:e}),_.post(s,{client_id:e}).finally(()=>{z(),A()})};function P(e,s){return s.filter(g=>g.emp_name.toLowerCase().includes(e.toLowerCase())||g.emp_code.toLowerCase().includes(e.toLowerCase()))}d();const A=()=>{_.get("/vmt-activeemployees-fetchall").then(e=>{k.value=e.data})},p=d(),M=()=>{_.get("/getNotifications").then(e=>{p.value=e.data.data})},R=e=>{_.post("/readNotification",{record_id:e}).finally(()=>{M()})};q(()=>{A(),E(),z(),setTimeout(()=>{$.value=!0},2e3),M()});async function F(){try{const e=document.head.querySelector('meta[name="csrf-token"]').content;await _.post("/logout",null,{headers:{"X-CSRF-TOKEN":e}}).finally(()=>{window.location.reload()})}catch(e){console.error("Logout error:",e)}}async function I(e){console.log(e),window.location.href="/pages-profile-new?uid="+e}const T=["bg-orange-50","bg-emerald-50","bg-yellow-50","bg-rose-50","bg-cyan-50","bg-amber-50","bg-red-50","bg-blue-50","bg-pink-50","bg-green-50","bg-fuchsia-50"],O=e=>(console.log(e),T[e%T.length]);return(e,s)=>{const D=K("Sidebar"),g=X("tooltip");return a(),r(y,null,[$.value?(a(),r("div",{key:0,class:"bg-white h-[60px]",onMouseenter:s[7]||(s[7]=o=>(n(i).canShowConfiguration=!1,n(i).canShowClients=!1))},[t("div",Z,[t("div",{class:"relative border-1 border-x-gray-300 py-2 mx-2 px-2 col-span-4",onClick:s[0]||(s[0]=o=>n(i).canShowClients=!n(i).canShowClients)},[t("button",tt,[et,u.value?(a(),r("div",ot,[t("img",{src:u.value.client_logo,alt:"",class:"h-6 w-12"},null,8,nt),u.value.client_fullname.length<=13?(a(),r("p",st,c(u.value.client_fullname),1)):f((a(),r("p",at,[j(c(u.value.client_fullname?u.value.client_fullname.substring(0,13)+"..":""),1)])),[[g,u.value.client_fullname]])])):m("",!0)]),n(l).current_user_role==2||n(l).current_user_role==4?(a(),U(b,{key:0,"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:h(()=>[n(i).canShowClients?(a(),r("div",rt,[(a(!0),r(y,null,L(N.value,o=>(a(),r("div",it,[t("div",{class:"justify-between flex p-2 hover:bg-gray-200 items-center",onClick:S=>V(o.id)},[t("div",ct,[t("div",ut,[t("img",{src:o.client_logo,alt:"",class:"mh-100 mw-100"},null,8,dt),t("p",mt,c(o.client_fullname)+" ("+c(o.abs_client_code)+")",1)])]),u.value&&u.value.id==o.id?(a(),r("div",gt,ht)):m("",!0)],8,lt)]))),256))])):m("",!0)]),_:1})):m("",!0)]),t("div",ft,[f(t("input",{type:"text",name:"",id:"",class:"border p-1.5 bg-gray-100 border-gray-300 rounded-lg w-full","onUpdate:modelValue":s[1]||(s[1]=o=>v.value=o),placeholder:"Search...."},null,512),[[Y,v.value]]),w(b,{"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:h(()=>[v.value?(a(),r("div",vt,[(a(!0),r(y,null,L(P(v.value,k.value?k.value:[]),o=>(a(),r("div",{class:"p-2 rounded-lg cursor-pointer w-full hover:bg-gray-100 transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",onClick:S=>I(o.enc_user_id)},[t("div",yt,[t("p",bt,[j(c(o.emp_name)+" ",1),t("span",wt,c(o.emp_code),1)])]),t("div",null,[t("p",xt,c(o.emp_designation),1)])],8,pt))),256))])):m("",!0)]),_:1})]),t("div",kt,[n(l).current_user_role==2||n(l).current_user_role==4?f((a(),r("button",{key:0,class:"rounded-full bg-gray-100 p-2 hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none mx-2",onClick:s[2]||(s[2]=o=>n(i).canShowConfiguration=!n(i).canShowConfiguration)},St)),[[g,"Settings"]]):m("",!0),w(b,{"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:h(()=>[n(i).canShowConfiguration?(a(),r("div",{key:0,onClick:s[3]||(s[3]=o=>n(i).canShowConfiguration=!n(i).canShowConfiguration),class:"absolute top-0 right-40 mt-16 w-60 bg-white shadow-lg rounded z-40 p-2"},Dt)):m("",!0)]),_:1}),f((a(),r("button",{class:"mx-2 animate-pulse bg-gray-100 rounded-full p-2 hover:bg-gray-200 transition duration-700 ease-in-out transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none",onClick:s[4]||(s[4]=o=>x.value=!0)},Et)),[[g,"Notification"]]),f((a(),r("button",Vt,Rt)),[[g,"Exit"]]),t("div",{class:"mx-3 relative",onClick:s[6]||(s[6]=o=>n(i).canShowCurrentEmployee=!n(i).canShowCurrentEmployee)},[t("button",Ft,[t("p",It,c(n(l).current_user_name?n(l).current_user_name.substring(0,2):""),1),n(l).current_user_name&&n(l).current_user_name.length<=10?(a(),r("p",Ot,c(n(l).current_user_name?n(l).current_user_name:""),1)):(a(),r("p",qt,c(n(l).current_user_name?n(l).current_user_name.substring(0,10)+"..":""),1))]),w(b,{"enter-active-class":"transition ease-out duration-200 transform","enter-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-100 transform","leave-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:h(()=>[n(i).canShowCurrentEmployee?(a(),r("div",Ut,[Yt,t("a",{onClick:s[5]||(s[5]=o=>C.value=!0),class:"p-2 rounded-lg cursor-pointer w-full hover:bg-gray-100 block transition transform hover:-translate-y-1 motion-reduce:transition-none motion-reduce:hover:transform-none"},"Log out")])):m("",!0)]),_:1})])])])],32)):m("",!0),w(D,{visible:x.value,"onUpdate:visible":s[8]||(s[8]=o=>x.value=o),position:"right",class:"w-full"},{header:h(()=>[Kt]),default:h(()=>[p.value&&p.value.length>0?(a(!0),r(y,{key:0},L(p.value,(o,S)=>(a(),r("div",{class:G(["w-full px-2 rounded-lg my-2 p-2",`${O(S)}`])},[t("div",Xt,[t("div",null,[t("p",Gt,c(o.notification_title),1)]),t("div",null,[t("button",{onClick:de=>R(o.id)},Qt,8,Ht)])]),t("p",Wt,c(o.notification_body),1)],2))),256)):(a(),r("div",Zt,ee))]),_:1},8,["visible"]),C.value?(a(),r("div",oe,[ne,t("div",se,[t("div",ae,[t("div",re,[ie,le,t("div",ce,[t("button",{onClick:F,type:"button",class:"rounded bg-green-50 px-4 py-2 text-sm font-medium text-green-600"}," Yes, I'm sure "),t("button",{onClick:s[9]||(s[9]=o=>C.value=!1),type:"button",class:"rounded bg-gray-50 px-4 py-2 text-sm font-medium text-gray-600"}," No, go back ")])])])])])):m("",!0)],64)}}};export{fe as _};
