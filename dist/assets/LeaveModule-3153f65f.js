/* empty css              *//* empty css                     *//* empty css                   */import{I as r,o as u,c as v,d as e,h as a,F as P,f as q,t as n,ai as o,ae as R,aj as H,g,w as d,l as w,n as U,p as K,au as W,b as G,a as Q,J,P as X,K as Z,u as ee,L as te,R as ae,S as oe,x as le,y as se,M as ne,Y as de,N as ie,V as re,X as ce,Q as me}from"./toastservice.esm-918560db.js";import{d as ue,c as ve}from"./pinia-3f44ac08.js";import"./blockui.esm-af7169c2.js";import{a as pe}from"./datatable.esm-b98720f6.js";import{D as _e,s as he}from"./dialogservice.esm-5dbb3ad8.js";import{C as ye}from"./confirmationservice.esm-87248870.js";import{s as ge}from"./progressspinner.esm-aabe5d1a.js";import{s as fe}from"./row.esm-6ebc942e.js";import{s as be}from"./calendar.esm-b58ab31f.js";import{s as xe}from"./checkbox.esm-6e395b34.js";import{s as we}from"./chips.esm-4c50bd29.js";import{s as Le}from"./multiselect.esm-2ac860b7.js";import{s as $e}from"./textarea.esm-c5c6ba2f.js";import{s as De}from"./overlaypanel.esm-2d6b380e.js";import{s as Se}from"./sidebar.esm-b9a7dd3f.js";import{S as z}from"./Service-ff2a1406.js";import"./moment-fbc5633a.js";import{a as B}from"./index-362795f3.js";import{d as b}from"./dayjs.min-2f06af28.js";import{_ as Ce}from"./LeaveApply-2b8b9c67.js";import{u as ke}from"./LeaveApply.vue_vue_type_style_index_0_lang-313a626c.js";import{L as Te}from"./LoadingSpinner-b9c763e9.js";import"./index.esm-98aa4722.js";/* empty css                                                                       */import"./_plugin-vue_export-helper-c27b6911.js";const F=ue("useLeaveModuleStore",()=>{z();const S=r(!0),l=r(),h=r(),x=r(),p=r(),C=r(),L=r(),c=r(),i=r(),T=r(),s=r(),A=r(),k=r(!1),E=r({}),N=$=>{k.value=!0,console.log($),E.value={...$},E.emp_name=$.name};async function j(){S.value=!0;let $="/get-employee-leave-balance";await B.get($).then(D=>{console.log(D.data),l.value=D.data,h.value=D.data["Avalied Leaves"]}).finally(()=>{S.value=!1})}async function t($,D,V){let O=0;await B.get(window.location.origin+"/currentUserCode ").then(Y=>{O=Y.data}),await B.post("/attendance/getEmployeeLeaveDetails",{user_code:O,filter_month:$,filter_year:D,filter_leave_status:V}).then(Y=>{x.value=Y.data.data,console.log("getEmployeeLeaveHistory() : "+Y.data)}).finally(()=>{S.value=!1})}async function f($,D,V){let O=0;await B.get(window.location.origin+"/currentUserCode ").then(Y=>{O=Y.data}),B.post("/attendance/getTeamEmployeesLeaveDetails",{manager_code:O,filter_month:$,filter_year:D,filter_leave_status:V}).then(Y=>{p.value=Y.data.data,console.log("getTeamLeaveHistory() : "+Y.data)}).finally(()=>{S.value=!1})}async function m($,D,V){B.post("/attendance/getAllEmployeesLeaveDetails",{filter_month:$,filter_year:D,filter_leave_status:V}).then(O=>{C.value=O.data.data,console.log("getOrgLeaveHistory() : "+O.data.data)}).finally(()=>{S.value=!1})}async function y($){B.post("/attendance/getLeaveInformation",{record_id:$}).then(D=>{A.value=D.data.data,console.log("getLeaveInformation() : "+D.data)}).finally(()=>{S.value=!1})}async function I($,D){await B.post("/fetch-org-leaves-balance",{start_date:$,end_date:D}).then(V=>{L.value=V.data}).finally(()=>{S.value=!1})}async function M($,D){console.log($,D),B.post("/fetch-team-leave-balance",{start_date:$,end_date:D}).then(V=>{s.value=V.data}).finally(()=>{S.value=!1})}return{canShowLoading:S,canShowLeaveDetails:k,setLeaveDetails:E,getLeaveDetails:N,array_employeeLeaveHistory:x,array_teamLeaveHistory:p,array_orgLeaveHistory:C,array_employeeLeaveBalance:l,array_employeeAvailedLeaveBalance:h,array_orgLeaveBalance:L,selectedStartDate:c,selectedEndDate:i,canshowloadingsrceen:T,arrayTermLeaveBalance:s,getEmployeeLeaveHistory:t,getTeamLeaveHistory:f,getAllEmployeesLeaveHistory:m,getLeaveInformation:y,getEmployeeLeaveBalance:j,getOrgLeaveBalance:I,getTermLeaveBalance:M}}),Re={class:"mb-3 card"},Ae={class:"card-body"},Me={class:"mb-2 row"},Ee=e("div",{class:"col-sm-6 col-xl-6 col-md-6 col-lg-6"},[e("h6",{class:"text-lg font-semibold text-gray-900 modal-title"},"Leave Balance")],-1),Ve={class:"col-6 justify-content-end d-flex"},Ye={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4",style:{display:"grid"}},Be={class:"text-lg font-semibold text-center"},Pe={class:"my-3 text-xl font-bold text-center"},Ue={key:0},Oe={key:1},Ne={class:"card"},je={class:"card-body"},Fe=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Leave Availed",-1),He={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-4 lg:grid-cols-4",style:{display:"grid"}},Ie={class:"text-center"},qe={class:"mb-2 text-base font-semibold"},Qe={class:"mb-0 text-base font-semibold"},ze={__name:"EmployeeLeaveBalance",setup(S){const l=F();return(h,x)=>(u(),v(P,null,[e("div",Re,[e("div",Ae,[e("div",Me,[Ee,e("div",Ve,[a(Ce)])]),e("div",Ye,[(u(!0),v(P,null,q(o(l).array_employeeLeaveBalance,p=>(u(),v("div",{key:p,class:"p-1 my-4 rounded-lg shadow-md tw-card dynamic-card hover:bg-slate-100"},[e("p",Be,n(p.leave_type),1),e("p",Pe,[p.leave_balance==""?(u(),v("span",Ue,"0")):(u(),v("span",Oe,n(p.leave_balance),1))])]))),128))])])]),e("div",Ne,[e("div",je,[Fe,e("div",He,[(u(!0),v(P,null,q(o(l).array_employeeLeaveBalance,p=>(u(),v("div",{class:"bg-indigo-100 border-l-4 border-indigo-300 p-3 rounded-lg tw-card dynamic-card",key:p},[e("div",Ie,[e("p",qe,n(p.leave_type),1),e("h6",Qe,n(p.avalied_leaves),1)])]))),128))])])])],64))}},Ke={class:"mt-3 row"},We={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Ge={class:"mb-0 card leave-history"},Je={class:"card-body"},Xe={class:"flex justify-between"},Ze=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"}," Leave history ")],-1),et={class:"d-flex justify-content-end mb-2"},tt=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),at={class:"table-responsive"},ot={key:0},lt={key:1},st={key:1},nt={class:"flex justify-center"},dt={class:"w-full"},it={class:"w-full"},rt={class:"border w-full rounded-lg"},ct={class:"p-3 pl-5 d-flex align-items-center border"},mt={class:"rounded-circle shadow-sm d-flex justify-content-center align-items-center bg-yellow-100",style:{width:"80px",height:"80px"}},ut={class:"text-3xl font-semibold"},vt={class:"ml-5"},pt={class:"text-lg font-semibold"},_t={class:"fs-6 text-neutral-400"},ht={class:"border w-full d-flex py-4 px-4"},yt={class:"mx-2 p-1 rounded-lg"},gt={class:"text-center py-1 px-2 text-light rounded-top fw-bold",style:{"background-color":"navy"}},ft={class:"text-center py-1 px-2 fs-5 fw-bold"},bt={class:"text-center py-1 px-2 fs-6 fw-bold"},xt={class:"py-3"},wt={class:"text-lg font-semibold text-primary-800"},Lt={class:"font-semibold text-xs"},$t={class:"border w-full py-4 px-4"},Dt=e("h1",{class:"text-lg font-semibold"},"Notified To:",-1),St={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"250px","max-width":"300px",display:"flex"}},Ct={class:"d-flex p-2 align-items-center"},kt={class:"rounded-circle bg-blue-100 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},Tt={class:"flex-column px-3"},Rt={class:"fs-6 fw-bold"},At={class:"py-2 text-neutral-400"},Mt={class:"border w-full py-4 px-4"},Et=e("h1",{class:"text-lg font-semibold"},"Approved by",-1),Vt={class:"card px-3 py-2 d-flex mt-3",style:{"min-width":"180px","max-width":"300px",display:"flex"}},Yt={class:"d-flex p-2 align-items-center"},Bt=e("div",{class:"rounded-circle bg-green-400 d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px"}},[e("i",{class:"pi pi-check text-light"})],-1),Pt={class:"flex-column px-3"},Ut={class:"fs-6 fw-bold"},Ot={class:"py-2 text-neutral-400"},Nt={class:"my-4 mx-3"},jt={__name:"EmployeeLeaveDetails",setup(S){const l=F(),h=r(!0),x=r(),p=r(),C=T=>{x.value.toggle(T)},L=r({global:{value:null,matchMode:R.CONTAINS},employee_name:{value:null,matchMode:R.STARTS_WITH,matchMode:R.EQUALS,matchMode:R.CONTAINS},status:{value:null,matchMode:R.EQUALS}}),c=r(["Pending","Approved","Rejected"]);H(async()=>{await l.getEmployeeLeaveHistory(b().month()+1,b().year(),["Approved","Pending","Rejected"]),h.value=!1});function i(){l.canShowLeaveDetails=!1}return(T,s)=>{const A=g("Calendar"),k=g("Column"),E=g("OverlayPanel"),N=g("Dropdown"),j=g("Button"),t=g("DataTable"),f=g("Textarea"),m=g("Dialog");return u(),v(P,null,[a(ze),e("div",Ke,[e("div",We,[e("div",Ge,[e("div",Je,[e("div",Xe,[Ze,e("div",et,[tt,a(A,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=y=>p.value=y),style:{"border-radius":"7px",height:"30px"},onDateSelect:s[1]||(s[1]=y=>(o(l).getEmployeeLeaveHistory(p.value.getMonth()+1,p.value.getFullYear(),c.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",at,[a(t,{value:o(l).array_employeeLeaveHistory,paginator:!0,rows:5,dataKey:"id",rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",filters:L.value,"onUpdate:filters":s[2]||(s[2]=y=>L.value=y),filterDisplay:"menu",globalFilterFields:["name","status"]},{empty:d(()=>[w(" No Employee data..... ")]),default:d(()=>[a(k,{field:"leave_type",header:"Leave Type",style:{"min-width":"14rem"}}),a(k,{field:"start_date",header:"Start Date",style:{"min-width":"8rem"}},{body:d(y=>[w(n(o(b)(y.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(k,{field:"end_date",header:"End Date",dataType:"date",style:{"min-width":"8rem"}},{body:d(y=>[w(n(o(b)(y.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(k,{field:"leave_reason",header:"Leave Reason",style:{"min-width":"12rem"}},{body:d(y=>[y.data.leave_reason&&y.data.leave_reason.length>70?(u(),v("div",ot,[e("p",{onClick:C,class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(E,{ref_key:"overlayPanel",ref:x,style:{height:"80px"}},{default:d(()=>[w(n(y.data.leave_reason),1)]),_:2},1536)])):(u(),v("div",lt,n(y.data.leave_reason??""),1))]),_:1}),a(k,{field:"reviewer_name",header:"Approver Name"}),a(k,{field:"reviewer_comments",header:"Approver Comments"}),a(k,{field:"status",header:"Status",icon:"pi pi-check"},{body:d(({data:y})=>[e("span",{class:U("customer-badge status-"+y.status)},n(y.status),3)]),filter:d(({filterModel:y,filterCallback:I})=>[a(N,{modelValue:y.value,"onUpdate:modelValue":M=>y.value=M,onChange:M=>I(),options:c.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(M=>[M.value?(u(),v("span",{key:0,class:U("customer-badge status-"+M.value)},n(M.value),3)):(u(),v("span",st,n(M.placeholder),1))]),option:d(M=>[e("span",{class:U("customer-badge status-"+M.option)},n(M.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(k,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(y=>[e("div",nt,[a(j,{type:"button",icon:"",class:"text-white Button py-2.5 mx-auto",label:"View",onClick:I=>o(l).getLeaveDetails(y.data),style:{height:"2em"}},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"])])])])])]),a(m,{header:"Header",visible:o(l).canShowLeaveDetails,"onUpdate:visible":s[3]||(s[3]=y=>o(l).canShowLeaveDetails=y),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw",borderTop:"5px solid #002f56"},modal:!0,closable:!0,closeOnEscape:!0},{header:d(()=>[e("div",dt,[e("h5",{style:K({color:"var(--color-blue)",borderLeft:"3px solid var(--light-orange-color",paddingLeft:"6px"}),class:"text-xl font-semibold"}," Leave Details Request",4)])]),default:d(()=>[e("div",it,[e("div",rt,[e("div",ct,[e("div",mt,[e("h1",ut,n(o(l).setLeaveDetails.user_short_name),1)]),e("div",vt,[e("h1",pt,n(o(l).setLeaveDetails.name),1),e("div",null,[e("p",_t,"Requested on "+n(o(l).setLeaveDetails.leaverequest_date),1)])])]),e("div",ht,[e("div",yt,[e("h1",gt,n(o(b)(o(l).setLeaveDetails.end_date).format("MMM")),1),e("h1",ft,n(o(b)(o(l).setLeaveDetails.end_date).format("DD")),1),e("h1",bt,n(o(b)(o(l).setLeaveDetails.end_date).format("dddd")),1)]),e("div",xt,[e("h1",wt,[w(n(o(l).setLeaveDetails.total_leave_datetime)+" Day of "+n(o(l).setLeaveDetails.leave_type)+" ",1),e("span",Lt," ("+n(o(l).setLeaveDetails.leave_reason)+") ",1)])])]),e("div",$t,[Dt,e("div",St,[e("div",Ct,[e("div",kt,n(o(l).setLeaveDetails.reviewer_short_name),1),e("div",Tt,[e("h1",Rt,n(o(l).setLeaveDetails.reviewer_name),1),e("h1",At,n(o(l).setLeaveDetails.reviewer_designation),1)])])])]),e("div",Mt,[Et,e("div",Vt,[e("div",Yt,[Bt,e("div",Pt,[e("h1",Ut,n(o(l).setLeaveDetails.reviewer_name),1),e("h1",Ot," on "+n(o(b)(o(l).setLeaveDetails.leaverequest_date).format("DD-MMM-YYYY hh: mm:ss A")),1)])])])]),e("div",Nt,[a(f,{name:"",id:"",cols:"70",rows:"3",autoResize:"",placeholder:"Add Comment"})])])]),e("div",{class:"text-end mx-4 my-4"},[e("button",{class:"btn btn-orange px-5",onClick:i},"Post")])]),_:1},8,["visible"])],64)}}},Ft={class:"card top-line"},Ht={class:"card-body"},It={class:"row"},qt={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-content-center"},Qt=e("h6",{class:"h-7 mt-3 text-lg font-semibold text-gray-900 modal-title"},"Org Leave Balance",-1),zt={class:"my-2 d-flex justify-content-between align-items-center"},Kt=e("div",null,null,-1),Wt={class:"d-flex"},Gt={class:""},Jt=e("label",{for:" ",class:"text-lg font-semibold"},"Start Date",-1),Xt={class:""},Zt=e("label",{for:" ",class:"text-lg font-semibold mx-2"},"End Date",-1),ea={class:"mt-3 row"},ta={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},aa={class:"mb-0 card leave-history"},oa={class:"card-body"},la={class:"flex justify-between"},sa=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Org Leave history")],-1),na={class:"d-flex justify-content-end"},da=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),ia={class:"table-responsive"},ra={key:0},ca={key:1},ma={key:1},ua={__name:"OrgLeaveDetails",setup(S){const l=F();r(),r(),r(!0);const h=r(),x=r([]),p=r();r();const C=r({employee_name:{value:null,matchMode:R.STARTS_WITH,matchMode:R.EQUALS,matchMode:R.CONTAINS},status:{value:null,matchMode:R.EQUALS}}),L=r(["Pending","Approved","Rejected"]);return H(async()=>{await l.getOrgLeaveBalance(),await l.getAllEmployeesLeaveHistory(b().month()+1,b().year(),["Approved","Pending","Rejected"]),console.log("Org Leave details : "+l.array_orgLeaveHistory)}),(c,i)=>{const T=g("Calendar"),s=g("Column"),A=g("DataTable"),k=g("InputText"),E=g("OverlayPanel"),N=g("Dropdown"),j=g("Button");return u(),v(P,null,[e("div",Ft,[e("div",Ht,[e("div",It,[e("div",qt,[Qt,e("div",zt,[Kt,e("div",Wt,[e("div",Gt,[Jt,a(T,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":i[0]||(i[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"pl-3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",Xt,[Zt,a(T,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":i[1]||(i[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",style:{height:"30px"},onClick:i[2]||(i[2]=t=>o(l).getOrgLeaveBalance(o(b)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(b)(o(l).selectedEndDate).format("YYYY-MM-DD")))},"submit")])])]),e("div",null,[a(A,{value:o(l).array_orgLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:c.onRowExpand,onRowCollapse:c.onRowCollapse,expandedRows:x.value,"onUpdate:expandedRows":i[4]||(i[4]=t=>x.value=t),selection:p.value,"onUpdate:selection":i[5]||(i[5]=t=>p.value=t),selectAll:c.selectAll,onSelectAllChange:c.onSelectAllChange,onRowSelect:c.onRowSelect,onRowUnselect:c.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:d(t=>[e("div",null,[a(A,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:p.value,"onUpdate:selection":i[3]||(i[3]=f=>p.value=f),selectAll:c.selectAll,onSelectAllChange:c.onSelectAllChange},{default:d(()=>[a(s,{field:"leave_type",header:"Leave Type"},{default:d(()=>[w(n(t.data.leave_type),1)]),_:2},1024),a(s,{field:"opening_balance",header:"Opening Balance"}),a(s,{field:"avalied",header:"Avalied"}),a(s,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:d(()=>[a(s,{expander:!0}),a(s,{field:"user_code",header:"Employee Id",sortable:""}),a(s,{field:"name",header:"Employee Name"}),a(s,{field:"location",header:"Location",sortable:!1}),a(s,{field:"department",header:"Department"}),a(s,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",ea,[e("div",ta,[e("div",aa,[e("div",oa,[e("div",la,[sa,e("div",na,[da,a(T,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:h.value,"onUpdate:modelValue":i[6]||(i[6]=t=>h.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:i[7]||(i[7]=t=>o(l).getAllEmployeesLeaveHistory(h.value.getMonth()+1,h.value.getFullYear(),L.value))},null,8,["modelValue"])])]),e("div",ia,[a(A,{value:o(l).array_orgLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:C.value,"onUpdate:filters":i[9]||(i[9]=t=>C.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:d(()=>[w(" No Employee data..... ")]),default:d(()=>[a(s,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:d(t=>[w(n(t.data.employee_name),1)]),filter:d(({filterModel:t,filterCallback:f})=>[a(k,{modelValue:t.value,"onUpdate:modelValue":m=>t.value=m,onInput:m=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(s,{field:"leave_type",header:"Leave Type"}),a(s,{field:"start_date",header:"Start Date"},{body:d(t=>[w(n(o(b)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"end_date",header:"End Date"},{body:d(t=>[w(n(o(b)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"total_leave_datetime",header:"Total Leave Days"}),a(s,{field:"leave_reason",header:"Leave Reason"},{body:d(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(u(),v("div",ra,[e("p",{onClick:i[8]||(i[8]=(...f)=>c.toggle&&c.toggle(...f)),class:"font-medium text-orange-400 underline cursor-pointer"}," More... "),a(E,{ref:"overlayPanel",style:{height:"80px"}},{default:d(()=>[w(n(t.data.leave_reason),1)]),_:2},1536)])):(u(),v("div",ca,n(t.data.leave_reason??""),1))]),_:1}),a(s,{field:"status",header:"Status"},{body:d(({data:t})=>[e("span",{class:U("customer-badge status-"+t.status)},n(t.status),3)]),filter:d(({filterModel:t,filterCallback:f})=>[a(N,{modelValue:t.value,"onUpdate:modelValue":m=>t.value=m,onChange:m=>f(),options:L.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(m=>[m.value?(u(),v("span",{key:0,class:U("customer-badge status-"+m.value)},n(m.value),3)):(u(),v("span",ma,n(m.placeholder),1))]),option:d(m=>[e("span",{class:U("customer-badge status-"+m.option)},n(m.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(s,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(t=>[a(j,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:f=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},va={class:"card top-line"},pa={class:"card-body"},_a={class:"row"},ha={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12 d-flex justify-content-between align-items-center"},ya=e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave Balance",-1),ga={class:"my-2 d-flex justify-content-between align-items-center"},fa=e("div",null,null,-1),ba={class:"d-flex"},xa={class:""},wa=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"Start Date",-1),La={class:""},$a=e("label",{for:" ",class:"font-semibold text-lg mx-2"},"End Date",-1),Da={class:"mt-3 row"},Sa={class:"col-sm-12 col-xl-12 col-md-12 col-lg-12"},Ca={class:"mb-0 card leave-history"},ka={class:"card-body"},Ta={class:"flex justify-between"},Ra=e("div",null,[e("h6",{class:"mb-4 text-lg font-semibold text-gray-900 modal-title"},"Team Leave history")],-1),Aa={class:"d-flex justify-content-end"},Ma=e("label",{for:"",class:"my-2 text-lg font-semibold"},"Select Month",-1),Ea={class:"table-responsive"},Va={key:0},Ya={key:1},Ba={key:1},Pa={__name:"TeamLeaveDetails",setup(S){const l=F();r(),r(),r(),r(),r(),r(!0),r();const h=r([]),x=r(),p=r(),C=r({employee_name:{value:null,matchMode:R.STARTS_WITH,matchMode:R.EQUALS,matchMode:R.CONTAINS},status:{value:null,matchMode:R.EQUALS}}),L=r(["Pending","Approved","Rejected"]);return H(async()=>{await l.getTermLeaveBalance(),await l.getTeamLeaveHistory(b().month()+1,b().year(),["Approved","Pending","Rejected"])}),(c,i)=>{const T=g("Calendar"),s=g("Column"),A=g("DataTable"),k=g("InputText"),E=g("OverlayPanel"),N=g("Dropdown"),j=g("Button");return u(),v(P,null,[e("div",va,[e("div",pa,[e("div",_a,[e("div",ha,[ya,e("div",ga,[fa,e("div",ba,[e("div",xa,[wa,a(T,{modelValue:o(l).selectedStartDate,"onUpdate:modelValue":i[0]||(i[0]=t=>o(l).selectedStartDate=t),dateFormat:"dd-mm-yy",class:"p-l3",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("div",La,[$a,a(T,{class:"mr-3",modelValue:o(l).selectedEndDate,"onUpdate:modelValue":i[1]||(i[1]=t=>o(l).selectedEndDate=t),dateFormat:"dd-mm-yy",style:{"border-radius":"7px",height:"30px",width:"100px"},maxDate:new Date},null,8,["modelValue","maxDate"])]),e("button",{class:"btn-orange py-1 px-4 rounded",onClick:i[2]||(i[2]=t=>(o(l).getTermLeaveBalance(o(b)(o(l).selectedStartDate).format("YYYY-MM-DD"),o(b)(o(l).selectedEndDate).format("YYYY-MM-DD")),o(l).canShowLoading=!0))},"submit")])])]),e("div",null,[a(A,{value:o(l).arrayTermLeaveBalance,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:c.onRowExpand,onRowCollapse:c.onRowCollapse,expandedRows:h.value,"onUpdate:expandedRows":i[4]||(i[4]=t=>h.value=t),selection:x.value,"onUpdate:selection":i[5]||(i[5]=t=>x.value=t),selectAll:c.selectAll,onSelectAllChange:c.onSelectAllChange,onRowSelect:c.onRowSelect,onRowUnselect:c.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}"},{expansion:d(t=>[e("div",null,[a(A,{value:t.data.leave_balance_details,responsiveLayout:"scroll",selection:x.value,"onUpdate:selection":i[3]||(i[3]=f=>x.value=f),selectAll:c.selectAll,onSelectAllChange:c.onSelectAllChange},{default:d(()=>[a(s,{field:"leave_type",header:"Leave Type"},{default:d(()=>[w(n(t.data.leave_type),1)]),_:2},1024),a(s,{field:"opening_balance",header:"Opening Balance"}),a(s,{field:"avalied",header:"Avalied"}),a(s,{field:"closing_balance",header:"Closing Balance"})]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:d(()=>[a(s,{style:{width:"1rem !important"},expander:!0}),a(s,{field:"user_code",header:"Employee Id",sortable:""}),a(s,{field:"name",header:"Employee Name"}),a(s,{field:"location",header:"Location",sortable:!1}),a(s,{field:"department",header:"Department"}),a(s,{field:"total_leave_balance",header:"Total Leave Balance"})]),_:1},8,["value","onRowExpand","onRowCollapse","expandedRows","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"])])])])]),e("div",Da,[e("div",Sa,[e("div",Ca,[e("div",ka,[e("div",Ta,[Ra,e("div",Aa,[Ma,a(T,{view:"month",dateFormat:"mm/yy",class:"mx-4",modelValue:p.value,"onUpdate:modelValue":i[6]||(i[6]=t=>p.value=t),style:{"border-radius":"7px",height:"30px"},onDateSelect:i[7]||(i[7]=t=>(o(l).getTeamLeaveHistory(p.value.getMonth()+1,p.value.getFullYear(),L.value),o(l).canShowLoading=!0))},null,8,["modelValue"])])]),e("div",Ea,[a(A,{value:o(l).array_teamLeaveHistory,responsiveLayout:"scroll",paginator:!0,rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",rows:5,filters:C.value,"onUpdate:filters":i[9]||(i[9]=t=>C.value=t),filterDisplay:"menu",globalFilterFields:["name"],style:{"white-space":"nowrap"}},{empty:d(()=>[w(" No Employee data..... ")]),default:d(()=>[a(s,{class:"font-bold",field:"employee_name",header:"Employee Name"},{body:d(t=>[w(n(t.data.employee_name),1)]),filter:d(({filterModel:t,filterCallback:f})=>[a(k,{modelValue:t.value,"onUpdate:modelValue":m=>t.value=m,onInput:m=>f(),placeholder:"Search",class:"p-column-filter",showClear:!0},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(s,{field:"leave_type",header:"Leave Type"}),a(s,{field:"start_date",header:"Start Date"},{body:d(t=>[w(n(o(b)(t.data.start_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"end_date",header:"End Date"},{body:d(t=>[w(n(o(b)(t.data.end_date).format("DD-MMM-YYYY")),1)]),_:1}),a(s,{field:"total_leave_datetime",header:"Total Leave Days"}),a(s,{field:"leave_reason",header:"Leave Reason"},{body:d(t=>[t.data.leave_reason&&t.data.leave_reason.length>70?(u(),v("div",Va,[e("p",{onClick:i[8]||(i[8]=(...f)=>c.toggle&&c.toggle(...f)),class:"font-medium text-orange-400 underline cursor-pointer"}," explore more... "),a(E,{ref:"overlayPanel",style:{height:"80px"}},{default:d(()=>[w(n(t.data.leave_reason),1)]),_:2},1536)])):(u(),v("div",Ya,n(t.data.leave_reason??""),1))]),_:1}),a(s,{field:"status",header:"Status"},{body:d(({data:t})=>[e("span",{class:U("customer-badge status-"+t.status)},n(t.status),3)]),filter:d(({filterModel:t,filterCallback:f})=>[a(N,{modelValue:t.value,"onUpdate:modelValue":m=>t.value=m,onChange:m=>f(),options:L.value,placeholder:"Select",class:"p-column-filter",showClear:!0},{value:d(m=>[m.value?(u(),v("span",{key:0,class:U("customer-badge status-"+m.value)},n(m.value),3)):(u(),v("span",Ba,n(m.placeholder),1))]),option:d(m=>[e("span",{class:U("customer-badge status-"+m.option)},n(m.option),3)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","options"])]),_:1}),a(s,{field:"",header:"Action",style:{"min-width":"15rem"}},{body:d(t=>[a(j,{type:"button",icon:"",class:"text-white Button py-2.5",label:"View",onClick:f=>o(l).getLeaveDetails(t.data),style:{height:"2em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])])])],64)}}},Ua={class:"w-full"},Oa={class:"mx-auto card top-line"},Na={class:"card-body"},ja=e("div",{class:"flex justify-between"},[e("h3",{class:"mx-2 my-2 font-semibold"},"Leave Type"),e("a",{href:"/attendance-leave-policydocument",id:"",class:"text-md font-medium border-1 border-orange-400 rounded-lg text-center bg-orange-400 text-white my-auto p-2 dark:text-white",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")],-1),Fa={class:"grid gap-4 md:grid-cols-3 sm:grid-cols-6 xxl:grid-cols-6 xl:grid-cols-6 lg:grid-cols-6 my-4",style:{display:"grid"}},Ha=["onClick"],Ia={class:"card-body"},qa={class:"text-sm h-10 font-bold text-center text-black dark:text-white"},Qa={class:"mx-auto"},za={class:"text-2xl font-bold text-center dark:text-white"},Ka=e("span",{class:"text-sm"},"days",-1),Wa={class:"mx-auto my-4 card top-line"},Ga={class:"card-body row"},Ja={class:"col-6"},Xa=e("div",null,[e("h3",{class:"mx-2 my-4 font-semibold"},"Set Range")],-1),Za={class:"mx-1 my-2 mb-3 row"},eo=W('<div class="mb-3 col-md-1 col-sm-1 col-lg-4 col-xl-4 col-xxl-4 mb-md-0"><div class="form-group"><div class="floating"><label for="start" class="text-lg font-bold text-center text-black dark:text-white">Start Date</label><br><input class="border-1 my-1 border-orange-300 rounded-lg" type="date" name="" id=""></div></div></div><div class="mb-3 col-md-1 col-sm-1 col-lg-6 col-xl-4 col-xxl-5 mb-md-0"><div class="form-group"><div class="floating" style="text-align:center;"><label for="total" class="text-lg font-bold text-center text-black dark:text-white">Total Days</label></div></div></div><div class="mb-3 col-md-1 col-sm-1 col-lg-3 col-xl-4 col-xxl-3 mb-md-0"><div class="form-group"><div class="floating"><label for="end" class="text-lg font-bold text-center text-black dark:text-white">End Day</label><br><input class="border-1 my-1 border-orange-300 rounded-lg" placeholder="select" type="date" name="" id=""></div></div></div>',3),to={class:"my-4 row"},ao={class:""},oo={class:"form-group"},lo=e("div",{class:"my-2"},[e("h3",{class:"mx-2 my-2 font-semibold"},"Notify To")],-1),so={class:"row"},no={class:"mt-6 text-right"},io=["disabled"],ro={class:"col-6"},co={__name:"leave_apply_v2",setup(S){const l=F(),h=ke();H(()=>{h.get_leave_types()});const x=r(!1),p=r(!1),C=L=>{switch(console.log(L),""){case"Sick Leave / Casual Leave":console.log("Sick"),x.value=!0;break;case"Earned Leave":console.log("Earned"),p.value=!0;break;case"Maternity Leave":console.log("Maternity"),active.value=!0;break;case"Paternity Leave":active.value=!0,console.log("Paternity");break;case"On Duty":active.value=!0,console.log("earn");break;case"Compensatory Off":active.value=!0,console.log("Compensatory"),active.value=!0;break;case"Permission":active.value=!0,console.log("Permission");break}};return(L,c)=>{const i=g("Textarea"),T=g("Calendar");return u(),v("div",Ua,[e("div",Oa,[e("div",Na,[ja,e("div",Fa,[(u(!0),v(P,null,q(o(l).array_employeeLeaveBalance,s=>(u(),v("button",{class:"card p-2 rounded-lg border-1 border-orange-300 cursor-pointer focus:bg-green-100",key:s,onClick:A=>C(s)},[e("div",Ia,[e("h6",qa,n(s.leave_type),1),e("div",Qa,[e("h6",za,[w(n(s.avalied_leaves)+" ",1),Ka])])])],8,Ha))),128))])])]),e("div",Wa,[e("div",Ga,[e("div",Ja,[Xa,e("div",Za,[eo,e("div",to,[e("div",ao,[e("div",oo,[a(i,{autoResize:!0,rows:"3",cols:"90",placeholder:"Enter the Reason",modelValue:o(h).leave_data.leave_reason,"onUpdate:modelValue":c[0]||(c[0]=s=>o(h).leave_data.leave_reason=s),class:"form-control"},null,8,["modelValue"])])])]),lo,e("div",so,[(u(!0),v(P,null,q(o(h).leave_types,s=>(u(),v("div",{class:"p-1 mx-3 my-4 border-2 rounded-lg shadow-md col-lg-3 left-line col-md-3 col-xl-2",key:s.id}))),128))])]),e("div",no,[e("button",{type:"button",class:"btn btn-border-primary",onClick:c[1]||(c[1]=s=>L.visible=!1)},"Cancel"),e("button",{type:"button",id:"btn_request_leave",class:"mx-4 btn btn-primary",disabled:!(o(h).leave_data.selected_leave.length>0&&o(h).leave_data.leave_reason),onClick:c[2]||(c[2]=(...s)=>o(h).Submit&&o(h).Submit(...s))}," Request Leave",8,io)])]),e("div",ro,[a(T,{inline:!0,showWeek:!0,style:{"min-width":"100%"}})])])]),w(" "+n(L.active),1)])}}},mo={class:"w-full"},uo={class:"p-2 bg-white rounded-lg shadow tw-card left-line",style:{"background-color":"white"}},vo={class:"flex justify-between"},po={class:"bg-white divide-x py-auto nav nav-pills divide-solid nav-tabs-dashed",id:"pills-tab",role:"tablist"},_o=e("li",{class:"nav-item text-muted",role:"presentation"},[e("a",{class:"pb-2 nav-link active","data-bs-toggle":"tab",href:"#leave_balance","aria-selected":"true",role:"tab"}," Leave Balance")],-1),ho={key:0,class:"nav-item text-muted",role:"presentation"},yo=e("a",{class:"pb-2 mx-4 nav-link","data-bs-toggle":"tab",href:"#team_leaveBalance","aria-selected":"false",tabindex:"-1",role:"tab"}," Team Leave Balance",-1),go=[yo],fo={key:1,class:"nav-item text-muted",role:"presentation"},bo=e("a",{class:"pb-2 nav-link","data-bs-toggle":"tab",href:"#org_leave","aria-selected":"false",tabindex:"-1",role:"tab"}," Org Leave Balance",-1),xo=[bo],wo=e("div",{class:"flex items-center"},[e("div",{class:"mr-3"}),e("a",{href:"/attendance-leave-policydocument",id:"",class:"text-md font-medium border-1 border-orange-400 rounded-lg text-center bg-orange-400 text-white my-auto p-1.5 dark:text-white",role:"button","aria-expanded":"false"}," Leave Policy Explanation ")],-1),Lo={class:"tab-content py-2",id:"pills-tabContent"},$o={class:"tab-pane show fade active",id:"leave_balance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Do={class:"tab-pane fade show",id:"team_leaveBalance",role:"tabpanel","aria-labelledby":"pills-profile-tab"},So={class:"tab-pane show",id:"org_leave",role:"tabpanel","aria-labelledby":"pills-profile-tab"},Co=e("h6",{class:"mb-4 modal-title fs-21"}," Leave Request",-1),ko={__name:"LeaveModule",setup(S){const l=F(),h=z(),x=r(!1);return H(()=>{l.getEmployeeLeaveBalance()}),(p,C)=>{const L=g("Dialog");return u(),v(P,null,[o(l).canShowLoading?(u(),G(Te,{key:0,class:"absolute z-50 bg-white"})):Q("",!0),e("div",mo,[e("div",uo,[e("div",vo,[e("ul",po,[_o,o(h).current_user_role==2||o(h).current_user_role==4?(u(),v("li",ho,go)):Q("",!0),o(h).current_user_role==2?(u(),v("li",fo,xo)):Q("",!0)]),wo])]),e("div",Lo,[e("div",$o,[a(jt)]),e("div",Do,[a(Pa)]),e("div",So,[a(ua)])])]),a(L,{visible:x.value,"onUpdate:visible":C[0]||(C[0]=c=>x.value=c),style:{width:"80vw"},breakpoints:{"960px":"75vw","641px":"100vw"}},{header:d(()=>[Co]),default:d(()=>[a(co)]),_:1},8,["visible"])],64)}}},_=J(ko),To=ve();_.use(X,{ripple:!0});_.use(ye);_.use(Z);_.use(_e);_.use(To);_.directive("tooltip",ee);_.directive("badge",te);_.directive("ripple",ae);_.directive("styleclass",oe);_.directive("focustrap",le);_.component("Button",se);_.component("DataTable",pe);_.component("Column",ne);_.component("ColumnGroup",he);_.component("Row",fe);_.component("Toast",de);_.component("ConfirmDialog",ie);_.component("Dropdown",re);_.component("InputText",ce);_.component("Dialog",me);_.component("ProgressSpinner",ge);_.component("Calendar",be);_.component("Checkbox",xe);_.component("Chips",we);_.component("MultiSelect",Le);_.component("Textarea",$e);_.component("OverlayPanel",De);_.component("Sidebar",Se);_.mount("#LeaveModule");
